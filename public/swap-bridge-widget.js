var TMe=Object.defineProperty;var NMe=(ve,Ct,an)=>Ct in ve?TMe(ve,Ct,{enumerable:!0,configurable:!0,writable:!0,value:an}):ve[Ct]=an;var Vc=(ve,Ct,an)=>(NMe(ve,typeof Ct!="symbol"?Ct+"":Ct,an),an),rA=(ve,Ct,an)=>{if(!Ct.has(ve))throw TypeError("Cannot "+an)};var V=(ve,Ct,an)=>(rA(ve,Ct,"read from private field"),an?an.call(ve):Ct.get(ve)),Me=(ve,Ct,an)=>{if(Ct.has(ve))throw TypeError("Cannot add the same private member more than once");Ct instanceof WeakSet?Ct.add(ve):Ct.set(ve,an)},Ie=(ve,Ct,an,cn)=>(rA(ve,Ct,"write to private field"),cn?cn.call(ve,an):Ct.set(ve,an),an);var l3=(ve,Ct,an,cn)=>({set _(kr){Ie(ve,Ct,kr,an)},get _(){return V(ve,Ct,cn)}}),Xe=(ve,Ct,an)=>(rA(ve,Ct,"access private method"),an);(function(ve,Ct){typeof exports=="object"&&typeof module<"u"?module.exports=Ct(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],Ct):(ve=typeof globalThis<"u"?globalThis:ve||self,ve.SwapBridgeWidget=Ct(ve.React,ve.ReactDOM))})(this,function(ve,Ct){var wu,eA,nV,Ih,bu,j0,rV,U0,vu,F0,iV,$h,sV,Ph,z0,Xs,Oh,dr,Ly,Th,Mo,Gc,oV,Mi,dt,jy,ii,Nh,q0,qc,Eu,Uy,H0,W0,kh,Rh,Cu,K0,Mh,tw,Fy,cA,zy,lA,qy,uA,Hy,dA,Wy,hA,Ky,fA,Vy,pA,a3,gV,aV,Gy,Ta,si,Bh,Na,Iu,cV,Hc,Bo,Zy,lV,Wc,_u,Bi,Kc,V0,u3,Yy,gA,uV,ka,dV,pn,Su,xu,G0,Z0,Au,Y0,J0,hV,fV;"use strict";function an(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}const cn=an(ve);var kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $u(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yA(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var wA,bA=Ct;wA=bA.createRoot,bA.hydrateRoot;var vA={exports:{}},nw={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PV=ve,OV=Symbol.for("react.element"),TV=Symbol.for("react.fragment"),NV=Object.prototype.hasOwnProperty,kV=PV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RV={key:!0,ref:!0,__self:!0,__source:!0};function EA(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)NV.call(e,r)&&!RV.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:OV,type:t,key:s,ref:o,props:i,_owner:kV.current}}nw.Fragment=TV,nw.jsx=EA,nw.jsxs=EA,vA.exports=nw;var ee=vA.exports;const rw=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],f3=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],CA=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],_A=[...CA,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],MV=[...CA,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],SA=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],xA=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],AA=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],IA=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function eo(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new GV(t.type);return`${t.name}(${iw(t.inputs,{includeName:e})})`}function iw(t,{includeName:e=!1}={}){return t?t.map(n=>BV(n,{includeName:e})).join(e?", ":","):""}function BV(t,{includeName:e}){return t.type.startsWith("tuple")?`(${iw(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function to(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function ln(t){return to(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const $A="2.39.0";let Q0={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${$A}`},ce=class iA extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof iA?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),i=(()=>n.cause instanceof iA&&n.cause.docsPath||n.docsPath)(),s=(a=Q0.getDocsUrl)==null?void 0:a.call(Q0,{...n,docsPath:i}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],...Q0.version?[`Version: ${Q0.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=$A}walk(e){return PA(this,e)}};function PA(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?PA(t.cause,e):e?null:t}class DV extends ce{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class OA extends ce{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class TA extends ce{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${iw(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class X0 extends ce{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class LV extends ce{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class jV extends ce{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${ln(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class UV extends ce{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class FV extends ce{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class NA extends ce{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class kA extends ce{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class zV extends ce{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class RA extends ce{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class MA extends ce{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Dh extends ce{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class BA extends ce{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class qV extends ce{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class HV extends ce{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${eo(e.abiItem)}\`, and`,`\`${n.type}\` in \`${eo(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let WV=class extends ce{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class eg extends ce{constructor({abiItem:e,data:n,params:r,size:i}){super([`Data size of ${i} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${iw(r,{includeName:!0})})`,`Data:   ${n} (${i} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=i}}class sw extends ce{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${eo(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class KV extends ce{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class VV extends ce{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let DA=class extends ce{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class GV extends ce{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}let Zc=class extends ce{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},LA=class extends ce{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},jA=class extends ce{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class UA extends ce{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Lh(t,{dir:e,size:n=32}={}){return typeof t=="string"?Yc(t,{dir:e,size:n}):ZV(t,{dir:e,size:n})}function Yc(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new jA({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function ZV(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new jA({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const s=e==="right";r[s?i:n-i-1]=t[s?i:t.length-i-1]}return r}let FA=class extends ce{constructor({max:e,min:n,signed:r,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},YV=class extends ce{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};class JV extends ce{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let QV=class extends ce{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Do(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let i=0;i<n.length-1&&n[e==="left"?i:n.length-i-1].toString()==="0";i++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function vs(t,{size:e}){if(ln(t)>e)throw new QV({givenSize:ln(t),maxSize:e})}function Di(t,e={}){const{signed:n}=e;e.size&&vs(t,{size:e.size});const r=BigInt(t);if(!n)return r;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return r<=s?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function XV(t,e={}){let n=t;if(e.size&&(vs(n,{size:e.size}),n=Do(n)),Do(n)==="0x00")return!1;if(Do(n)==="0x01")return!0;throw new JV(n)}function Es(t,e={}){return Number(Di(t,e))}function eG(t,e={}){let n=no(t);return e.size&&(vs(n,{size:e.size}),n=Do(n,{dir:"right"})),new TextDecoder().decode(n)}const tG=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Cs(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ne(t,e):typeof t=="string"?jh(t,e):typeof t=="boolean"?zA(t,e):Nn(t,e)}function zA(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(vs(n,{size:e.size}),Lh(n,{size:e.size})):n}function Nn(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=tG[t[i]];const r=`0x${n}`;return typeof e.size=="number"?(vs(r,{size:e.size}),Lh(r,{dir:"right",size:e.size})):r}function Ne(t,e={}){const{signed:n,size:r}=e,i=BigInt(t);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new FA({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?Lh(a,{size:r}):a}const nG=new TextEncoder;function jh(t,e={}){const n=nG.encode(t);return Nn(n,e)}const rG=new TextEncoder;function Uh(t,e={}){return typeof t=="number"||typeof t=="bigint"?sG(t,e):typeof t=="boolean"?iG(t,e):to(t)?no(t,e):Pu(t,e)}function iG(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(vs(n,{size:e.size}),Lh(n,{size:e.size})):n}const Ra={zero:48,nine:57,A:65,F:70,a:97,f:102};function qA(t){if(t>=Ra.zero&&t<=Ra.nine)return t-Ra.zero;if(t>=Ra.A&&t<=Ra.F)return t-(Ra.A-10);if(t>=Ra.a&&t<=Ra.f)return t-(Ra.a-10)}function no(t,e={}){let n=t;e.size&&(vs(n,{size:e.size}),n=Lh(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=qA(r.charCodeAt(a++)),l=qA(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ce(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);s[o]=c*16+l}return s}function sG(t,e){const n=Ne(t,e);return no(n)}function Pu(t,e={}){const n=rG.encode(t);return typeof e.size=="number"?(vs(n,{size:e.size}),Lh(n,{dir:"right",size:e.size})):n}const ow=BigInt(2**32-1),HA=BigInt(32);function oG(t,e=!1){return e?{h:Number(t&ow),l:Number(t>>HA&ow)}:{h:Number(t>>HA&ow)|0,l:Number(t&ow)|0}}function aG(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=oG(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const cG=(t,e,n)=>t<<n|e>>>32-n,lG=(t,e,n)=>e<<n|t>>>32-n,uG=(t,e,n)=>e<<n-32|t>>>64-n,dG=(t,e,n)=>t<<n-32|e>>>64-n,Fh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function hG(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function tg(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ou(t,...e){if(!hG(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function fG(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");tg(t.outputLen),tg(t.blockLen)}function zh(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function WA(t,e){Ou(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function pG(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function qh(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function p3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Lo(t,e){return t<<32-e|t>>>e}const gG=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function mG(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function yG(t){for(let e=0;e<t.length;e++)t[e]=mG(t[e]);return t}const KA=gG?t=>t:yG;function wG(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function aw(t){return typeof t=="string"&&(t=wG(t)),Ou(t),t}function bG(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Ou(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}let g3=class{};function VA(t){const e=r=>t().update(aw(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function vG(t=32){if(Fh&&typeof Fh.getRandomValues=="function")return Fh.getRandomValues(new Uint8Array(t));if(Fh&&typeof Fh.randomBytes=="function")return Uint8Array.from(Fh.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const EG=BigInt(0),ng=BigInt(1),CG=BigInt(2),_G=BigInt(7),SG=BigInt(256),xG=BigInt(113),GA=[],ZA=[],YA=[];for(let t=0,e=ng,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],GA.push(2*(5*r+n)),ZA.push((t+1)*(t+2)/2%64);let i=EG;for(let s=0;s<7;s++)e=(e<<ng^(e>>_G)*xG)%SG,e&CG&&(i^=ng<<(ng<<BigInt(s))-ng);YA.push(i)}const JA=aG(YA,!0),AG=JA[0],IG=JA[1],QA=(t,e,n)=>n>32?uG(t,e,n):cG(t,e,n),XA=(t,e,n)=>n>32?dG(t,e,n):lG(t,e,n);function $G(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=QA(l,u,1)^n[a],h=XA(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=ZA[o],c=QA(i,s,a),l=XA(i,s,a),u=GA[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=AG[r],t[1]^=IG[r]}qh(n)}let PG=class pV extends g3{constructor(e,n,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,tg(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=pG(this.state)}clone(){return this._cloneInto()}keccak(){KA(this.state32),$G(this.state32,this.rounds),KA(this.state32),this.posOut=0,this.pos=0}update(e){zh(this),e=aw(e),Ou(e);const{blockLen:n,state:r}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){zh(this,!1),Ou(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return tg(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(WA(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,qh(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new pV(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const OG=(t,e,n)=>VA(()=>new PG(e,t,n)),eI=(()=>OG(1,136,256/8))();function hr(t,e){const n=e||"hex",r=eI(to(t,{strict:!1})?Uh(t):t);return n==="bytes"?r:Cs(r)}let rg=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const TG=/^0x[a-fA-F0-9]{40}$/,m3=new rg(8192);function _s(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(m3.has(r))return m3.get(r);const i=(()=>TG.test(t)?t.toLowerCase()===t?!0:n?ig(t)===t:!0:!1)();return m3.set(r,i),i}const y3=new rg(8192);function ig(t,e){if(y3.has(`${t}.${e}`))return y3.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=hr(Pu(n),"bytes"),i=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(r[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return y3.set(`${t}.${e}`,s),s}function ai(t,e){if(!_s(t,{strict:!1}))throw new Zc({address:t});return ig(t,e)}let tI=class extends ce{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}},nI=class extends ce{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}},NG=class extends ce{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}};const kG={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new NG({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new nI({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new tI({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new tI({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function w3(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(kG);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function Hh(t,e,n,{strict:r}={}){return to(t,{strict:!1})?b3(t,e,n,{strict:r}):sI(t,e,n,{strict:r})}function rI(t,e){if(typeof e=="number"&&e>0&&e>ln(t)-1)throw new LA({offset:e,position:"start",size:ln(t)})}function iI(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ln(t)!==n-e)throw new LA({offset:n,position:"end",size:ln(t)})}function sI(t,e,n,{strict:r}={}){rI(t,e);const i=t.slice(e,n);return r&&iI(i,e,n),i}function b3(t,e,n,{strict:r}={}){rI(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&iI(i,e,n),i}function RG(t,e={}){typeof e.size<"u"&&vs(t,{size:e.size});const n=Nn(t,e);return Di(n,e)}function MG(t,e={}){let n=t;if(typeof e.size<"u"&&(vs(n,{size:e.size}),n=Do(n)),n.length>1||n[0]>1)throw new YV(n);return!!n[0]}function Ma(t,e={}){typeof e.size<"u"&&vs(t,{size:e.size});const n=Nn(t,e);return Es(n,e)}function BG(t,e={}){let n=t;return typeof e.size<"u"&&(vs(n,{size:e.size}),n=Do(n,{dir:"right"})),new TextDecoder().decode(n)}function Li(t){return typeof t[0]=="string"?Wh(t):DG(t)}function DG(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function Wh(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}const LG=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,oI=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Jc(t,e){if(t.length!==e.length)throw new UV({expectedLength:t.length,givenLength:e.length});const n=jG({params:t,values:e}),r=E3(n);return r.length===0?"0x":r}function jG({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(v3({param:t[r],value:e[r]}));return n}function v3({param:t,value:e}){const n=C3(t.type);if(n){const[r,i]=n;return FG(e,{length:r,param:{...t,type:i}})}if(t.type==="tuple")return KG(e,{param:t});if(t.type==="address")return UG(e);if(t.type==="bool")return qG(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,i="256"]=oI.exec(t.type)??[];return HG(e,{signed:r,size:Number(i)})}if(t.type.startsWith("bytes"))return zG(e,{param:t});if(t.type==="string")return WG(e);throw new KV(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function E3(t){let e=0;for(let s=0;s<t.length;s++){const{dynamic:o,encoded:a}=t[s];o?e+=32:e+=ln(a)}const n=[],r=[];let i=0;for(let s=0;s<t.length;s++){const{dynamic:o,encoded:a}=t[s];o?(n.push(Ne(e+i,{size:32})),r.push(a),i+=ln(a)):n.push(a)}return Li([...n,...r])}function UG(t){if(!_s(t))throw new Zc({address:t});return{dynamic:!1,encoded:Yc(t.toLowerCase())}}function FG(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new DA(t);if(!r&&t.length!==e)throw new LV({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let i=!1;const s=[];for(let o=0;o<t.length;o++){const a=v3({param:n,value:t[o]});a.dynamic&&(i=!0),s.push(a)}if(r||i){const o=E3(s);if(r){const a=Ne(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?Li([a,o]):a}}if(i)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Li(s.map(({encoded:o})=>o))}}function zG(t,{param:e}){const[,n]=e.type.split("bytes"),r=ln(t);if(!n){let i=t;return r%32!==0&&(i=Yc(i,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Li([Yc(Ne(r,{size:32})),i])}}if(r!==Number.parseInt(n,10))throw new jV({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:Yc(t,{dir:"right"})}}function qG(t){if(typeof t!="boolean")throw new ce(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Yc(zA(t))}}function HG(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,i=e?-r-1n:0n;if(t>r||t<i)throw new FA({max:r.toString(),min:i.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ne(t,{size:32,signed:e})}}function WG(t){const e=jh(t),n=Math.ceil(ln(e)/32),r=[];for(let i=0;i<n;i++)r.push(Yc(Hh(e,i*32,(i+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Li([Yc(Ne(ln(e),{size:32})),...r])}}function KG(t,{param:e}){let n=!1;const r=[];for(let i=0;i<e.components.length;i++){const s=e.components[i],o=Array.isArray(t)?i:s.name,a=v3({param:s,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?E3(r):Li(r.map(({encoded:i})=>i))}}function C3(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function sg(t,e){const n=typeof e=="string"?no(e):e,r=w3(n);if(ln(n)===0&&t.length>0)throw new X0;if(ln(e)&&ln(e)<32)throw new TA({data:typeof e=="string"?e:Nn(e),params:t,size:ln(e)});let i=0;const s=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(i);const[c,l]=Kh(r,a,{staticPosition:0});i+=l,s.push(c)}return s}function Kh(t,e,{staticPosition:n}){const r=C3(e.type);if(r){const[i,s]=r;return GG(t,{...e,type:s},{length:i,staticPosition:n})}if(e.type==="tuple")return QG(t,e,{staticPosition:n});if(e.type==="address")return VG(t);if(e.type==="bool")return ZG(t);if(e.type.startsWith("bytes"))return YG(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return JG(t,e);if(e.type==="string")return XG(t,{staticPosition:n});throw new VV(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const aI=32,_3=32;function VG(t){const e=t.readBytes(32);return[ig(Nn(sI(e,-20))),32]}function GG(t,e,{length:n,staticPosition:r}){if(!n){const o=Ma(t.readBytes(_3)),a=r+o,c=a+aI;t.setPosition(a);const l=Ma(t.readBytes(aI)),u=og(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[g,p]=Kh(t,e,{staticPosition:c});d+=p,h.push(g)}return t.setPosition(r+32),[h,32]}if(og(e)){const o=Ma(t.readBytes(_3)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Kh(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let i=0;const s=[];for(let o=0;o<n;++o){const[a,c]=Kh(t,e,{staticPosition:r+i});i+=c,s.push(a)}return[s,i]}function ZG(t){return[MG(t.readBytes(32),{size:32}),32]}function YG(t,e,{staticPosition:n}){const[r,i]=e.type.split("bytes");if(!i){const o=Ma(t.readBytes(32));t.setPosition(n+o);const a=Ma(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Nn(c),32]}return[Nn(t.readBytes(Number.parseInt(i,10),32)),32]}function JG(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),i=t.readBytes(32);return[r>48?RG(i,{signed:n}):Ma(i,{signed:n}),32]}function QG(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),i=r?[]:{};let s=0;if(og(e)){const o=Ma(t.readBytes(_3)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+s);const[u,d]=Kh(t,l,{staticPosition:a});s+=d,i[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[i,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Kh(t,a,{staticPosition:n});i[r?o:a==null?void 0:a.name]=c,s+=l}return[i,s]}function XG(t,{staticPosition:e}){const n=Ma(t.readBytes(32)),r=e+n;t.setPosition(r);const i=Ma(t.readBytes(32));if(i===0)return t.setPosition(e+32),["",32];const s=t.readBytes(i,32),o=BG(Do(s));return t.setPosition(e+32),[o,32]}function og(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(og);const n=C3(t.type);return!!(n&&og({...t,type:n[1]}))}const eZ=t=>hr(Uh(t));function tZ(t){return eZ(t)}const nZ="1.1.0";let ci=class sA extends Error{constructor(e,n={}){var o;const r=n.cause instanceof sA?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,i=n.cause instanceof sA&&n.cause.docsPath||n.docsPath,s=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${nZ}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Ba(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const cI=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,lI=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,uI=/^\(.+?\).*?$/,dI=/^tuple(?<array>(\[(\d*)\])*)$/;function S3(t){let e=t.type;if(dI.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let i=0;i<n;i++){const s=t.components[i];e+=S3(s),i<n-1&&(e+=", ")}const r=Ba(dI,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,S3({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Vh(t){let e="";const n=t.length;for(let r=0;r<n;r++){const i=t[r];e+=S3(i),r!==n-1&&(e+=", ")}return e}function cw(t){var e;return t.type==="function"?`function ${t.name}(${Vh(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Vh(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Vh(t.inputs)})`:t.type==="error"?`error ${t.name}(${Vh(t.inputs)})`:t.type==="constructor"?`constructor(${Vh(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const hI=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function rZ(t){return hI.test(t)}function iZ(t){return Ba(hI,t)}const fI=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function sZ(t){return fI.test(t)}function oZ(t){return Ba(fI,t)}const pI=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function aZ(t){return pI.test(t)}function cZ(t){return Ba(pI,t)}const gI=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function lw(t){return gI.test(t)}function lZ(t){return Ba(gI,t)}const mI=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function uZ(t){return mI.test(t)}function dZ(t){return Ba(mI,t)}const yI=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function hZ(t){return yI.test(t)}function fZ(t){return Ba(yI,t)}const pZ=/^receive\(\) external payable$/;function gZ(t){return pZ.test(t)}const wI=new Set(["memory","indexed","storage","calldata"]),mZ=new Set(["indexed"]),x3=new Set(["calldata","memory","storage"]);class yZ extends ci{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class wZ extends ci{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class bZ extends ci{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class vZ extends ci{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class EZ extends ci{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class CZ extends ci{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class _Z extends ci{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class SZ extends ci{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class xZ extends ci{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Gh extends ci{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class AZ extends ci{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class IZ extends ci{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class $Z extends ci{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class PZ extends ci{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function OZ(t,e,n){let r="";if(n)for(const i of Object.entries(n)){if(!i)continue;let s="";for(const o of i[1])s+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${i[0]}{${s}})`}return e?`${e}:${t}${r}`:t}const A3=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function I3(t,e={}){if(aZ(t))return TZ(t,e);if(sZ(t))return NZ(t,e);if(rZ(t))return kZ(t,e);if(uZ(t))return RZ(t,e);if(hZ(t))return MZ(t);if(gZ(t))return{type:"receive",stateMutability:"payable"};throw new AZ({signature:t})}function TZ(t,e={}){const n=cZ(t);if(!n)throw new Gh({signature:t,type:"function"});const r=ji(n.parameters),i=[],s=r.length;for(let a=0;a<s;a++)i.push(Da(r[a],{modifiers:x3,structs:e,type:"function"}));const o=[];if(n.returns){const a=ji(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Da(a[l],{modifiers:x3,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:i,outputs:o}}function NZ(t,e={}){const n=oZ(t);if(!n)throw new Gh({signature:t,type:"event"});const r=ji(n.parameters),i=[],s=r.length;for(let o=0;o<s;o++)i.push(Da(r[o],{modifiers:mZ,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:i}}function kZ(t,e={}){const n=iZ(t);if(!n)throw new Gh({signature:t,type:"error"});const r=ji(n.parameters),i=[],s=r.length;for(let o=0;o<s;o++)i.push(Da(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:i}}function RZ(t,e={}){const n=dZ(t);if(!n)throw new Gh({signature:t,type:"constructor"});const r=ji(n.parameters),i=[],s=r.length;for(let o=0;o<s;o++)i.push(Da(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:i}}function MZ(t){const e=fZ(t);if(!e)throw new Gh({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const BZ=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,DZ=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,LZ=/^u?int$/;function Da(t,e){var d,h;const n=OZ(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(A3.has(n))return A3.get(n);const r=uI.test(t),i=Ba(r?DZ:BZ,t);if(!i)throw new EZ({param:t});if(i.name&&UZ(i.name))throw new CZ({param:t,name:i.name});const s=i.name?{name:i.name}:{},o=i.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=ji(i.type),g=[],p=f.length;for(let m=0;m<p;m++)g.push(Da(f[m],{structs:a}));l={components:g}}else if(i.type in a)c="tuple",l={components:a[i.type]};else if(LZ.test(i.type))c=`${i.type}256`;else if(i.type==="address payable")c="address";else if(c=i.type,(e==null?void 0:e.type)!=="struct"&&!bI(c))throw new bZ({type:c});if(i.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,i.modifier)))throw new _Z({param:t,type:e==null?void 0:e.type,modifier:i.modifier});if(x3.has(i.modifier)&&!FZ(c,!!i.array))throw new SZ({param:t,type:e==null?void 0:e.type,modifier:i.modifier})}const u={type:`${c}${i.array??""}`,...s,...o,...l};return A3.set(n,u),u}function ji(t,e=[],n="",r=0){const i=t.trim().length;for(let s=0;s<i;s++){const o=t[s],a=t.slice(s+1);switch(o){case",":return r===0?ji(a,[...e,n.trim()]):ji(a,e,`${n}${o}`,r);case"(":return ji(a,e,`${n}${o}`,r+1);case")":return ji(a,e,`${n}${o}`,r-1);default:return ji(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new PZ({current:n,depth:r});return e.push(n.trim()),e}function bI(t){return t==="address"||t==="bool"||t==="function"||t==="string"||cI.test(t)||lI.test(t)}const jZ=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function UZ(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||cI.test(t)||lI.test(t)||jZ.test(t)}function FZ(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function $3(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!lw(a))continue;const c=lZ(a);if(!c)throw new Gh({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const g=l[h].trim();if(!g)continue;const p=Da(g,{type:"struct"});u.push(p)}if(!u.length)throw new IZ({signature:a});e[c.name]=u}const r={},i=Object.entries(e),s=i.length;for(let o=0;o<s;o++){const[a,c]=i[o];r[a]=vI(c,e)}return r}const zZ=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function vI(t,e,n=new Set){const r=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];if(uI.test(o.type))r.push(o);else{const c=Ba(zZ,o.type);if(!(c!=null&&c.type))throw new xZ({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new $Z({type:u});r.push({...o,type:`tuple${l??""}`,components:vI(e[u]??[],e,new Set([...n,u]))})}else if(bI(u))r.push(o);else throw new wZ({type:u})}}return r}function EI(t){const e=$3(t),n=[],r=t.length;for(let i=0;i<r;i++){const s=t[i];lw(s)||n.push(I3(s,e))}return n}function CI(t){let e;if(typeof t=="string")e=I3(t);else{const n=$3(t),r=t.length;for(let i=0;i<r;i++){const s=t[i];if(!lw(s)){e=I3(s,n);break}}}if(!e)throw new yZ({signature:t});return e}function _I(t){const e=[];if(typeof t=="string"){const n=ji(t),r=n.length;for(let i=0;i<r;i++)e.push(Da(n[i],{modifiers:wI}))}else{const n=$3(t),r=t.length;for(let i=0;i<r;i++){const s=t[i];if(lw(s))continue;const o=ji(s),a=o.length;for(let c=0;c<a;c++)e.push(Da(o[c],{modifiers:wI,structs:n}))}}if(e.length===0)throw new vZ({params:t});return e}function qZ(t){let e=!0,n="",r=0,i="",s=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(i))i="";else if(i+=a,a===")"){s=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}i+=a,n+=a}}if(!s)throw new ce("Unable to normalize signature.");return i}const HZ=t=>{const e=(()=>typeof t=="string"?t:cw(t))();return qZ(e)};function SI(t){return tZ(HZ(t))}const uw=SI,ag=t=>Hh(SI(t),0,4);function Tu(t){const{abi:e,args:n=[],name:r}=t,i=to(r,{strict:!1}),s=e.filter(a=>i?a.type==="function"?ag(a)===r:a.type==="event"?uw(a)===r:!1:"name"in a&&a.name===r);if(s.length===0)return;if(s.length===1)return s[0];let o;for(const a of s){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?P3(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=xI(a.inputs,o.inputs,n);if(l)throw new HV({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||s[0]}function P3(t,e){const n=typeof t,r=e.type;switch(r){case"address":return _s(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((i,s)=>P3(Object.values(t)[s],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(i=>P3(i,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function xI(t,e,n){for(const r in t){const i=t[r],s=e[r];if(i.type==="tuple"&&s.type==="tuple"&&"components"in i&&"components"in s)return xI(i.components,s.components,n[r]);const o=[i.type,s.type];if((()=>o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?_s(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?_s(n[r],{strict:!1}):!1)())return o}}const O3="/docs/contract/decodeFunctionResult";function Nu(t){const{abi:e,args:n,functionName:r,data:i}=t;let s=e[0];if(r){const a=Tu({abi:e,args:n,name:r});if(!a)throw new Dh(r,{docsPath:O3});s=a}if(s.type!=="function")throw new Dh(void 0,{docsPath:O3});if(!s.outputs)throw new BA(s.name,{docsPath:O3});const o=sg(s.outputs,i);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const AI="/docs/contract/encodeFunctionData";function WZ(t){const{abi:e,args:n,functionName:r}=t;let i=e[0];if(r){const s=Tu({abi:e,args:n,name:r});if(!s)throw new Dh(r,{docsPath:AI});i=s}if(i.type!=="function")throw new Dh(void 0,{docsPath:AI});return{abi:[i],functionName:ag(eo(i))}}function Ui(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:WZ(t)})(),i=n[0],s=r,o="inputs"in i&&i.inputs?Jc(i.inputs,e??[]):void 0;return Wh([s,o??"0x"])}class T3 extends ce{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class KZ extends ce{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class VZ extends ce{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class II extends ce{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function Zh({blockNumber:t,chain:e,contract:n}){var i;const r=(i=e==null?void 0:e.contracts)==null?void 0:i[n];if(!r)throw new T3({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new T3({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function sn(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const GZ={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},$I={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},ZZ={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function PI(t){const{abi:e,data:n}=t,r=Hh(n,0,4);if(r==="0x")throw new X0;const s=[...e||[],$I,ZZ].find(o=>o.type==="error"&&r===ag(eo(o)));if(!s)throw new kA(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?sg(s.inputs,Hh(n,4)):void 0,errorName:s.name}}const gn=(t,e,n)=>JSON.stringify(t,(r,i)=>{const s=typeof i=="bigint"?i.toString():i;return typeof e=="function"?e(r,s):s},n);function OI({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((i,s)=>`${r&&i.name?`${i.name}: `:""}${typeof e[s]=="object"?gn(e[s]):e[s]}`).join(", ")})`}const TI={gwei:9,wei:18},YZ={ether:-9,wei:9},JZ={ether:-18,gwei:-9};function Fi(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[i,s]=[n.slice(0,n.length-e),n.slice(n.length-e)];return s=s.replace(/(0+)$/,""),`${r?"-":""}${i||"0"}${s?`.${s}`:""}`}function cg(t,e="wei"){return Fi(t,TI[e])}function li(t,e="wei"){return Fi(t,YZ[e])}class QZ extends ce{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class XZ extends ce{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function NI(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function eY(t){return t.reduce((e,{address:n,...r})=>{let i=`${e}    ${n}:
`;return r.nonce&&(i+=`      nonce: ${r.nonce}
`),r.balance&&(i+=`      balance: ${r.balance}
`),r.code&&(i+=`      code: ${r.code}
`),r.state&&(i+=`      state:
`,i+=NI(r.state)),r.stateDiff&&(i+=`      stateDiff:
`,i+=NI(r.stateDiff)),i},`  State Override:
`).slice(0,-1)}function lg(t){const e=Object.entries(t).map(([r,i])=>i===void 0||i===!1?null:[r,i]).filter(Boolean),n=e.reduce((r,[i])=>Math.max(r,i.length),0);return e.map(([r,i])=>`  ${`${r}:`.padEnd(n+1)}  ${i}`).join(`
`)}class tY extends ce{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class nY extends ce{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",lg(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class rY extends ce{constructor(e,{account:n,docsPath:r,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var g;const f=lg({chain:i&&`${i==null?void 0:i.name} (id: ${i==null?void 0:i.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${cg(h)} ${((g=i==null?void 0:i.nativeCurrency)==null?void 0:g.symbol)||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${li(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${li(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${li(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class kI extends ce{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:i,index:s}){let o="Transaction";r&&s!==void 0&&(o=`Transaction at block time "${r}" at index "${s}"`),e&&s!==void 0&&(o=`Transaction at block hash "${e}" at index "${s}"`),n&&s!==void 0&&(o=`Transaction at block number "${n}" at index "${s}"`),i&&(o=`Transaction with hash "${i}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class RI extends ce{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class MI extends ce{constructor({receipt:e}){super(`Transaction with hash "${e.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=e}}class iY extends ce{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const sY=t=>t,ug=t=>t;class BI extends ce{constructor(e,{account:n,docsPath:r,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var m;const g=n?sn(n):void 0;let p=lg({from:g==null?void 0:g.address,to:d,value:typeof h<"u"&&`${cg(h)} ${((m=i==null?void 0:i.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${li(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${li(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${li(l)} gwei`,nonce:u});f&&(p+=`
${eY(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",p].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class N3 extends ce{constructor(e,{abi:n,args:r,contractAddress:i,docsPath:s,functionName:o,sender:a}){const c=Tu({abi:n,args:r,name:o}),l=c?OI({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?eo(c,{includeName:!0}):void 0,d=lg({address:i&&sY(i),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=i,this.functionName=o,this.sender=a}}class k3 extends ce{constructor({abi:e,data:n,functionName:r,message:i}){let s,o,a,c;if(n&&n!=="0x")try{o=PI({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=GZ[f]}else{const f=u?eo(u,{includeName:!0}):void 0,g=u&&h?OI({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",g&&g!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${g}`:""]}}catch(u){s=u}else i&&(c=i);let l;s instanceof kA&&(l=s.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:s,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class oY extends ce{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class aY extends ce{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class dw extends ce{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function R3(t){var n,r,i,s,o,a;if(!(t instanceof ce))return!1;const e=t.walk(c=>c instanceof k3);return e instanceof k3?((n=e.data)==null?void 0:n.errorName)==="HttpError"||((r=e.data)==null?void 0:r.errorName)==="ResolverError"||((i=e.data)==null?void 0:i.errorName)==="ResolverNotContract"||((s=e.data)==null?void 0:s.errorName)==="ResolverNotFound"||((o=e.data)==null?void 0:o.errorName)==="ReverseAddressMismatch"||((a=e.data)==null?void 0:a.errorName)==="UnsupportedResolverProfile":!1}function cY(t){const{abi:e,data:n}=t,r=Hh(n,0,4),i=e.find(s=>s.type==="function"&&r===ag(eo(s)));if(!i)throw new qV(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:i.name,args:"inputs"in i&&i.inputs&&i.inputs.length>0?sg(i.inputs,Hh(n,4)):void 0}}const M3="/docs/contract/encodeErrorResult";function DI(t){const{abi:e,errorName:n,args:r}=t;let i=e[0];if(n){const c=Tu({abi:e,args:r,name:n});if(!c)throw new NA(n,{docsPath:M3});i=c}if(i.type!=="error")throw new NA(void 0,{docsPath:M3});const s=eo(i),o=ag(s);let a="0x";if(r&&r.length>0){if(!i.inputs)throw new FV(i.name,{docsPath:M3});a=Jc(i.inputs,r)}return Wh([o,a])}const B3="/docs/contract/encodeFunctionResult";function lY(t){const{abi:e,functionName:n,result:r}=t;let i=e[0];if(n){const o=Tu({abi:e,name:n});if(!o)throw new Dh(n,{docsPath:B3});i=o}if(i.type!=="function")throw new Dh(void 0,{docsPath:B3});if(!i.outputs)throw new BA(i.name,{docsPath:B3});const s=(()=>{if(i.outputs.length===0)return[];if(i.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new DA(r)})();return Jc(i.outputs,s)}const dg="x-batch-gateway:true";async function LI(t){const{data:e,ccipRequest:n}=t,{args:[r]}=cY({abi:f3,data:e}),i=[],s=[];return await Promise.all(r.map(async(o,a)=>{try{s[a]=o.urls.includes(dg)?await LI({data:o.data,ccipRequest:n}):await n(o),i[a]=!1}catch(c){i[a]=!0,s[a]=uY(c)}})),lY({abi:f3,functionName:"query",result:[i,s]})}function uY(t){return t.name==="HttpRequestError"&&t.status?DI({abi:f3,errorName:"HttpError",args:[t.status,t.shortMessage]}):DI({abi:[$I],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function jI(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return to(e)?e:null}function D3(t){let e=new Uint8Array(32).fill(0);if(!t)return Nn(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const i=jI(n[r]),s=i?Uh(i):hr(Pu(n[r]),"bytes");e=hr(Li([e,s]),"bytes")}return Nn(e)}function dY(t){return`[${t.slice(2)}]`}function hY(t){const e=new Uint8Array(32).fill(0);return t?jI(t)||hr(Pu(t)):Nn(e)}function L3(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Pu(e).byteLength+2);let r=0;const i=e.split(".");for(let s=0;s<i.length;s++){let o=Pu(i[s]);o.byteLength>255&&(o=Pu(dY(hY(i[s])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}function Le(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const i=t[n];return typeof i=="function"?i:s=>e(t,s)}class ku extends ce{constructor({body:e,cause:n,details:r,headers:i,status:s,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[s&&`Status: ${s}`,`URL: ${ug(o)}`,e&&`Request body: ${gn(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class j3 extends ce{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${ug(r)}`,`Request body: ${gn(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class UI extends ce{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${ug(n)}`,`Request body: ${gn(e)}`],name:"TimeoutError"})}}const fY=-1;class ui extends ce{constructor(e,{code:n,docsPath:r,metaMessages:i,name:s,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:i||(e==null?void 0:e.metaMessages),name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof j3?e.code:n??fY}}class zi extends ui{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class hg extends ui{constructor(e){super(e,{code:hg.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(hg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class fg extends ui{constructor(e){super(e,{code:fg.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(fg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class pg extends ui{constructor(e,{method:n}={}){super(e,{code:pg.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(pg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class gg extends ui{constructor(e){super(e,{code:gg.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(gg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ru extends ui{constructor(e){super(e,{code:Ru.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ru,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Mu extends ui{constructor(e){super(e,{code:Mu.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Mu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class mg extends ui{constructor(e){super(e,{code:mg.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(mg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class jo extends ui{constructor(e){super(e,{code:jo.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(jo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Yh extends ui{constructor(e){super(e,{code:Yh.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Yh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Bu extends ui{constructor(e,{method:n}={}){super(e,{code:Bu.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Bu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Jh extends ui{constructor(e){super(e,{code:Jh.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Jh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class yg extends ui{constructor(e){super(e,{code:yg.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(yg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Ut extends zi{constructor(e){super(e,{code:Ut.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Ut,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class wg extends zi{constructor(e){super(e,{code:wg.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(wg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class bg extends zi{constructor(e,{method:n}={}){super(e,{code:bg.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(bg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class vg extends zi{constructor(e){super(e,{code:vg.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(vg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Eg extends zi{constructor(e){super(e,{code:Eg.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Eg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class ro extends zi{constructor(e){super(e,{code:ro.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(ro,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Qh extends zi{constructor(e){super(e,{code:Qh.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Qh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Cg extends zi{constructor(e){super(e,{code:Cg.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Cg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class _g extends zi{constructor(e){super(e,{code:_g.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(_g,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Sg extends zi{constructor(e){super(e,{code:Sg.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Sg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class xg extends zi{constructor(e){super(e,{code:xg.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(xg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Ag extends zi{constructor(e){super(e,{code:Ag.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Ag,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Xh extends zi{constructor(e){super(e,{code:Xh.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Xh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class pY extends ui{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const gY=3;function Du(t,{abi:e,address:n,args:r,docsPath:i,functionName:s,sender:o}){const a=t instanceof dw?t:t instanceof ce?t.walk(g=>"data"in g)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=(()=>t instanceof X0?new oY({functionName:s}):[gY,Ru.code].includes(c)&&(l||u||d||h)?new k3({abi:e,data:typeof l=="object"?l.data:l,functionName:s,message:a instanceof j3?u:h??d}):t)();return new N3(f,{abi:e,args:r,contractAddress:n,docsPath:i,functionName:s,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const U3=BigInt(0),F3=BigInt(1);function Ig(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function z3(t){if(!Ig(t))throw new Error("Uint8Array expected")}function $g(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function hw(t){const e=t.toString(16);return e.length&1?"0"+e:e}function FI(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?U3:BigInt("0x"+t)}const zI=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",mY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Pg(t){if(z3(t),zI)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=mY[t[n]];return e}const La={_0:48,_9:57,A:65,F:70,a:97,f:102};function qI(t){if(t>=La._0&&t<=La._9)return t-La._0;if(t>=La.A&&t<=La.F)return t-(La.A-10);if(t>=La.a&&t<=La.f)return t-(La.a-10)}function fw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(zI)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=qI(t.charCodeAt(s)),a=qI(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Lu(t){return FI(Pg(t))}function HI(t){return z3(t),FI(Pg(Uint8Array.from(t).reverse()))}function Og(t,e){return fw(t.toString(16).padStart(e*2,"0"))}function WI(t,e){return Og(t,e).reverse()}function Ss(t,e,n){let r;if(typeof e=="string")try{r=fw(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Ig(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function pw(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];z3(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const q3=t=>typeof t=="bigint"&&U3<=t;function H3(t,e,n){return q3(t)&&q3(e)&&q3(n)&&e<=t&&t<n}function ef(t,e,n,r){if(!H3(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function yY(t){let e;for(e=0;t>U3;t>>=F3,e+=1);return e}const gw=t=>(F3<<BigInt(t))-F3,W3=t=>new Uint8Array(t),KI=t=>Uint8Array.from(t);function wY(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=W3(t),i=W3(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),c=(d=W3(0))=>{i=a(KI([0]),d),r=a(),d.length!==0&&(i=a(KI([1]),d),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return pw(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const bY={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ig(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function mw(t,e,n={}){const r=(i,s,o)=>{const a=bY[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}function VI(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const vY="0.1.1";function EY(){return vY}let rt=class oA extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof oA){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),i=(()=>n.cause instanceof oA&&n.cause.docsPath||n.docsPath)(),o=`https://oxlib.sh${i??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${EY()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return GI(this,e)}};function GI(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?GI(t.cause,e):e?null:t}function Tg(t,e){if(Uo(t)>e)throw new UY({givenSize:Uo(t),maxSize:e})}function CY(t,e){if(typeof e=="number"&&e>0&&e>Uo(t)-1)throw new t$({offset:e,position:"start",size:Uo(t)})}function _Y(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Uo(t)!==n-e)throw new t$({offset:n,position:"end",size:Uo(t)})}const ja={zero:48,nine:57,A:65,F:70,a:97,f:102};function ZI(t){if(t>=ja.zero&&t<=ja.nine)return t-ja.zero;if(t>=ja.A&&t<=ja.F)return t-(ja.A-10);if(t>=ja.a&&t<=ja.f)return t-(ja.a-10)}function SY(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new FY({size:t.length,targetSize:r,type:"Bytes"});const i=new Uint8Array(r);for(let s=0;s<r;s++){const o=n==="right";i[o?s:r-s-1]=t[o?s:t.length-s-1]}return i}function YI(t,e={}){const{dir:n="left"}=e;let r=t,i=0;for(let s=0;s<r.length-1&&r[n==="left"?s:r.length-s-1].toString()==="0";s++)i++;return r=n==="left"?r.slice(i):r.slice(0,r.length-i),r}function yw(t,e){if(qi(t)>e)throw new VY({givenSize:qi(t),maxSize:e})}function xY(t,e){if(typeof e=="number"&&e>0&&e>qi(t)-1)throw new c$({offset:e,position:"start",size:qi(t)})}function AY(t,e,n){if(typeof e=="number"&&typeof n=="number"&&qi(t)!==n-e)throw new c$({offset:n,position:"end",size:qi(t)})}function JI(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const i=t.replace("0x","");if(i.length>r*2)throw new GY({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const IY="#__bigint";function QI(t,e,n){return JSON.stringify(t,(r,i)=>typeof e=="function"?e(r,i):typeof i=="bigint"?i.toString()+IY:i,n)}const $Y=new TextDecoder,PY=new TextEncoder;function OY(t){return t instanceof Uint8Array?t:typeof t=="string"?XI(t):TY(t)}function TY(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function XI(t,e={}){const{size:n}=e;let r=t;n&&(yw(t,n),r=Uu(t,n));let i=r.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const l=ZI(i.charCodeAt(c++)),u=ZI(i.charCodeAt(c++));if(l===void 0||u===void 0)throw new rt(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=l*16+u}return o}function NY(t,e={}){const{size:n}=e,r=PY.encode(t);return typeof n=="number"?(Tg(r,n),kY(r,n)):r}function kY(t,e){return SY(t,{dir:"right",size:e})}function Uo(t){return t.length}function RY(t,e,n,r={}){const{strict:i}=r;CY(t,e);const s=t.slice(e,n);return i&&_Y(s,e,n),s}function MY(t,e={}){const{size:n}=e;typeof n<"u"&&Tg(t,n);const r=so(t,e);return r$(r,e)}function BY(t,e={}){const{size:n}=e;let r=t;if(typeof n<"u"&&(Tg(r,n),r=e$(r)),r.length>1||r[0]>1)throw new jY(r);return!!r[0]}function Ua(t,e={}){const{size:n}=e;typeof n<"u"&&Tg(t,n);const r=so(t,e);return i$(r,e)}function DY(t,e={}){const{size:n}=e;let r=t;return typeof n<"u"&&(Tg(r,n),r=LY(r)),$Y.decode(r)}function e$(t){return YI(t,{dir:"left"})}function LY(t){return YI(t,{dir:"right"})}class jY extends rt{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let UY=class extends rt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},t$=class extends rt{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}},FY=class extends rt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const zY=new TextEncoder,qY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function HY(t,e={}){const{strict:n=!1}=e;if(!t)throw new o$(t);if(typeof t!="string")throw new o$(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new a$(t);if(!t.startsWith("0x"))throw new a$(t)}function io(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function WY(t){return t instanceof Uint8Array?so(t):Array.isArray(t)?so(new Uint8Array(t)):t}function n$(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(yw(n,e.size),ju(n,e.size)):n}function so(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=qY[t[i]];const r=`0x${n}`;return typeof e.size=="number"?(yw(r,e.size),Uu(r,e.size)):r}function qr(t,e={}){const{signed:n,size:r}=e,i=BigInt(t);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&i>s||i<o){const l=typeof t=="bigint"?"n":"";throw new s$({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?ju(c,r):c}function K3(t,e={}){return so(zY.encode(t),e)}function ju(t,e){return JI(t,{dir:"left",size:e})}function Uu(t,e){return JI(t,{dir:"right",size:e})}function Fo(t,e,n,r={}){const{strict:i}=r;xY(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return i&&AY(s,e,n),s}function qi(t){return Math.ceil((t.length-2)/2)}function r$(t,e={}){const{signed:n}=e;e.size&&yw(t,e.size);const r=BigInt(t);if(!n)return r;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n)-1n,o=s>>1n;return r<=o?r:r-s-1n}function i$(t,e={}){const{signed:n,size:r}=e;return Number(!n&&!r?t:r$(t,e))}function KY(t,e={}){const{strict:n=!1}=e;try{return HY(t,{strict:n}),!0}catch{return!1}}let s$=class extends rt{constructor({max:e,min:n,signed:r,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class o$ extends rt{constructor(e){super(`Value \`${typeof e=="object"?QI(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class a$ extends rt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let VY=class extends rt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class c$ extends rt{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let GY=class extends rt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function ZY(t){return{address:t.address,amount:qr(t.amount),index:qr(t.index),validatorIndex:qr(t.validatorIndex)}}function l$(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:qr(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:qr(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:qr(t.gasLimit)},...typeof t.number=="bigint"&&{number:qr(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:qr(t.prevRandao)},...typeof t.time=="bigint"&&{time:qr(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(ZY)}}}const YY="0x82ad56cb",u$="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",JY="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",QY="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",V3="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033",G3="/docs/contract/encodeDeployData";function ww(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const i=e.find(o=>"type"in o&&o.type==="constructor");if(!i)throw new DV({docsPath:G3});if(!("inputs"in i))throw new OA({docsPath:G3});if(!i.inputs||i.inputs.length===0)throw new OA({docsPath:G3});const s=Jc(i.inputs,n);return Wh([r,s])}class Fu extends ce{constructor({cause:e,message:n}={}){var i;const r=(i=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Fu,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(Fu,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class bw extends ce{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${li(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(bw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Z3 extends ce{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${li(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(Z3,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Y3 extends ce{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(Y3,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class J3 extends ce{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(J3,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Q3 extends ce{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Q3,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class X3 extends ce{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(X3,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class e6 extends ce{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(e6,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class t6 extends ce{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(t6,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class n6 extends ce{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(n6,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class vw extends ce{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${li(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${li(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(vw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Ng extends ce{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function Ew(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ce?t.walk(i=>(i==null?void 0:i.code)===Fu.code):t;return r instanceof ce?new Fu({cause:t,message:r.details}):Fu.nodeMessage.test(n)?new Fu({cause:t,message:t.details}):bw.nodeMessage.test(n)?new bw({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Z3.nodeMessage.test(n)?new Z3({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Y3.nodeMessage.test(n)?new Y3({cause:t,nonce:e==null?void 0:e.nonce}):J3.nodeMessage.test(n)?new J3({cause:t,nonce:e==null?void 0:e.nonce}):Q3.nodeMessage.test(n)?new Q3({cause:t,nonce:e==null?void 0:e.nonce}):X3.nodeMessage.test(n)?new X3({cause:t}):e6.nodeMessage.test(n)?new e6({cause:t,gas:e==null?void 0:e.gas}):t6.nodeMessage.test(n)?new t6({cause:t,gas:e==null?void 0:e.gas}):n6.nodeMessage.test(n)?new n6({cause:t}):vw.nodeMessage.test(n)?new vw({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Ng({cause:t})}function d$(t,{docsPath:e,...n}){const r=(()=>{const i=Ew(t,n);return i instanceof Ng?t:i})();return new BI(r,{docsPath:e,...n})}function kg(t,{format:e}){if(!e)return{};const n={};function r(s){const o=Object.keys(s);for(const a of o)a in t&&(n[a]=t[a]),s[a]&&typeof s[a]=="object"&&!Array.isArray(s[a])&&r(s[a])}const i=e(t||{});return r(i),n}const XY={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function zu(t,e){const n={};return typeof t.authorizationList<"u"&&(n.authorizationList=eJ(t.authorizationList)),typeof t.accessList<"u"&&(n.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(n.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?n.blobs=t.blobs.map(r=>Nn(r)):n.blobs=t.blobs),typeof t.data<"u"&&(n.data=t.data),t.account&&(n.from=t.account.address),typeof t.from<"u"&&(n.from=t.from),typeof t.gas<"u"&&(n.gas=Ne(t.gas)),typeof t.gasPrice<"u"&&(n.gasPrice=Ne(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=Ne(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(n.maxFeePerGas=Ne(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=Ne(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(n.nonce=Ne(t.nonce)),typeof t.to<"u"&&(n.to=t.to),typeof t.type<"u"&&(n.type=XY[t.type]),typeof t.value<"u"&&(n.value=Ne(t.value)),n}function eJ(t){return t.map(e=>({address:e.address,r:e.r?Ne(BigInt(e.r)):e.r,s:e.s?Ne(BigInt(e.s)):e.s,chainId:Ne(e.chainId),nonce:Ne(e.nonce),...typeof e.yParity<"u"?{yParity:Ne(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ne(e.v)}:{}}))}function r6(){let t=()=>{},e=()=>{};return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}const i6=new Map;function h$({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:i}){const s=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{i&&Array.isArray(h)&&h.sort(i);for(let f=0;f<u.length;f++){const{resolve:g}=u[f];g==null||g([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:g}=u[f];g==null||g(h)}})},o=()=>i6.delete(e),a=()=>c().map(({args:u})=>u),c=()=>i6.get(e)||[],l=u=>i6.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=r6();return(n==null?void 0:n([...a(),u]))&&s(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(s,r),d)}}}function f$(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new UA({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new UA({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function tJ(t){const{balance:e,nonce:n,state:r,stateDiff:i,code:s}=t,o={};if(s!==void 0&&(o.code=s),e!==void 0&&(o.balance=Ne(e)),n!==void 0&&(o.nonce=Ne(n)),r!==void 0&&(o.state=f$(r)),i!==void 0){if(o.state)throw new XZ;o.stateDiff=f$(i)}return o}function s6(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!_s(n,{strict:!1}))throw new Zc({address:n});if(e[n])throw new QZ({address:n});e[n]=tJ(r)}return e}const nJ=2n**256n-1n;function Qc(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:i,to:s}=t,o=e?sn(e):void 0;if(o&&!_s(o.address))throw new Zc({address:o.address});if(s&&!_s(s))throw new Zc({address:s});if(typeof n<"u"&&(typeof r<"u"||typeof i<"u"))throw new tY;if(r&&r>nJ)throw new bw({maxFeePerGas:r});if(i&&r&&i>r)throw new vw({maxFeePerGas:r,maxPriorityFeePerGas:i})}async function Rg(t,e){var j,I,E,S;const{account:n=t.account,authorizationList:r,batch:i=!!((j=t.batch)!=null&&j.multicall),blockNumber:s,blockTag:o=t.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:g,gasPrice:p,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:b,to:v,value:C,stateOverride:A,...$}=e,R=n?sn(n):void 0;if(u&&(h||f))throw new ce("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&v)throw new ce("Cannot provide both `code` & `to` as parameters.");const P=u&&d,L=h&&f&&v&&d,U=P||L,D=(()=>P?p$({code:u,data:d}):L?sJ({data:d,factory:h,factoryData:f,to:v}):d)();try{Qc(e);const _=(typeof s=="bigint"?Ne(s):void 0)||o,x=l?l$(l):void 0,T=s6(A),M=(S=(E=(I=t.chain)==null?void 0:I.formatters)==null?void 0:E.transactionRequest)==null?void 0:S.format,N=(M||zu)({...kg($,{format:M}),accessList:a,account:R,authorizationList:r,blobs:c,data:D,gas:g,gasPrice:p,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:b,to:U?void 0:v,value:C},"call");if(i&&rJ({request:N})&&!T&&!x)try{return await iJ(t,{...N,blockNumber:s,blockTag:o})}catch(z){if(!(z instanceof II)&&!(z instanceof T3))throw z}const B=(()=>{const z=[N,_];return T&&x?[...z,T,x]:T?[...z,T]:x?[...z,{},x]:z})(),F=await t.request({method:"eth_call",params:B});return F==="0x"?{data:void 0}:{data:F}}catch(k){const _=oJ(k),{offchainLookup:x,offchainLookupSignature:T}=await Promise.resolve().then(()=>SQ);if(t.ccipRead!==!1&&(_==null?void 0:_.slice(0,10))===T&&v)return{data:await x(t,{data:_,to:v})};throw U&&(_==null?void 0:_.slice(0,10))==="0x101bb98d"?new aY({factory:h}):d$(k,{...e,account:R,chain:t.chain})}}function rJ({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(YY)||!n||Object.values(r).filter(i=>typeof i<"u").length>0)}async function iJ(t,e){var p;const{batchSize:n=1024,deployless:r=!1,wait:i=0}=typeof((p=t.batch)==null?void 0:p.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:o=t.experimental_blockTag??"latest",data:a,to:c}=e,l=(()=>{if(r)return null;if(e.multicallAddress)return e.multicallAddress;if(t.chain)return Zh({blockNumber:s,chain:t.chain,contract:"multicall3"});throw new II})(),d=(typeof s=="bigint"?Ne(s):void 0)||o,{schedule:h}=h$({id:`${t.uid}.${d}`,wait:i,shouldSplitBatch(m){return m.reduce((w,{data:b})=>w+(b.length-2),0)>n*2},fn:async m=>{const y=m.map(v=>({allowFailure:!0,callData:v.data,target:v.to})),w=Ui({abi:rw,args:[y],functionName:"aggregate3"}),b=await t.request({method:"eth_call",params:[{...l===null?{data:p$({code:V3,data:w})}:{to:l,data:w}},d]});return Nu({abi:rw,args:[y],functionName:"aggregate3",data:b||"0x"})}}),[{returnData:f,success:g}]=await h({data:a,to:c});if(!g)throw new dw({data:f});return f==="0x"?{data:void 0}:{data:f}}function p$(t){const{code:e,data:n}=t;return ww({abi:EI(["constructor(bytes, bytes)"]),bytecode:u$,args:[e,n]})}function sJ(t){const{data:e,factory:n,factoryData:r,to:i}=t;return ww({abi:EI(["constructor(address, bytes, address, bytes)"]),bytecode:JY,args:[i,e,n,r]})}function oJ(t){var n;if(!(t instanceof ce))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function xs(t,e){const{abi:n,address:r,args:i,functionName:s,...o}=e,a=Ui({abi:n,args:i,functionName:s});try{const{data:c}=await Le(t,Rg,"call")({...o,data:a,to:r});return Nu({abi:n,args:i,functionName:s,data:c||"0x"})}catch(c){throw Du(c,{abi:n,address:r,args:i,docsPath:"/docs/contract/readContract",functionName:s})}}async function aJ(t,e){const{blockNumber:n,blockTag:r,coinType:i,name:s,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Zh({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(h=>s.endsWith(h)))return null;const d=(()=>i!=null?[D3(s),BigInt(i)]:[D3(s)])();try{const h=Ui({abi:xA,functionName:"addr",args:d}),f={address:l,abi:_A,functionName:"resolveWithGateways",args:[Cs(L3(s)),h,o??[dg]],blockNumber:n,blockTag:r},p=await Le(t,xs,"readContract")(f);if(p[0]==="0x")return null;const m=Nu({abi:xA,args:d,functionName:"addr",data:p[0]});return m==="0x"||Do(m)==="0x00"?null:m}catch(h){if(a)throw h;if(R3(h))return null;throw h}}class cJ extends ce{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class Mg extends ce{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class o6 extends ce{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class lJ extends ce{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const uJ=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,dJ=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,hJ=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,fJ=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function pJ(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function g$(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function m$({uri:t,gatewayUrls:e}){const n=hJ.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=g$(e==null?void 0:e.ipfs,"https://ipfs.io"),i=g$(e==null?void 0:e.arweave,"https://arweave.net"),s=t.match(uJ),{protocol:o,subpath:a,target:c,subtarget:l=""}=(s==null?void 0:s.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||dJ.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${i}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(fJ,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new o6({uri:t})}function y$(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new cJ({data:t});return t.image||t.image_url||t.image_data}async function gJ({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(i=>i.json());return await a6({gatewayUrls:t,uri:y$(n)})}catch{throw new o6({uri:e})}}async function a6({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=m$({uri:e,gatewayUrls:t});if(r||await pJ(n))return n;throw new o6({uri:e})}function mJ(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,i]=e.split("/"),[s,o]=n.split(":"),[a,c]=r.split(":");if(!s||s.toLowerCase()!=="eip155")throw new Mg({reason:"Only EIP-155 supported"});if(!o)throw new Mg({reason:"Chain ID not found"});if(!c)throw new Mg({reason:"Contract address not found"});if(!i)throw new Mg({reason:"Token ID not found"});if(!a)throw new Mg({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o,10),namespace:a.toLowerCase(),contractAddress:c,tokenID:i}}async function yJ(t,{nft:e}){if(e.namespace==="erc721")return xs(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return xs(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new lJ({namespace:e.namespace})}async function wJ(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?bJ(t,{gatewayUrls:e,record:n}):a6({uri:n,gatewayUrls:e})}async function bJ(t,{gatewayUrls:e,record:n}){const r=mJ(n),i=await yJ(t,{nft:r}),{uri:s,isOnChain:o,isEncoded:a}=m$({uri:i,gatewayUrls:e});if(o&&(s.includes("data:application/json;base64,")||s.startsWith("{"))){const l=a?atob(s.replace("data:application/json;base64,","")):s,u=JSON.parse(l);return a6({uri:y$(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),gJ({gatewayUrls:e,uri:s.replace(/(?:0x)?{id}/,c)})}async function w$(t,e){const{blockNumber:n,blockTag:r,key:i,name:s,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Zh({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>s.endsWith(d)))return null;try{const d={address:l,abi:_A,args:[Cs(L3(s)),Ui({abi:SA,functionName:"text",args:[D3(s),i]}),o??[dg]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},f=await Le(t,xs,"readContract")(d);if(f[0]==="0x")return null;const g=Nu({abi:SA,functionName:"text",data:f[0]});return g===""?null:g}catch(d){if(a)throw d;if(R3(d))return null;throw d}}async function vJ(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:i,gatewayUrls:s,strict:o,universalResolverAddress:a}){const c=await Le(t,w$,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:i,universalResolverAddress:a,gatewayUrls:s,strict:o});if(!c)return null;try{return await wJ(t,{record:c,gatewayUrls:r})}catch{return null}}async function EJ(t,e){const{address:n,blockNumber:r,blockTag:i,coinType:s=60n,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Zh({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})();try{const u={address:l,abi:MV,args:[n,s,o??[dg]],functionName:"reverseWithGateways",blockNumber:r,blockTag:i},d=Le(t,xs,"readContract"),[h]=await d(u);return h||null}catch(u){if(a)throw u;if(R3(u))return null;throw u}}async function CJ(t,e){const{blockNumber:n,blockTag:r,name:i}=e,{chain:s}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!s)throw new Error("client chain not configured. universalResolverAddress is required.");return Zh({blockNumber:n,chain:s,contract:"ensUniversalResolver"})})(),a=s==null?void 0:s.ensTlds;if(a&&!a.some(l=>i.endsWith(l)))throw new Error(`${i} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${s.name}" (id: ${s.id}).`);const[c]=await Le(t,xs,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Cs(L3(i))],blockNumber:n,blockTag:r});return c}async function b$(t,e){var m,y,w;const{account:n=t.account,blockNumber:r,blockTag:i="latest",blobs:s,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...g}=e,p=n?sn(n):void 0;try{Qc(e);const v=(typeof r=="bigint"?Ne(r):void 0)||i,C=(w=(y=(m=t.chain)==null?void 0:m.formatters)==null?void 0:y.transactionRequest)==null?void 0:w.format,$=(C||zu)({...kg(g,{format:C}),account:p,blobs:s,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f},"createAccessList"),R=await t.request({method:"eth_createAccessList",params:[$,v]});return{accessList:R.accessList,gasUsed:BigInt(R.gasUsed)}}catch(b){throw d$(b,{...e,account:p,chain:t.chain})}}function Cw(t,{method:e}){var r,i;const n={};return t.transport.type==="fallback"&&((i=(r=t.transport).onResponse)==null||i.call(r,({method:s,response:o,status:a,transport:c})=>{a==="success"&&e===s&&(n[o]=c.request)})),s=>n[s]||t.request}async function _J(t){const e=Cw(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class SJ extends ce{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const v$="/docs/contract/encodeEventTopics";function Bg(t){var c;const{abi:e,eventName:n,args:r}=t;let i=e[0];if(n){const l=Tu({abi:e,name:n});if(!l)throw new MA(n,{docsPath:v$});i=l}if(i.type!=="event")throw new MA(void 0,{docsPath:v$});const s=eo(i),o=uw(s);let a=[];if(r&&"inputs"in i){const l=(c=i.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,g)=>E$({param:d,value:u[h][g]})):typeof u[h]<"u"&&u[h]!==null?E$({param:d,value:u[h]}):null))??[])}return[o,...a]}function E$({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return hr(Uh(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new SJ(t.type);return Jc([t],[e])}async function C$(t,e){const{address:n,abi:r,args:i,eventName:s,fromBlock:o,strict:a,toBlock:c}=e,l=Cw(t,{method:"eth_newFilter"}),u=s?Bg({abi:r,args:i,eventName:s}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?Ne(o):o,toBlock:typeof c=="bigint"?Ne(c):c,topics:u}]});return{abi:r,args:i,eventName:s,id:d,request:l(d),strict:!!a,type:"event"}}async function _$(t,{address:e,args:n,event:r,events:i,fromBlock:s,strict:o,toBlock:a}={}){const c=i??(r?[r]:void 0),l=Cw(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>Bg({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof s=="bigint"?Ne(s):s,toBlock:typeof a=="bigint"?Ne(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:s,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function S$(t){const e=Cw(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}function xJ(t){const e=hr(`0x${t.substring(4)}`).substring(26);return ig(`0x${e}`)}async function AJ({hash:t,signature:e}){const n=to(t)?t:Cs(t),{secp256k1:r}=await Promise.resolve().then(()=>BX);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),g=x$(f);return new r.Signature(Di(l),Di(u)).addRecoveryBit(g)}const o=to(e)?e:Cs(e);if(ln(o)!==65)throw new Error("invalid signature length");const a=Es(`0x${o.slice(130)}`),c=x$(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function x$(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function A$({hash:t,signature:e}){return xJ(await AJ({hash:t,signature:e}))}function IJ(t,e="hex"){const n=I$(t),r=w3(new Uint8Array(n.length));return n.encode(r),e==="hex"?Nn(r.bytes):r.bytes}function I$(t){return Array.isArray(t)?$J(t.map(e=>I$(e))):PJ(t)}function $J(t){const e=t.reduce((i,s)=>i+s.length,0),n=$$(e);return{length:(()=>e<=55?1+e:1+n+e)(),encode(i){e<=55?i.pushByte(192+e):(i.pushByte(192+55+n),n===1?i.pushUint8(e):n===2?i.pushUint16(e):n===3?i.pushUint24(e):i.pushUint32(e));for(const{encode:s}of t)s(i)}}}function PJ(t){const e=typeof t=="string"?no(t):t,n=$$(e.length);return{length:(()=>e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length)(),encode(i){e.length===1&&e[0]<128?i.pushBytes(e):e.length<=55?(i.pushByte(128+e.length),i.pushBytes(e)):(i.pushByte(128+55+n),n===1?i.pushUint8(e.length):n===2?i.pushUint16(e.length):n===3?i.pushUint24(e.length):i.pushUint32(e.length),i.pushBytes(e))}}}function $$(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ce("Length is too large.")}function OJ(t){const{chainId:e,nonce:n,to:r}=t,i=t.contractAddress??t.address,s=hr(Wh(["0x05",IJ([e?Ne(e):"0x",i,n?Ne(n):"0x"])]));return r==="bytes"?no(s):s}async function _w(t){const{authorization:e,signature:n}=t;return A$({hash:OJ(e),signature:n??e})}class TJ extends ce{constructor(e,{account:n,docsPath:r,chain:i,data:s,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var g;const f=lg({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${cg(h)} ${((g=i==null?void 0:i.nativeCurrency)==null?void 0:g.symbol)||"ETH"}`,data:s,gas:o,gasPrice:typeof a<"u"&&`${li(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${li(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${li(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function NJ(t,{docsPath:e,...n}){const r=(()=>{const i=Ew(t,n);return i instanceof Ng?t:i})();return new TJ(r,{docsPath:e,...n})}class kJ extends ce{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class c6 extends ce{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class RJ extends ce{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${li(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class P$ extends ce{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const O$={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function T$(t,e){const n={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Es(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Es(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?O$[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(n.authorizationList=MJ(t.authorizationList)),n.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}function MJ(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function N$(t,e){const n=(t.transactions??[]).map(r=>typeof r=="string"?r:T$(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:n,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function zo(t,{blockHash:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",includeTransactions:i}={}){var l,u,d;const s=i??!1,o=n!==void 0?Ne(n):void 0;let a=null;if(e?a=await t.request({method:"eth_getBlockByHash",params:[e,s]},{dedupe:!0}):a=await t.request({method:"eth_getBlockByNumber",params:[o||r,s]},{dedupe:!!o}),!a)throw new P$({blockHash:e,blockNumber:n});return(((d=(u=(l=t.chain)==null?void 0:l.formatters)==null?void 0:u.block)==null?void 0:d.format)||N$)(a,"getBlock")}async function l6(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function BJ(t,e){return k$(t,e)}async function k$(t,e){var s,o;const{block:n,chain:r=t.chain,request:i}=e||{};try{const a=((s=r==null?void 0:r.fees)==null?void 0:s.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await Le(t,zo,"getBlock")({}),u=await a({block:l,client:t,request:i});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Di(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):Le(t,zo,"getBlock")({}),Le(t,l6,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new c6;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function DJ(t,e){return u6(t,e)}async function u6(t,e){var h,f;const{block:n,chain:r=t.chain,request:i,type:s="eip1559"}=e||{},o=await(async()=>{var g,p;return typeof((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:i}):((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)??1.2})();if(o<1)throw new kJ;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=g=>g*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await Le(t,zo,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const g=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:i,type:s});if(g!==null)return g}if(s==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new c6;const g=typeof(i==null?void 0:i.maxPriorityFeePerGas)=="bigint"?i.maxPriorityFeePerGas:await k$(t,{block:u,chain:r,request:i}),p=l(u.baseFeePerGas);return{maxFeePerGas:(i==null?void 0:i.maxFeePerGas)??p+g,maxPriorityFeePerGas:g}}return{gasPrice:(i==null?void 0:i.gasPrice)??l(await Le(t,l6,"getGasPrice")({}))}}async function d6(t,{address:e,blockTag:n="latest",blockNumber:r}){const i=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Ne(r):n]},{dedupe:!!r});return Es(i)}function R$(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(s=>no(s)):t.blobs,i=[];for(const s of r)i.push(Uint8Array.from(e.blobToKzgCommitment(s)));return n==="bytes"?i:i.map(s=>Nn(s))}function M$(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>no(o)):t.blobs,i=typeof t.commitments[0]=="string"?t.commitments.map(o=>no(o)):t.commitments,s=[];for(let o=0;o<r.length;o++){const a=r[o],c=i[o];s.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?s:s.map(o=>Nn(o))}function LJ(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function jJ(t,e,n){return t&e^~t&n}function UJ(t,e,n){return t&e^t&n^e&n}let FJ=class extends g3{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=p3(this.buffer)}update(e){zh(this),e=aw(e),Ou(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=p3(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){zh(this),WA(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,qh(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;LJ(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=p3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Xc=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zJ=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),el=new Uint32Array(64);let qJ=class extends FJ{constructor(e=32){super(64,e,8,!1),this.A=Xc[0]|0,this.B=Xc[1]|0,this.C=Xc[2]|0,this.D=Xc[3]|0,this.E=Xc[4]|0,this.F=Xc[5]|0,this.G=Xc[6]|0,this.H=Xc[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)el[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=el[d-15],f=el[d-2],g=Lo(h,7)^Lo(h,18)^h>>>3,p=Lo(f,17)^Lo(f,19)^f>>>10;el[d]=p+el[d-7]+g+el[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Lo(a,6)^Lo(a,11)^Lo(a,25),f=u+h+jJ(a,c,l)+zJ[d]+el[d]|0,p=(Lo(r,2)^Lo(r,13)^Lo(r,22))+UJ(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+p|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){qh(el)}destroy(){this.set(0,0,0,0,0,0,0,0),qh(this.buffer)}};const B$=VA(()=>new qJ),HJ=B$;function WJ(t,e){const n=e||"hex",r=HJ(to(t,{strict:!1})?Uh(t):t);return n==="bytes"?r:Cs(r)}function KJ(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),i=WJ(e,"bytes");return i.set([n],0),r==="bytes"?i:Nn(i)}function VJ(t){const{commitments:e,version:n}=t,r=t.to??(typeof e[0]=="string"?"hex":"bytes"),i=[];for(const s of e)i.push(KJ({commitment:s,to:r,version:n}));return i}const D$=6,L$=32,h6=4096,j$=L$*h6,U$=j$*D$-1-1*h6*D$;class GJ extends ce{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class ZJ extends ce{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function YJ(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),n=typeof t.data=="string"?no(t.data):t.data,r=ln(n);if(!r)throw new ZJ;if(r>U$)throw new GJ({maxSize:U$,size:r});const i=[];let s=!0,o=0;for(;s;){const a=w3(new Uint8Array(j$));let c=0;for(;c<h6;){const l=n.slice(o,o+(L$-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),s=!1;break}c++,o+=31}i.push(a)}return e==="bytes"?i.map(a=>a.bytes):i.map(a=>Nn(a.bytes))}function JJ(t){const{data:e,kzg:n,to:r}=t,i=t.blobs??YJ({data:e,to:r}),s=t.commitments??R$({blobs:i,kzg:n,to:r}),o=t.proofs??M$({blobs:i,commitments:s,kzg:n,to:r}),a=[];for(let c=0;c<i.length;c++)a.push({blob:i[c],commitment:s[c],proof:o[c]});return a}function QJ(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new nY({transaction:t})}async function qu(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Es(e)}const f6=["blobVersionedHashes","chainId","fees","gas","nonce","type"],F$=new Map;async function Dg(t,e){const{account:n=t.account,blobs:r,chain:i,gas:s,kzg:o,nonce:a,nonceManager:c,parameters:l=f6,type:u}=e,d=n&&sn(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function g(){return f||(f=await Le(t,zo,"getBlock")({blockTag:"latest"}),f)}let p;async function m(){return p||(i?i.id:typeof e.chainId<"u"?e.chainId:(p=await Le(t,qu,"getChainId")({}),p))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await m();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await Le(t,d6,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=R$({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const w=VJ({commitments:y,to:"hex"});h.blobVersionedHashes=w}if(l.includes("sidecars")){const w=M$({blobs:r,commitments:y,kzg:o}),b=JJ({blobs:r,commitments:y,proofs:w,to:"hex"});h.sidecars=b}}if(l.includes("chainId")&&(h.chainId=await m()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=QJ(h)}catch{let y=F$.get(t.uid);if(typeof y>"u"){const w=await g();y=typeof(w==null?void 0:w.baseFeePerGas)=="bigint",F$.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await g(),{maxFeePerGas:w,maxPriorityFeePerGas:b}=await u6(t,{block:y,chain:i,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<b)throw new RJ({maxPriorityFeePerGas:b});h.maxPriorityFeePerGas=b,h.maxFeePerGas=w}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new c6;if(typeof e.gasPrice>"u"){const y=await g(),{gasPrice:w}=await u6(t,{block:y,chain:i,request:h,type:"legacy"});h.gasPrice=w}}return l.includes("gas")&&typeof s>"u"&&(h.gas=await Le(t,p6,"estimateGas")({...h,account:d,prepare:(d==null?void 0:d.type)==="local"?[]:["blobVersionedHashes"]})),Qc(h),delete h.parameters,h}async function p6(t,e){var o,a,c;const{account:n=t.account,prepare:r=!0}=e,i=n?sn(n):void 0,s=(()=>{if(Array.isArray(r))return r;if((i==null?void 0:i.type)!=="local")return["blobVersionedHashes"]})();try{const{accessList:l,authorizationList:u,blobs:d,blobVersionedHashes:h,blockNumber:f,blockTag:g,data:p,gas:m,gasPrice:y,maxFeePerBlobGas:w,maxFeePerGas:b,maxPriorityFeePerGas:v,nonce:C,value:A,stateOverride:$,...R}=r?await Dg(t,{...e,parameters:s}):e,L=(typeof f=="bigint"?Ne(f):void 0)||g,U=s6($),D=await(async()=>{if(R.to)return R.to;if(u&&u.length>0)return await _w({authorization:u[0]}).catch(()=>{throw new ce("`to` is required. Could not infer from `authorizationList`")})})();Qc(e);const j=(c=(a=(o=t.chain)==null?void 0:o.formatters)==null?void 0:a.transactionRequest)==null?void 0:c.format,E=(j||zu)({...kg(R,{format:j}),account:i,accessList:l,authorizationList:u,blobs:d,blobVersionedHashes:h,data:p,gas:m,gasPrice:y,maxFeePerBlobGas:w,maxFeePerGas:b,maxPriorityFeePerGas:v,nonce:C,to:D,value:A},"estimateGas");return BigInt(await t.request({method:"eth_estimateGas",params:U?[E,L??t.experimental_blockTag??"latest",U]:L?[E,L]:[E]}))}catch(l){throw NJ(l,{...e,account:i,chain:t.chain})}}async function XJ(t,e){const{abi:n,address:r,args:i,functionName:s,dataSuffix:o,...a}=e,c=Ui({abi:n,args:i,functionName:s});try{return await Le(t,p6,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?sn(a.account):void 0;throw Du(l,{abi:n,address:r,args:i,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:u==null?void 0:u.address})}}async function z$(t,{address:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest"}){const i=typeof n=="bigint"?Ne(n):void 0,s=await t.request({method:"eth_getBalance",params:[e,i||r]});return BigInt(s)}async function eQ(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const tQ=new Map,nQ=new Map;function rQ(t){const e=(i,s)=>({clear:()=>s.delete(i),get:()=>s.get(i),set:o=>s.set(i,o)}),n=e(t,tQ),r=e(t,nQ);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function iQ(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=rQ(e),i=r.response.get();if(i&&n>0&&Date.now()-i.created.getTime()<n)return i.data;let s=r.promise.get();s||(s=t(),r.promise.set(s));try{const o=await s;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const sQ=t=>`blockNumber.${t}`;async function Lg(t,{cacheTime:e=t.cacheTime}={}){const n=await iQ(()=>t.request({method:"eth_blockNumber"}),{cacheKey:sQ(t.uid),cacheTime:e});return BigInt(n)}async function oQ(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const i=n!==void 0?Ne(n):void 0;let s;return e?s=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):s=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[i||r]},{dedupe:!!i}),Es(s)}async function g6(t,{address:e,blockNumber:n,blockTag:r="latest"}){const i=n!==void 0?Ne(n):void 0,s=await t.request({method:"eth_getCode",params:[e,i||r]},{dedupe:!!i});if(s!=="0x")return s}function tf(t,e){if(!_s(t,{strict:!1}))throw new Zc({address:t});if(!_s(e,{strict:!1}))throw new Zc({address:e});return t.toLowerCase()===e.toLowerCase()}const q$="/docs/contract/decodeEventLog";function m6(t){const{abi:e,data:n,strict:r,topics:i}=t,s=r??!0,[o,...a]=i;if(!o)throw new zV({docsPath:q$});const c=e.find(p=>p.type==="event"&&o===uw(eo(p)));if(!(c&&"name"in c)||c.type!=="event")throw new RA(o,{docsPath:q$});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(p=>!("name"in p&&p.name)),h=d?[]:{},f=u.map((p,m)=>[p,m]).filter(([p])=>"indexed"in p&&p.indexed);for(let p=0;p<f.length;p++){const[m,y]=f[p],w=a[p];if(!w)throw new sw({abiItem:c,param:m});h[d?y:m.name||y]=aQ({param:m,value:w})}const g=u.filter(p=>!("indexed"in p&&p.indexed));if(g.length>0){if(n&&n!=="0x")try{const p=sg(g,n);if(p)if(d)for(let m=0;m<u.length;m++)h[m]=h[m]??p.shift();else for(let m=0;m<g.length;m++)h[g[m].name]=p[m]}catch(p){if(s)throw p instanceof TA||p instanceof nI?new eg({abiItem:c,data:n,params:g,size:ln(n)}):p}else if(s)throw new eg({abiItem:c,data:"0x",params:g,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function aQ({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(sg([t],e)||[])[0]}function y6(t){const{abi:e,args:n,logs:r,strict:i=!0}=t,s=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===uw(u));if(!c)return null;const l=m6({...o,abi:[c],strict:i});return s&&!s.includes(l.eventName)||!cQ({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof RA)return null;if(c instanceof eg||c instanceof sw){if(i)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function cQ(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function i(s,o,a){try{return s.type==="address"?tf(o,a):s.type==="string"||s.type==="bytes"?hr(Uh(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((s,o)=>{if(s==null)return!0;const a=n[o];return a?(Array.isArray(s)?s:[s]).some(l=>i(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([s,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===s);return a?(Array.isArray(o)?o:[o]).some(l=>i(a,l,e[s])):!1}):!1}function Fa(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function w6(t,{address:e,blockHash:n,fromBlock:r,toBlock:i,event:s,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(s?[s]:void 0);let d=[];u&&(d=[u.flatMap(p=>Bg({abi:[p],eventName:p.name,args:o?void 0:a}))],s&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?Ne(r):r,toBlock:typeof i=="bigint"?Ne(i):i}]});const f=h.map(g=>Fa(g));return u?y6({abi:u,args:a,logs:f,strict:l}):f}async function H$(t,e){const{abi:n,address:r,args:i,blockHash:s,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?Tu({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return Le(t,w6,"getLogs")({address:r,args:i,blockHash:s,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class lQ extends ce{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function uQ(t,e){const{address:n,factory:r,factoryData:i}=e;try{const[s,o,a,c,l,u,d]=await Le(t,xs,"readContract")({abi:dQ,address:n,functionName:"eip712Domain",factory:r,factoryData:i});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:s}}catch(s){const o=s;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new lQ({address:n}):o}}const dQ=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function hQ(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function fQ(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:i}){const s=typeof n=="bigint"?Ne(n):void 0,o=await t.request({method:"eth_feeHistory",params:[Ne(e),s||r,i]},{dedupe:!!s});return hQ(o)}async function Sw(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const i=r.map(s=>Fa(s));return!("abi"in e)||!e.abi?i:y6({abi:e.abi,logs:i,strict:n})}async function pQ(t,{filter:e}){const n=e.strict??!1,i=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(s=>Fa(s));return e.abi?y6({abi:e.abi,logs:i,strict:n}):i}async function gQ({address:t,authorization:e,signature:n}){return tf(ai(t),await _w({authorization:e,signature:n}))}const xw=new rg(8192);function mQ(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(xw.get(n))return xw.get(n);const r=t().finally(()=>xw.delete(n));return xw.set(n,r),r}async function Aw(t){return new Promise(e=>setTimeout(e,t))}function Hu(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((i,s)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await Aw(u),o({count:a+1})};try{const l=await t();i(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});s(l)}};o()})}function yQ(t,e={}){return async(n,r={})=>{var d;const{dedupe:i=!1,methods:s,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=s==null?void 0:s.exclude)!=null&&d.includes(l))throw new Bu(new Error("method not supported"),{method:l});if(s!=null&&s.include&&!s.include.includes(l))throw new Bu(new Error("method not supported"),{method:l});const u=i?jh(`${c}.${gn(n)}`):void 0;return mQ(()=>Hu(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case hg.code:throw new hg(f);case fg.code:throw new fg(f);case pg.code:throw new pg(f,{method:n.method});case gg.code:throw new gg(f);case Ru.code:throw new Ru(f);case Mu.code:throw new Mu(f);case mg.code:throw new mg(f);case jo.code:throw new jo(f);case Yh.code:throw new Yh(f);case Bu.code:throw new Bu(f,{method:n.method});case Jh.code:throw new Jh(f);case yg.code:throw new yg(f);case Ut.code:throw new Ut(f);case wg.code:throw new wg(f);case bg.code:throw new bg(f);case vg.code:throw new vg(f);case Eg.code:throw new Eg(f);case ro.code:throw new ro(f);case Qh.code:throw new Qh(f);case Cg.code:throw new Cg(f);case _g.code:throw new _g(f);case Sg.code:throw new Sg(f);case xg.code:throw new xg(f);case Ag.code:throw new Ag(f);case Xh.code:throw new Xh(f);case 5e3:throw new Ut(f);default:throw h instanceof ce?h:new pY(f)}}},{delay:({count:h,error:f})=>{var g;if(f&&f instanceof ku){const p=(g=f==null?void 0:f.headers)==null?void 0:g.get("Retry-After");if(p!=null&&p.match(/\d/))return Number.parseInt(p,10)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>wQ(h)}),{enabled:i,id:u})}}function wQ(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Jh.code||t.code===Ru.code:t instanceof ku&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}class bQ extends ce{constructor({callbackSelector:e,cause:n,data:r,extraData:i,sender:s,urls:o}){var a;super(n.shortMessage||"An error occurred while fetching for an offchain result.",{cause:n,metaMessages:[...n.metaMessages||[],(a=n.metaMessages)!=null&&a.length?"":[],"Offchain Gateway Call:",o&&["  Gateway URL(s):",...o.map(c=>`    ${ug(c)}`)],`  Sender: ${s}`,`  Data: ${r}`,`  Callback selector: ${e}`,`  Extra data: ${i}`].flat(),name:"OffchainLookupError"})}}class vQ extends ce{constructor({result:e,url:n}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${ug(n)}`,`Response: ${gn(e)}`],name:"OffchainLookupResponseMalformedError"})}}class EQ extends ce{constructor({sender:e,to:n}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${n}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}const CQ="0x556f1830",W$={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function _Q(t,{blockNumber:e,blockTag:n,data:r,to:i}){const{args:s}=PI({data:r,abi:[W$]}),[o,a,c,l,u]=s,{ccipRead:d}=t,h=d&&typeof(d==null?void 0:d.request)=="function"?d.request:K$;try{if(!tf(i,o))throw new EQ({sender:o,to:i});const f=a.includes(dg)?await LI({data:c,ccipRequest:h}):await h({data:c,sender:o,urls:a}),{data:g}=await Rg(t,{blockNumber:e,blockTag:n,data:Li([l,Jc([{type:"bytes"},{type:"bytes"}],[f,u])]),to:i});return g}catch(f){throw new bQ({callbackSelector:l,cause:f,data:r,extraData:u,sender:o,urls:a})}}async function K$({data:t,sender:e,urls:n}){var i;let r=new Error("An unknown error occurred.");for(let s=0;s<n.length;s++){const o=n[s],a=o.includes("{data}")?"GET":"POST",c=a==="POST"?{data:t,sender:e}:void 0,l=a==="POST"?{"Content-Type":"application/json"}:{};try{const u=await fetch(o.replace("{sender}",e.toLowerCase()).replace("{data}",t),{body:JSON.stringify(c),headers:l,method:a});let d;if((i=u.headers.get("Content-Type"))!=null&&i.startsWith("application/json")?d=(await u.json()).data:d=await u.text(),!u.ok){r=new ku({body:c,details:d!=null&&d.error?gn(d.error):u.statusText,headers:u.headers,status:u.status,url:o});continue}if(!to(d)){r=new vQ({result:d,url:o});continue}return d}catch(u){r=new ku({body:c,details:u.message,url:o})}}throw r}const SQ=Object.freeze(Object.defineProperty({__proto__:null,ccipRequest:K$,offchainLookup:_Q,offchainLookupAbiItem:W$,offchainLookupSignature:CQ},Symbol.toStringTag,{value:"Module"}));function b6({chain:t,currentChainId:e}){if(!t)throw new VZ;if(e!==t.id)throw new KZ({chain:t,currentChainId:e})}function v6(t,{docsPath:e,...n}){const r=(()=>{const i=Ew(t,n);return i instanceof Ng?t:i})();return new rY(r,{docsPath:e,...n})}const V$={"0x0":"reverted","0x1":"success"};function G$(t,e){const n={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>Fa(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Es(t.transactionIndex):null,status:t.status?V$[t.status]:null,type:t.type?O$[t.type]||t.type:null};return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),n}function E6(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((i,s)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():s(e)},n)),i(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&s(e),s(a)}finally{clearTimeout(o)}})()})}function xQ(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Z$=xQ();function AQ(t,e={}){return{async request(n){var h;const{body:r,fetchFn:i=e.fetchFn??fetch,onRequest:s=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=n,c={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:l,method:u,signal:d}=c;try{const f=await E6(async({signal:p})=>{const m={...c,body:Array.isArray(r)?gn(r.map(v=>({jsonrpc:"2.0",id:v.id??Z$.take(),...v}))):gn({jsonrpc:"2.0",id:r.id??Z$.take(),...r}),headers:{"Content-Type":"application/json",...l},method:u||"POST",signal:d||(a>0?p:null)},y=new Request(t,m),w=await(s==null?void 0:s(y,m))??{...m,url:t};return await i(w.url??t,w)},{errorInstance:new UI({body:r,url:t}),timeout:a,signal:!0});o&&await o(f);let g;if((h=f.headers.get("Content-Type"))!=null&&h.startsWith("application/json"))g=await f.json();else{g=await f.text();try{g=JSON.parse(g||"{}")}catch(p){if(f.ok)throw p;g={error:g}}}if(!f.ok)throw new ku({body:r,details:gn(g.error)||f.statusText,headers:f.headers,status:f.status,url:t});return g}catch(f){throw f instanceof ku||f instanceof UI?f:new ku({body:r,cause:f,url:t})}}}}const IQ=`Ethereum Signed Message:
`;function $Q(t){const e=(()=>typeof t=="string"?jh(t):typeof t.raw=="string"?t.raw:Nn(t.raw))(),n=jh(`${IQ}${ln(e)}`);return Li([n,e])}function Y$(t,e){return hr($Q(t),e)}class PQ extends ce{constructor({domain:e}){super(`Invalid domain "${gn(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class OQ extends ce{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class TQ extends ce{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function NQ(t){const{domain:e,message:n,primaryType:r,types:i}=t,s=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=(()=>i.EIP712Domain?e?s(i.EIP712Domain,e):{}:{})(),a=(()=>{if(r!=="EIP712Domain")return s(i[r],n)})();return gn({domain:o,message:a,primaryType:r,types:i})}function J$(t){const{domain:e,message:n,primaryType:r,types:i}=t,s=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(oI);if(h&&(typeof d=="number"||typeof d=="bigint")){const[p,m,y]=h;Ne(d,{signed:m==="int",size:Number.parseInt(y,10)/8})}if(u==="address"&&typeof d=="string"&&!_s(d))throw new Zc({address:d});const f=u.match(LG);if(f){const[p,m]=f;if(m&&ln(d)!==Number.parseInt(m,10))throw new WV({expectedSize:Number.parseInt(m,10),givenSize:ln(d)})}const g=i[u];g&&(kQ(u),s(g,d))}};if(i.EIP712Domain&&e){if(typeof e!="object")throw new PQ({domain:e});s(i.EIP712Domain,e)}if(r!=="EIP712Domain")if(i[r])s(i[r],n);else throw new OQ({primaryType:r,types:i})}function Q$({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function kQ(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new TQ({type:t})}function RQ(t){const{domain:e={},message:n,primaryType:r}=t,i={EIP712Domain:Q$({domain:e}),...t.types};J$({domain:e,message:n,primaryType:r,types:i});const s=["0x1901"];return e&&s.push(MQ({domain:e,types:i})),r!=="EIP712Domain"&&s.push(X$({data:n,primaryType:r,types:i})),hr(Li(s))}function MQ({domain:t,types:e}){return X$({data:t,primaryType:"EIP712Domain",types:e})}function X$({data:t,primaryType:e,types:n}){const r=e7({data:t,primaryType:e,types:n});return hr(r)}function e7({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],i=[BQ({primaryType:e,types:n})];for(const s of n[e]){const[o,a]=n7({types:n,name:s.name,type:s.type,value:t[s.name]});r.push(o),i.push(a)}return Jc(r,i)}function BQ({primaryType:t,types:e}){const n=Cs(DQ({primaryType:t,types:e}));return hr(n)}function DQ({primaryType:t,types:e}){let n="";const r=t7({primaryType:t,types:e});r.delete(t);const i=[t,...Array.from(r).sort()];for(const s of i)n+=`${s}(${e[s].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function t7({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),i=r==null?void 0:r[0];if(n.has(i)||e[i]===void 0)return n;n.add(i);for(const s of e[i])t7({primaryType:s.type,types:e},n);return n}function n7({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},hr(e7({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},hr(r)];if(n==="string")return[{type:"bytes32"},hr(Cs(r))];if(n.lastIndexOf("]")===n.length-1){const i=n.slice(0,n.lastIndexOf("[")),s=r.map(o=>n7({name:e,type:i,types:t,value:o}));return[{type:"bytes32"},hr(Jc(s.map(([o])=>o),s.map(([,o])=>o)))]}return[{type:n},r]}let LQ=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const C6={checksum:new LQ(8192)}.checksum;function r7(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=eI(OY(t));return n==="Bytes"?r:so(r)}const jQ=/^0x[a-fA-F0-9]{40}$/;function Iw(t,e={}){const{strict:n=!0}=e;if(!jQ.test(t))throw new s7({address:t,cause:new UQ});if(n){if(t.toLowerCase()===t)return;if(i7(t)!==t)throw new s7({address:t,cause:new FQ})}}function i7(t){if(C6.has(t))return C6.get(t);Iw(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=r7(NY(e),{as:"Bytes"}),r=e.split("");for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&r[s]&&(r[s]=r[s].toUpperCase()),(n[s>>1]&15)>=8&&r[s+1]&&(r[s+1]=r[s+1].toUpperCase());const i=`0x${r.join("")}`;return C6.set(t,i),i}function _6(t,e={}){const{strict:n=!0}=e??{};try{return Iw(t,{strict:n}),!0}catch{return!1}}class s7 extends rt{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class UQ extends rt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class FQ extends rt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const zQ=/^(.*)\[([0-9]*)\]$/,qQ=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,o7=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,a7=2n**256n-1n;function nf(t,e,n){const{checksumAddress:r,staticPosition:i}=n,s=I6(e.type);if(s){const[o,a]=s;return WQ(t,{...e,type:a},{checksumAddress:r,length:o,staticPosition:i})}if(e.type==="tuple")return ZQ(t,e,{checksumAddress:r,staticPosition:i});if(e.type==="address")return HQ(t,{checksum:r});if(e.type==="bool")return KQ(t);if(e.type.startsWith("bytes"))return VQ(t,e,{staticPosition:i});if(e.type.startsWith("uint")||e.type.startsWith("int"))return GQ(t,e);if(e.type==="string")return YQ(t,{staticPosition:i});throw new O6(e.type)}const c7=32,S6=32;function HQ(t,e={}){const{checksum:n=!1}=e,r=t.readBytes(32);return[(s=>n?i7(s):s)(so(RY(r,-20))),32]}function WQ(t,e,n){const{checksumAddress:r,length:i,staticPosition:s}=n;if(!i){const c=Ua(t.readBytes(S6)),l=s+c,u=l+c7;t.setPosition(l);const d=Ua(t.readBytes(c7)),h=jg(e);let f=0;const g=[];for(let p=0;p<d;++p){t.setPosition(u+(h?p*32:f));const[m,y]=nf(t,e,{checksumAddress:r,staticPosition:u});f+=y,g.push(m)}return t.setPosition(s+32),[g,32]}if(jg(e)){const c=Ua(t.readBytes(S6)),l=s+c,u=[];for(let d=0;d<i;++d){t.setPosition(l+d*32);const[h]=nf(t,e,{checksumAddress:r,staticPosition:l});u.push(h)}return t.setPosition(s+32),[u,32]}let o=0;const a=[];for(let c=0;c<i;++c){const[l,u]=nf(t,e,{checksumAddress:r,staticPosition:s+o});o+=u,a.push(l)}return[a,o]}function KQ(t){return[BY(t.readBytes(32),{size:32}),32]}function VQ(t,e,{staticPosition:n}){const[r,i]=e.type.split("bytes");if(!i){const o=Ua(t.readBytes(32));t.setPosition(n+o);const a=Ua(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[so(c),32]}return[so(t.readBytes(Number.parseInt(i,10),32)),32]}function GQ(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),i=t.readBytes(32);return[r>48?MY(i,{signed:n}):Ua(i,{signed:n}),32]}function ZQ(t,e,n){const{checksumAddress:r,staticPosition:i}=n,s=e.components.length===0||e.components.some(({name:c})=>!c),o=s?[]:{};let a=0;if(jg(e)){const c=Ua(t.readBytes(S6)),l=i+c;for(let u=0;u<e.components.length;++u){const d=e.components[u];t.setPosition(l+a);const[h,f]=nf(t,d,{checksumAddress:r,staticPosition:l});a+=f,o[s?u:d==null?void 0:d.name]=h}return t.setPosition(i+32),[o,32]}for(let c=0;c<e.components.length;++c){const l=e.components[c],[u,d]=nf(t,l,{checksumAddress:r,staticPosition:i});o[s?c:l==null?void 0:l.name]=u,a+=d}return[o,a]}function YQ(t,{staticPosition:e}){const n=Ua(t.readBytes(32)),r=e+n;t.setPosition(r);const i=Ua(t.readBytes(32));if(i===0)return t.setPosition(e+32),["",32];const s=t.readBytes(i,32),o=DY(e$(s));return t.setPosition(e+32),[o,32]}function JQ({checksumAddress:t,parameters:e,values:n}){const r=[];for(let i=0;i<e.length;i++)r.push(x6({checksumAddress:t,parameter:e[i],value:n[i]}));return r}function x6({checksumAddress:t=!1,parameter:e,value:n}){const r=e,i=I6(r.type);if(i){const[s,o]=i;return XQ(n,{checksumAddress:t,length:s,parameter:{...r,type:o}})}if(r.type==="tuple")return iX(n,{checksumAddress:t,parameter:r});if(r.type==="address")return QQ(n,{checksum:t});if(r.type==="bool")return tX(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const s=r.type.startsWith("int"),[,,o="256"]=o7.exec(r.type)??[];return nX(n,{signed:s,size:Number(o)})}if(r.type.startsWith("bytes"))return eX(n,{type:r.type});if(r.type==="string")return rX(n);throw new O6(r.type)}function A6(t){let e=0;for(let s=0;s<t.length;s++){const{dynamic:o,encoded:a}=t[s];o?e+=32:e+=qi(a)}const n=[],r=[];let i=0;for(let s=0;s<t.length;s++){const{dynamic:o,encoded:a}=t[s];o?(n.push(qr(e+i,{size:32})),r.push(a),i+=qi(a)):n.push(a)}return io(...n,...r)}function QQ(t,e){const{checksum:n=!1}=e;return Iw(t,{strict:n}),{dynamic:!1,encoded:ju(t.toLowerCase())}}function XQ(t,e){const{checksumAddress:n,length:r,parameter:i}=e,s=r===null;if(!Array.isArray(t))throw new fX(t);if(!s&&t.length!==r)throw new hX({expectedLength:r,givenLength:t.length,type:`${i.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=x6({checksumAddress:n,parameter:i,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(s||o){const c=A6(a);if(s){const l=qr(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?io(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:io(...a.map(({encoded:c})=>c))}}function eX(t,{type:e}){const[,n]=e.split("bytes"),r=qi(t);if(!n){let i=t;return r%32!==0&&(i=Uu(i,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:io(ju(qr(r,{size:32})),i)}}if(r!==Number.parseInt(n,10))throw new d7({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:Uu(t)}}function tX(t){if(typeof t!="boolean")throw new rt(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:ju(n$(t))}}function nX(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,i=e?-r-1n:0n;if(t>r||t<i)throw new s$({max:r.toString(),min:i.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:qr(t,{size:32,signed:e})}}function rX(t){const e=K3(t),n=Math.ceil(qi(e)/32),r=[];for(let i=0;i<n;i++)r.push(Uu(Fo(e,i*32,(i+1)*32)));return{dynamic:!0,encoded:io(Uu(qr(qi(e),{size:32})),...r)}}function iX(t,e){const{checksumAddress:n,parameter:r}=e;let i=!1;const s=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=x6({checksumAddress:n,parameter:a,value:t[c]});s.push(l),l.dynamic&&(i=!0)}return{dynamic:i,encoded:i?A6(s):io(...s.map(({encoded:o})=>o))}}function I6(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function jg(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(jg);const n=I6(t.type);return!!(n&&jg({...t,type:n[1]}))}const sX={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new cX({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new aX({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new l7({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new l7({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function oX(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(sX);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}class l7 extends rt{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class aX extends rt{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class cX extends rt{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function lX(t,e,n={}){const{as:r="Array",checksumAddress:i=!1}=n,s=typeof e=="string"?XI(e):e,o=oX(s);if(Uo(s)===0&&t.length>0)throw new dX;if(Uo(s)&&Uo(s)<32)throw new uX({data:typeof e=="string"?e:so(e),parameters:t,size:Uo(s)});let a=0;const c=r==="Array"?[]:{};for(let l=0;l<t.length;++l){const u=t[l];o.setPosition(a);const[d,h]=nf(o,u,{checksumAddress:i,staticPosition:0});a+=h,r==="Array"?c.push(d):c[u.name??l]=d}return c}function $6(t,e,n){const{checksumAddress:r=!1}=n??{};if(t.length!==e.length)throw new h7({expectedLength:t.length,givenLength:e.length});const i=JQ({checksumAddress:r,parameters:t,values:e}),s=A6(i);return s.length===0?"0x":s}function P6(t,e){if(t.length!==e.length)throw new h7({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const i=t[r],s=e[r];n.push(P6.encode(i,s))}return io(...n)}(function(t){function e(n,r,i=!1){if(n==="address"){const c=r;return Iw(c),ju(c.toLowerCase(),i?32:0)}if(n==="string")return K3(r);if(n==="bytes")return r;if(n==="bool")return ju(n$(r),i?32:1);const s=n.match(o7);if(s){const[c,l,u="256"]=s,d=Number.parseInt(u,10)/8;return qr(r,{size:i?32:d,signed:l==="int"})}const o=n.match(qQ);if(o){const[c,l]=o;if(Number.parseInt(l,10)!==(r.length-2)/2)throw new d7({expectedSize:Number.parseInt(l,10),value:r});return Uu(r,i?32:0)}const a=n.match(zQ);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":io(...u)}throw new O6(n)}t.encode=e})(P6||(P6={}));function u7(t){return Array.isArray(t)&&typeof t[0]=="string"||typeof t=="string"?_I(t):t}class uX extends rt{constructor({data:e,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Vh(n)})`,`Data:   ${e} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class dX extends rt{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class hX extends rt{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class d7 extends rt{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${qi(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class h7 extends rt{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class fX extends rt{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class O6 extends rt{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}let f7=class extends g3{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,fG(e);const r=aw(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),qh(s)}update(e){return zh(this),this.iHash.update(e),this}digestInto(e){zh(this),Ou(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const p7=(t,e,n)=>new f7(t,e).update(n).digest();p7.create=(t,e)=>new f7(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const di=BigInt(0),Hr=BigInt(1),Wu=BigInt(2),pX=BigInt(3),g7=BigInt(4),m7=BigInt(5),y7=BigInt(8);function hi(t,e){const n=t%e;return n>=di?n:e+n}function As(t,e,n){let r=t;for(;e-- >di;)r*=r,r%=n;return r}function T6(t,e){if(t===di)throw new Error("invert: expected non-zero number");if(e<=di)throw new Error("invert: expected positive modulus, got "+e);let n=hi(t,e),r=e,i=di,s=Hr;for(;n!==di;){const a=r/n,c=r%n,l=i-s*a;r=n,n=c,i=s,s=l}if(r!==Hr)throw new Error("invert: does not exist");return hi(i,e)}function w7(t,e){const n=(t.ORDER+Hr)/g7,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function gX(t,e){const n=(t.ORDER-m7)/y7,r=t.mul(e,Wu),i=t.pow(r,n),s=t.mul(e,i),o=t.mul(t.mul(s,Wu),i),a=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function mX(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Hr,n=0;for(;e%Wu===di;)e/=Wu,n++;let r=Wu;const i=N6(t);for(;v7(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return w7;let s=i.pow(r,e);const o=(e+Hr)/Wu;return function(c,l){if(c.is0(l))return l;if(v7(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,s),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let g=1,p=c.sqr(h);for(;!c.eql(p,c.ONE);)if(g++,p=c.sqr(p),g===u)throw new Error("Cannot find square root");const m=Hr<<BigInt(u-g-1),y=c.pow(d,m);u=g,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function yX(t){return t%g7===pX?w7:t%y7===m7?gX:mX(t)}const wX=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function bX(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=wX.reduce((r,i)=>(r[i]="function",r),e);return mw(t,n)}function vX(t,e,n){if(n<di)throw new Error("invalid exponent, negatives unsupported");if(n===di)return t.ONE;if(n===Hr)return e;let r=t.ONE,i=e;for(;n>di;)n&Hr&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Hr;return r}function b7(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),s),r}function v7(t,e){const n=(t.ORDER-Hr)/Wu,r=t.pow(e,n),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function E7(t,e){e!==void 0&&tg(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function N6(t,e,n=!1,r={}){if(t<=di)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=E7(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:gw(i),ZERO:di,ONE:Hr,create:c=>hi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return di<=c&&c<t},is0:c=>c===di,isOdd:c=>(c&Hr)===Hr,neg:c=>hi(-c,t),eql:(c,l)=>c===l,sqr:c=>hi(c*c,t),add:(c,l)=>hi(c+l,t),sub:(c,l)=>hi(c-l,t),mul:(c,l)=>hi(c*l,t),pow:(c,l)=>vX(a,c,l),div:(c,l)=>hi(c*T6(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>T6(c,t),sqrt:r.sqrt||(c=>(o||(o=yX(t)),o(a,c))),toBytes:c=>n?WI(c,s):Og(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?HI(c):Lu(c)},invertBatch:c=>b7(a,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(a)}function C7(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function _7(t){const e=C7(t);return e+Math.ceil(e/2)}function EX(t,e,n=!1){const r=t.length,i=C7(e),s=_7(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?HI(t):Lu(t),a=hi(o,e-Hr)+Hr;return n?WI(a,i):Og(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const S7=BigInt(0),k6=BigInt(1);function R6(t,e){const n=e.negate();return t?n:e}function x7(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function M6(t,e){x7(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),i=2**t,s=gw(t),o=BigInt(t);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function A7(t,e,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(t&i),c=t>>o;a>r&&(a-=s,c+=k6);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function CX(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function _X(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const B6=new WeakMap,I7=new WeakMap;function D6(t){return I7.get(t)||1}function SX(t,e){return{constTimeNegate:R6,hasPrecomputes(n){return D6(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>S7;)r&k6&&(i=i.add(s)),s=s.double(),r>>=k6;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=M6(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){let s=t.ZERO,o=t.BASE;const a=M6(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:g}=A7(i,c,a);i=l,d?o=o.add(R6(f,r[g])):s=s.add(R6(h,r[u]))}return{p:s,f:o}},wNAFUnsafe(n,r,i,s=t.ZERO){const o=M6(n,e);for(let a=0;a<o.windows&&i!==S7;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=A7(i,a,o);if(i=c,!u){const h=r[l];s=s.add(d?h.negate():h)}}return s},getPrecomputes(n,r,i){let s=B6.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&B6.set(r,i(s))),s},wNAFCached(n,r,i){const s=D6(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=D6(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){x7(r,e),I7.set(n,r),B6.delete(n)}}}function xX(t,e,n,r){CX(n,t),_X(r,e);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=yY(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=gw(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let p=0;p<s;p++){const m=r[p],y=Number(m>>BigInt(f)&l);u[y]=u[y].add(n[p])}let g=o;for(let p=u.length-1,m=o;p>0;p--)m=m.add(u[p]),g=g.add(m);if(h=h.add(g),f!==0)for(let p=0;p<c;p++)h=h.double()}return h}function $7(t){return bX(t.Fp),mw(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...E7(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function P7(t){t.lowS!==void 0&&$g("lowS",t.lowS),t.prehash!==void 0&&$g("prehash",t.prehash)}function AX(t){const e=$7(t);mw(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}const za={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(t,e)=>{const{Err:n}=za;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=hw(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?hw(i.length/2|128):"";return hw(t)+s+i+e},decode(t,e){const{Err:n}=za;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=za;if(t<qa)throw new e("integer: negative integers are not allowed");let n=hw(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=za;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Lu(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=za,i=Ss("signature",t),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=za,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}};function L6(t,e){return Pg(Og(t,e))}const qa=BigInt(0),Fn=BigInt(1);BigInt(2);const j6=BigInt(3),IX=BigInt(4);function $X(t){const e=AX(t),{Fp:n}=e,r=N6(e.n,e.nBitLength),i=e.toBytes||((b,v,C)=>{const A=v.toAffine();return pw(Uint8Array.from([4]),n.toBytes(A.x),n.toBytes(A.y))}),s=e.fromBytes||(b=>{const v=b.subarray(1),C=n.fromBytes(v.subarray(0,n.BYTES)),A=n.fromBytes(v.subarray(n.BYTES,2*n.BYTES));return{x:C,y:A}});function o(b){const{a:v,b:C}=e,A=n.sqr(b),$=n.mul(A,b);return n.add(n.add($,n.mul(b,v)),C)}function a(b,v){const C=n.sqr(v),A=o(b);return n.eql(C,A)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,j6),IX),l=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,l)))throw new Error("bad curve params: a or b");function u(b){return H3(b,Fn,e.n)}function d(b){const{allowedPrivateKeyLengths:v,nByteLength:C,wrapPrivateKey:A,n:$}=e;if(v&&typeof b!="bigint"){if(Ig(b)&&(b=Pg(b)),typeof b!="string"||!v.includes(b.length))throw new Error("invalid private key");b=b.padStart(C*2,"0")}let R;try{R=typeof b=="bigint"?b:Lu(Ss("private key",b,C))}catch{throw new Error("invalid private key, expected hex or "+C+" bytes, got "+typeof b)}return A&&(R=hi(R,$)),ef("private key",R,Fn,$),R}function h(b){if(!(b instanceof p))throw new Error("ProjectivePoint expected")}const f=VI((b,v)=>{const{px:C,py:A,pz:$}=b;if(n.eql($,n.ONE))return{x:C,y:A};const R=b.is0();v==null&&(v=R?n.ONE:n.inv($));const P=n.mul(C,v),L=n.mul(A,v),U=n.mul($,v);if(R)return{x:n.ZERO,y:n.ZERO};if(!n.eql(U,n.ONE))throw new Error("invZ was invalid");return{x:P,y:L}}),g=VI(b=>{if(b.is0()){if(e.allowInfinityPoint&&!n.is0(b.py))return;throw new Error("bad point: ZERO")}const{x:v,y:C}=b.toAffine();if(!n.isValid(v)||!n.isValid(C))throw new Error("bad point: x or y not FE");if(!a(v,C))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(v,C,A){if(v==null||!n.isValid(v))throw new Error("x required");if(C==null||!n.isValid(C)||n.is0(C))throw new Error("y required");if(A==null||!n.isValid(A))throw new Error("z required");this.px=v,this.py=C,this.pz=A,Object.freeze(this)}static fromAffine(v){const{x:C,y:A}=v||{};if(!v||!n.isValid(C)||!n.isValid(A))throw new Error("invalid affine point");if(v instanceof p)throw new Error("projective point not allowed");const $=R=>n.eql(R,n.ZERO);return $(C)&&$(A)?p.ZERO:new p(C,A,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const C=b7(n,v.map(A=>A.pz));return v.map((A,$)=>A.toAffine(C[$])).map(p.fromAffine)}static fromHex(v){const C=p.fromAffine(s(Ss("pointHex",v)));return C.assertValidity(),C}static fromPrivateKey(v){return p.BASE.multiply(d(v))}static msm(v,C){return xX(p,r,v,C)}_setWindowSize(v){w.setWindowSize(this,v)}assertValidity(){g(this)}hasEvenY(){const{y:v}=this.toAffine();if(n.isOdd)return!n.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){h(v);const{px:C,py:A,pz:$}=this,{px:R,py:P,pz:L}=v,U=n.eql(n.mul(C,L),n.mul(R,$)),D=n.eql(n.mul(A,L),n.mul(P,$));return U&&D}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:v,b:C}=e,A=n.mul(C,j6),{px:$,py:R,pz:P}=this;let L=n.ZERO,U=n.ZERO,D=n.ZERO,j=n.mul($,$),I=n.mul(R,R),E=n.mul(P,P),S=n.mul($,R);return S=n.add(S,S),D=n.mul($,P),D=n.add(D,D),L=n.mul(v,D),U=n.mul(A,E),U=n.add(L,U),L=n.sub(I,U),U=n.add(I,U),U=n.mul(L,U),L=n.mul(S,L),D=n.mul(A,D),E=n.mul(v,E),S=n.sub(j,E),S=n.mul(v,S),S=n.add(S,D),D=n.add(j,j),j=n.add(D,j),j=n.add(j,E),j=n.mul(j,S),U=n.add(U,j),E=n.mul(R,P),E=n.add(E,E),j=n.mul(E,S),L=n.sub(L,j),D=n.mul(E,I),D=n.add(D,D),D=n.add(D,D),new p(L,U,D)}add(v){h(v);const{px:C,py:A,pz:$}=this,{px:R,py:P,pz:L}=v;let U=n.ZERO,D=n.ZERO,j=n.ZERO;const I=e.a,E=n.mul(e.b,j6);let S=n.mul(C,R),k=n.mul(A,P),_=n.mul($,L),x=n.add(C,A),T=n.add(R,P);x=n.mul(x,T),T=n.add(S,k),x=n.sub(x,T),T=n.add(C,$);let M=n.add(R,L);return T=n.mul(T,M),M=n.add(S,_),T=n.sub(T,M),M=n.add(A,$),U=n.add(P,L),M=n.mul(M,U),U=n.add(k,_),M=n.sub(M,U),j=n.mul(I,T),U=n.mul(E,_),j=n.add(U,j),U=n.sub(k,j),j=n.add(k,j),D=n.mul(U,j),k=n.add(S,S),k=n.add(k,S),_=n.mul(I,_),T=n.mul(E,T),k=n.add(k,_),_=n.sub(S,_),_=n.mul(I,_),T=n.add(T,_),S=n.mul(k,T),D=n.add(D,S),S=n.mul(M,T),U=n.mul(x,U),U=n.sub(U,S),S=n.mul(x,k),j=n.mul(M,j),j=n.add(j,S),new p(U,D,j)}subtract(v){return this.add(v.negate())}is0(){return this.equals(p.ZERO)}wNAF(v){return w.wNAFCached(this,v,p.normalizeZ)}multiplyUnsafe(v){const{endo:C,n:A}=e;ef("scalar",v,qa,A);const $=p.ZERO;if(v===qa)return $;if(this.is0()||v===Fn)return this;if(!C||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,v,p.normalizeZ);let{k1neg:R,k1:P,k2neg:L,k2:U}=C.splitScalar(v),D=$,j=$,I=this;for(;P>qa||U>qa;)P&Fn&&(D=D.add(I)),U&Fn&&(j=j.add(I)),I=I.double(),P>>=Fn,U>>=Fn;return R&&(D=D.negate()),L&&(j=j.negate()),j=new p(n.mul(j.px,C.beta),j.py,j.pz),D.add(j)}multiply(v){const{endo:C,n:A}=e;ef("scalar",v,Fn,A);let $,R;if(C){const{k1neg:P,k1:L,k2neg:U,k2:D}=C.splitScalar(v);let{p:j,f:I}=this.wNAF(L),{p:E,f:S}=this.wNAF(D);j=w.constTimeNegate(P,j),E=w.constTimeNegate(U,E),E=new p(n.mul(E.px,C.beta),E.py,E.pz),$=j.add(E),R=I.add(S)}else{const{p:P,f:L}=this.wNAF(v);$=P,R=L}return p.normalizeZ([$,R])[0]}multiplyAndAddUnsafe(v,C,A){const $=p.BASE,R=(L,U)=>U===qa||U===Fn||!L.equals($)?L.multiplyUnsafe(U):L.multiply(U),P=R(this,C).add(R(v,A));return P.is0()?void 0:P}toAffine(v){return f(this,v)}isTorsionFree(){const{h:v,isTorsionFree:C}=e;if(v===Fn)return!0;if(C)return C(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:C}=e;return v===Fn?this:C?C(p,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return $g("isCompressed",v),this.assertValidity(),i(p,this,v)}toHex(v=!0){return $g("isCompressed",v),Pg(this.toRawBytes(v))}}p.BASE=new p(e.Gx,e.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const{endo:m,nBitLength:y}=e,w=SX(p,m?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:u}}function PX(t){const e=$7(t);return mw(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function OX(t){const e=PX(t),{Fp:n,n:r,nByteLength:i,nBitLength:s}=e,o=n.BYTES+1,a=2*n.BYTES+1;function c(E){return hi(E,r)}function l(E){return T6(E,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:f}=$X({...e,toBytes(E,S,k){const _=S.toAffine(),x=n.toBytes(_.x),T=pw;return $g("isCompressed",k),k?T(Uint8Array.from([S.hasEvenY()?2:3]),x):T(Uint8Array.from([4]),x,n.toBytes(_.y))},fromBytes(E){const S=E.length,k=E[0],_=E.subarray(1);if(S===o&&(k===2||k===3)){const x=Lu(_);if(!H3(x,Fn,n.ORDER))throw new Error("Point is not on curve");const T=h(x);let M;try{M=n.sqrt(T)}catch(B){const F=B instanceof Error?": "+B.message:"";throw new Error("Point is not on curve"+F)}const O=(M&Fn)===Fn;return(k&1)===1!==O&&(M=n.neg(M)),{x,y:M}}else if(S===a&&k===4){const x=n.fromBytes(_.subarray(0,n.BYTES)),T=n.fromBytes(_.subarray(n.BYTES,2*n.BYTES));return{x,y:T}}else{const x=o,T=a;throw new Error("invalid Point, expected length of "+x+", or uncompressed "+T+", got "+S)}}});function g(E){const S=r>>Fn;return E>S}function p(E){return g(E)?c(-E):E}const m=(E,S,k)=>Lu(E.slice(S,k));class y{constructor(S,k,_){ef("r",S,Fn,r),ef("s",k,Fn,r),this.r=S,this.s=k,_!=null&&(this.recovery=_),Object.freeze(this)}static fromCompact(S){const k=i;return S=Ss("compactSignature",S,k*2),new y(m(S,0,k),m(S,k,2*k))}static fromDER(S){const{r:k,s:_}=za.toSig(Ss("DER",S));return new y(k,_)}assertValidity(){}addRecoveryBit(S){return new y(this.r,this.s,S)}recoverPublicKey(S){const{r:k,s:_,recovery:x}=this,T=$(Ss("msgHash",S));if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");const M=x===2||x===3?k+e.n:k;if(M>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const O=x&1?"03":"02",N=u.fromHex(O+L6(M,n.BYTES)),B=l(M),F=c(-T*B),z=c(_*B),q=u.BASE.multiplyAndAddUnsafe(N,F,z);if(!q)throw new Error("point at infinify");return q.assertValidity(),q}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return fw(this.toDERHex())}toDERHex(){return za.hexFromSig(this)}toCompactRawBytes(){return fw(this.toCompactHex())}toCompactHex(){const S=i;return L6(this.r,S)+L6(this.s,S)}}const w={isValidPrivateKey(E){try{return d(E),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const E=_7(e.n);return EX(e.randomBytes(E),e.n)},precompute(E=8,S=u.BASE){return S._setWindowSize(E),S.multiply(BigInt(3)),S}};function b(E,S=!0){return u.fromPrivateKey(E).toRawBytes(S)}function v(E){if(typeof E=="bigint")return!1;if(E instanceof u)return!0;const k=Ss("key",E).length,_=n.BYTES,x=_+1,T=2*_+1;if(!(e.allowedPrivateKeyLengths||i===x))return k===x||k===T}function C(E,S,k=!0){if(v(E)===!0)throw new Error("first arg must be private key");if(v(S)===!1)throw new Error("second arg must be public key");return u.fromHex(S).multiply(d(E)).toRawBytes(k)}const A=e.bits2int||function(E){if(E.length>8192)throw new Error("input is too large");const S=Lu(E),k=E.length*8-s;return k>0?S>>BigInt(k):S},$=e.bits2int_modN||function(E){return c(A(E))},R=gw(s);function P(E){return ef("num < 2^"+s,E,qa,R),Og(E,i)}function L(E,S,k=U){if(["recovered","canonical"].some(K=>K in k))throw new Error("sign() legacy options not supported");const{hash:_,randomBytes:x}=e;let{lowS:T,prehash:M,extraEntropy:O}=k;T==null&&(T=!0),E=Ss("msgHash",E),P7(k),M&&(E=Ss("prehashed msgHash",_(E)));const N=$(E),B=d(S),F=[P(B),P(N)];if(O!=null&&O!==!1){const K=O===!0?x(n.BYTES):O;F.push(Ss("extraEntropy",K))}const z=pw(...F),q=N;function H(K){const Y=A(K);if(!f(Y))return;const J=l(Y),G=u.BASE.multiply(Y).toAffine(),te=c(G.x);if(te===qa)return;const se=c(J*c(q+te*B));if(se===qa)return;let he=(G.x===te?0:2)|Number(G.y&Fn),fe=se;return T&&g(se)&&(fe=p(se),he^=1),new y(te,fe,he)}return{seed:z,k2sig:H}}const U={lowS:e.lowS,prehash:!1},D={lowS:e.lowS,prehash:!1};function j(E,S,k=U){const{seed:_,k2sig:x}=L(E,S,k),T=e;return wY(T.hash.outputLen,T.nByteLength,T.hmac)(_,x)}u.BASE._setWindowSize(8);function I(E,S,k,_=D){var he;const x=E;S=Ss("msgHash",S),k=Ss("publicKey",k);const{lowS:T,prehash:M,format:O}=_;if(P7(_),"strict"in _)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&O!=="compact"&&O!=="der")throw new Error("format must be compact or der");const N=typeof x=="string"||Ig(x),B=!N&&!O&&typeof x=="object"&&x!==null&&typeof x.r=="bigint"&&typeof x.s=="bigint";if(!N&&!B)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let F,z;try{if(B&&(F=new y(x.r,x.s)),N){try{O!=="compact"&&(F=y.fromDER(x))}catch(fe){if(!(fe instanceof za.Err))throw fe}!F&&O!=="der"&&(F=y.fromCompact(x))}z=u.fromHex(k)}catch{return!1}if(!F||T&&F.hasHighS())return!1;M&&(S=e.hash(S));const{r:q,s:H}=F,K=$(S),Y=l(H),J=c(K*Y),G=c(q*Y),te=(he=u.BASE.multiplyAndAddUnsafe(z,J,G))==null?void 0:he.toAffine();return te?c(te.x)===q:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:C,sign:j,verify:I,ProjectivePoint:u,Signature:y,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function TX(t){return{hash:t,hmac:(e,...n)=>p7(t,e,bG(...n)),randomBytes:vG}}function NX(t,e){const n=r=>OX({...t,...TX(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const O7=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),T7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),kX=BigInt(0),RX=BigInt(1),U6=BigInt(2),N7=(t,e)=>(t+e/U6)/e;function MX(t){const e=O7,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=As(u,n,e)*u%e,h=As(d,n,e)*u%e,f=As(h,U6,e)*l%e,g=As(f,i,e)*f%e,p=As(g,s,e)*g%e,m=As(p,a,e)*p%e,y=As(m,c,e)*m%e,w=As(y,a,e)*p%e,b=As(w,n,e)*u%e,v=As(b,o,e)*g%e,C=As(v,r,e)*l%e,A=As(C,U6,e);if(!F6.eql(F6.sqr(A),t))throw new Error("Cannot find square root");return A}const F6=N6(O7,void 0,void 0,{sqrt:MX}),k7=NX({a:kX,b:BigInt(7),Fp:F6,n:T7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=T7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-RX*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=N7(s*t,e),c=N7(-r*t,e);let l=hi(t-a*n-c*i,e),u=hi(-a*r-c*s,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},B$),BX=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:k7},Symbol.toStringTag,{value:"Module"}));function R7(t,e={}){const{recovered:n}=e;if(typeof t.r>"u")throw new q6({signature:t});if(typeof t.s>"u")throw new q6({signature:t});if(n&&typeof t.yParity>"u")throw new q6({signature:t});if(t.r<0n||t.r>a7)throw new qX({value:t.r});if(t.s<0n||t.s>a7)throw new HX({value:t.s});if(typeof t.yParity=="number"&&t.yParity!==0&&t.yParity!==1)throw new H6({value:t.yParity})}function DX(t){return M7(so(t))}function M7(t){if(t.length!==130&&t.length!==132)throw new zX({signature:t});const e=BigInt(Fo(t,0,32)),n=BigInt(Fo(t,32,64)),r=(()=>{const i=+`0x${t.slice(130)}`;if(!Number.isNaN(i))try{return z6(i)}catch{throw new H6({value:i})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function LX(t){if(!(typeof t.r>"u")&&!(typeof t.s>"u"))return jX(t)}function jX(t){const e=(()=>typeof t=="string"?M7(t):t instanceof Uint8Array?DX(t):typeof t.r=="string"?FX(t):t.v?UX(t):{r:t.r,s:t.s,...typeof t.yParity<"u"?{yParity:t.yParity}:{}})();return R7(e),e}function UX(t){return{r:t.r,s:t.s,yParity:z6(t.v)}}function FX(t){const e=(()=>{const n=t.v?Number(t.v):void 0;let r=t.yParity?Number(t.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=z6(n)),typeof r!="number")throw new H6({value:t.yParity});return r})();return{r:BigInt(t.r),s:BigInt(t.s),yParity:e}}function z6(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new WX({value:t})}class zX extends rt{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${qi(WY(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class q6 extends rt{constructor({signature:e}){super(`Signature \`${QI(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class qX extends rt{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class HX extends rt{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class H6 extends rt{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class WX extends rt{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function KX(t,e={}){return typeof t.chainId=="string"?VX(t):{...t,...e.signature}}function VX(t){const{address:e,chainId:n,nonce:r}=t,i=LX(t);return{address:e,chainId:Number(n),nonce:BigInt(r),...i}}const GX="0x8010801080108010801080108010801080108010801080108010801080108010",ZX=u7("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function B7(t){if(typeof t=="string"){if(Fo(t,-32)!==GX)throw new QX(t)}else R7(t.authorization)}function YX(t){B7(t);const e=i$(Fo(t,-64,-32)),n=Fo(t,-e-64,-64),r=Fo(t,0,-e-64),[i,s,o]=lX(ZX,n);return{authorization:KX({address:i.delegation,chainId:Number(i.chainId),nonce:i.nonce,yParity:i.yParity,r:i.r,s:i.s}),signature:r,...o&&o!=="0x"?{data:o,to:s}:{}}}function JX(t){try{return B7(t),!0}catch{return!1}}let QX=class extends rt{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};class XX extends ce{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function tl(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new XX({value:t});let[n,r="0"]=t.split(".");const i=n.startsWith("-");if(i&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[s,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):r=`${s}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${i?"-":""}${n}${r}`)}function eee(t,e="wei"){return tl(t,TI[e])}function tee(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function nee(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Es(t.nonce):void 0,storageProof:t.storageProof?tee(t.storageProof):void 0}}async function ree(t,{address:e,blockNumber:n,blockTag:r,storageKeys:i}){const s=r??"latest",o=n!==void 0?Ne(n):void 0,a=await t.request({method:"eth_getProof",params:[e,i,o||s]});return nee(a)}async function iee(t,{address:e,blockNumber:n,blockTag:r="latest",slot:i}){const s=n!==void 0?Ne(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,i,s||r]})}async function W6(t,{blockHash:e,blockNumber:n,blockTag:r,hash:i,index:s,sender:o,nonce:a}){var h,f,g;const c=r||"latest",l=n!==void 0?Ne(n):void 0;let u=null;if(i?u=await t.request({method:"eth_getTransactionByHash",params:[i]},{dedupe:!0}):e?u=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ne(s)]},{dedupe:!0}):(l||c)&&typeof s=="number"?u=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[l||c,Ne(s)]},{dedupe:!!l}):o&&typeof a=="number"&&(u=await t.request({method:"eth_getTransactionBySenderAndNonce",params:[o,Ne(a)]},{dedupe:!0})),!u)throw new kI({blockHash:e,blockNumber:n,blockTag:c,hash:i,index:s});return(((g=(f=(h=t.chain)==null?void 0:h.formatters)==null?void 0:f.transaction)==null?void 0:g.format)||T$)(u,"getTransaction")}async function see(t,{hash:e,transactionReceipt:n}){const[r,i]=await Promise.all([Le(t,Lg,"getBlockNumber")({}),e?Le(t,W6,"getTransaction")({hash:e}):void 0]),s=(n==null?void 0:n.blockNumber)||(i==null?void 0:i.blockNumber);return s?r-s+1n:0n}async function $w(t,{hash:e}){var i,s,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new RI({hash:e});return(((o=(s=(i=t.chain)==null?void 0:i.formatters)==null?void 0:s.transactionReceipt)==null?void 0:o.format)||G$)(n,"getTransactionReceipt")}async function D7(t,e){var w;const{account:n,authorizationList:r,allowFailure:i=!0,blockNumber:s,blockOverrides:o,blockTag:a,stateOverride:c}=e,l=e.contracts,{batchSize:u=e.batchSize??1024,deployless:d=e.deployless??!1}=typeof((w=t.batch)==null?void 0:w.multicall)=="object"?t.batch.multicall:{},h=(()=>{if(e.multicallAddress)return e.multicallAddress;if(d)return null;if(t.chain)return Zh({blockNumber:s,chain:t.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),f=[[]];let g=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:C,args:A,functionName:$}=l[b];try{const R=Ui({abi:v,args:A,functionName:$});p+=(R.length-2)/2,u>0&&p>u&&f[g].length>0&&(g++,p=(R.length-2)/2,f[g]=[]),f[g]=[...f[g],{allowFailure:!0,callData:R,target:C}]}catch(R){const P=Du(R,{abi:v,address:C,args:A,docsPath:"/docs/contract/multicall",functionName:$,sender:n});if(!i)throw P;f[g]=[...f[g],{allowFailure:!0,callData:"0x",target:C}]}}const m=await Promise.allSettled(f.map(b=>Le(t,xs,"readContract")({...h===null?{code:V3}:{address:h},abi:rw,account:n,args:[b],authorizationList:r,blockNumber:s,blockOverrides:o,blockTag:a,functionName:"aggregate3",stateOverride:c}))),y=[];for(let b=0;b<m.length;b++){const v=m[b];if(v.status==="rejected"){if(!i)throw v.reason;for(let A=0;A<f[b].length;A++)y.push({status:"failure",error:v.reason,result:void 0});continue}const C=v.value;for(let A=0;A<C.length;A++){const{returnData:$,success:R}=C[A],{callData:P}=f[b][A],{abi:L,address:U,functionName:D,args:j}=l[y.length];try{if(P==="0x")throw new X0;if(!R)throw new dw({data:$});const I=Nu({abi:L,args:j,data:$,functionName:D});y.push(i?{result:I,status:"success"}:I)}catch(I){const E=Du(I,{abi:L,address:U,args:j,docsPath:"/docs/contract/multicall",functionName:D});if(!i)throw E;y.push({error:E,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new ce("multicall results mismatch");return y}async function K6(t,e){const{blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",blocks:i,returnFullTransactions:s,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of i){const f=h.blockOverrides?l$(h.blockOverrides):void 0,g=h.calls.map(m=>{const y=m,w=y.account?sn(y.account):void 0,b=y.abi?Ui(y):y.data,v={...y,account:w,data:y.dataSuffix?Li([b||"0x",y.dataSuffix]):b,from:y.from??(w==null?void 0:w.address)};return Qc(v),zu(v)}),p=h.stateOverrides?s6(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:g,stateOverrides:p})}const u=(typeof n=="bigint"?Ne(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:s,traceTransfers:o,validation:a},u]})).map((h,f)=>({...N$(h),calls:h.calls.map((g,p)=>{var L,U;const{abi:m,args:y,functionName:w,to:b}=i[f].calls[p],v=((L=g.error)==null?void 0:L.data)??g.returnData,C=BigInt(g.gasUsed),A=(U=g.logs)==null?void 0:U.map(D=>Fa(D)),$=g.status==="0x1"?"success":"failure",R=m&&$==="success"&&v!=="0x"?Nu({abi:m,data:v,functionName:w}):null,P=(()=>{var j;if($==="success")return;let D;if(((j=g.error)==null?void 0:j.data)==="0x"?D=new X0:g.error&&(D=new dw(g.error)),!!D)return Du(D,{abi:m??[],address:b??"0x",args:y,functionName:w??"<unknown>"})})();return{data:v,gasUsed:C,logs:A,status:$,...$==="success"?{result:R}:{error:P}}})}))}catch(c){const l=c,u=Ew(l,{});throw u instanceof Ng?l:u}}function V6(t){let e=!0,n="",r=0,i="",s=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(i))i="";else if(i+=a,a===")"){s=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}i+=a,n+=a}}if(!s)throw new rt("Unable to normalize signature.");return i}function G6(t,e){const n=typeof t,r=e.type;switch(r){case"address":return _6(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((i,s)=>G6(Object.values(t)[s],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(i=>G6(i,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function L7(t,e,n){for(const r in t){const i=t[r],s=e[r];if(i.type==="tuple"&&s.type==="tuple"&&"components"in i&&"components"in s)return L7(i.components,s.components,n[r]);const o=[i.type,s.type];if((()=>o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?_6(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?_6(n[r],{strict:!1}):!1)())return o}}function j7(t,e={}){const{prepare:n=!0}=e,r=(()=>Array.isArray(t)||typeof t=="string"?CI(t):t)();return{...r,...n?{hash:rf(r)}:{}}}function Pw(t,e,n){const{args:r=[],prepare:i=!0}=n??{},s=KY(e,{strict:!1}),o=t.filter(l=>s?l.type==="function"||l.type==="error"?U7(l)===Fo(e,0,4):l.type==="event"?rf(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new Ow({name:e});if(o.length===1)return{...o[0],...i?{hash:rf(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...i?{hash:rf(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?G6(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=L7(l.inputs,a.inputs,r);if(d)throw new aee({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new Ow({name:e});return{...c,...i?{hash:rf(c)}:{}}}function U7(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return Pw(n,r)}return t[0]})();return Fo(rf(e),0,4)}function oee(...t){const e=(()=>{if(Array.isArray(t[0])){const[r,i]=t;return Pw(r,i)}return t[0]})(),n=(()=>typeof e=="string"?e:cw(e))();return V6(n)}function rf(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return Pw(n,r)}return t[0]})();return typeof e!="string"&&"hash"in e&&e.hash?e.hash:r7(K3(oee(e)))}class aee extends rt{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${V6(cw(e.abiItem))}\`, and`,`\`${n.type}\` in \`${V6(cw(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Ow extends rt{constructor({name:e,data:n,type:r="item"}){const i=(()=>e?` with name "${e}"`:n?` with data "${n}"`:"")();super(`ABI ${r}${i} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function cee(...t){var s;const[e,n]=(()=>{if(Array.isArray(t[0])){const[o,a]=t;return[uee(o),a]}return t})(),{bytecode:r,args:i}=n;return io(r,(s=e.inputs)!=null&&s.length&&(i!=null&&i.length)?$6(e.inputs,i):"0x")}function lee(t){return j7(t)}function uee(t){const e=t.find(n=>n.type==="constructor");if(!e)throw new Ow({name:"constructor"});return e}function dee(...t){const[e,n=[]]=(()=>{if(Array.isArray(t[0])){const[l,u,d]=t;return[F7(l,u,{args:d}),d]}const[a,c]=t;return[a,c]})(),{overloads:r}=e,i=r?F7([e,...r],e.name,{args:n}):e,s=hee(i),o=n.length>0?$6(i.inputs,n):void 0;return o?io(s,o):s}function sf(t,e={}){return j7(t,e)}function F7(t,e,n){const r=Pw(t,e,n);if(r.type!=="function")throw new Ow({name:e,type:"function"});return r}function hee(t){return U7(t)}const fee="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",qo="0x0000000000000000000000000000000000000000",pee="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function gee(t,e){const{blockNumber:n,blockTag:r,calls:i,stateOverrides:s,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?sn(e.account):void 0;if(o&&!l)throw new ce("`account` is required when `traceAssetChanges` is true");const u=l?cee(lee("constructor(bytes, bytes)"),{bytecode:u$,args:[pee,dee(sf("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async _=>{if(!_.data&&!_.abi)return;const{accessList:x}=await b$(t,{account:l.address,..._,data:_.abi?Ui(_):_.data});return x.map(({address:T,storageKeys:M})=>M.length>0?T:null)})).then(_=>_.flat().filter(Boolean)):[],h=await K6(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:s},{calls:d.map((_,x)=>({abi:[sf("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:_,from:qo,nonce:x})),stateOverrides:[{address:qo,nonce:0}]}]:[],{calls:[...i,{}].map(_=>({..._,from:l==null?void 0:l.address})),stateOverrides:s},...o?[{calls:[{data:u}]},{calls:d.map((_,x)=>({abi:[sf("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:_,from:qo,nonce:x})),stateOverrides:[{address:qo,nonce:0}]},{calls:d.map((_,x)=>({to:_,abi:[sf("function decimals() returns (uint256)")],functionName:"decimals",from:qo,nonce:x})),stateOverrides:[{address:qo,nonce:0}]},{calls:d.map((_,x)=>({to:_,abi:[sf("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:qo,nonce:x})),stateOverrides:[{address:qo,nonce:0}]},{calls:d.map((_,x)=>({to:_,abi:[sf("function symbol() returns (string)")],functionName:"symbol",from:qo,nonce:x})),stateOverrides:[{address:qo,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[g,p,,m,y,w,b,v]=o?h:[],{calls:C,...A}=f,$=C.slice(0,-1)??[],R=(g==null?void 0:g.calls)??[],P=(p==null?void 0:p.calls)??[],L=[...R,...P].map(_=>_.status==="success"?Di(_.data):null),U=(m==null?void 0:m.calls)??[],D=(y==null?void 0:y.calls)??[],j=[...U,...D].map(_=>_.status==="success"?Di(_.data):null),I=((w==null?void 0:w.calls)??[]).map(_=>_.status==="success"?_.result:null),E=((v==null?void 0:v.calls)??[]).map(_=>_.status==="success"?_.result:null),S=((b==null?void 0:b.calls)??[]).map(_=>_.status==="success"?_.result:null),k=[];for(const[_,x]of j.entries()){const T=L[_];if(typeof x!="bigint"||typeof T!="bigint")continue;const M=I[_-1],O=E[_-1],N=S[_-1],B=(()=>_===0?{address:fee,decimals:18,symbol:"ETH"}:{address:d[_-1],decimals:N||M?Number(M??1):void 0,symbol:O??void 0})();k.some(F=>F.token.address===B.address)||k.push({token:B,value:{pre:T,post:x,diff:x-T}})}return{assetChanges:k,block:A,results:$}}async function mee(t,e){const{abi:n,address:r,args:i,dataSuffix:s,functionName:o,...a}=e,c=a.account?sn(a.account):t.account,l=Ui({abi:n,args:i,functionName:o});try{const{data:u}=await Le(t,Rg,"call")({batch:!1,data:`${l}${s?s.replace("0x",""):""}`,to:r,...a,account:c}),d=Nu({abi:n,args:i,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:i,dataSuffix:s,functionName:o,...a,account:c}}}catch(u){throw Du(u,{abi:n,address:r,args:i,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function Tw(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}const z7="0x6492649264926492649264926492649264926492649264926492649264926492";function yee(t){if(Fo(t,-32)!==z7)throw new vee(t)}function wee(t){const{data:e,signature:n,to:r}=t;return io($6(u7("address, bytes, bytes"),[r,e,n]),z7)}function bee(t){try{return yee(t),!0}catch{return!1}}class vee extends rt{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function Eee({r:t,s:e,to:n="hex",v:r,yParity:i}){const s=(()=>{if(i===0||i===1)return i;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new k7.Signature(Di(t),Di(e)).toCompactHex()}${s===0?"1b":"1c"}`;return n==="hex"?o:no(o)}async function Nw(t,e){var a,c,l,u,d,h;const{address:n,hash:r,erc6492VerifierAddress:i=e.universalSignatureVerifierAddress??((l=(c=(a=t.chain)==null?void 0:a.contracts)==null?void 0:c.erc6492Verifier)==null?void 0:l.address),multicallAddress:s=e.multicallAddress??((h=(d=(u=t.chain)==null?void 0:u.contracts)==null?void 0:d.multicall3)==null?void 0:h.address)}=e,o=(()=>{const f=e.signature;return to(f)?f:typeof f=="object"&&"r"in f&&"s"in f?Eee(f):Nn(f)})();try{return JX(o)?await Cee(t,{...e,multicallAddress:s,signature:o}):await _ee(t,{...e,verifierAddress:i,signature:o})}catch(f){try{if(tf(ai(n),await A$({hash:r,signature:o})))return!0}catch{}if(f instanceof Ku)return!1;throw f}}async function Cee(t,e){var m;const{address:n,blockNumber:r,blockTag:i,hash:s,multicallAddress:o}=e,{authorization:a,data:c,signature:l,to:u}=YX(e.signature);if(await g6(t,{address:n,blockNumber:r,blockTag:i})===Wh(["0xef0100",a.address]))return await See(t,{address:n,blockNumber:r,blockTag:i,hash:s,signature:l});const h={address:a.address,chainId:Number(a.chainId),nonce:Number(a.nonce),r:Ne(a.r,{size:32}),s:Ne(a.s,{size:32}),yParity:a.yParity};if(!await gQ({address:n,authorization:h}))throw new Ku;const g=await Le(t,xs,"readContract")({...o?{address:o}:{code:V3},authorizationList:[h],abi:rw,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:u??n,callData:c}]:[],{allowFailure:!0,target:n,callData:Ui({abi:AA,functionName:"isValidSignature",args:[s,l]})}]]}),p=(m=g[g.length-1])==null?void 0:m.returnData;if(p!=null&&p.startsWith("0x1626ba7e"))return!0;throw new Ku}async function _ee(t,e){const{address:n,factory:r,factoryData:i,hash:s,signature:o,verifierAddress:a,...c}=e,l=await(async()=>!r&&!i||bee(o)?o:wee({data:i,signature:o,to:r}))(),u=a?{to:a,data:Ui({abi:IA,functionName:"isValidSig",args:[n,s,l]}),...c}:{data:ww({abi:IA,args:[n,s,l],bytecode:QY}),...c},{data:d}=await Le(t,Rg,"call")(u).catch(h=>{throw h instanceof BI?new Ku:h});if(XV(d??"0x0"))return!0;throw new Ku}async function See(t,e){const{address:n,blockNumber:r,blockTag:i,hash:s,signature:o}=e;if((await Le(t,xs,"readContract")({address:n,abi:AA,args:[s,o],blockNumber:r,blockTag:i,functionName:"isValidSignature"}).catch(c=>{throw c instanceof N3?new Ku:c})).startsWith("0x1626ba7e"))return!0;throw new Ku}class Ku extends Error{}async function xee(t,{address:e,message:n,factory:r,factoryData:i,signature:s,...o}){const a=Y$(n);return Nw(t,{address:e,factory:r,factoryData:i,hash:a,signature:s,...o})}async function Aee(t,e){const{address:n,factory:r,factoryData:i,signature:s,message:o,primaryType:a,types:c,domain:l,...u}=e,d=RQ({message:o,primaryType:a,types:c,domain:l});return Nw(t,{address:n,factory:r,factoryData:i,hash:d,signature:s,...u})}const Z6=new Map,q7=new Map;let Iee=0;function Ha(t,e,n){const r=++Iee,i=()=>Z6.get(t)||[],s=()=>{const u=i();Z6.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=i();if(!u.some(h=>h.id===r))return;const d=q7.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}s()},a=i();if(Z6.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,g;const h=i();if(h.length!==0)for(const p of h)(g=(f=p.fns)[u])==null||g.call(f,...d)};const l=n(c);return typeof l=="function"&&q7.set(t,l),o}function of(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let i=!0;const s=()=>i=!1;return(async()=>{let a;e&&(a=await t({unpoll:s}));const c=await(n==null?void 0:n(a))??r;await Aw(c);const l=async()=>{i&&(await t({unpoll:s}),await Aw(r),l())};l()})(),s}function H7(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:i,poll:s,pollingInterval:o=t.pollingInterval}){const a=(()=>typeof s<"u"?s:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))();let c;return a?(()=>{const d=gn(["watchBlockNumber",t.uid,e,n,o]);return Ha(d,{onBlockNumber:r,onError:i},h=>of(async()=>{var f;try{const g=await Le(t,Lg,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(g===c)return;if(g-c>1&&n)for(let p=c+1n;p<g;p++)h.onBlockNumber(p,c),c=p}(c===void 0||g>c)&&(h.onBlockNumber(g,c),c=g)}catch(g){(f=h.onError)==null||f.call(h,g)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=gn(["watchBlockNumber",t.uid,e,n]);return Ha(d,{onBlockNumber:r,onError:i},h=>{let f=!0,g=()=>f=!1;return(async()=>{try{const p=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(w=>w.config.type==="webSocket"||w.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:m}=await p.subscribe({params:["newHeads"],onData(y){var b;if(!f)return;const w=Di((b=y.result)==null?void 0:b.number);h.onBlockNumber(w,c),c=w},onError(y){var w;(w=h.onError)==null||w.call(h,y)}});g=m,f||g()}catch(p){i==null||i(p)}})(),()=>g()})})()}async function W7(t,e){const{checkReplacement:n=!0,confirmations:r=1,hash:i,onReplaced:s,retryCount:o=6,retryDelay:a=({count:C})=>~~(1<<C)*200,timeout:c=18e4}=e,l=gn(["waitForTransactionReceipt",t.uid,i]),u=(()=>{var C;return e.pollingInterval?e.pollingInterval:(C=t.chain)!=null&&C.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval})();let d,h,f,g=!1,p,m;const{promise:y,resolve:w,reject:b}=r6(),v=c?setTimeout(()=>{m==null||m(),p==null||p(),b(new iY({hash:i}))},c):void 0;return p=Ha(l,{onReplaced:s,resolve:w,reject:b},async C=>{if(f=await Le(t,$w,"getTransactionReceipt")({hash:i}).catch(()=>{}),f&&r<=1){clearTimeout(v),C.resolve(f),p==null||p();return}m=Le(t,H7,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:u,async onBlockNumber(A){const $=P=>{clearTimeout(v),m==null||m(),P(),p==null||p()};let R=A;if(!g)try{if(f){if(r>1&&(!f.blockNumber||R-f.blockNumber+1n<r))return;$(()=>C.resolve(f));return}if(n&&!d&&(g=!0,await Hu(async()=>{d=await Le(t,W6,"getTransaction")({hash:i}),d.blockNumber&&(R=d.blockNumber)},{delay:a,retryCount:o}),g=!1),f=await Le(t,$w,"getTransactionReceipt")({hash:i}),r>1&&(!f.blockNumber||R-f.blockNumber+1n<r))return;$(()=>C.resolve(f))}catch(P){if(P instanceof kI||P instanceof RI){if(!d){g=!1;return}try{h=d,g=!0;const L=await Hu(()=>Le(t,zo,"getBlock")({blockNumber:R,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:j})=>j instanceof P$});g=!1;const U=L.transactions.find(({from:j,nonce:I})=>j===h.from&&I===h.nonce);if(!U||(f=await Le(t,$w,"getTransactionReceipt")({hash:U.hash}),r>1&&(!f.blockNumber||R-f.blockNumber+1n<r)))return;let D="replaced";U.to===h.to&&U.value===h.value&&U.input===h.input?D="repriced":U.from===U.to&&U.value===0n&&(D="cancelled"),$(()=>{var j;(j=C.onReplaced)==null||j.call(C,{reason:D,replacedTransaction:h,transaction:U,transactionReceipt:f}),C.resolve(f)})}catch(L){$(()=>C.reject(L))}}else $(()=>C.reject(P))}}})}),y}function $ee(t,{blockTag:e=t.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:i,onError:s,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=(()=>typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))(),u=o??!1;let d;return l?(()=>{const g=gn(["watchBlocks",t.uid,e,n,r,u,c]);return Ha(g,{onBlock:i,onError:s},p=>of(async()=>{var m;try{const y=await Le(t,zo,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let w=(d==null?void 0:d.number)+1n;w<y.number;w++){const b=await Le(t,zo,"getBlock")({blockNumber:w,includeTransactions:u});p.onBlock(b,d),d=b}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(p.onBlock(y,d),d=y)}catch(y){(m=p.onError)==null||m.call(p,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let g=!0,p=!0,m=()=>g=!1;return(async()=>{try{r&&Le(t,zo,"getBlock")({blockTag:e,includeTransactions:u}).then(b=>{g&&p&&(i(b,void 0),p=!1)}).catch(s);const y=(()=>{if(t.transport.type==="fallback"){const b=t.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return b?b.value:t.transport}return t.transport})(),{unsubscribe:w}=await y.subscribe({params:["newHeads"],async onData(b){var C;if(!g)return;const v=await Le(t,zo,"getBlock")({blockNumber:(C=b.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});g&&(i(v,d),p=!1,d=v)},onError(b){s==null||s(b)}});m=w,g||m()}catch(y){s==null||s(y)}})(),()=>m()})()}function Pee(t,e){const{abi:n,address:r,args:i,batch:s=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(()=>typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))()?(()=>{const m=h??!1,y=gn(["watchContractEvent",r,i,s,t.uid,o,d,m,a]);return Ha(y,{onLogs:l,onError:c},w=>{let b;a!==void 0&&(b=a-1n);let v,C=!1;const A=of(async()=>{var $;if(!C){try{v=await Le(t,C$,"createContractEventFilter")({abi:n,address:r,args:i,eventName:o,strict:m,fromBlock:a})}catch{}C=!0;return}try{let R;if(v)R=await Le(t,Sw,"getFilterChanges")({filter:v});else{const P=await Le(t,Lg,"getBlockNumber")({});b&&b<P?R=await Le(t,H$,"getContractEvents")({abi:n,address:r,args:i,eventName:o,fromBlock:b+1n,toBlock:P,strict:m}):R=[],b=P}if(R.length===0)return;if(s)w.onLogs(R);else for(const P of R)w.onLogs([P])}catch(R){v&&R instanceof Mu&&(C=!1),($=w.onError)==null||$.call(w,R)}},{emitOnBegin:!0,interval:d});return async()=>{v&&await Le(t,Tw,"uninstallFilter")({filter:v}),A()}})})():(()=>{const m=h??!1,y=gn(["watchContractEvent",r,i,s,t.uid,o,d,m]);let w=!0,b=()=>w=!1;return Ha(y,{onLogs:l,onError:c},v=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const R=t.transport.transports.find(P=>P.config.type==="webSocket"||P.config.type==="ipc");return R?R.value:t.transport}return t.transport})(),A=o?Bg({abi:n,eventName:o,args:i}):[],{unsubscribe:$}=await C.subscribe({params:["logs",{address:r,topics:A}],onData(R){var L;if(!w)return;const P=R.result;try{const{eventName:U,args:D}=m6({abi:n,data:P.data,topics:P.topics,strict:h}),j=Fa(P,{args:D,eventName:U});v.onLogs([j])}catch(U){let D,j;if(U instanceof eg||U instanceof sw){if(h)return;D=U.abiItem.name,j=(L=U.abiItem.inputs)==null?void 0:L.some(E=>!("name"in E&&E.name))}const I=Fa(P,{args:j?[]:{},eventName:D});v.onLogs([I])}},onError(R){var P;(P=v.onError)==null||P.call(v,R)}});b=$,w||b()}catch(C){c==null||c(C)}})(),()=>b()))})()}function Oee(t,{address:e,args:n,batch:r=!0,event:i,events:s,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=(()=>typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))(),f=d??!1;return h?(()=>{const m=gn(["watchEvent",e,n,r,t.uid,i,u,o]);return Ha(m,{onLogs:c,onError:a},y=>{let w;o!==void 0&&(w=o-1n);let b,v=!1;const C=of(async()=>{var A;if(!v){try{b=await Le(t,_$,"createEventFilter")({address:e,args:n,event:i,events:s,strict:f,fromBlock:o})}catch{}v=!0;return}try{let $;if(b)$=await Le(t,Sw,"getFilterChanges")({filter:b});else{const R=await Le(t,Lg,"getBlockNumber")({});w&&w!==R?$=await Le(t,w6,"getLogs")({address:e,args:n,event:i,events:s,fromBlock:w+1n,toBlock:R}):$=[],w=R}if($.length===0)return;if(r)y.onLogs($);else for(const R of $)y.onLogs([R])}catch($){b&&$ instanceof Mu&&(v=!1),(A=y.onError)==null||A.call(y,$)}},{emitOnBegin:!0,interval:u});return async()=>{b&&await Le(t,Tw,"uninstallFilter")({filter:b}),C()}})})():(()=>{let m=!0,y=()=>m=!1;return(async()=>{try{const w=(()=>{if(t.transport.type==="fallback"){const A=t.transport.transports.find($=>$.config.type==="webSocket"||$.config.type==="ipc");return A?A.value:t.transport}return t.transport})(),b=s??(i?[i]:void 0);let v=[];b&&(v=[b.flatMap($=>Bg({abi:[$],eventName:$.name,args:n}))],i&&(v=v[0]));const{unsubscribe:C}=await w.subscribe({params:["logs",{address:e,topics:v}],onData(A){var R;if(!m)return;const $=A.result;try{const{eventName:P,args:L}=m6({abi:b??[],data:$.data,topics:$.topics,strict:f}),U=Fa($,{args:L,eventName:P});c([U])}catch(P){let L,U;if(P instanceof eg||P instanceof sw){if(d)return;L=P.abiItem.name,U=(R=P.abiItem.inputs)==null?void 0:R.some(j=>!("name"in j&&j.name))}const D=Fa($,{args:U?[]:{},eventName:L});c([D])}},onError(A){a==null||a(A)}});y=C,m||y()}catch(w){a==null||a(w)}})(),()=>y()})()}function Tee(t,{batch:e=!0,onError:n,onTransactions:r,poll:i,pollingInterval:s=t.pollingInterval}){return(typeof i<"u"?i:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=gn(["watchPendingTransactions",t.uid,e,s]);return Ha(l,{onTransactions:r,onError:n},u=>{let d;const h=of(async()=>{var f;try{if(!d)try{d=await Le(t,S$,"createPendingTransactionFilter")({});return}catch(p){throw h(),p}const g=await Le(t,Sw,"getFilterChanges")({filter:d});if(g.length===0)return;if(e)u.onTransactions(g);else for(const p of g)u.onTransactions([p])}catch(g){(f=u.onError)==null||f.call(u,g)}},{emitOnBegin:!0,interval:s});return async()=>{d&&await Le(t,Tw,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function Nee(t,{chain:e}){const{id:n,name:r,nativeCurrency:i,rpcUrls:s,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:Ne(n),chainName:r,nativeCurrency:i,rpcUrls:s.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}class nl extends ce{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Vu extends ce{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}async function Y6(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const J6=new rg(128);async function kw(t,e){var w,b,v,C;const{account:n=t.account,chain:r=t.chain,accessList:i,authorizationList:s,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:g,value:p,...m}=e;if(typeof n>"u")throw new nl({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?sn(n):null;try{Qc(e);const A=await(async()=>{if(e.to)return e.to;if(e.to!==null&&s&&s.length>0)return await _w({authorization:s[0]}).catch(()=>{throw new ce("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let $;r!==null&&($=await Le(t,qu,"getChainId")({}),b6({currentChainId:$,chain:r}));const R=(v=(b=(w=t.chain)==null?void 0:w.formatters)==null?void 0:b.transactionRequest)==null?void 0:v.format,L=(R||zu)({...kg(m,{format:R}),accessList:i,account:y,authorizationList:s,blobs:o,chainId:$,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:A,type:g,value:p},"sendTransaction"),U=J6.get(t.uid),D=U?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:D,params:[L]},{retryCount:0})}catch(j){if(U===!1)throw j;const I=j;if(I.name==="InvalidInputRpcError"||I.name==="InvalidParamsRpcError"||I.name==="MethodNotFoundRpcError"||I.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[L]},{retryCount:0}).then(E=>(J6.set(t.uid,!0),E)).catch(E=>{const S=E;throw S.name==="MethodNotFoundRpcError"||S.name==="MethodNotSupportedRpcError"?(J6.set(t.uid,!1),I):S});throw I}}if((y==null?void 0:y.type)==="local"){const $=await Le(t,Dg,"prepareTransactionRequest")({account:y,accessList:i,authorizationList:s,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...f6,"sidecars"],type:g,value:p,...m,to:A}),R=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,P=await y.signTransaction($,{serializer:R});return await Le(t,Y6,"sendRawTransaction")({serializedTransaction:P})}throw(y==null?void 0:y.type)==="smart"?new Vu({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Vu({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(A){throw A instanceof Vu?A:v6(A,{...e,account:y,chain:e.chain||void 0})}}function kee(t,e){const{abi:n,args:r,bytecode:i,...s}=e,o=ww({abi:n,args:r,bytecode:i});return kw(t,{...s,...s.authorizationList?{to:null}:{},data:o})}async function Ree(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>ig(r))}const K7="0x5792579257925792579257925792579257925792579257925792579257925792",V7=Ne(0,{size:32});async function G7(t,e){const{account:n=t.account,capabilities:r,chain:i=t.chain,experimental_fallback:s,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?sn(n):null,d=e.calls.map(h=>{const f=h,g=f.abi?Ui({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&g?Li([g,f.dataSuffix]):g,to:f.to,value:f.value?Ne(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:Ne(i.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(s&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method")||f.details.toLowerCase().includes("feature toggled misconfigured")||f.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(r&&Object.values(r).some(w=>!w.optional)){const w="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Qh(new ce(w,{details:w}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Xh(new ce(y,{details:y}))}const g=[];for(const y of d){const w=kw(t,{account:u,chain:i,data:y.data,to:y.to,value:y.value?Di(y.value):void 0});g.push(w),o>0&&await new Promise(b=>setTimeout(b,o))}const p=await Promise.allSettled(g);if(p.every(y=>y.status==="rejected"))throw p[0].reason;const m=p.map(y=>y.status==="fulfilled"?y.value:V7);return{id:Li([...m,Ne(i.id,{size:32}),K7])}}throw v6(h,{...e,account:u,chain:e.chain})}}async function Z7(t,e){async function n(u){if(u.endsWith(K7.slice(2))){const h=Do(b3(u,-64,-32)),f=b3(u,0,-64).slice(2).match(/.{1,64}/g),g=await Promise.all(f.map(m=>V7.slice(2)!==m?t.request({method:"eth_getTransactionReceipt",params:[`0x${m}`]},{dedupe:!0}):void 0)),p=(()=>g.some(m=>m===null)?100:g.every(m=>(m==null?void 0:m.status)==="0x1")?200:g.every(m=>(m==null?void 0:m.status)==="0x0")?500:600)();return{atomic:!1,chainId:Es(h),receipts:g.filter(Boolean),status:p,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:i,receipts:s,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:i?Es(i):void 0,receipts:(s==null?void 0:s.map(u=>({...u,blockNumber:Di(u.blockNumber),gasUsed:Di(u.gasUsed),status:V$[u.status]})))??[],statusCode:l,status:c,version:o}}async function Mee(t,e={}){const{account:n=t.account,chainId:r}=e,i=n?sn(n):void 0,s=r?[i==null?void 0:i.address,[Ne(r)]]:[i==null?void 0:i.address],o=await t.request({method:"wallet_getCapabilities",params:s}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}async function Bee(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Y7(t,e){var c;const{account:n=t.account,chainId:r,nonce:i}=e;if(!n)throw new nl({docsPath:"/docs/eip7702/prepareAuthorization"});const s=sn(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:sn(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:i};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await Le(t,qu,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await Le(t,d6,"getTransactionCount")({address:s.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&tf(o.address,s.address))&&(a.nonce+=1)),a}async function Dee(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>ai(n))}async function Lee(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}class jee extends ce{constructor(e){super(`Call bundle failed with status: ${e.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=e}}async function J7(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:i=({statusCode:p})=>p===200||p>=300,retryCount:s=4,retryDelay:o=({count:p})=>~~(1<<p)*200,timeout:a=6e4,throwOnFailure:c=!1}=e,l=gn(["waitForCallsStatus",t.uid,n]),{promise:u,resolve:d,reject:h}=r6();let f;const g=Ha(l,{resolve:d,reject:h},p=>{const m=of(async()=>{const y=w=>{clearTimeout(f),m(),w(),g()};try{const w=await Hu(async()=>{const b=await Le(t,Z7,"getCallsStatus")({id:n});if(c&&b.status==="failure")throw new jee(b);return b},{retryCount:s,delay:o});if(!i(w))return;y(()=>p.resolve(w))}catch(w){y(()=>p.reject(w))}},{interval:r,emitOnBegin:!0});return m});return f=a?setTimeout(()=>{g(),clearTimeout(f),h(new Uee({id:n}))},a):void 0,await u}class Uee extends ce{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function Fee(t,e){const{chain:n=t.chain}=e,r=e.timeout??Math.max(((n==null?void 0:n.blockTime)??0)*3,5e3),i=await G7(t,e);return await J7(t,{...e,id:i.id,timeout:r})}async function Q6(t,{serializedTransaction:e,throwOnReceiptRevert:n,timeout:r}){var a,c,l;const i=await t.request({method:"eth_sendRawTransactionSync",params:r?[e,Ne(r)]:[e]},{retryCount:0}),o=(((l=(c=(a=t.chain)==null?void 0:a.formatters)==null?void 0:c.transactionReceipt)==null?void 0:l.format)||G$)(i);if(o.status==="reverted"&&n)throw new MI({receipt:o});return o}const X6=new rg(128);async function Q7(t,e){var C,A,$,R;const{account:n=t.account,chain:r=t.chain,accessList:i,authorizationList:s,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,pollingInterval:g,throwOnReceiptRevert:p,type:m,value:y,...w}=e,b=e.timeout??Math.max(((r==null?void 0:r.blockTime)??0)*3,5e3);if(typeof n>"u")throw new nl({docsPath:"/docs/actions/wallet/sendTransactionSync"});const v=n?sn(n):null;try{Qc(e);const P=await(async()=>{if(e.to)return e.to;if(e.to!==null&&s&&s.length>0)return await _w({authorization:s[0]}).catch(()=>{throw new ce("`to` is required. Could not infer from `authorizationList`.")})})();if((v==null?void 0:v.type)==="json-rpc"||v===null){let L;r!==null&&(L=await Le(t,qu,"getChainId")({}),b6({currentChainId:L,chain:r}));const U=($=(A=(C=t.chain)==null?void 0:C.formatters)==null?void 0:A.transactionRequest)==null?void 0:$.format,j=(U||zu)({...kg(w,{format:U}),accessList:i,account:v,authorizationList:s,blobs:o,chainId:L,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:P,type:m,value:y},"sendTransaction"),I=X6.get(t.uid),E=I?"wallet_sendTransaction":"eth_sendTransaction",S=await(async()=>{try{return await t.request({method:E,params:[j]},{retryCount:0})}catch(_){if(I===!1)throw _;const x=_;if(x.name==="InvalidInputRpcError"||x.name==="InvalidParamsRpcError"||x.name==="MethodNotFoundRpcError"||x.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[j]},{retryCount:0}).then(T=>(X6.set(t.uid,!0),T)).catch(T=>{const M=T;throw M.name==="MethodNotFoundRpcError"||M.name==="MethodNotSupportedRpcError"?(X6.set(t.uid,!1),x):M});throw x}})(),k=await Le(t,W7,"waitForTransactionReceipt")({checkReplacement:!1,hash:S,pollingInterval:g,timeout:b});if(p&&k.status==="reverted")throw new MI({receipt:k});return k}if((v==null?void 0:v.type)==="local"){const L=await Le(t,Dg,"prepareTransactionRequest")({account:v,accessList:i,authorizationList:s,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:v.nonceManager,parameters:[...f6,"sidecars"],type:m,value:y,...w,to:P}),U=(R=r==null?void 0:r.serializers)==null?void 0:R.transaction,D=await v.signTransaction(L,{serializer:U});return await Le(t,Q6,"sendRawTransactionSync")({serializedTransaction:D,throwOnReceiptRevert:p})}throw(v==null?void 0:v.type)==="smart"?new Vu({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Vu({docsPath:"/docs/actions/wallet/sendTransactionSync",type:v==null?void 0:v.type})}catch(P){throw P instanceof Vu?P:v6(P,{...e,account:v,chain:e.chain||void 0})}}async function zee(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function qee(t,e){const{account:n=t.account}=e;if(!n)throw new nl({docsPath:"/docs/eip7702/signAuthorization"});const r=sn(n);if(!r.signAuthorization)throw new Vu({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const i=await Y7(t,e);return r.signAuthorization(i)}async function Hee(t,{account:e=t.account,message:n}){if(!e)throw new nl({docsPath:"/docs/actions/wallet/signMessage"});const r=sn(e);if(r.signMessage)return r.signMessage({message:n});const i=(()=>typeof n=="string"?jh(n):n.raw instanceof Uint8Array?Cs(n.raw):n.raw)();return t.request({method:"personal_sign",params:[i,r.address]},{retryCount:0})}async function Wee(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...i}=e;if(!n)throw new nl({docsPath:"/docs/actions/wallet/signTransaction"});const s=sn(n);Qc({account:s,...e});const o=await Le(t,qu,"getChainId")({});r!==null&&b6({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||zu;return s.signTransaction?s.signTransaction({...i,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c({...i,account:s},"signTransaction"),chainId:Ne(o),from:s.address}]},{retryCount:0})}async function Kee(t,e){const{account:n=t.account,domain:r,message:i,primaryType:s}=e;if(!n)throw new nl({docsPath:"/docs/actions/wallet/signTypedData"});const o=sn(n),a={EIP712Domain:Q$({domain:r}),...e.types};if(J$({domain:r,message:i,primaryType:s,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:i,primaryType:s,types:a});const c=NQ({domain:r,message:i,primaryType:s,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function Vee(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:Ne(e)}]},{retryCount:0})}async function Gee(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function af(t,e){return af.internal(t,kw,"sendTransaction",e)}(function(t){async function e(n,r,i,s){const{abi:o,account:a=n.account,address:c,args:l,dataSuffix:u,functionName:d,...h}=s;if(typeof a>"u")throw new nl({docsPath:"/docs/contract/writeContract"});const f=a?sn(a):null,g=Ui({abi:o,args:l,functionName:d});try{return await Le(n,r,i)({data:`${g}${u?u.replace("0x",""):""}`,to:c,account:f,...h})}catch(p){throw Du(p,{abi:o,address:c,args:l,docsPath:"/docs/contract/writeContract",functionName:d,sender:f==null?void 0:f.address})}}t.internal=e})(af||(af={}));async function Zee(t,e){return af.internal(t,Q7,"sendTransactionSync",e)}function Rw(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const i=t[n];return typeof i=="function"?i:s=>e(t,s)}const Mw="2.22.1",Yee=()=>`@wagmi/core@${Mw}`;var X7=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Bw,eP;let Wa=class aA extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return Yee()}constructor(e,n={}){var s;super(),Bw.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof aA?n.cause.details:(s=n.cause)!=null&&s.message?n.cause.message:n.details,i=n.cause instanceof aA&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${this.docsBaseUrl}${i}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return X7(this,Bw,"m",eP).call(this,this,e)}};Bw=new WeakSet,eP=function t(e,n){return n!=null&&n(e)?e:e.cause?X7(this,Bw,"m",t).call(this,e.cause,n):e};class cf extends Wa{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Jee extends Wa{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class Qee extends Wa{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class Xee extends Wa{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class ete extends Wa{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class tte extends Wa{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function nte(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new Jee;try{t.setState(a=>({...a,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:i,...s}=e,o=await n.connect(s);return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(a=>({...a,connections:new Map(a.connections).set(n.uid,{accounts:s.withCapabilities?o.accounts.map(c=>typeof c=="object"?c.address:c):o.accounts,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:s.withCapabilities?o.accounts.map(a=>typeof a=="object"?a:{address:a,capabilities:{}}):o.accounts,chainId:o.chainId}}catch(i){throw t.setState(s=>({...s,status:s.current?"connected":"disconnected"})),i}}const eE=256;let Dw=eE,Lw;function tP(t=11){if(!Lw||Dw+t>eE*2){Lw="",Dw=0;for(let e=0;e<eE;e++)Lw+=(256+Math.random()*256|0).toString(16).substring(1)}return Lw.substring(Dw,Dw+++t)}function tE(t){const{batch:e,chain:n,ccipRead:r,key:i="base",name:s="Base Client",type:o="base"}=t,a=t.experimental_blockTag??(typeof(n==null?void 0:n.experimental_preconfirmationTime)=="number"?"pending":void 0),c=(n==null?void 0:n.blockTime)??12e3,l=Math.min(Math.max(Math.floor(c/2),500),4e3),u=t.pollingInterval??l,d=t.cacheTime??u,h=t.account?sn(t.account):void 0,{config:f,request:g,value:p}=t.transport({chain:n,pollingInterval:u}),m={...f,...p},y={account:h,batch:e,cacheTime:d,ccipRead:r,chain:n,key:i,name:s,pollingInterval:u,request:g,transport:m,type:o,uid:tP(),...a?{experimental_blockTag:a}:{}};function w(b){return v=>{const C=v(b);for(const $ in y)delete C[$];const A={...b,...C};return Object.assign(A,{extend:w(A)})}}return Object.assign(y,{extend:w(y)})}function rte(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(ite))==null?void 0:d.groups)??{},{chainId:i,expirationTime:s,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(ste))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...i?{chainId:Number(i)}:{},...s?{expirationTime:new Date(s)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const ite=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,ste=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function ote(t){const{address:e,domain:n,message:r,nonce:i,scheme:s,time:o=new Date}=t;if(n&&r.domain!==n||i&&r.nonce!==i||s&&r.scheme!==s||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!_s(r.address,{strict:!1})||e&&!tf(r.address,e))return!1}catch{return!1}return!0}async function ate(t,e){const{address:n,domain:r,message:i,nonce:s,scheme:o,signature:a,time:c=new Date,...l}=e,u=rte(i);if(!u.address||!ote({address:n,domain:r,message:u,nonce:s,scheme:o,time:c}))return!1;const h=Y$(i);return Nw(t,{address:u.address,hash:h,signature:a,...l})}function nP(t){return{call:e=>Rg(t,e),createAccessList:e=>b$(t,e),createBlockFilter:()=>_J(t),createContractEventFilter:e=>C$(t,e),createEventFilter:e=>_$(t,e),createPendingTransactionFilter:()=>S$(t),estimateContractGas:e=>XJ(t,e),estimateGas:e=>p6(t,e),getBalance:e=>z$(t,e),getBlobBaseFee:()=>eQ(t),getBlock:e=>zo(t,e),getBlockNumber:e=>Lg(t,e),getBlockTransactionCount:e=>oQ(t,e),getBytecode:e=>g6(t,e),getChainId:()=>qu(t),getCode:e=>g6(t,e),getContractEvents:e=>H$(t,e),getEip712Domain:e=>uQ(t,e),getEnsAddress:e=>aJ(t,e),getEnsAvatar:e=>vJ(t,e),getEnsName:e=>EJ(t,e),getEnsResolver:e=>CJ(t,e),getEnsText:e=>w$(t,e),getFeeHistory:e=>fQ(t,e),estimateFeesPerGas:e=>DJ(t,e),getFilterChanges:e=>Sw(t,e),getFilterLogs:e=>pQ(t,e),getGasPrice:()=>l6(t),getLogs:e=>w6(t,e),getProof:e=>ree(t,e),estimateMaxPriorityFeePerGas:e=>BJ(t,e),getStorageAt:e=>iee(t,e),getTransaction:e=>W6(t,e),getTransactionConfirmations:e=>see(t,e),getTransactionCount:e=>d6(t,e),getTransactionReceipt:e=>$w(t,e),multicall:e=>D7(t,e),prepareTransactionRequest:e=>Dg(t,e),readContract:e=>xs(t,e),sendRawTransaction:e=>Y6(t,e),sendRawTransactionSync:e=>Q6(t,e),simulate:e=>K6(t,e),simulateBlocks:e=>K6(t,e),simulateCalls:e=>gee(t,e),simulateContract:e=>mee(t,e),verifyHash:e=>Nw(t,e),verifyMessage:e=>xee(t,e),verifySiweMessage:e=>ate(t,e),verifyTypedData:e=>Aee(t,e),uninstallFilter:e=>Tw(t,e),waitForTransactionReceipt:e=>W7(t,e),watchBlocks:e=>$ee(t,e),watchBlockNumber:e=>H7(t,e),watchContractEvent:e=>Pee(t,e),watchEvent:e=>Oee(t,e),watchPendingTransactions:e=>Tee(t,e)}}function rP(t){const{key:e="public",name:n="Public Client"}=t;return tE({...t,key:e,name:n,type:"publicClient"}).extend(nP)}function cte(t){return{addChain:e=>Nee(t,e),deployContract:e=>kee(t,e),getAddresses:()=>Ree(t),getCallsStatus:e=>Z7(t,e),getCapabilities:e=>Mee(t,e),getChainId:()=>qu(t),getPermissions:()=>Bee(t),prepareAuthorization:e=>Y7(t,e),prepareTransactionRequest:e=>Dg(t,e),requestAddresses:()=>Dee(t),requestPermissions:e=>Lee(t,e),sendCalls:e=>G7(t,e),sendCallsSync:e=>Fee(t,e),sendRawTransaction:e=>Y6(t,e),sendRawTransactionSync:e=>Q6(t,e),sendTransaction:e=>kw(t,e),sendTransactionSync:e=>Q7(t,e),showCallsStatus:e=>zee(t,e),signAuthorization:e=>qee(t,e),signMessage:e=>Hee(t,e),signTransaction:e=>Wee(t,e),signTypedData:e=>Kee(t,e),switchChain:e=>Vee(t,e),waitForCallsStatus:e=>J7(t,e),watchAsset:e=>Gee(t,e),writeContract:e=>af(t,e),writeContractSync:e=>Zee(t,e)}}function nE({key:t,methods:e,name:n,request:r,retryCount:i=3,retryDelay:s=150,timeout:o,type:a},c){const l=tP();return{config:{key:t,methods:e,name:n,request:r,retryCount:i,retryDelay:s,timeout:o,type:a},request:yQ(r,{methods:e,retryCount:i,retryDelay:s,uid:l}),value:c}}function lte(t,e={}){const{key:n="custom",methods:r,name:i="Custom Provider",retryDelay:s}=e;return({retryCount:o})=>nE({key:n,methods:r,name:i,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:s,type:"custom"})}function iP(t,e={}){const{key:n="fallback",name:r="Fallback",rank:i=!1,shouldThrow:s=ute,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const g=nE({key:n,name:r,async request({method:p,params:m}){let y;const w=async(b=0)=>{const v=h[b]({...d,chain:c,retryCount:0,timeout:u});try{const C=await v.request({method:p,params:m});return f({method:p,params:m,response:C,transport:v,status:"success"}),C}catch(C){if(f({error:C,method:p,params:m,transport:v,status:"error"}),s(C)||b===h.length-1||(y??(y=h.slice(b+1).some(A=>{const{include:$,exclude:R}=A({chain:c}).config.methods||{};return $?$.includes(p):R?!R.includes(p):!0})),!y))throw C;return w(b+1)}};return w()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:p=>f=p,transports:h.map(p=>p({chain:c,retryCount:0}))});if(i){const p=typeof i=="object"?i:{};dte({chain:c,interval:p.interval??l,onTransports:m=>h=m,ping:p.ping,sampleCount:p.sampleCount,timeout:p.timeout,transports:h,weights:p.weights})}return g}}function ute(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Yh.code||t.code===Ut.code||Fu.nodeMessage.test(t.message)||t.code===5e3))}function dte({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:i=10,timeout:s=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async p=>{const m=p({chain:t,retryCount:0,timeout:s}),y=Date.now();let w,b;try{await(r?r({transport:m}):m.request({method:"net_listening"})),b=1}catch{b=0}finally{w=Date.now()}return{latency:w-y,success:b}}));u.push(h),u.length>i&&u.shift();const f=Math.max(...u.map(p=>Math.max(...p.map(({latency:m})=>m)))),g=o.map((p,m)=>{const y=u.map(A=>A[m].latency),b=1-y.reduce((A,$)=>A+$,0)/y.length/f,v=u.map(A=>A[m].success),C=v.reduce((A,$)=>A+$,0)/v.length;return C===0?[0,m]:[l*b+c*C,m]}).sort((p,m)=>m[0]-p[0]);n(g.map(([,p])=>o[p])),await Aw(e),d()};d()}class hte extends ce{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function rl(t,e={}){const{batch:n,fetchFn:r,fetchOptions:i,key:s="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:l,retryDelay:u,raw:d}=e;return({chain:h,retryCount:f,timeout:g})=>{const{batchSize:p=1e3,wait:m=0}=typeof n=="object"?n:{},y=e.retryCount??f,w=g??e.timeout??1e4,b=t||(h==null?void 0:h.rpcUrls.default.http[0]);if(!b)throw new hte;const v=AQ(b,{fetchFn:r,fetchOptions:i,onRequest:c,onResponse:l,timeout:w});return nE({key:s,methods:o,name:a,async request({method:C,params:A}){const $={method:C,params:A},{schedule:R}=h$({id:b,wait:m,shouldSplitBatch(D){return D.length>p},fn:D=>v.request({body:D}),sort:(D,j)=>D.id-j.id}),P=async D=>n?R(D):[await v.request({body:D})],[{error:L,result:U}]=await P($);if(d)return{error:L,result:U};if(L)throw new j3({body:$,error:L,url:b});return U},retryCount:y,retryDelay:u,timeout:w,type:"http"},{fetchOptions:i,url:b})}}async function sP(t,e={}){const{assertChainId:n=!0}=e;let r;if(e.connector){const{connector:u}=e;if(t.state.status==="reconnecting"&&!u.getAccounts&&!u.getChainId)throw new tte({connector:u});const[d,h]=await Promise.all([u.getAccounts().catch(f=>{if(e.account===null)return[];throw f}),u.getChainId()]);r={accounts:d,chainId:h,connector:u}}else r=t.state.connections.get(t.state.current);if(!r)throw new Qee;const i=e.chainId??r.chainId,s=await r.connector.getChainId();if(n&&s!==i)throw new ete({connectionChainId:i,connectorChainId:s});const o=r.connector;if(o.getClient)return o.getClient({chainId:i});const a=sn(e.account??r.accounts[0]);if(a&&(a.address=ai(a.address)),e.account&&!r.accounts.some(u=>u.toLowerCase()===a.address.toLowerCase()))throw new Xee({address:a.address,connector:o});const c=t.chains.find(u=>u.id===i),l=await r.connector.getProvider({chainId:i});return tE({account:a,chain:c,name:"Connector Client",transport:u=>lte(l)({...u,retryCount:0})})}async function fte(t,e={}){var i,s;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(i=t.state.connections.get(o))==null?void 0:i.connector;if(!a)return;await((s=t.storage)==null?void 0:s.setItem("recentConnectorId",a.id))}}function oP(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(JZ[t])}function aP(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,i=r==null?void 0:r[0],s=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:i,addresses:r,chain:s,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:i,addresses:r,chain:s,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!i,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:i,addresses:r,chain:s,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function pte(t,e){const{allowFailure:n=!0,chainId:r,contracts:i,...s}=e,o=t.getClient({chainId:r});return Rw(o,D7,"multicall")({allowFailure:n,contracts:i,...s})}function cP(t,e){const{chainId:n,...r}=e,i=t.getClient({chainId:n});return Rw(i,xs,"readContract")(r)}async function gte(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:i,...s}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const g=f.chainId??t.state.chainId;c[g]||(c[g]=[]),(a=c[g])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>pte(t,{...s,allowFailure:n,blockNumber:r,blockTag:i,chainId:Number.parseInt(h,10),contracts:f.map(({contract:g})=>g)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,g)=>(h&&(h[d[g]]=f),h),[])}catch(c){if(c instanceof N3)throw c;const l=()=>o.map(u=>cP(t,{...u,blockNumber:r,blockTag:i}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function mte(t,e){const{address:n,blockNumber:r,blockTag:i,chainId:s,token:o,unit:a="ether"}=e;if(o)try{return await lP(t,{balanceAddress:n,chainId:s,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await lP(t,{balanceAddress:n,chainId:s,symbolType:"bytes32",tokenAddress:o}),g=eG(Do(f.symbol,{dir:"right"}));return{...f,symbol:g}}throw h}const c=t.getClient({chainId:s}),u=await Rw(c,z$,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:i}),d=t.chains.find(h=>h.id===s)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Fi(u,oP(a)),symbol:d.nativeCurrency.symbol,value:u}}async function lP(t,e){const{balanceAddress:n,chainId:r,symbolType:i,tokenAddress:s,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:i}]}],address:s},[c,l,u]=await gte(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Fi(c??"0",oP(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function uP(t){return t.state.chainId}function Gu(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Gu(t[r],e[r]))return!1;return!0}if(typeof t.valueOf=="function"&&t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString)return t.toString()===e.toString();const i=Object.keys(t);if(n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.hasOwn(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(s&&!Gu(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}let rE=[];function dP(t){const e=t.chains;return Gu(rE,e)?rE:(rE=e,e)}function yte(t,e={}){try{return t.getClient(e)}catch{return}}let jw=[];function iE(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Gu(jw,e)?jw:(jw=e,e)}let Uw=[];function hP(t){const e=t.connectors;return Uw.length===e.length&&Uw.every((n,r)=>n===e[r])?Uw:(Uw=e,e)}function sE(t,e={}){const n=yte(t,e);return n==null?void 0:n.extend(nP)}async function wte(t,e={}){return(await sP(t,e)).extend(cte)}let oE=!1;async function bte(t,e={}){var l,u;if(oE)return[];oE=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const i={};for(const[,d]of t.state.connections)i[d.connector.id]=1;r&&(i[r]=0);const s=Object.keys(i).length>0?[...n].sort((d,h)=>(i[d.id]??10)-(i[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of s){const h=await d.getProvider().catch(()=>{});if(!h||c.some(p=>p===h)||!await d.isAuthorized())continue;const g=await d.connect({isReconnecting:!0}).catch(()=>null);g&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(p=>{const m=new Map(o?p.connections:new Map).set(d.uid,{accounts:g.accounts,chainId:g.chainId,connector:d});return{...p,current:o?p.current:d.uid,connections:m}}),a.push({accounts:g.accounts,chainId:g.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),oE=!1,a}class Ka extends Wa{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class vte extends Wa{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function Ete(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,i=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(i){const a=i.connector;if(!a.switchChain)throw new vte({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const s=t.chains.find(a=>a.id===r);if(!s)throw new cf;return t.setState(a=>({...a,chainId:r})),s}function Cte(t,e){const{onChange:n}=e;return t.subscribe(()=>aP(t),n,{equalityFn(r,i){const{connector:s,...o}=r,{connector:a,...c}=i;return Gu(o,c)&&(s==null?void 0:s.id)===(a==null?void 0:a.id)&&(s==null?void 0:s.uid)===(a==null?void 0:a.uid)}})}function _te(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function Ste(t,e){const{onChange:n}=e;return t.subscribe(()=>iE(t),n,{equalityFn:Gu})}function xte(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,i)=>{n(Object.values(r),i)})}function Ate(t,e){const{onChange:n}=e;return t.subscribe(()=>sE(t),n,{equalityFn(r,i){return(r==null?void 0:r.uid)===(i==null?void 0:i.uid)}})}async function Ite(t,e){const{account:n,chainId:r,connector:i,...s}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await sP(t,{account:n??void 0,assertChainId:!1,chainId:r,connector:i}),await Rw(o,af,"writeContract")({...s,...n?{account:n}:{},chain:r?{id:r}:null})}function MMe(t){return t}Fw.type="injected";function Fw(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...$te[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let i,s,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:Fw.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),i||(i=this.onAccountsChanged.bind(this),l.on("accountsChanged",i)))},async connect({chainId:l,isReconnecting:u,withCapabilities:d}={}){var g,p,m,y,w,b;const h=await this.getProvider();if(!h)throw new Ka;let f=[];if(u)f=await this.getAccounts().catch(()=>[]);else if(e)try{f=(y=(m=(p=(g=(await h.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:g.caveats)==null?void 0:p[0])==null?void 0:m.value)==null?void 0:y.map(C=>ai(C)),f.length>0&&(f=await this.getAccounts())}catch(v){const C=v;if(C.code===Ut.code)throw new Ut(C);if(C.code===jo.code)throw C}try{!(f!=null&&f.length)&&!u&&(f=(await h.request({method:"eth_requestAccounts"})).map(A=>ai(A))),o&&(h.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),h.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),h.on("chainChanged",s)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const C=await this.switchChain({chainId:l}).catch(A=>{if(A.code===Ut.code)throw A;return{id:v}});v=(C==null?void 0:C.id)??v}return e&&await((w=c.storage)==null?void 0:w.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:d?f.map(C=>({address:C,capabilities:{}})):f,chainId:v}}catch(v){const C=v;throw C.code===Ut.code?new Ut(C):C.code===jo.code?new jo(C):C}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Ka;s&&(l.removeListener("chainChanged",s),s=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await E6(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Ka;return(await l.request({method:"eth_accounts"})).map(d=>ai(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Ka;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=zw(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const g=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",g),!!await this.getProvider()),p=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(g()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(g()),p))]))return!0}throw new Ka}return!!(await Hu(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var g,p,m,y;const d=await this.getProvider();if(!d)throw new Ka;const h=c.chains.find(w=>w.id===u);if(!h)throw new ro(new cf);const f=new Promise(w=>{const b=v=>{"chainId"in v&&v.chainId===u&&(c.emitter.off("change",b),w())};c.emitter.on("change",b)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Ne(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(w){const b=w;if(b.code===4902||((p=(g=b==null?void 0:b.data)==null?void 0:g.originalError)==null?void 0:p.code)===4902)try{const{default:v,...C}=h.blockExplorers??{};let A;l!=null&&l.blockExplorerUrls?A=l.blockExplorerUrls:v&&(A=[v.url,...Object.values(C).map(P=>P.url)]);let $;(m=l==null?void 0:l.rpcUrls)!=null&&m.length?$=l.rpcUrls:$=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const R={blockExplorerUrls:A,chainId:Ne(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:$};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[R]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Ut(new Error("User rejected switch after adding network."))}),f]),h}catch(v){throw new Ut(v)}throw b.code===Ut.code?new Ut(b):new ro(b)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>ai(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),h.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),h.on("chainChanged",s)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(s&&(u.removeListener("chainChanged",s),s=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const $te={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:zw(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return zw(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:zw(t,"isPhantom")}}};function zw(t,e){function n(i){return typeof e=="function"?e(i):typeof e=="string"?i[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(i=>n(i));if(r&&n(r))return r}function Pte(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Ote(){const t=new Set;let e=[];const n=()=>Pte(i=>{e.some(({info:s})=>s.uuid===i.info.uuid)||(e=[...e,i],t.forEach(s=>s(e,{added:[i]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(i=>i([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:i}){return e.find(s=>s.info.rdns===i)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(i,{emitImmediately:s}={}){return t.add(i),s&&i(e,{added:e}),()=>t.delete(i)}}}const Tte=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const g=d;a(d=f,g)}},c!=null&&c.fireImmediately&&a(d,d)}return i(l)},t(e,n,r)};function Nte(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=c=>c===null?null:JSON.parse(c,e==null?void 0:e.reviver),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:i=>n.removeItem(i)}}const aE=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return aE(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return aE(r)(n)}}}},kte=(t,e)=>(n,r,i)=>{let s={storage:Nte(()=>localStorage),partialize:p=>p,version:0,merge:(p,m)=>({...m,...p}),...e},o=!1;const a=new Set,c=new Set;let l=s.storage;if(!l)return t((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...p)},r,i);const u=()=>{const p=s.partialize({...r()});return l.setItem(s.name,{state:p,version:s.version})},d=i.setState;i.setState=(p,m)=>{d(p,m),u()};const h=t((...p)=>{n(...p),u()},r,i);i.getInitialState=()=>h;let f;const g=()=>{var p,m;if(!l)return;o=!1,a.forEach(w=>{var b;return w((b=r())!=null?b:h)});const y=((m=s.onRehydrateStorage)==null?void 0:m.call(s,(p=r())!=null?p:h))||void 0;return aE(l.getItem.bind(l))(s.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==s.version){if(s.migrate)return[!0,s.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var b;const[v,C]=w;if(f=s.merge(C,(b=r())!=null?b:h),n(f,!0),v)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(w=>w(f))}).catch(w=>{y==null||y(void 0,w)})};return i.persist={setOptions:p=>{s={...s,...p},p.storage&&(l=p.storage)},clearStorage:()=>{l==null||l.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:p=>(a.add(p),()=>{a.delete(p)}),onFinishHydration:p=>(c.add(p),()=>{c.delete(p)})},s.skipHydration||g(),f||h},fP=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,i,a);return a},cE=t=>t?fP(t):fP;var pP={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||c,h),g=n?n+l:l;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],f]:c._events[g].push(f):(c._events[g]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,g=new Array(f);h<f;h++)g[h]=d[h].fn;return g},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,g){var p=n?n+l:l;if(!this._events[p])return!1;var m=this._events[p],y=arguments.length,w,b;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,h),!0;case 5:return m.fn.call(m.context,u,d,h,f),!0;case 6:return m.fn.call(m.context,u,d,h,f,g),!0}for(b=1,w=new Array(y-1);b<y;b++)w[b-1]=arguments[b];m.fn.apply(m.context,w)}else{var v=m.length,C;for(b=0;b<v;b++)switch(m[b].once&&this.removeListener(l,m[b].fn,void 0,!0),y){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,u);break;case 3:m[b].fn.call(m[b].context,u,d);break;case 4:m[b].fn.call(m[b].context,u,d,h);break;default:if(!w)for(C=1,w=new Array(y-1);C<y;C++)w[C-1]=arguments[C];m[b].fn.apply(m[b].context,w)}}return!0},a.prototype.on=function(l,u,d){return s(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return s(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var g=this._events[f];if(g.fn)g.fn===u&&(!h||g.once)&&(!d||g.context===d)&&o(this,f);else{for(var p=0,m=[],y=g.length;p<y;p++)(g[p].fn!==u||h&&!g[p].once||d&&g[p].context!==d)&&m.push(g[p]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(pP);var Rte=pP.exports;const Mte=$u(Rte);let Bte=class{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Mte})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}};function Dte(t){return new Bte(t)}function Lte(t,e){return JSON.parse(t,(n,r)=>{let i=r;return(i==null?void 0:i.__type)==="bigint"&&(i=BigInt(i.value)),(i==null?void 0:i.__type)==="Map"&&(i=new Map(i.value)),(e==null?void 0:e(n,i))??i})}function gP(t,e){return t.slice(0,e).join(".")||"."}function mP(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function jte(t,e){const n=typeof t=="function",r=typeof e=="function",i=[],s=[];return function(a,c){if(typeof c=="object")if(i.length){const l=mP(i,this);l===0?i[i.length]=this:(i.splice(l),s.splice(l)),s[s.length]=a;const u=mP(i,c);if(u!==0)return r?e.call(this,a,c,gP(s,u)):`[ref=${gP(s,u)}]`}else i[0]=c,s[0]=a;return n?t.call(this,a,c):c}}function Ute(t,e,n,r){return JSON.stringify(t,jte((i,s)=>{let o=s;return typeof o=="bigint"&&(o={__type:"bigint",value:s.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(s.entries())}),(e==null?void 0:e(i,o))??o},r),n??void 0)}function Fte(t){const{deserialize:e=Lte,key:n="wagmi",serialize:r=Ute,storage:i=yP}=t;function s(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...i,key:n,async getItem(o,a){const c=i.getItem(`${n}.${o}`),l=await s(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await s(i.removeItem(c)):await s(i.setItem(c,r(a)))},async removeItem(o){await s(i.removeItem(`${n}.${o}`))}}}const yP={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function zte(){const t=(()=>typeof window<"u"&&window.localStorage?window.localStorage:yP)();return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const lE=256;let qw=lE,Hw;function qte(t=11){if(!Hw||qw+t>lE*2){Hw="",qw=0;for(let e=0;e<lE;e++)Hw+=(256+Math.random()*256|0).toString(16).substring(1)}return Hw.substring(qw,qw+++t)}function Hte(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Fte({storage:zte()}),syncConnectedChain:r=!0,ssr:i=!1,...s}=t,o=typeof window<"u"&&e?Ote():void 0,a=cE(()=>s.chains),c=cE(()=>{const C=[],A=new Set;for(const $ of s.connectors??[]){const R=l($);if(C.push(R),!i&&R.rdns){const P=typeof R.rdns=="string"?[R.rdns]:R.rdns;for(const L of P)A.add(L)}}if(!i&&o){const $=o.getProviders();for(const R of $)A.has(R.info.rdns)||C.push(l(u(R)))}return C});function l(C){var R;const A=Dte(qte()),$={...C({emitter:A,chains:a.getState(),storage:n,transports:s.transports}),emitter:A,uid:A.uid};return A.on("connect",b),(R=$.setup)==null||R.call($),$}function u(C){const{info:A}=C,$=C.provider;return Fw({target:{...A,id:A.rdns,provider:$}})}const d=new Map;function h(C={}){const A=C.chainId??m.getState().chainId,$=a.getState().find(P=>P.id===A);if(C.chainId&&!$)throw new cf;{const P=d.get(m.getState().chainId);if(P&&!$)return P;if(!$)throw new cf}{const P=d.get(A);if(P)return P}let R;if(s.client)R=s.client({chain:$});else{const P=$.id,L=a.getState().map(j=>j.id),U={},D=Object.entries(s);for(const[j,I]of D)if(!(j==="chains"||j==="client"||j==="connectors"||j==="transports"))if(typeof I=="object")if(P in I)U[j]=I[P];else{if(L.some(S=>S in I))continue;U[j]=I}else U[j]=I;R=tE({...U,chain:$,batch:U.batch??{multicall:!0},transport:j=>s.transports[P]({...j,connectors:c})})}return d.set(A,R),R}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let g;const p="0.0.0-canary-";Mw.startsWith(p)?g=Number.parseInt(Mw.replace(p,""),10):g=Number.parseInt(Mw.split(".")[0]??"0",10);const m=cE(Tte(n?kte(f,{migrate(C,A){if(A===g)return C;const $=f(),R=y(C,$.chainId);return{...$,chainId:R}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([A,$])=>{const{id:R,name:P,type:L,uid:U}=$.connector;return[A,{...$,connector:{id:R,name:P,type:L,uid:U}}]})},chainId:C.chainId,current:C.current}},merge(C,A){typeof C=="object"&&C&&"status"in C&&delete C.status;const $=y(C,A.chainId);return{...A,...C,chainId:$}},skipHydration:i,storage:n,version:g}):f));m.setState(f());function y(C,A){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some($=>$.id===C.chainId)?C.chainId:A}r&&m.subscribe(({connections:C,current:A})=>{var $;return A?($=C.get(A))==null?void 0:$.chainId:void 0},C=>{if(a.getState().some($=>$.id===C))return m.setState($=>({...$,chainId:C??$.chainId}))}),o==null||o.subscribe(C=>{const A=new Set,$=new Set;for(const P of c.getState())if(A.add(P.id),P.rdns){const L=typeof P.rdns=="string"?[P.rdns]:P.rdns;for(const U of L)$.add(U)}const R=[];for(const P of C){if($.has(P.info.rdns))continue;const L=l(u(P));A.has(L.id)||R.push(L)}n&&!m.persist.hasHydrated()||c.setState(P=>[...P,...R],!0)});function w(C){m.setState(A=>{const $=A.connections.get(C.uid);return $?{...A,connections:new Map(A.connections).set(C.uid,{accounts:C.accounts??$.accounts,chainId:C.chainId??$.chainId,connector:$.connector})}:A})}function b(C){m.getState().status==="connecting"||m.getState().status==="reconnecting"||m.setState(A=>{const $=c.getState().find(R=>R.uid===C.uid);return $?($.emitter.listenerCount("connect")&&$.emitter.off("connect",w),$.emitter.listenerCount("change")||$.emitter.on("change",w),$.emitter.listenerCount("disconnect")||$.emitter.on("disconnect",v),{...A,connections:new Map(A.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:$}),current:C.uid,status:"connected"}):A})}function v(C){m.setState(A=>{const $=A.connections.get(C.uid);if($){const P=$.connector;P.emitter.listenerCount("change")&&$.connector.emitter.off("change",w),P.emitter.listenerCount("disconnect")&&$.connector.emitter.off("disconnect",v),P.emitter.listenerCount("connect")||$.connector.emitter.on("connect",b)}if(A.connections.delete(C.uid),A.connections.size===0)return{...A,connections:new Map,current:null,status:"disconnected"};const R=A.connections.values().next().value;return{...A,connections:new Map(A.connections),current:R.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return m.getState()},setState(C){let A;typeof C=="function"?A=C(m.getState()):A=C;const $=f();typeof A!="object"&&(A=$),Object.keys($).some(P=>!(P in A))&&(A=$),m.setState(A,!0)},subscribe(C,A,$){return m.subscribe(C,A,$?{...$,fireImmediately:$.emitImmediately}:void 0)},_internal:{mipd:o,async revalidate(){const C=m.getState(),A=C.connections;let $=C.current;for(const[,R]of A){const P=R.connector;P.isAuthorized&&await P.isAuthorized()||(A.delete(P.uid),$===P.uid&&($=null))}m.setState(R=>({...R,connections:A,current:$}))},store:m,ssr:!!i,syncConnectedChain:r,transports:s.transports,chains:{setState(C){const A=typeof C=="function"?C(a.getState()):C;if(A.length!==0)return a.setState(A,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:w,connect:b,disconnect:v}}}}function Wte(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(i=>i.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(i=>{var c;const s=new Set;for(const l of i??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)s.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(s.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...i,...o]})),r?bte(t):t.storage&&t.setState(i=>({...i,connections:new Map}))}}}function wP(t){var s,o,a;const{chain:e}=t,n=e.rpcUrls.default.http[0];if(!t.transports)return[n];const r=(o=(s=t.transports)==null?void 0:s[e.id])==null?void 0:o.call(s,{chain:e});return(((a=r==null?void 0:r.value)==null?void 0:a.transports)||[r]).map(({value:c})=>(c==null?void 0:c.url)||n)}function Kte(t){const{children:e,config:n,initialState:r,reconnectOnMount:i=!0}=t,{onMount:s}=Wte(n,{initialState:r,reconnectOnMount:i});n._internal.ssr||s();const o=ve.useRef(!0);return ve.useEffect(()=>{if(o.current&&n._internal.ssr)return s(),()=>{o.current=!1}},[]),e}const bP=ve.createContext(void 0);function Vte(t){const{children:e,config:n}=t,r={value:n};return ve.createElement(Kte,t,ve.createElement(bP.Provider,r,e))}const Gte="2.19.4",Zte=()=>`wagmi@${Gte}`;let Yte=class extends Wa{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return Zte()}};class Jte extends Yte{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Hi(t={}){const e=t.config??ve.useContext(bP);if(!e)throw new Jte;return e}function Qte(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,i)=>{n(r,i)})}var vP={exports:{}},EP={},CP={exports:{}},_P={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lf=ve;function Xte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ene=typeof Object.is=="function"?Object.is:Xte,tne=lf.useState,nne=lf.useEffect,rne=lf.useLayoutEffect,ine=lf.useDebugValue;function sne(t,e){var n=e(),r=tne({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return rne(function(){i.value=n,i.getSnapshot=e,uE(i)&&s({inst:i})},[t,n,e]),nne(function(){return uE(i)&&s({inst:i}),t(function(){uE(i)&&s({inst:i})})},[t]),ine(n),n}function uE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ene(t,n)}catch{return!0}}function one(t,e){return e()}var ane=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?one:sne;_P.useSyncExternalStore=lf.useSyncExternalStore!==void 0?lf.useSyncExternalStore:ane,CP.exports=_P;var cne=CP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww=ve,lne=cne;function une(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dne=typeof Object.is=="function"?Object.is:une,hne=lne.useSyncExternalStore,fne=Ww.useRef,pne=Ww.useEffect,gne=Ww.useMemo,mne=Ww.useDebugValue;EP.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=fne(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=gne(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),i!==void 0&&o.hasValue){var g=o.value;if(i(g,f))return d=g}return d=f}if(g=d,dne(u,f))return g;var p=r(f);return i!==void 0&&i(g,p)?(u=f,g):(u=f,d=p)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,i]);var a=hne(t,s[0],s[1]);return pne(function(){o.hasValue=!0,o.value=a},[a]),mne(a),a},vP.exports=EP;var SP=vP.exports;const dE=t=>typeof t=="object"&&!Array.isArray(t);function yne(t,e,n=e,r=Gu){const i=ve.useRef([]),s=SP.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(dE(o)&&dE(a)&&i.current.length){for(const c of i.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return ve.useMemo(()=>{if(dE(s)){const o={...s};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(i.current.includes(c)||i.current.push(c),l)}};return Object.defineProperties(o,a),o}return s},[s])}function Kw(t={}){const e=Hi(t);return yne(n=>Cte(e,{onChange:n}),()=>aP(e))}var uf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wne={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},bne=(nV=class{constructor(){Me(this,wu,wne);Me(this,eA,!1)}setTimeoutProvider(t){Ie(this,wu,t)}setTimeout(t,e){return V(this,wu).setTimeout(t,e)}clearTimeout(t){V(this,wu).clearTimeout(t)}setInterval(t,e){return V(this,wu).setInterval(t,e)}clearInterval(t){V(this,wu).clearInterval(t)}},wu=new WeakMap,eA=new WeakMap,nV),Zu=new bne;function vne(t){setTimeout(t,0)}var Yu=typeof window>"u"||"Deno"in globalThis;function Wr(){}function Ene(t,e){return typeof t=="function"?t(e):t}function hE(t){return typeof t=="number"&&t>=0&&t!==1/0}function xP(t,e){return Math.max(t+(e||0)-Date.now(),0)}function il(t,e){return typeof t=="function"?t(e):t}function Is(t,e){return typeof t=="function"?t(e):t}function AP(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==fE(o,e.options))return!1}else if(!Ug(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function IP(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Ju(e.options.mutationKey)!==Ju(s))return!1}else if(!Ug(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function fE(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ju)(t)}function Ju(t){return JSON.stringify(t,(e,n)=>gE(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Ug(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ug(t[n],e[n])):!1}var Cne=Object.prototype.hasOwnProperty;function pE(t,e){if(t===e)return t;const n=$P(t)&&$P(e);if(!n&&!(gE(t)&&gE(e)))return e;const i=(n?t:Object.keys(t)).length,s=n?e:Object.keys(e),o=s.length,a=n?new Array(o):{};let c=0;for(let l=0;l<o;l++){const u=n?l:s[l],d=t[u],h=e[u];if(d===h){a[u]=d,(n?l<i:Cne.call(t,u))&&c++;continue}if(d===null||h===null||typeof d!="object"||typeof h!="object"){a[u]=h;continue}const f=pE(d,h);a[u]=f,f===d&&c++}return i===o&&c===i?t:a}function Vw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function $P(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function gE(t){if(!PP(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!PP(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function PP(t){return Object.prototype.toString.call(t)==="[object Object]"}function _ne(t){return new Promise(e=>{Zu.setTimeout(e,t)})}function mE(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?pE(t,e):e}function Sne(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function xne(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var yE=Symbol();function OP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===yE?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function TP(t,e){return typeof t=="function"?t(...e):!!t}var Ane=(rV=class extends uf{constructor(){super();Me(this,Ih,void 0);Me(this,bu,void 0);Me(this,j0,void 0);Ie(this,j0,e=>{if(!Yu&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){V(this,bu)||this.setEventListener(V(this,j0))}onUnsubscribe(){var e;this.hasListeners()||((e=V(this,bu))==null||e.call(this),Ie(this,bu,void 0))}setEventListener(e){var n;Ie(this,j0,e),(n=V(this,bu))==null||n.call(this),Ie(this,bu,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){V(this,Ih)!==e&&(Ie(this,Ih,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof V(this,Ih)=="boolean"?V(this,Ih):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ih=new WeakMap,bu=new WeakMap,j0=new WeakMap,rV),wE=new Ane;function bE(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var Ine=vne;function $ne(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=Ine;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var kn=$ne(),Pne=(iV=class extends uf{constructor(){super();Me(this,U0,!0);Me(this,vu,void 0);Me(this,F0,void 0);Ie(this,F0,e=>{if(!Yu&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){V(this,vu)||this.setEventListener(V(this,F0))}onUnsubscribe(){var e;this.hasListeners()||((e=V(this,vu))==null||e.call(this),Ie(this,vu,void 0))}setEventListener(e){var n;Ie(this,F0,e),(n=V(this,vu))==null||n.call(this),Ie(this,vu,e(this.setOnline.bind(this)))}setOnline(e){V(this,U0)!==e&&(Ie(this,U0,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return V(this,U0)}},U0=new WeakMap,vu=new WeakMap,F0=new WeakMap,iV),Gw=new Pne;function One(t){return Math.min(1e3*2**t,3e4)}function NP(t){return(t??"online")==="online"?Gw.isOnline():!0}var vE=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function kP(t){let e=!1,n=0,r;const i=bE(),s=()=>i.status!=="pending",o=p=>{var m;if(!s()){const y=new vE(p);h(y),(m=t.onCancel)==null||m.call(t,y)}},a=()=>{e=!0},c=()=>{e=!1},l=()=>wE.isFocused()&&(t.networkMode==="always"||Gw.isOnline())&&t.canRun(),u=()=>NP(t.networkMode)&&t.canRun(),d=p=>{s()||(r==null||r(),i.resolve(p))},h=p=>{s()||(r==null||r(),i.reject(p))},f=()=>new Promise(p=>{var m;r=y=>{(s()||l())&&p(y)},(m=t.onPause)==null||m.call(t)}).then(()=>{var p;r=void 0,s()||(p=t.onContinue)==null||p.call(t)}),g=()=>{if(s())return;let p;const m=n===0?t.initialPromise:void 0;try{p=m??t.fn()}catch(y){p=Promise.reject(y)}Promise.resolve(p).then(d).catch(y=>{var A;if(s())return;const w=t.retry??(Yu?0:3),b=t.retryDelay??One,v=typeof b=="function"?b(n,y):b,C=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(e||!C){h(y);return}n++,(A=t.onFail)==null||A.call(t,n,y),_ne(v).then(()=>l()?void 0:f()).then(()=>{e?h(y):g()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?g():f().then(g),i)}}var RP=(sV=class{constructor(){Me(this,$h,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),hE(this.gcTime)&&Ie(this,$h,Zu.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Yu?1/0:5*60*1e3))}clearGcTimeout(){V(this,$h)&&(Zu.clearTimeout(V(this,$h)),Ie(this,$h,void 0))}},$h=new WeakMap,sV),Tne=(oV=class extends RP{constructor(e){super();Me(this,Mo);Me(this,Ph,void 0);Me(this,z0,void 0);Me(this,Xs,void 0);Me(this,Oh,void 0);Me(this,dr,void 0);Me(this,Ly,void 0);Me(this,Th,void 0);Ie(this,Th,!1),Ie(this,Ly,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ie(this,Oh,e.client),Ie(this,Xs,V(this,Oh).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ie(this,Ph,DP(this.options)),this.state=e.state??V(this,Ph),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=V(this,dr))==null?void 0:e.promise}setOptions(e){if(this.options={...V(this,Ly),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=DP(this.options);n.data!==void 0&&(this.setState(BP(n.data,n.dataUpdatedAt)),Ie(this,Ph,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&V(this,Xs).remove(this)}setData(e,n){const r=mE(this.state.data,e,this.options);return Xe(this,Mo,Gc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Xe(this,Mo,Gc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=V(this,dr))==null?void 0:r.promise;return(i=V(this,dr))==null||i.cancel(e),n?n.then(Wr).catch(Wr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(V(this,Ph))}isActive(){return this.observers.some(e=>Is(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>il(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!xP(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=V(this,dr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=V(this,dr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),V(this,Xs).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(V(this,dr)&&(V(this,Th)?V(this,dr).cancel({revert:!0}):V(this,dr).cancelRetry()),this.scheduleGc()),V(this,Xs).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Xe(this,Mo,Gc).call(this,{type:"invalidate"})}async fetch(e,n){var c,l,u,d,h,f,g,p,m,y,w,b;if(this.state.fetchStatus!=="idle"&&((c=V(this,dr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(V(this,dr))return V(this,dr).continueRetry(),V(this,dr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const v=this.observers.find(C=>C.options.queryFn);v&&this.setOptions(v.options)}const r=new AbortController,i=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(Ie(this,Th,!0),r.signal)})},s=()=>{const v=OP(this.options,n),A=(()=>{const $={client:V(this,Oh),queryKey:this.queryKey,meta:this.meta};return i($),$})();return Ie(this,Th,!1),this.options.persister?this.options.persister(v,A,this):v(A)},a=(()=>{const v={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:V(this,Oh),state:this.state,fetchFn:s};return i(v),v})();(l=this.options.behavior)==null||l.onFetch(a,this),Ie(this,z0,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Xe(this,Mo,Gc).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta}),Ie(this,dr,kP({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:v=>{v instanceof vE&&v.revert&&this.setState({...V(this,z0),fetchStatus:"idle"}),r.abort()},onFail:(v,C)=>{Xe(this,Mo,Gc).call(this,{type:"failed",failureCount:v,error:C})},onPause:()=>{Xe(this,Mo,Gc).call(this,{type:"pause"})},onContinue:()=>{Xe(this,Mo,Gc).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const v=await V(this,dr).start();if(v===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(v),(f=(h=V(this,Xs).config).onSuccess)==null||f.call(h,v,this),(p=(g=V(this,Xs).config).onSettled)==null||p.call(g,v,this.state.error,this),v}catch(v){if(v instanceof vE){if(v.silent)return V(this,dr).promise;if(v.revert){if(this.state.data===void 0)throw v;return this.state.data}}throw Xe(this,Mo,Gc).call(this,{type:"error",error:v}),(y=(m=V(this,Xs).config).onError)==null||y.call(m,v,this),(b=(w=V(this,Xs).config).onSettled)==null||b.call(w,this.state.data,v,this),v}finally{this.scheduleGc()}}},Ph=new WeakMap,z0=new WeakMap,Xs=new WeakMap,Oh=new WeakMap,dr=new WeakMap,Ly=new WeakMap,Th=new WeakMap,Mo=new WeakSet,Gc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...MP(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,...BP(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ie(this,z0,e.manual?i:void 0),i;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),kn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),V(this,Xs).notify({query:this,type:"updated",action:e})})},oV);function MP(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:NP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function BP(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function DP(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Nne=(aV=class extends uf{constructor(e,n){super();Me(this,Mh);Me(this,Fy);Me(this,zy);Me(this,qy);Me(this,Hy);Me(this,Wy);Me(this,Ky);Me(this,Vy);Me(this,a3);Me(this,Mi,void 0);Me(this,dt,void 0);Me(this,jy,void 0);Me(this,ii,void 0);Me(this,Nh,void 0);Me(this,q0,void 0);Me(this,qc,void 0);Me(this,Eu,void 0);Me(this,Uy,void 0);Me(this,H0,void 0);Me(this,W0,void 0);Me(this,kh,void 0);Me(this,Rh,void 0);Me(this,Cu,void 0);Me(this,K0,new Set);this.options=n,Ie(this,Mi,e),Ie(this,Eu,null),Ie(this,qc,bE()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(V(this,dt).addObserver(this),LP(V(this,dt),this.options)?Xe(this,Mh,tw).call(this):this.updateResult(),Xe(this,Hy,dA).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return EE(V(this,dt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return EE(V(this,dt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Xe(this,Wy,hA).call(this),Xe(this,Ky,fA).call(this),V(this,dt).removeObserver(this)}setOptions(e){const n=this.options,r=V(this,dt);if(this.options=V(this,Mi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Is(this.options.enabled,V(this,dt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Xe(this,Vy,pA).call(this),V(this,dt).setOptions(this.options),n._defaulted&&!Vw(this.options,n)&&V(this,Mi).getQueryCache().notify({type:"observerOptionsUpdated",query:V(this,dt),observer:this});const i=this.hasListeners();i&&jP(V(this,dt),r,this.options,n)&&Xe(this,Mh,tw).call(this),this.updateResult(),i&&(V(this,dt)!==r||Is(this.options.enabled,V(this,dt))!==Is(n.enabled,V(this,dt))||il(this.options.staleTime,V(this,dt))!==il(n.staleTime,V(this,dt)))&&Xe(this,Fy,cA).call(this);const s=Xe(this,zy,lA).call(this);i&&(V(this,dt)!==r||Is(this.options.enabled,V(this,dt))!==Is(n.enabled,V(this,dt))||s!==V(this,Cu))&&Xe(this,qy,uA).call(this,s)}getOptimisticResult(e){const n=V(this,Mi).getQueryCache().build(V(this,Mi),e),r=this.createResult(n,e);return Rne(this,r)&&(Ie(this,ii,r),Ie(this,q0,this.options),Ie(this,Nh,V(this,dt).state)),r}getCurrentResult(){return V(this,ii)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&V(this,qc).status==="pending"&&V(this,qc).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,i))})}trackProp(e){V(this,K0).add(e)}getCurrentQuery(){return V(this,dt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=V(this,Mi).defaultQueryOptions(e),r=V(this,Mi).getQueryCache().build(V(this,Mi),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Xe(this,Mh,tw).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),V(this,ii)))}createResult(e,n){var P;const r=V(this,dt),i=this.options,s=V(this,ii),o=V(this,Nh),a=V(this,q0),l=e!==r?e.state:V(this,jy),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const L=this.hasListeners(),U=!L&&LP(e,n),D=L&&jP(e,r,n,i);(U||D)&&(d={...d,...MP(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:g,errorUpdatedAt:p,status:m}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&m==="pending"){let L;s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(L=s.data,y=!0):L=typeof n.placeholderData=="function"?n.placeholderData((P=V(this,W0))==null?void 0:P.state.data,V(this,W0)):n.placeholderData,L!==void 0&&(m="success",f=mE(s==null?void 0:s.data,L,n),h=!0)}if(n.select&&f!==void 0&&!y)if(s&&f===(o==null?void 0:o.data)&&n.select===V(this,Uy))f=V(this,H0);else try{Ie(this,Uy,n.select),f=n.select(f),f=mE(s==null?void 0:s.data,f,n),Ie(this,H0,f),Ie(this,Eu,null)}catch(L){Ie(this,Eu,L)}V(this,Eu)&&(g=V(this,Eu),f=V(this,H0),p=Date.now(),m="error");const w=d.fetchStatus==="fetching",b=m==="pending",v=m==="error",C=b&&w,A=f!==void 0,R={status:m,fetchStatus:d.fetchStatus,isPending:b,isSuccess:m==="success",isError:v,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:g,errorUpdatedAt:p,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!b,isLoadingError:v&&!A,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:v&&A,isStale:CE(e,n),refetch:this.refetch,promise:V(this,qc),isEnabled:Is(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const L=j=>{R.status==="error"?j.reject(R.error):R.data!==void 0&&j.resolve(R.data)},U=()=>{const j=Ie(this,qc,R.promise=bE());L(j)},D=V(this,qc);switch(D.status){case"pending":e.queryHash===r.queryHash&&L(D);break;case"fulfilled":(R.status==="error"||R.data!==D.value)&&U();break;case"rejected":(R.status!=="error"||R.error!==D.reason)&&U();break}}return R}updateResult(){const e=V(this,ii),n=this.createResult(V(this,dt),this.options);if(Ie(this,Nh,V(this,dt).state),Ie(this,q0,this.options),V(this,Nh).data!==void 0&&Ie(this,W0,V(this,dt)),Vw(n,e))return;Ie(this,ii,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!V(this,K0).size)return!0;const o=new Set(s??V(this,K0));return this.options.throwOnError&&o.add("error"),Object.keys(V(this,ii)).some(a=>{const c=a;return V(this,ii)[c]!==e[c]&&o.has(c)})};Xe(this,a3,gV).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Xe(this,Hy,dA).call(this)}},Mi=new WeakMap,dt=new WeakMap,jy=new WeakMap,ii=new WeakMap,Nh=new WeakMap,q0=new WeakMap,qc=new WeakMap,Eu=new WeakMap,Uy=new WeakMap,H0=new WeakMap,W0=new WeakMap,kh=new WeakMap,Rh=new WeakMap,Cu=new WeakMap,K0=new WeakMap,Mh=new WeakSet,tw=function(e){Xe(this,Vy,pA).call(this);let n=V(this,dt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Wr)),n},Fy=new WeakSet,cA=function(){Xe(this,Wy,hA).call(this);const e=il(this.options.staleTime,V(this,dt));if(Yu||V(this,ii).isStale||!hE(e))return;const r=xP(V(this,ii).dataUpdatedAt,e)+1;Ie(this,kh,Zu.setTimeout(()=>{V(this,ii).isStale||this.updateResult()},r))},zy=new WeakSet,lA=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(V(this,dt)):this.options.refetchInterval)??!1},qy=new WeakSet,uA=function(e){Xe(this,Ky,fA).call(this),Ie(this,Cu,e),!(Yu||Is(this.options.enabled,V(this,dt))===!1||!hE(V(this,Cu))||V(this,Cu)===0)&&Ie(this,Rh,Zu.setInterval(()=>{(this.options.refetchIntervalInBackground||wE.isFocused())&&Xe(this,Mh,tw).call(this)},V(this,Cu)))},Hy=new WeakSet,dA=function(){Xe(this,Fy,cA).call(this),Xe(this,qy,uA).call(this,Xe(this,zy,lA).call(this))},Wy=new WeakSet,hA=function(){V(this,kh)&&(Zu.clearTimeout(V(this,kh)),Ie(this,kh,void 0))},Ky=new WeakSet,fA=function(){V(this,Rh)&&(Zu.clearInterval(V(this,Rh)),Ie(this,Rh,void 0))},Vy=new WeakSet,pA=function(){const e=V(this,Mi).getQueryCache().build(V(this,Mi),this.options);if(e===V(this,dt))return;const n=V(this,dt);Ie(this,dt,e),Ie(this,jy,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},a3=new WeakSet,gV=function(e){kn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(V(this,ii))}),V(this,Mi).getQueryCache().notify({query:V(this,dt),type:"observerResultsUpdated"})})},aV);function kne(t,e){return Is(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function LP(t,e){return kne(t,e)||t.state.data!==void 0&&EE(t,e,e.refetchOnMount)}function EE(t,e,n){if(Is(e.enabled,t)!==!1&&il(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&CE(t,e)}return!1}function jP(t,e,n,r){return(t!==e||Is(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&CE(t,n)}function CE(t,e){return Is(e.enabled,t)!==!1&&t.isStaleByTime(il(e.staleTime,t))}function Rne(t,e){return!Vw(t.getCurrentResult(),e)}function UP(t){return{onFetch:(e,n)=>{var u,d,h,f,g;const r=e.options,i=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,s=((f=e.state.data)==null?void 0:f.pages)||[],o=((g=e.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let p=!1;const m=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},y=OP(e.options,e.fetchOptions),w=async(b,v,C)=>{if(p)return Promise.reject();if(v==null&&b.pages.length)return Promise.resolve(b);const $=(()=>{const U={client:e.client,queryKey:e.queryKey,pageParam:v,direction:C?"backward":"forward",meta:e.options.meta};return m(U),U})(),R=await y($),{maxPages:P}=e.options,L=C?xne:Sne;return{pages:L(b.pages,R,P),pageParams:L(b.pageParams,v,P)}};if(i&&s.length){const b=i==="backward",v=b?Mne:FP,C={pages:s,pageParams:o},A=v(r,C);a=await w(C,A,b)}else{const b=t??s.length;do{const v=c===0?o[0]??r.initialPageParam:FP(r,a);if(c>0&&v==null)break;a=await w(a,v),c++}while(c<b)}return a};e.options.persister?e.fetchFn=()=>{var p,m;return(m=(p=e.options).persister)==null?void 0:m.call(p,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function FP(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Mne(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Bne=(cV=class extends RP{constructor(e){super();Me(this,Na);Me(this,Gy,void 0);Me(this,Ta,void 0);Me(this,si,void 0);Me(this,Bh,void 0);Ie(this,Gy,e.client),this.mutationId=e.mutationId,Ie(this,si,e.mutationCache),Ie(this,Ta,[]),this.state=e.state||zP(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){V(this,Ta).includes(e)||(V(this,Ta).push(e),this.clearGcTimeout(),V(this,si).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ie(this,Ta,V(this,Ta).filter(n=>n!==e)),this.scheduleGc(),V(this,si).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){V(this,Ta).length||(this.state.status==="pending"?this.scheduleGc():V(this,si).remove(this))}continue(){var e;return((e=V(this,Bh))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,c,l,u,d,h,f,g,p,m,y,w,b,v,C,A,$,R,P;const n=()=>{Xe(this,Na,Iu).call(this,{type:"continue"})},r={client:V(this,Gy),meta:this.options.meta,mutationKey:this.options.mutationKey};Ie(this,Bh,kP({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(L,U)=>{Xe(this,Na,Iu).call(this,{type:"failed",failureCount:L,error:U})},onPause:()=>{Xe(this,Na,Iu).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>V(this,si).canRun(this)}));const i=this.state.status==="pending",s=!V(this,Bh).canStart();try{if(i)n();else{Xe(this,Na,Iu).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(o=V(this,si).config).onMutate)==null?void 0:a.call(o,e,this,r));const U=await((l=(c=this.options).onMutate)==null?void 0:l.call(c,e,r));U!==this.state.context&&Xe(this,Na,Iu).call(this,{type:"pending",context:U,variables:e,isPaused:s})}const L=await V(this,Bh).start();return await((d=(u=V(this,si).config).onSuccess)==null?void 0:d.call(u,L,e,this.state.context,this,r)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,L,e,this.state.context,r)),await((p=(g=V(this,si).config).onSettled)==null?void 0:p.call(g,L,null,this.state.variables,this.state.context,this,r)),await((y=(m=this.options).onSettled)==null?void 0:y.call(m,L,null,e,this.state.context,r)),Xe(this,Na,Iu).call(this,{type:"success",data:L}),L}catch(L){try{throw await((b=(w=V(this,si).config).onError)==null?void 0:b.call(w,L,e,this.state.context,this,r)),await((C=(v=this.options).onError)==null?void 0:C.call(v,L,e,this.state.context,r)),await(($=(A=V(this,si).config).onSettled)==null?void 0:$.call(A,void 0,L,this.state.variables,this.state.context,this,r)),await((P=(R=this.options).onSettled)==null?void 0:P.call(R,void 0,L,e,this.state.context,r)),L}finally{Xe(this,Na,Iu).call(this,{type:"error",error:L})}}finally{V(this,si).runNext(this)}}},Gy=new WeakMap,Ta=new WeakMap,si=new WeakMap,Bh=new WeakMap,Na=new WeakSet,Iu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),kn.batch(()=>{V(this,Ta).forEach(r=>{r.onMutationUpdate(e)}),V(this,si).notify({mutation:this,type:"updated",action:e})})},cV);function zP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Dne=(lV=class extends uf{constructor(e={}){super();Me(this,Hc,void 0);Me(this,Bo,void 0);Me(this,Zy,void 0);this.config=e,Ie(this,Hc,new Set),Ie(this,Bo,new Map),Ie(this,Zy,0)}build(e,n,r){const i=new Bne({client:e,mutationCache:this,mutationId:++l3(this,Zy)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){V(this,Hc).add(e);const n=Zw(e);if(typeof n=="string"){const r=V(this,Bo).get(n);r?r.push(e):V(this,Bo).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(V(this,Hc).delete(e)){const n=Zw(e);if(typeof n=="string"){const r=V(this,Bo).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&V(this,Bo).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Zw(e);if(typeof n=="string"){const r=V(this,Bo).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Zw(e);if(typeof n=="string"){const i=(r=V(this,Bo).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){kn.batch(()=>{V(this,Hc).forEach(e=>{this.notify({type:"removed",mutation:e})}),V(this,Hc).clear(),V(this,Bo).clear()})}getAll(){return Array.from(V(this,Hc))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>IP(n,r))}findAll(e={}){return this.getAll().filter(n=>IP(e,n))}notify(e){kn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return kn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Wr))))}},Hc=new WeakMap,Bo=new WeakMap,Zy=new WeakMap,lV);function Zw(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Lne=(uV=class extends uf{constructor(e,n){super();Me(this,V0);Me(this,Yy);Me(this,Wc,void 0);Me(this,_u,void 0);Me(this,Bi,void 0);Me(this,Kc,void 0);Ie(this,Wc,e),this.setOptions(n),this.bindMethods(),Xe(this,V0,u3).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var r;const n=this.options;this.options=V(this,Wc).defaultMutationOptions(e),Vw(this.options,n)||V(this,Wc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:V(this,Bi),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Ju(n.mutationKey)!==Ju(this.options.mutationKey)?this.reset():((r=V(this,Bi))==null?void 0:r.state.status)==="pending"&&V(this,Bi).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=V(this,Bi))==null||e.removeObserver(this)}onMutationUpdate(e){Xe(this,V0,u3).call(this),Xe(this,Yy,gA).call(this,e)}getCurrentResult(){return V(this,_u)}reset(){var e;(e=V(this,Bi))==null||e.removeObserver(this),Ie(this,Bi,void 0),Xe(this,V0,u3).call(this),Xe(this,Yy,gA).call(this)}mutate(e,n){var r;return Ie(this,Kc,n),(r=V(this,Bi))==null||r.removeObserver(this),Ie(this,Bi,V(this,Wc).getMutationCache().build(V(this,Wc),this.options)),V(this,Bi).addObserver(this),V(this,Bi).execute(e)}},Wc=new WeakMap,_u=new WeakMap,Bi=new WeakMap,Kc=new WeakMap,V0=new WeakSet,u3=function(){var n;const e=((n=V(this,Bi))==null?void 0:n.state)??zP();Ie(this,_u,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},Yy=new WeakSet,gA=function(e){kn.batch(()=>{var n,r,i,s,o,a,c,l;if(V(this,Kc)&&this.hasListeners()){const u=V(this,_u).variables,d=V(this,_u).context,h={client:V(this,Wc),meta:this.options.meta,mutationKey:this.options.mutationKey};(e==null?void 0:e.type)==="success"?((r=(n=V(this,Kc)).onSuccess)==null||r.call(n,e.data,u,d,h),(s=(i=V(this,Kc)).onSettled)==null||s.call(i,e.data,null,u,d,h)):(e==null?void 0:e.type)==="error"&&((a=(o=V(this,Kc)).onError)==null||a.call(o,e.error,u,d,h),(l=(c=V(this,Kc)).onSettled)==null||l.call(c,void 0,e.error,u,d,h))}this.listeners.forEach(u=>{u(V(this,_u))})})},uV),jne=(dV=class extends uf{constructor(e={}){super();Me(this,ka,void 0);this.config=e,Ie(this,ka,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??fE(i,n);let o=this.get(s);return o||(o=new Tne({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){V(this,ka).has(e.queryHash)||(V(this,ka).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=V(this,ka).get(e.queryHash);n&&(e.destroy(),n===e&&V(this,ka).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){kn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return V(this,ka).get(e)}getAll(){return[...V(this,ka).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>AP(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>AP(e,r)):n}notify(e){kn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){kn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){kn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ka=new WeakMap,dV),Une=(hV=class{constructor(t={}){Me(this,pn,void 0);Me(this,Su,void 0);Me(this,xu,void 0);Me(this,G0,void 0);Me(this,Z0,void 0);Me(this,Au,void 0);Me(this,Y0,void 0);Me(this,J0,void 0);Ie(this,pn,t.queryCache||new jne),Ie(this,Su,t.mutationCache||new Dne),Ie(this,xu,t.defaultOptions||{}),Ie(this,G0,new Map),Ie(this,Z0,new Map),Ie(this,Au,0)}mount(){l3(this,Au)._++,V(this,Au)===1&&(Ie(this,Y0,wE.subscribe(async t=>{t&&(await this.resumePausedMutations(),V(this,pn).onFocus())})),Ie(this,J0,Gw.subscribe(async t=>{t&&(await this.resumePausedMutations(),V(this,pn).onOnline())})))}unmount(){var t,e;l3(this,Au)._--,V(this,Au)===0&&((t=V(this,Y0))==null||t.call(this),Ie(this,Y0,void 0),(e=V(this,J0))==null||e.call(this),Ie(this,J0,void 0))}isFetching(t){return V(this,pn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return V(this,Su).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=V(this,pn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=V(this,pn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(il(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return V(this,pn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=V(this,pn).get(r.queryHash),s=i==null?void 0:i.state.data,o=Ene(e,s);if(o!==void 0)return V(this,pn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return kn.batch(()=>V(this,pn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=V(this,pn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=V(this,pn);kn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=V(this,pn);return kn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=kn.batch(()=>V(this,pn).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Wr).catch(Wr)}invalidateQueries(t,e={}){return kn.batch(()=>(V(this,pn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=kn.batch(()=>V(this,pn).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Wr)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Wr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=V(this,pn).build(this,e);return n.isStaleByTime(il(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Wr).catch(Wr)}fetchInfiniteQuery(t){return t.behavior=UP(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Wr).catch(Wr)}ensureInfiniteQueryData(t){return t.behavior=UP(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Gw.isOnline()?V(this,Su).resumePausedMutations():Promise.resolve()}getQueryCache(){return V(this,pn)}getMutationCache(){return V(this,Su)}getDefaultOptions(){return V(this,xu)}setDefaultOptions(t){Ie(this,xu,t)}setQueryDefaults(t,e){V(this,G0).set(Ju(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...V(this,G0).values()],n={};return e.forEach(r=>{Ug(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){V(this,Z0).set(Ju(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...V(this,Z0).values()],n={};return e.forEach(r=>{Ug(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...V(this,xu).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=fE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===yE&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...V(this,xu).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){V(this,pn).clear(),V(this,Su).clear()}},pn=new WeakMap,Su=new WeakMap,xu=new WeakMap,G0=new WeakMap,Z0=new WeakMap,Au=new WeakMap,Y0=new WeakMap,J0=new WeakMap,hV);function Fne(t,e){return pE(t,e)}function zne(t){return JSON.stringify(t,(e,n)=>qne(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):typeof n=="bigint"?n.toString():n)}function qne(t){if(!qP(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!qP(n)||!n.hasOwnProperty("isPrototypeOf"))}function qP(t){return Object.prototype.toString.call(t)==="[object Object]"}function _E(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:i,initialDataUpdatedAt:s,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:g,structuralSharing:p,getPreviousPageParam:m,getNextPageParam:y,initialPageParam:w,_optimisticResults:b,enabled:v,notifyOnChangeProps:C,placeholderData:A,refetchInterval:$,refetchIntervalInBackground:R,refetchOnMount:P,refetchOnReconnect:L,refetchOnWindowFocus:U,retryOnMount:D,select:j,staleTime:I,suspense:E,throwOnError:S,config:k,connector:_,query:x,...T}=t;return T}function Hne(t){return{mutationFn(e){return nte(t,e)},mutationKey:["connect"]}}function Wne(t){return{mutationFn(e){return fte(t,e)},mutationKey:["disconnect"]}}function Kne(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:i,...s}=n[1];if(!r)throw new Error("address is required");return await mte(t,{...s,address:r})??null},queryKey:Vne(e)}}function Vne(t={}){return["balance",_E(t)]}function Gne(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:i,scopeKey:s,...o}=n[1];return wte(t,{...o,connector:r})},queryKey:Zne(e)}}function Zne(t={}){const{connector:e,...n}=t;return["walletClient",{..._E(n),connectorUid:e==null?void 0:e.uid}]}function Yne(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:i,scopeKey:s,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!i)throw new Error("functionName is required");return cP(t,{abi:r,functionName:i,args:o.args,...a,...o})},queryKey:Jne(e)}}function Jne(t={}){const{abi:e,...n}=t;return["readContract",_E(n)]}function Qne(t){return{mutationFn(e){return Ete(t,e)},mutationKey:["switchChain"]}}function Xne(t){return{mutationFn(e){return Ite(t,e)},mutationKey:["writeContract"]}}var HP=cn.createContext(void 0),SE=t=>{const e=cn.useContext(HP);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ere=({client:t,children:e})=>(cn.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),ee.jsx(HP.Provider,{value:t,children:e})),WP=cn.createContext(!1),tre=()=>cn.useContext(WP);WP.Provider;function nre(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var rre=cn.createContext(nre()),ire=()=>cn.useContext(rre),sre=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},ore=t=>{cn.useEffect(()=>{t.clearReset()},[t])},are=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||TP(n,[t.error,r])),cre=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},lre=(t,e)=>t.isLoading&&t.isFetching&&!e,ure=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,KP=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function dre(t,e,n){var d,h,f,g,p;const r=tre(),i=ire(),s=SE(n),o=s.defaultQueryOptions(t);(h=(d=s.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",cre(o),sre(o,i),ore(i);const a=!s.getQueryCache().get(o.queryHash),[c]=cn.useState(()=>new e(s,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(cn.useSyncExternalStore(cn.useCallback(m=>{const y=u?c.subscribe(kn.batchCalls(m)):Wr;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),cn.useEffect(()=>{c.setOptions(o)},[o,c]),ure(o,l))throw KP(o,c,i);if(are({result:l,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((g=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||g.call(f,o,l),o.experimental_prefetchInRender&&!Yu&&lre(l,r)){const m=a?KP(o,c,i):(p=s.getQueryCache().get(o.queryHash))==null?void 0:p.promise;m==null||m.catch(Wr).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function hre(t,e){return dre(t,Nne,e)}function Yw(t,e){const n=SE(e),[r]=cn.useState(()=>new Lne(n,t));cn.useEffect(()=>{r.setOptions(t)},[r,t]);const i=cn.useSyncExternalStore(cn.useCallback(o=>r.subscribe(kn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=cn.useCallback((o,a)=>{r.mutate(o,a).catch(Wr)},[r]);if(i.error&&TP(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}function xE(t){const e=hre({...t,queryKeyHashFn:zne});return e.queryKey=t.queryKey,e}function AE(t={}){const e=Hi(t);return ve.useSyncExternalStore(n=>_te(e,{onChange:n}),()=>uP(e),()=>uP(e))}function VP(t={}){const{address:e,query:n={}}=t,r=Hi(t),i=AE({config:r}),s=Kne(r,{...t,chainId:t.chainId??i}),o=!!(e&&(n.enabled??!0));return xE({...n,...s,enabled:o})}function fre(t={}){const e=Hi(t);return ve.useSyncExternalStore(n=>Qte(e,{onChange:n}),()=>dP(e),()=>dP(e))}function pre(t={}){const e=Hi(t);return ve.useSyncExternalStore(n=>xte(e,{onChange:n}),()=>hP(e),()=>hP(e))}function GP(t={}){const{mutation:e}=t,n=Hi(t),r=Hne(n),{mutate:i,mutateAsync:s,...o}=Yw({...e,...r});return ve.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:i,connectAsync:s,connectors:pre({config:n})}}function gre(t={}){const e=Hi(t);return ve.useSyncExternalStore(n=>Ste(e,{onChange:n}),()=>iE(e),()=>iE(e))}function mre(t={}){const{mutation:e}=t,n=Hi(t),r=Wne(n),{mutate:i,mutateAsync:s,...o}=Yw({...e,...r});return{...o,connectors:gre({config:n}).map(a=>a.connector),disconnect:i,disconnectAsync:s}}function yre(t={}){const e=Hi(t);return SP.useSyncExternalStoreWithSelector(n=>Ate(e,{onChange:n}),()=>sE(e,t),()=>sE(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function Fg(t={}){const{abi:e,address:n,functionName:r,query:i={}}=t,s=t.code,o=Hi(t),a=AE({config:o}),c=Yne(o,{...t,chainId:t.chainId??a}),l=!!((n||s)&&e&&r&&(i.enabled??!0));return xE({...i,...c,enabled:l,structuralSharing:i.structuralSharing??Fne})}function ZP(t={}){const{mutation:e}=t,n=Hi(t),r=Qne(n),{mutate:i,mutateAsync:s,...o}=Yw({...e,...r});return{...o,chains:fre({config:n}),switchChain:i,switchChainAsync:s}}function YP(t={}){const{query:e={},...n}=t,r=Hi(n),i=SE(),{address:s,connector:o,status:a}=Kw({config:r}),c=AE({config:r}),l=t.connector??o,{queryKey:u,...d}=Gne(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=ve.useRef(s);return ve.useEffect(()=>{const g=f.current;!s&&g?(i.removeQueries({queryKey:u}),f.current=void 0):s!==g&&(i.invalidateQueries({queryKey:u}),f.current=s)},[s,i]),xE({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function wre(t={}){const{mutation:e}=t,n=Hi(t),r=Xne(n),{mutate:i,mutateAsync:s,...o}=Yw({...e,...r});return{...o,writeContract:i,writeContractAsync:s}}IE.type="metaMask";function IE(t={}){let e,n,r,i,s,o,a,c;return l=>({id:"metaMaskSDK",name:"MetaMask",rdns:["io.metamask","io.metamask.mobile"],type:IE.type,async setup(){const u=await this.getProvider();u!=null&&u.on&&(o||(o=this.onConnect.bind(this),u.on("connect",o)),i||(i=this.onAccountsChanged.bind(this),u.on("accountsChanged",i)))},async connect({chainId:u,isReconnecting:d,withCapabilities:h}={}){const f=await this.getProvider();a||(a=this.onDisplayUri,f.on("display_uri",a));let g=[];d&&(g=await this.getAccounts().catch(()=>[]));try{let p,m;g!=null&&g.length||(t.connectAndSign||t.connectWith?(t.connectAndSign?p=await e.connectAndSign({msg:t.connectAndSign}):t.connectWith&&(m=await e.connectWith({method:t.connectWith.method,params:t.connectWith.params})),g=await this.getAccounts()):g=(await e.connect()).map(b=>ai(b)));let y=await this.getChainId();if(u&&y!==u){const w=await this.switchChain({chainId:u}).catch(b=>{if(b.code===Ut.code)throw b;return{id:y}});y=(w==null?void 0:w.id)??y}return a&&(f.removeListener("display_uri",a),a=void 0),p?f.emit("connectAndSign",{accounts:g,chainId:y,signResponse:p}):m&&f.emit("connectWith",{accounts:g,chainId:y,connectWithResponse:m}),o&&(f.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),f.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),f.on("chainChanged",s)),c||(c=this.onDisconnect.bind(this),f.on("disconnect",c)),{accounts:h?g.map(w=>({address:w,capabilities:{}})):g,chainId:y}}catch(p){const m=p;throw m.code===Ut.code?new Ut(m):m.code===jo.code?new jo(m):m}},async disconnect(){const u=await this.getProvider();s&&(u.removeListener("chainChanged",s),s=void 0),c&&(u.removeListener("disconnect",c),c=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o)),await e.terminate()},async getAccounts(){return(await(await this.getProvider()).request({method:"eth_accounts"})).map(h=>ai(h))},async getChainId(){const u=await this.getProvider(),d=u.getChainId()||await(u==null?void 0:u.request({method:"eth_chainId"}));return Number(d)},async getProvider(){async function u(){var p,m,y,w,b;const d=await(async()=>{const{default:v}=await Promise.resolve().then(()=>xle);return typeof v!="function"&&typeof v.default=="function"?v.default:v})(),h={};for(const v of l.chains)h[Ne(v.id)]=(p=wP({chain:v,transports:l.transports}))==null?void 0:p[0];e=new d({_source:"wagmi",forceDeleteProvider:!1,forceInjectProvider:!1,injectProvider:!1,...t,readonlyRPCMap:h,dappMetadata:{...t.dappMetadata,name:(m=t.dappMetadata)!=null&&m.name?(y=t.dappMetadata)==null?void 0:y.name:"wagmi",url:(w=t.dappMetadata)!=null&&w.url?(b=t.dappMetadata)==null?void 0:b.url:typeof window<"u"?window.location.origin:"https://wagmi.sh"},useDeeplink:t.useDeeplink??!0});const f=await e.init(),g=(()=>f!=null&&f.activeProvider?f.activeProvider:e.getProvider())();if(!g)throw new Ka;return g}return n||(r||(r=u()),n=await r),n},async isAuthorized(){try{return!!(await Hu(()=>E6(()=>this.getAccounts(),{timeout:200}),{delay:201,retryCount:3})).length}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:d}){var m,y;const h=await this.getProvider(),f=l.chains.find(w=>w.id===d);if(!f)throw new ro(new cf);try{return await h.request({method:"wallet_switchEthereumChain",params:[{chainId:Ne(d)}]}),await g(),await p(d),f}catch(w){const b=w;if(b.code===Ut.code)throw new Ut(b);if(b.code===4902||((y=(m=b==null?void 0:b.data)==null?void 0:m.originalError)==null?void 0:y.code)===4902)try{return await h.request({method:"wallet_addEthereumChain",params:[{blockExplorerUrls:(()=>{const{default:v,...C}=f.blockExplorers??{};if(u!=null&&u.blockExplorerUrls)return u.blockExplorerUrls;if(v)return[v.url,...Object.values(C).map(A=>A.url)]})(),chainId:Ne(d),chainName:(u==null?void 0:u.chainName)??f.name,iconUrls:u==null?void 0:u.iconUrls,nativeCurrency:(u==null?void 0:u.nativeCurrency)??f.nativeCurrency,rpcUrls:(()=>{var v,C;return(v=u==null?void 0:u.rpcUrls)!=null&&v.length?u.rpcUrls:[((C=f.rpcUrls.default)==null?void 0:C.http[0])??""]})()}]}),await g(),await p(d),f}catch(v){const C=v;throw C.code===Ut.code?new Ut(C):new ro(C)}throw new ro(b)}async function g(){await Hu(async()=>{const w=Es(await h.request({method:"eth_chainId"}));if(w!==d)throw new Error("User rejected switch after adding network.");return w},{delay:50,retryCount:20})}async function p(w){await new Promise(b=>{const v=C=>{"chainId"in C&&C.chainId===w&&(l.emitter.off("change",v),b())};l.emitter.on("change",v),l.emitter.emit("change",{chainId:w})})}},async onAccountsChanged(u){if(u.length===0)if(e.isExtensionActive())this.onDisconnect();else return;else if(l.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d})}else l.emitter.emit("change",{accounts:u.map(d=>ai(d))})},onChainChanged(u){const d=Number(u);l.emitter.emit("change",{chainId:d})},async onConnect(u){const d=await this.getAccounts();if(d.length===0)return;const h=Number(u.chainId);l.emitter.emit("connect",{accounts:d,chainId:h});const f=await this.getProvider();o&&(f.removeListener("connect",o),o=void 0),i||(i=this.onAccountsChanged.bind(this),f.on("accountsChanged",i)),s||(s=this.onChainChanged.bind(this),f.on("chainChanged",s)),c||(c=this.onDisconnect.bind(this),f.on("disconnect",c))},async onDisconnect(u){const d=await this.getProvider();u&&u.code===1013&&d&&(await this.getAccounts()).length||(l.emitter.emit("disconnect"),s&&(d.removeListener("chainChanged",s),s=void 0),c&&(d.removeListener("disconnect",c),c=void 0),o||(o=this.onConnect.bind(this),d.on("connect",o)))},onDisplayUri(u){l.emitter.emit("message",{type:"display_uri",data:u})}})}function Qu(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function JP(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Qu(n);return(i,s)=>r.then(o=>s(o.transaction(e,i).objectStore(e)))}let $E;function zg(){return $E||($E=JP("keyval-store","keyval")),$E}function QP(t,e=zg()){return e("readonly",n=>Qu(n.get(t)))}function bre(t,e,n=zg()){return n("readwrite",r=>(r.put(e,t),Qu(r.transaction)))}function vre(t,e=zg()){return e("readwrite",n=>(n.delete(t),Qu(n.transaction)))}function Ere(t=zg()){return t("readwrite",e=>(e.clear(),Qu(e.transaction)))}function Cre(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Qu(t.transaction)}function _re(t=zg()){return t("readonly",e=>{if(e.getAllKeys)return Qu(e.getAllKeys());const n=[];return Cre(e,r=>n.push(r.key)).then(()=>n)})}PE.type="walletConnect";function PE(t){const e=t.isNewChainsStale??!0;let n,r;const i="eip155";let s,o,a,c,l,u;return d=>({id:"walletConnect",name:"WalletConnect",type:PE.type,async setup(){const h=await this.getProvider().catch(()=>null);h&&(a||(a=this.onConnect.bind(this),h.on("connect",a)),l||(l=this.onSessionDelete.bind(this),h.on("session_delete",l)))},async connect({chainId:h,withCapabilities:f,...g}={}){var p,m;try{const y=await this.getProvider();if(!y)throw new Ka;c||(c=this.onDisplayUri,y.on("display_uri",c));let w=h;if(!w){const A=await((p=d.storage)==null?void 0:p.getItem("state"))??{};d.chains.some(R=>R.id===A.chainId)?w=A.chainId:w=(m=d.chains[0])==null?void 0:m.id}if(!w)throw new Error("No chains found on connector.");const b=await this.isChainsStale();if(y.session&&b&&await y.disconnect(),!y.session||b){const A=d.chains.filter($=>$.id!==w).map($=>$.id);await y.connect({optionalChains:[w,...A],..."pairingTopic"in g?{pairingTopic:g.pairingTopic}:{}}),this.setRequestedChainsIds(d.chains.map($=>$.id))}const v=(await y.enable()).map(A=>ai(A));let C=await this.getChainId();if(h&&C!==h){const A=await this.switchChain({chainId:h}).catch($=>{var R;if($.code===Ut.code&&((R=$.cause)==null?void 0:R.message)!=="Missing or invalid. request() method: wallet_addEthereumChain")throw $;return{id:C}});C=(A==null?void 0:A.id)??C}return c&&(y.removeListener("display_uri",c),c=void 0),a&&(y.removeListener("connect",a),a=void 0),s||(s=this.onAccountsChanged.bind(this),y.on("accountsChanged",s)),o||(o=this.onChainChanged.bind(this),y.on("chainChanged",o)),u||(u=this.onDisconnect.bind(this),y.on("disconnect",u)),l||(l=this.onSessionDelete.bind(this),y.on("session_delete",l)),{accounts:f?v.map(A=>({address:A,capabilities:{}})):v,chainId:C}}catch(y){throw/(user rejected|connection request reset)/i.test(y==null?void 0:y.message)?new Ut(y):y}},async disconnect(){const h=await this.getProvider();try{await(h==null?void 0:h.disconnect())}catch(f){if(!/No matching key/i.test(f.message))throw f}finally{o&&(h==null||h.removeListener("chainChanged",o),o=void 0),u&&(h==null||h.removeListener("disconnect",u),u=void 0),a||(a=this.onConnect.bind(this),h==null||h.on("connect",a)),s&&(h==null||h.removeListener("accountsChanged",s),s=void 0),l&&(h==null||h.removeListener("session_delete",l),l=void 0),this.setRequestedChainsIds([])}},async getAccounts(){return(await this.getProvider()).accounts.map(f=>ai(f))},async getProvider({chainId:h}={}){var g;async function f(){const p=d.chains.map(y=>y.id);if(!p.length)return;const{EthereumProvider:m}=await Promise.resolve().then(()=>zEe);return await m.init({...t,disableProviderPing:!0,optionalChains:p,projectId:t.projectId,rpcMap:Object.fromEntries(d.chains.map(y=>{const[w]=wP({chain:y,transports:d.transports});return[y.id,w]})),showQrModal:t.showQrModal??!0})}return n||(r||(r=f()),n=await r,n==null||n.events.setMaxListeners(Number.POSITIVE_INFINITY)),h&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:h})),n},async getChainId(){return(await this.getProvider()).chainId},async isAuthorized(){try{const[h,f]=await Promise.all([this.getAccounts(),this.getProvider()]);return h.length?await this.isChainsStale()&&f.session?(await f.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:h,chainId:f}){var m,y,w;const g=await this.getProvider();if(!g)throw new Ka;const p=d.chains.find(b=>b.id===f);if(!p)throw new ro(new cf);try{await Promise.all([new Promise(v=>{const C=({chainId:A})=>{A===f&&(d.emitter.off("change",C),v())};d.emitter.on("change",C)}),g.request({method:"wallet_switchEthereumChain",params:[{chainId:Ne(f)}]})]);const b=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...b,f]),p}catch(b){const v=b;if(/(user rejected)/i.test(v.message))throw new Ut(v);try{let C;h!=null&&h.blockExplorerUrls?C=h.blockExplorerUrls:C=(m=p.blockExplorers)!=null&&m.default.url?[(y=p.blockExplorers)==null?void 0:y.default.url]:[];let A;(w=h==null?void 0:h.rpcUrls)!=null&&w.length?A=h.rpcUrls:A=[...p.rpcUrls.default.http];const $={blockExplorerUrls:C,chainId:Ne(f),chainName:(h==null?void 0:h.chainName)??p.name,iconUrls:h==null?void 0:h.iconUrls,nativeCurrency:(h==null?void 0:h.nativeCurrency)??p.nativeCurrency,rpcUrls:A};await g.request({method:"wallet_addEthereumChain",params:[$]});const R=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...R,f]),p}catch(C){throw new Ut(C)}}},onAccountsChanged(h){h.length===0?this.onDisconnect():d.emitter.emit("change",{accounts:h.map(f=>ai(f))})},onChainChanged(h){const f=Number(h);d.emitter.emit("change",{chainId:f})},async onConnect(h){const f=Number(h.chainId),g=await this.getAccounts();d.emitter.emit("connect",{accounts:g,chainId:f})},async onDisconnect(h){this.setRequestedChainsIds([]),d.emitter.emit("disconnect");const f=await this.getProvider();s&&(f.removeListener("accountsChanged",s),s=void 0),o&&(f.removeListener("chainChanged",o),o=void 0),u&&(f.removeListener("disconnect",u),u=void 0),l&&(f.removeListener("session_delete",l),l=void 0),a||(a=this.onConnect.bind(this),f.on("connect",a))},onDisplayUri(h){d.emitter.emit("message",{type:"display_uri",data:h})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,g,p;return n?((p=(g=(f=n.session)==null?void 0:f.namespaces[i])==null?void 0:g.accounts)==null?void 0:p.map(m=>Number.parseInt(m.split(":")[1]||"",10)))??[]:[]},async getRequestedChainsIds(){var h;return await((h=d.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[]},async isChainsStale(){if(!e)return!1;const h=d.chains.map(p=>p.id),f=this.getNamespaceChainsIds();if(f.length&&!f.some(p=>h.includes(p)))return!1;const g=await this.getRequestedChainsIds();return!h.every(p=>g.includes(p))},async setRequestedChainsIds(h){var f;await((f=d.storage)==null?void 0:f.setItem(this.requestedChainsStorageKey,h))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Sre={56:{address:"0x0000000000000000000000000000000000000000",deploymentBlock:0},2372:{address:"0x0000000000000000000000000000000000000000",deploymentBlock:0}},Wi={bsc:{id:56,name:"BNB Chain",network:"bsc",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},explorer:"https://bscscan.com"},hyperchain:{id:2372,name:"BESC Hyperchain",network:"besc",nativeCurrency:{name:"BESC",symbol:"BESC",decimals:18},explorer:"https://explorer.beschyperchain.com"}},xre=[56,2372],Jw={basisPointsToPercentage:t=>`${(t/100).toFixed(2)}%`,percentageToBasisPoints:t=>Math.round(t*100),calculateFee:(t,e)=>(BigInt(t)*BigInt(e)/BigInt(1e4)).toString(),calculateBridgeAmount:(t,e)=>{const n=Jw.calculateFee(t,e);return(BigInt(t)-BigInt(n)).toString()}},Are={bnb:{primary:"https://cryptologos.cc/logos/bnb-bnb-logo.png",fallbacks:["https://assets.coingecko.com/coins/images/825/small/bnb-icon2_2x.png","https://s2.coinmarketcap.com/static/img/coins/64x64/1839.png","https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/smartchain/info/logo.png"],emoji:""},besc:{primary:"https://explorer.beschyperchain.com/favicon.ico",fallbacks:["data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiIGZpbGw9IiM5MzMzZWEiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iOCIgaGVpZ2h0PSI4Ij4KPHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9IndoaXRlIj4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9Imx1Y2lkZSBsdWNpZGUtbGluayI+PHBhdGggZD0ibTkgMTUgNi02Ii8+PHBhdGggZD0iTTExIDZoLjUxYTUgNSAwIDAgMSA0LjVgNHYuNWE1IDUgMCAwIDEtNCA0LjVIMTFhNSA1IDAgMCAxLTQtNHYtMWE1IDUgMCAwIDEgNC00WiIvPjwvc3ZnPgo8L3N2Zz4KPC9zdmc+Cjwvc3ZnPgo="],emoji:""}};function Qw({chain:t,size:e="w-5 h-5",className:n=""}){const r=Are[t];return r?ee.jsxs("div",{className:`relative ${e} ${n}`,children:[ee.jsx("img",{src:r.primary,alt:t.toUpperCase(),className:`${e} object-contain`,onError:i=>{const s=r.fallbacks.findIndex(o=>o===i.target.src);s<r.fallbacks.length-1?i.target.src=r.fallbacks[s+1]:(i.target.style.display="none",i.target.nextElementSibling.style.display="inline")}}),ee.jsx("span",{className:`${e} text-center items-center justify-center hidden`,style:{display:"none"},children:r.emoji})]}):ee.jsx("span",{className:`inline-block ${e} ${n}`,children:"?"})}const XP={56:"0x32c66fcb34229dad04651b8253cc8badbf0d803d",2372:"0x32c66fcb34229dad04651b8253cc8badbf0d803d"},OE=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"amount",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"MAX_TOTAL_SUPPLY",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"isBridge",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"bridge",type:"address"},{name:"authorized",type:"bool"}],name:"setBridge",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getChainInfo",outputs:[{name:"currentChainId",type:"uint256"},{name:"currentSupply",type:"uint256"},{name:"maxSupply",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getTotalBuyTax",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getTotalSellTax",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"amount",type:"uint256"},{indexed:!1,name:"newSupply",type:"uint256"}],name:"TokensMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"amount",type:"uint256"},{indexed:!1,name:"newSupply",type:"uint256"}],name:"TokensBurned",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"bridge",type:"address"},{indexed:!1,name:"authorized",type:"bool"}],name:"BridgeAuthorized",type:"event"}];function Ire(t,e){const[n,r]=ve.useState(null),[i,s]=ve.useState(null),o=e?XP[e]:null,{data:a,isError:c,isLoading:l,refetch:u}=Fg({address:o,abi:OE,functionName:"balanceOf",args:[t],enabled:!!(t&&o)}),{data:d}=Fg({address:o,abi:OE,functionName:"decimals",enabled:!!o});return ve.useEffect(()=>{if(a&&d)try{const h=Fi(a,d);r(parseFloat(h).toFixed(4)),s(null)}catch(h){console.error("Error formatting MSMIL balance:",h),s("Error formatting balance"),r(null)}else c?(s("Error fetching balance"),r(null)):o||(r(null),s(null))},[a,d,c,o]),[n,u,l,i]}const eO={bsc:"0x10ED43C718714eb63d5aA57B78B54704E256024E",hyperchain:"0x2600E57E2044d62277775A925709af0047c28Eb7"},tO={bsc:"0x32c66fcb34229dad04651b8253cc8badbf0d803d",hyperchain:"0x32c66fcb34229dad04651b8253cc8badbf0d803d"},nO={bsc:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",hyperchain:"0x33e22F85CC1877697773ca5c85988663388883A0"},rO=[{name:"getAmountsOut",type:"function",stateMutability:"view",inputs:[{type:"uint256"},{type:"address[]"}],outputs:[{type:"uint256[]"}]},{name:"swapExactETHForTokens",type:"function",stateMutability:"payable",inputs:[{type:"uint256"},{type:"address[]"},{type:"address"},{type:"uint256"}],outputs:[{type:"uint256[]"}]}];function $re({theme:t={}}){const[e,n]=ve.useState(""),[r,i]=ve.useState(""),[s,o]=ve.useState(""),[a,c]=ve.useState(""),[l,u]=ve.useState(""),[d,h]=ve.useState("bsc"),[f,g]=ve.useState(!1),[p,m]=ve.useState(!1),{address:y,isConnected:w,chainId:b}=Kw(),{connectors:v,connect:C}=GP(),{switchChain:A}=ZP(),{data:$}=YP(),R=yre(),P=()=>{n(""),i(""),o(""),c(""),u(""),g(!1)};ve.useEffect(()=>{b===Wi.bsc.id?h("bsc"):b===Wi.hyperchain.id&&h("hyperchain"),P()},[b]),ve.useEffect(()=>{P(),w||m(!1)},[w]),ve.useEffect(()=>{P()},[b]);const{data:L,refetch:U}=VP({address:y,chainId:d==="bsc"?Wi.bsc.id:Wi.hyperchain.id}),[D,j,I,E]=Ire(y,d==="bsc"?Wi.bsc.id:Wi.hyperchain.id),S=()=>{U(),j()};ve.useEffect(()=>{(async()=>{if(i(""),!w||!e||Number(e)===0){i("");return}try{const M=tl(e,18),O=eO[d],N=tO[d],B=nO[d];if(!O||!N||!B){console.warn("Missing router or token configuration for",d);return}const F=d==="bsc"?Wi.bsc:Wi.hyperchain,q=await rP({chain:{id:F.id,rpcUrls:{default:{http:[d==="bsc"?"https://bsc-dataseed1.binance.org":"https://rpc.beschyperchain.com/"]}}},transport:rl(d==="bsc"?"https://bsc-dataseed1.binance.org":"https://rpc.beschyperchain.com/")}).readContract({address:O,abi:rO,functionName:"getAmountsOut",args:[M,[B,N]]});i(Fi(q[1],18))}catch(M){console.error("Error estimating output:",M),i("")}})()},[e,d,b,w]);const k=async()=>{if(!(!e||Number(e)<=0||!$))try{if(g(!0),c(""),o("Preparing swap..."),!w||!y)throw new Error("Please connect your wallet first");const T=tl(e,18),M=eO[d],O=tO[d],N=nO[d];if(!M||!O||!N)throw new Error("DEX configuration missing for selected chain");const B=Math.floor(Date.now()/1e3)+60*10;let F=0n;r&&Number(r)>0&&(F=tl(r,18)*96n/100n),o("Sending transaction...");const z=await $.writeContract({address:M,abi:rO,functionName:"swapExactETHForTokens",args:[F,[N,O],y,B],value:T});if(u(z),o("Transaction sent, waiting for confirmation..."),(await R.waitForTransactionReceipt({hash:z})).status==="success")o("Swap completed successfully!"),n(""),i(""),setTimeout(()=>{S(),o(""),u("")},3e3);else throw new Error("Transaction failed");g(!1)}catch(T){console.error("Swap failed:",T),c(T.message||"Swap failed. Please try again."),g(!1),o("")}},_=b===Wi.bsc.id||b===Wi.hyperchain.id,x=w&&_&&e&&Number(e)>0&&!f;return ee.jsxs("div",{className:"w-full relative",style:t.swapWidget,children:[ee.jsxs("div",{className:"min-h-[500px] md:min-h-[550px] bg-gray-900/50 backdrop-blur-sm border border-gray-700/50 rounded-xl overflow-hidden flex flex-col",children:[ee.jsx("div",{className:"px-6 py-4 border-b border-gray-700/50 bg-gray-800/30 flex-shrink-0",children:ee.jsxs("div",{className:"flex items-center justify-between",children:[ee.jsx("h3",{className:"text-lg font-semibold text-white",children:"Token Swap"}),w?ee.jsx("div",{className:"flex items-center gap-3",children:ee.jsxs("span",{className:"text-sm text-green-400",children:["Connected Wallet: ",y==null?void 0:y.slice(0,6),"...",y==null?void 0:y.slice(-4)]})}):ee.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Connect Wallet"})]})}),ee.jsx("div",{className:"px-6 py-3 border-b border-gray-700/30 flex-shrink-0",children:ee.jsxs("div",{className:"flex items-center justify-between",children:[ee.jsx("span",{className:"text-sm text-gray-400",children:"Network:"}),ee.jsx("div",{className:"flex items-center gap-2",children:_?ee.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${d==="bsc"?"bg-yellow-500/20 text-yellow-400":d==="hyperchain"?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-400"}`,children:[d==="bsc"&&ee.jsx(Qw,{chain:"bnb",size:"w-3 h-3"}),d==="hyperchain"&&ee.jsx(Qw,{chain:"besc",size:"w-3 h-3"}),d==="bsc"?"BNB Chain":d==="hyperchain"?"BESC Hyperchain":"Unknown"]}):ee.jsxs("div",{className:"flex gap-2 flex-col sm:flex-row",children:[ee.jsx("button",{onClick:()=>w&&A({chainId:Wi.bsc.id}),className:"text-xs px-2 py-1 bg-yellow-600 hover:bg-yellow-700 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!w,children:"Switch to BNB Chain"}),ee.jsx("button",{onClick:()=>w&&A({chainId:Wi.hyperchain.id}),className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!w,children:"Switch to BESC"})]})})]})}),ee.jsx("div",{className:"px-6 py-3 border-b border-gray-700/30 flex-shrink-0",children:ee.jsxs("div",{className:"space-y-2",children:[ee.jsxs("div",{className:"flex items-center justify-between text-sm",children:[ee.jsx("span",{className:"text-gray-400",children:"Balance:"}),ee.jsx("span",{className:`${w?"text-white":"text-gray-500"}`,children:w?`${Number((L==null?void 0:L.formatted)||"0.00").toFixed(4)} ${(L==null?void 0:L.symbol)||"ETH"}`:"--- ETH"})]}),ee.jsxs("div",{className:"flex items-center justify-between text-sm",children:[ee.jsx("span",{className:"text-gray-400",children:"MSMIL Balance:"}),ee.jsx("div",{className:"flex items-center gap-2",children:ee.jsx("span",{className:`${w?"text-white":"text-gray-500"}`,children:w?`${parseInt(D||"0.00")} MSMIL`:"--- MSMIL"})})]})]})}),ee.jsx("div",{className:"px-6 py-4 flex-1 flex flex-col",children:ee.jsxs("div",{className:"space-y-4 flex-1",children:[ee.jsxs("div",{children:[ee.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Amount (",d==="bsc"?"BNB":"BESC","):"]}),ee.jsx("input",{type:"number",min:"0",value:e,onChange:T=>n(T.target.value),disabled:!w||!_,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:w?"0.0":"Connect wallet to continue"})]}),ee.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg border border-gray-700/30",children:[ee.jsxs("div",{className:"text-sm text-gray-400",children:["Expected MSMIL:"," ",ee.jsx("span",{className:`font-medium ${w&&r?"text-white":"text-gray-500"}`,children:w&&r?`${parseFloat(r).toFixed(6)} MSMIL`:e&&!w?"Connect wallet to see estimate":e&&w&&!r?"Calculating...":"0.000000 MSMIL"})]}),ee.jsxs("div",{className:"text-xs text-blue-400 mt-1",children:["Slippage: 4% (Minimum received: ",w&&r?`${(parseFloat(r)*.96).toFixed(6)} MSMIL`:"0.000000 MSMIL",")"]})]}),w&&!_&&ee.jsx("div",{className:"p-3 bg-orange-500/10 border border-orange-500/20 rounded-lg",children:ee.jsx("p",{className:"text-orange-400 text-sm",children:" Please switch to BNB Chain or BESC Hyperchain to continue."})}),ee.jsx("div",{className:"mt-auto",children:ee.jsx("button",{className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-gray-600 disabled:to-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-[1.02] disabled:transform-none disabled:opacity-50",disabled:!x,onClick:k,children:w?_?f?ee.jsxs("span",{className:"flex items-center justify-center gap-2",children:[ee.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}),"Swapping..."]}):"Swap":"Switch to Supported Network":"Connect Wallet to Swap"})})]})}),ee.jsxs("div",{className:"px-6 pb-4 flex-shrink-0",children:[s&&ee.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg mb-2",children:[ee.jsxs("div",{className:"text-sm",children:[ee.jsx("span",{className:"font-semibold text-blue-400",children:"Status:"})," ",ee.jsx("span",{className:"text-white",children:s})]}),l&&ee.jsx("div",{className:"mt-2",children:ee.jsxs("a",{href:`${Wi[d].explorer}/tx/${l}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-400 hover:text-blue-300 text-sm transition-colors duration-200",children:["View Transaction",ee.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]}),a&&ee.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:ee.jsxs("div",{className:"text-sm text-red-400",children:[ee.jsx("span",{className:"font-semibold",children:"Error:"})," ",a]})})]})]}),p&&ee.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>m(!1),children:ee.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-xl p-6 w-full max-w-md mx-4 shadow-2xl",onClick:T=>T.stopPropagation(),children:[ee.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ee.jsx("h3",{className:"text-lg font-semibold text-white",children:"Connect Wallet"}),ee.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-300 transition-colors",children:ee.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),ee.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Choose your preferred wallet to connect and start swapping tokens"}),ee.jsxs("div",{className:"space-y-3",children:[ee.jsxs("button",{onClick:()=>{const T=v==null?void 0:v.find(M=>{var O,N;return((O=M.name)==null?void 0:O.toLowerCase().includes("metamask"))||((N=M.id)==null?void 0:N.toLowerCase().includes("metamask"))});if(T)C({connector:T});else{const M=v==null?void 0:v.find(O=>{var N;return!((N=O.name)!=null&&N.toLowerCase().includes("walletconnect"))});M&&C({connector:M})}m(!1)},className:"w-full flex items-center gap-3 px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-600 hover:from-blue-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all duration-200 hover:scale-[1.02] transform",children:[ee.jsx("span",{className:"text-xl",children:""}),ee.jsxs("div",{className:"text-left flex-1",children:[ee.jsx("div",{className:"font-medium",children:"MetaMask"}),ee.jsx("div",{className:"text-sm opacity-75",children:"Recommended"})]})]}),ee.jsxs("button",{onClick:()=>{const T=v==null?void 0:v.find(M=>{var O,N,B,F,z,q;return(((O=M.name)==null?void 0:O.toLowerCase().includes("trust"))||((N=M.name)==null?void 0:N.toLowerCase().includes("phantom"))||((B=M.id)==null?void 0:B.toLowerCase().includes("injected"))||((F=M.name)==null?void 0:F.toLowerCase().includes("browser")))&&!((z=M.name)!=null&&z.toLowerCase().includes("metamask"))&&!((q=M.name)!=null&&q.toLowerCase().includes("walletconnect"))});if(T)C({connector:T});else{const M=v==null?void 0:v.find(O=>{var N,B;return!((N=O.name)!=null&&N.toLowerCase().includes("metamask"))&&!((B=O.name)!=null&&B.toLowerCase().includes("walletconnect"))});M&&C({connector:M})}m(!1)},className:"w-full flex items-center gap-3 px-4 py-3 bg-gradient-to-r from-green-600 to-purple-600 hover:from-green-700 hover:to-purple-700 text-white rounded-lg font-medium transition-all duration-200 hover:scale-[1.02] transform",children:[ee.jsx("span",{className:"text-xl",children:""}),ee.jsxs("div",{className:"text-left flex-1",children:[ee.jsx("div",{className:"font-medium",children:"Browser Wallet"}),ee.jsx("div",{className:"text-sm opacity-75",children:"Trust Wallet, Phantom, etc."})]})]}),ee.jsxs("button",{onClick:()=>{const T=v==null?void 0:v.find(M=>{var O,N;return((O=M.name)==null?void 0:O.toLowerCase().includes("walletconnect"))||((N=M.id)==null?void 0:N.toLowerCase().includes("walletconnect"))});if(T)C({connector:T});else{const M=v==null?void 0:v[v.length-1];M&&C({connector:M})}m(!1)},className:"w-full flex items-center gap-3 px-4 py-3 bg-gradient-to-r from-purple-600 to-purple-600 hover:from-purple-700 hover:to-purple-700 text-white rounded-lg font-medium transition-all duration-200 hover:scale-[1.02] transform",children:[ee.jsx("span",{className:"text-xl",children:""}),ee.jsxs("div",{className:"text-left flex-1",children:[ee.jsx("div",{className:"font-medium",children:"Mobile Wallet"}),ee.jsx("div",{className:"text-sm opacity-75",children:"WalletConnect"})]})]})]})]})})]})}const TE=[{inputs:[{internalType:"address",name:"_msmilToken",type:"address"},{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_feeRecipient",type:"address"},{internalType:"uint256[]",name:"_supportedChainIds",type:"uint256[]"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"BridgeToSameChain",type:"error"},{inputs:[],name:"InvalidAmount",type:"error"},{inputs:[],name:"InvalidFee",type:"error"},{inputs:[],name:"TransactionAlreadyProcessed",type:"error"},{inputs:[],name:"UnauthorizedBridge",type:"error"},{inputs:[],name:"UnsupportedChain",type:"error"},{inputs:[],name:"ZeroAddress",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"fromChain",type:"uint256"},{indexed:!0,internalType:"uint256",name:"toChain",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"transactionId",type:"bytes32"}],name:"BridgeCompleted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newFee",type:"uint256"}],name:"BridgeFeeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"fromChain",type:"uint256"},{indexed:!0,internalType:"uint256",name:"toChain",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"fee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"nonce",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"transactionId",type:"bytes32"}],name:"BridgeInitiated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMinAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newMaxAmount",type:"uint256"}],name:"BridgeLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"chainId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newFee",type:"uint256"}],name:"ChainBridgeFeeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"chainId",type:"uint256"},{indexed:!1,internalType:"bool",name:"supported",type:"bool"}],name:"ChainSupported",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRecipient",type:"address"}],name:"FeeRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"FeesWithdrawn",type:"event"},{inputs:[],name:"MAX_FEE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MIN_FEE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"bridgeFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"toChain",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"bridgeTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"chainBridgeFees",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"collectedFees",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"fromChain",type:"uint256"},{internalType:"bytes32",name:"transactionId",type:"bytes32"}],name:"completeBridge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"feeRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"toChain",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"getBridgeFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"toChain",type:"uint256"}],name:"getBridgeFeePercentage",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"toChain",type:"uint256"}],name:"getBridgeFeeRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBridgeLimits",outputs:[{internalType:"uint256",name:"min",type:"uint256"},{internalType:"uint256",name:"max",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"transactionId",type:"bytes32"}],name:"isTransactionProcessed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxBridgeAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"minBridgeAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"msmilToken",outputs:[{internalType:"contract IMilestoneMillions",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"processedTransactions",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_bridgeFee",type:"uint256"}],name:"setBridgeFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_minBridgeAmount",type:"uint256"},{internalType:"uint256",name:"_maxBridgeAmount",type:"uint256"}],name:"setBridgeLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"uint256",name:"_bridgeFee",type:"uint256"}],name:"setChainBridgeFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_feeRecipient",type:"address"}],name:"setFeeRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"bool",name:"supported",type:"bool"}],name:"setSupportedChain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"supportedChains",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];function Pre(t){const e=Sre[t],{data:n}=Fg({address:e==null?void 0:e.address,abi:TE,functionName:"getBridgeLimits",enabled:!!(e!=null&&e.address)&&e.address!=="0x0000000000000000000000000000000000000000"}),{data:r}=Fg({address:e==null?void 0:e.address,abi:TE,functionName:"getBridgeFeeRate",args:[t],enabled:!!(e!=null&&e.address)&&e.address!=="0x0000000000000000000000000000000000000000"}),{data:i,isLoading:s,write:o}=wre({address:e==null?void 0:e.address,abi:TE,functionName:"bridgeTokens"}),a=(d,h)=>{if(!d||!r)return"0";const f=Number(r);return Jw.calculateFee(d,f)},c=(d,h)=>{if(!d||!r)return d;const f=Number(r);return Jw.calculateBridgeAmount(d,f)},l=()=>r?Jw.basisPointsToPercentage(Number(r)):"0.00%",u=d=>{if(!n)return{valid:!0};const h=eee(d.toString()),[f,g]=n;return h<f?{valid:!1,error:`Minimum bridge amount is ${cg(f)} MSMIL`}:h>g?{valid:!1,error:`Maximum bridge amount is ${cg(g)} MSMIL`}:{valid:!0}};return{bridgeContract:e==null?void 0:e.address,isContractDeployed:(e==null?void 0:e.address)&&e.address!=="0x0000000000000000000000000000000000000000",bridgeLimits:n,bridgeFeeRate:r,getFeePercentage:l,getBridgeFee:a,getBridgeAmount:c,validateBridgeAmount:u,bridgeTokens:o,isBridging:s,bridgeTransactionHash:i==null?void 0:i.hash}}const Ore={bsc:{id:56,name:"BNB Chain",rpc:"https://bsc-dataseed1.binance.org",explorer:"https://bscscan.com"},hyperchain:{id:2372,name:"BESC Hyperchain",rpc:"https://rpc.beschyperchain.com/",explorer:"https://explorer.beschyperchain.com"}},Tre={MSMIL:{bsc:"0x32c66fcb34229dad04651b8253cc8badbf0d803d",hyperchain:"0x32c66fcb34229dad04651b8253cc8badbf0d803d",decimals:18}},Nre={bsc:"0x0000000000000000000000000000000000000000",hyperchain:"0x0000000000000000000000000000000000000000"},Xw=[{name:"balanceOf",type:"function",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{name:"decimals",type:"function",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{name:"allowance",type:"function",stateMutability:"view",inputs:[{type:"address"},{type:"address"}],outputs:[{type:"uint256"}]},{name:"approve",type:"function",stateMutability:"nonpayable",inputs:[{type:"address"},{type:"uint256"}],outputs:[{type:"bool"}]}];function kre({chains:t=Ore,tokens:e=Tre,bridgeAddresses:n=Nre,bridgeLive:r=!0,theme:i={},...s}){const{address:o,isConnected:a,chainId:c}=Kw(),{data:l}=YP(),{connect:u,connectors:d}=GP();mre();const{isContractDeployed:h,getBridgeFee:f,getBridgeAmount:g,getFeePercentage:p,validateBridgeAmount:m,bridgeTokens:y,isBridging:w,bridgeTransactionHash:b}=Pre(c);VP({address:o});const v=c?XP[c]:null;Fg({address:v,abi:OE,functionName:"balanceOf",args:[o],enabled:!!(o&&v&&a)});const[C,A]=ve.useState(""),[$,R]=ve.useState(""),P=()=>{A(""),R("")};ve.useEffect(()=>{P()},[a]),ve.useEffect(()=>{P()},[c]),ve.useEffect(()=>{const te=setTimeout(async()=>{if(!a&&d&&d.length>0)try{const se=d.find(fe=>{var _e,Pe;return((_e=fe.name)==null?void 0:_e.toLowerCase().includes("metamask"))||((Pe=fe.id)==null?void 0:Pe.toLowerCase().includes("metamask"))});if(se){console.log("Bridge: Attempting to auto-connect to MetaMask..."),await u({connector:se});return}const he=d.find(fe=>{var _e,Pe;return((_e=fe.id)==null?void 0:_e.toLowerCase().includes("injected"))||((Pe=fe.name)==null?void 0:Pe.toLowerCase().includes("browser"))});if(he){console.log("Bridge: MetaMask not found, attempting to connect to injected wallet..."),await u({connector:he});return}d[0]&&(console.log("Bridge: Using first available connector:",d[0].name),await u({connector:d[0]}))}catch(se){console.warn("Bridge: Auto-connect failed:",se)}},150);return()=>clearTimeout(te)},[u,d,a]);const[L,U]=ve.useState(""),[D,j]=ve.useState(""),[I,E]=ve.useState(!1),[S,k]=ve.useState(!1),[_,x]=ve.useState(""),[T,M]=ve.useState("0"),[O,N]=ve.useState(e.MSMIL.decimals),[B,F]=ve.useState("bsc_to_hyperchain"),z=B==="bsc_to_hyperchain"?"bsc":"hyperchain",q=t[z],H=e.MSMIL[z],K=n[z];if(!r)return ee.jsx("div",{className:styles.bridgeComingSoon,children:ee.jsx("div",{className:styles.bridgeComingSoonMessage,children:"COMING SOON"})});ve.useEffect(()=>{async function G(){if(!(!o||!a))try{const te=rP({chain:{id:q.id},transport:rl(q.rpc)}),se=await te.readContract({address:H,abi:Xw,functionName:"balanceOf",args:[o]}),he=await te.readContract({address:H,abi:Xw,functionName:"decimals",args:[]});N(Number(he)),x(Fi(se,Number(he)));const fe=await te.readContract({address:H,abi:Xw,functionName:"allowance",args:[o,K]});M(Fi(fe,Number(he))),k(parseFloat(Fi(fe,Number(he)))>0)}catch{x(""),M("0"),k(!1)}}G()},[o,a,q,H,K]);const Y=async()=>{U(""),R(""),E(!0);try{const G=tl("1000000000",O),te=await l.writeContract({address:H,abi:Xw,functionName:"approve",args:[K,G]});R("Approval submitted."),j(te),k(!0),E(!1)}catch(G){U((G==null?void 0:G.message)||(typeof G=="string"?G:JSON.stringify(G))),R("Approval failed"),E(!1)}},J=async()=>{U(""),R(""),E(!0);try{const G=m(C);if(!G.valid){U(G.error),E(!1);return}if(!h){U("Bridge contract not deployed on this network"),E(!1);return}const te=selectedChain==="bsc"?56:2372;if(!xre.includes(te)){U("Target chain not supported for bridging"),E(!1);return}const se=tl(C,O),he=f(se.toString(),te),fe=g(se.toString(),te),_e=p();R(`Bridging ${Fi(fe,O)} MSMIL (${_e} fee) to ${selectedChain}...`),y({args:[te,se,o]})}catch(G){console.error("Bridge error:",G),U((G==null?void 0:G.message)||(typeof G=="string"?G:JSON.stringify(G))),R("Bridge failed")}finally{E(!1)}};return ee.jsx("div",{className:"w-full space-y-4",style:i.bridgeWidget,children:a?ee.jsxs("div",{className:"space-y-4",children:[ee.jsxs("div",{className:"space-y-3",children:[ee.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[ee.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Bridge direction:"}),ee.jsxs("select",{value:B,onChange:G=>F(G.target.value),className:"px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all duration-200",children:[ee.jsx("option",{value:"bsc_to_hyperchain",children:"BNB Chain  BESC Hyperchain"}),ee.jsx("option",{value:"hyperchain_to_bsc",children:"BESC Hyperchain  BNB Chain"})]})]}),ee.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[ee.jsx("div",{className:"p-3 bg-gray-800/30 rounded-lg",children:ee.jsxs("div",{className:"text-sm text-gray-400",children:[ee.jsx("span",{className:"font-medium text-white",children:"MSMIL balance:"})," ",_?`${parseFloat(_).toFixed(6)} MSMIL`:"Loading..."]})}),ee.jsx("div",{className:"p-3 bg-gray-800/30 rounded-lg",children:ee.jsxs("div",{className:"text-sm text-gray-400",children:[ee.jsx("span",{className:"font-medium text-white",children:"Allowance:"})," ",T?`${parseFloat(T).toFixed(6)} MSMIL`:"0"]})})]}),ee.jsxs("div",{children:[ee.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Amount to bridge:"}),ee.jsx("input",{type:"number",min:"0",value:C,onChange:G=>A(G.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all duration-200",placeholder:"0.0"}),C&&Number(C)>0&&h&&ee.jsx("div",{className:"mt-2 p-3 bg-gray-800/30 border border-gray-600/50 rounded-lg",children:ee.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[ee.jsxs("div",{className:"flex justify-between",children:[ee.jsxs("span",{children:["Bridge Fee (",p(),"):"]}),ee.jsxs("span",{className:"text-yellow-400",children:[Fi(f(tl(C,O).toString(),selectedChain==="bsc"?56:2372),O)," MSMIL"]})]}),ee.jsxs("div",{className:"flex justify-between",children:[ee.jsx("span",{children:"You will receive:"}),ee.jsxs("span",{className:"text-green-400 font-semibold",children:[Fi(g(tl(C,O).toString(),selectedChain==="bsc"?56:2372),O)," MSMIL"]})]})]})})]}),ee.jsxs("div",{className:"space-y-2",children:[!S&&ee.jsx("button",{disabled:I||!C||Number(C)<=0,className:"w-full px-6 py-3 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all duration-200",onClick:Y,children:I?ee.jsxs("span",{className:"flex items-center justify-center gap-2",children:[ee.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}),"Approving..."]}):"Approve MSMIL"}),S&&ee.jsx("button",{disabled:I||w||!C||Number(C)<=0||!h,className:"w-full px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 disabled:from-gray-600 disabled:to-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-[1.02] disabled:transform-none",onClick:J,children:I||w?ee.jsxs("span",{className:"flex items-center justify-center gap-2",children:[ee.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}),w?"Bridging...":"Processing..."]}):h?"Bridge MSMIL":"Bridge Not Available"})]})]}),$&&ee.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[ee.jsxs("div",{className:"text-sm",children:[ee.jsx("span",{className:"font-semibold text-blue-400",children:"Status:"})," ",ee.jsx("span",{className:"text-white",children:$})]}),(D||b)&&ee.jsx("div",{className:"mt-2",children:ee.jsxs("a",{href:`${t[z].explorer}/tx/${b||D}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-400 hover:text-blue-300 text-sm transition-colors duration-200",children:["View Transaction",ee.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ee.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]}),L&&ee.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:ee.jsxs("div",{className:"text-sm text-red-400",children:[ee.jsx("span",{className:"font-semibold",children:"Error:"})," ",L]})})]}):ee.jsxs("div",{className:"space-y-3",children:[ee.jsxs("div",{className:"text-center",children:[ee.jsx("div",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Bridge Tokens"}),ee.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Connect your wallet to bridge tokens between chains"})]}),ee.jsxs("div",{className:"space-y-2",children:[d==null?void 0:d.filter(G=>{var te,se;return((te=G.name)==null?void 0:te.toLowerCase().includes("metamask"))||((se=G.id)==null?void 0:se.toLowerCase().includes("metamask"))}).map(G=>ee.jsx("button",{onClick:()=>u({connector:G}),className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-600 hover:from-blue-700 hover:to-blue-700 text-white rounded-lg font-medium transition-all duration-200 hover:scale-[1.02] transform",children:" Connect MetaMask (Recommended)"},G.id)),d==null?void 0:d.filter(G=>{var te,se,he,fe;return(((te=G.id)==null?void 0:te.toLowerCase().includes("injected"))||((se=G.name)==null?void 0:se.toLowerCase().includes("browser")))&&!((he=G.name)!=null&&he.toLowerCase().includes("metamask"))&&!((fe=G.id)!=null&&fe.toLowerCase().includes("metamask"))}).map(G=>ee.jsx("button",{onClick:()=>u({connector:G}),className:"w-full px-6 py-3 bg-gradient-to-r from-green-600 to-purple-600 hover:from-green-700 hover:to-purple-700 text-white rounded-lg font-medium transition-all duration-200 hover:scale-[1.02] transform",children:" Connect Browser Wallet (Trust, Phantom, etc.)"},G.id)),d==null?void 0:d.filter(G=>{var te,se;return((te=G.name)==null?void 0:te.toLowerCase().includes("walletconnect"))||((se=G.id)==null?void 0:se.toLowerCase().includes("walletconnect"))}).map(G=>ee.jsx("button",{onClick:()=>u({connector:G}),className:"w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-600 hover:from-purple-700 hover:to-purple-700 text-white rounded-lg font-medium transition-all duration-200 hover:scale-[1.02] transform",children:" Connect Mobile Wallet"},G.id)),d==null?void 0:d.filter(G=>{var te,se,he,fe,_e,Pe;return!((te=G.name)!=null&&te.toLowerCase().includes("metamask"))&&!((se=G.id)!=null&&se.toLowerCase().includes("metamask"))&&!((he=G.id)!=null&&he.toLowerCase().includes("injected"))&&!((fe=G.name)!=null&&fe.toLowerCase().includes("browser"))&&!((_e=G.name)!=null&&_e.toLowerCase().includes("walletconnect"))&&!((Pe=G.id)!=null&&Pe.toLowerCase().includes("walletconnect"))}).map(G=>ee.jsxs("button",{onClick:()=>u({connector:G}),className:"w-full px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors duration-200",children:["Connect ",G.name||"Wallet"]},G.id)),(!d||d.length===0)&&ee.jsx("button",{onClick:()=>u({connector:d==null?void 0:d[0]}),className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200",children:"Connect Wallet"})]})]})})}function Rre({bnbChain:t,bescChain:e}){const{chainId:n,isConnected:r}=Kw(),{switchChain:i}=ZP();if(!r)return null;const s=n===t.id?"bsc":n===e.id?"hyperchain":null;return s?ee.jsxs("div",{className:"w-full p-3 bg-gray-800/30 rounded-lg",children:[ee.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Network:"}),ee.jsxs("div",{className:"flex gap-2",children:[ee.jsx("button",{className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${s==="bsc"?"bg-yellow-600 hover:bg-yellow-700 text-white shadow-lg":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,onClick:()=>i({chainId:t.id}),disabled:n===t.id,children:ee.jsxs("div",{className:"flex items-center justify-center gap-2",children:[ee.jsx(Qw,{chain:"bnb",size:"w-5 h-5"}),ee.jsx("span",{children:"BNB Chain"}),n===t.id&&ee.jsx("span",{className:"text-green-400",children:""})]})}),ee.jsx("button",{className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${s==="hyperchain"?"bg-purple-600 hover:bg-purple-700 text-white shadow-lg":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,onClick:()=>i({chainId:e.id}),disabled:n===e.id,children:ee.jsxs("div",{className:"flex items-center justify-center gap-2",children:[ee.jsx(Qw,{chain:"besc",size:"w-5 h-5"}),ee.jsx("span",{children:"BESC Hyperchain"}),n===e.id&&ee.jsx("span",{className:"text-green-400",children:""})]})})]})]}):null}function Mre({initialTab:t="swap",theme:e={},rpcBsc:n,rpcHyperchain:r,connectors:i,chainConfigOverrides:s={},...o}){const[a,c]=ve.useState(t),l=()=>{const g=[];try{g.push(IE({dappMetadata:{name:"Swap Bridge Widget",url:window.location.href,iconUrl:`${window.location.origin}/favicon.ico`}}))}catch(p){console.warn("MetaMask connector not available:",p)}try{g.push(Fw({target:{id:"injected",name:"Browser Wallet",provider:window.ethereum}}))}catch(p){console.warn("Injected connector not available:",p)}try{g.push(PE({projectId:"swap-bridge-widget",showQrModal:!0,metadata:{name:"Swap Bridge Widget",description:"Token swap and bridge widget",url:window.location.href,icons:[`${window.location.origin}/favicon.ico`]}}))}catch(p){console.warn("WalletConnect connector not available:",p)}return g},u={id:56,name:"BNB Chain",network:"bsc",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:{default:{http:[n]}},blockExplorers:{default:{name:"BSC Explorer",url:"https://bscscan.com"}},...s.bnbChain},d={id:2372,name:"BESC Hyperchain",network:"besc",nativeCurrency:{name:"BESC",symbol:"BESC",decimals:18},rpcUrls:{default:{http:[r]}},blockExplorers:{default:{name:"BESC Explorer",url:"https://explorer.beschyperchain.com"}},...s.bescChain},h=Hte({chains:[u,d],transports:{[u.id]:rl(n),[d.id]:rl(r)},connectors:i||l(),ssr:!1}),f=new Une;return ee.jsx(ere,{client:f,children:ee.jsx(Vte,{config:h,children:ee.jsxs("div",{className:"w-full max-w-md mx-auto my-6 p-4 flex flex-col gap-4 items-center bg-gradient-to-b from-gray-900/60 to-gray-950/65 rounded-2xl shadow-2xl backdrop-blur-md border border-gray-700/30",style:e.container,children:[ee.jsxs("div",{className:"flex w-full rounded-lg bg-gray-800/50 p-1 gap-1",children:[ee.jsx("button",{className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${a==="swap"?"bg-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,onClick:()=>c("swap"),children:"Swap"}),ee.jsx("button",{className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${a==="bridge"?"bg-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,onClick:()=>c("bridge"),children:"Bridge"})]}),ee.jsx(Rre,{bnbChain:u,bescChain:d}),ee.jsx("div",{className:"w-full",children:a==="swap"?ee.jsx($re,{...o},"swap"):ee.jsx(kre,{...o},"bridge")})]})})})}const LMe="";function iO(t,e={}){let n;const r=typeof ve<"u"?ve:typeof window<"u"?window.React:null;if(!r){const o="React is not available. Make sure React is loaded before initializing the widget.";throw console.error(o),new Error(o)}const i=r.version;if(console.log("React version detected:",i),i&&!i.match(/^(18|19)\./)&&console.warn("Widget is tested with React 18/19, detected version:",i),typeof t=="string"){if(n=document.getElementById(t),!n)throw new Error(`Container with id "${t}" not found`)}else if(t instanceof Element)n=t;else throw new Error("Container must be a DOM node or element ID string");const s=()=>{try{let o;try{o=wA(n)}catch(a){throw console.error("Failed to create React root:",a),new Error("Failed to create React root. Make sure container is a valid DOM element.")}o.render(r.createElement(Mre,e)),console.log("SwapBridge Widget initialized successfully")}catch(o){throw console.error("Failed to mount widget:",o),o}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s()}typeof window<"u"&&(window.initSwapBridgeWidget=iO);var NE={exports:{}},df=typeof Reflect=="object"?Reflect:null,sO=df&&typeof df.apply=="function"?df.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},eb;df&&typeof df.ownKeys=="function"?eb=df.ownKeys:Object.getOwnPropertySymbols?eb=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:eb=function(e){return Object.getOwnPropertyNames(e)};function Bre(t){console&&console.warn&&console.warn(t)}var oO=Number.isNaN||function(e){return e!==e};function Bt(){Bt.init.call(this)}NE.exports=Bt,NE.exports.once=Ure,Bt.EventEmitter=Bt,Bt.prototype._events=void 0,Bt.prototype._eventsCount=0,Bt.prototype._maxListeners=void 0;var aO=10;function tb(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Bt,"defaultMaxListeners",{enumerable:!0,get:function(){return aO},set:function(t){if(typeof t!="number"||t<0||oO(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");aO=t}}),Bt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Bt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||oO(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function cO(t){return t._maxListeners===void 0?Bt.defaultMaxListeners:t._maxListeners}Bt.prototype.getMaxListeners=function(){return cO(this)},Bt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")sO(c,this,n);else for(var l=c.length,u=fO(c,l),r=0;r<l;++r)sO(u[r],this,n);return!0};function lO(t,e,n,r){var i,s,o;if(tb(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=cO(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Bre(a)}return t}Bt.prototype.addListener=function(e,n){return lO(this,e,n,!1)},Bt.prototype.on=Bt.prototype.addListener,Bt.prototype.prependListener=function(e,n){return lO(this,e,n,!0)};function Dre(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function uO(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=Dre.bind(r);return i.listener=n,r.wrapFn=i,i}Bt.prototype.once=function(e,n){return tb(n),this.on(e,uO(this,e,n)),this},Bt.prototype.prependOnceListener=function(e,n){return tb(n),this.prependListener(e,uO(this,e,n)),this},Bt.prototype.removeListener=function(e,n){var r,i,s,o,a;if(tb(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():Lre(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this},Bt.prototype.off=Bt.prototype.removeListener,Bt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function dO(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?jre(i):fO(i,i.length)}Bt.prototype.listeners=function(e){return dO(this,e,!0)},Bt.prototype.rawListeners=function(e){return dO(this,e,!1)},Bt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):hO.call(t,e)},Bt.prototype.listenerCount=hO;function hO(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Bt.prototype.eventNames=function(){return this._eventsCount>0?eb(this._events):[]};function fO(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function Lre(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function jre(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Ure(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}pO(t,e,s,{once:!0}),e!=="error"&&Fre(t,i,{once:!0})})}function Fre(t,e,n){typeof t.on=="function"&&pO(t,"error",e,n)}function pO(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var An=NE.exports;const hf=$u(An);var kE={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof kr<"u"&&kr,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof kr<"u"&&kr||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(E){return E&&DataView.prototype.isPrototypeOf(E)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(E){return E&&u.indexOf(Object.prototype.toString.call(E))>-1};function h(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(E)||E==="")throw new TypeError('Invalid character in header field name: "'+E+'"');return E.toLowerCase()}function f(E){return typeof E!="string"&&(E=String(E)),E}function g(E){var S={next:function(){var k=E.shift();return{done:k===void 0,value:k}}};return c.iterable&&(S[Symbol.iterator]=function(){return S}),S}function p(E){this.map={},E instanceof p?E.forEach(function(S,k){this.append(k,S)},this):Array.isArray(E)?E.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(S){this.append(S,E[S])},this)}p.prototype.append=function(E,S){E=h(E),S=f(S);var k=this.map[E];this.map[E]=k?k+", "+S:S},p.prototype.delete=function(E){delete this.map[h(E)]},p.prototype.get=function(E){return E=h(E),this.has(E)?this.map[E]:null},p.prototype.has=function(E){return this.map.hasOwnProperty(h(E))},p.prototype.set=function(E,S){this.map[h(E)]=f(S)},p.prototype.forEach=function(E,S){for(var k in this.map)this.map.hasOwnProperty(k)&&E.call(S,this.map[k],k,this)},p.prototype.keys=function(){var E=[];return this.forEach(function(S,k){E.push(k)}),g(E)},p.prototype.values=function(){var E=[];return this.forEach(function(S){E.push(S)}),g(E)},p.prototype.entries=function(){var E=[];return this.forEach(function(S,k){E.push([k,S])}),g(E)},c.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function m(E){if(!E._noBody){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}}function y(E){return new Promise(function(S,k){E.onload=function(){S(E.result)},E.onerror=function(){k(E.error)}})}function w(E){var S=new FileReader,k=y(S);return S.readAsArrayBuffer(E),k}function b(E){var S=new FileReader,k=y(S),_=/charset=([A-Za-z0-9_-]+)/.exec(E.type),x=_?_[1]:"utf-8";return S.readAsText(E,x),k}function v(E){for(var S=new Uint8Array(E),k=new Array(S.length),_=0;_<S.length;_++)k[_]=String.fromCharCode(S[_]);return k.join("")}function C(E){if(E.slice)return E.slice(0);var S=new Uint8Array(E.byteLength);return S.set(new Uint8Array(E)),S.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(E){this.bodyUsed=this.bodyUsed,this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:c.blob&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:c.formData&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():c.arrayBuffer&&c.blob&&l(E)?(this._bodyArrayBuffer=C(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(E)||d(E))?this._bodyArrayBuffer=C(E):this._bodyText=E=Object.prototype.toString.call(E):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var E=m(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var E=m(this);return E||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var E=m(this);if(E)return E;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(v(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function R(E){var S=E.toUpperCase();return $.indexOf(S)>-1?S:E}function P(E,S){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var k=S.body;if(E instanceof P){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,S.headers||(this.headers=new p(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,!k&&E._bodyInit!=null&&(k=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new p(S.headers)),this.method=R(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||function(){if("AbortController"in a){var T=new AbortController;return T.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&k)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(k),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var _=/([?&])_=[^&]*/;if(_.test(this.url))this.url=this.url.replace(_,"$1_="+new Date().getTime());else{var x=/\?/;this.url+=(x.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function L(E){var S=new FormData;return E.trim().split("&").forEach(function(k){if(k){var _=k.split("="),x=_.shift().replace(/\+/g," "),T=_.join("=").replace(/\+/g," ");S.append(decodeURIComponent(x),decodeURIComponent(T))}}),S}function U(E){var S=new p,k=E.replace(/\r?\n[\t ]+/g," ");return k.split("\r").map(function(_){return _.indexOf(`
`)===0?_.substr(1,_.length):_}).forEach(function(_){var x=_.split(":"),T=x.shift().trim();if(T){var M=x.join(":").trim();try{S.append(T,M)}catch(O){console.warn("Response "+O.message)}}}),S}A.call(P.prototype);function D(E,S){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new p(S.headers),this.url=S.url||"",this._initBody(E)}A.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},D.error=function(){var E=new D(null,{status:200,statusText:""});return E.ok=!1,E.status=0,E.type="error",E};var j=[301,302,303,307,308];D.redirect=function(E,S){if(j.indexOf(S)===-1)throw new RangeError("Invalid status code");return new D(null,{status:S,headers:{location:E}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(S,k){this.message=S,this.name=k;var _=Error(S);this.stack=_.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function I(E,S){return new Promise(function(k,_){var x=new P(E,S);if(x.signal&&x.signal.aborted)return _(new o.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function M(){T.abort()}T.onload=function(){var B={statusText:T.statusText,headers:U(T.getAllResponseHeaders()||"")};x.url.indexOf("file://")===0&&(T.status<200||T.status>599)?B.status=200:B.status=T.status,B.url="responseURL"in T?T.responseURL:B.headers.get("X-Request-URL");var F="response"in T?T.response:T.responseText;setTimeout(function(){k(new D(F,B))},0)},T.onerror=function(){setTimeout(function(){_(new TypeError("Network request failed"))},0)},T.ontimeout=function(){setTimeout(function(){_(new TypeError("Network request timed out"))},0)},T.onabort=function(){setTimeout(function(){_(new o.DOMException("Aborted","AbortError"))},0)};function O(B){try{return B===""&&a.location.href?a.location.href:B}catch{return B}}if(T.open(x.method,O(x.url),!0),x.credentials==="include"?T.withCredentials=!0:x.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&(c.blob?T.responseType="blob":c.arrayBuffer&&(T.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof p||a.Headers&&S.headers instanceof a.Headers)){var N=[];Object.getOwnPropertyNames(S.headers).forEach(function(B){N.push(h(B)),T.setRequestHeader(B,f(S.headers[B]))}),x.headers.forEach(function(B,F){N.indexOf(F)===-1&&T.setRequestHeader(F,B)})}else x.headers.forEach(function(B,F){T.setRequestHeader(F,B)});x.signal&&(x.signal.addEventListener("abort",M),T.onreadystatechange=function(){T.readyState===4&&x.signal.removeEventListener("abort",M)}),T.send(typeof x._bodyInit>"u"?null:x._bodyInit)})}return I.polyfill=!0,a.fetch||(a.fetch=I,a.Headers=p,a.Request=P,a.Response=D),o.Headers=p,o.Request=P,o.Response=D,o.fetch=I,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(kE,kE.exports);var zre=kE.exports;const gO=$u(zre);var RE={exports:{}},ME,mO;function qre(){if(mO)return ME;mO=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,s=r*365.25;ME=function(u,d){d=d||{};var h=typeof u;if(h==="string"&&u.length>0)return o(u);if(h==="number"&&isFinite(u))return d.long?c(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var h=parseFloat(d[1]),f=(d[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*n;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function c(u){var d=Math.abs(u);return d>=r?l(u,d,r,"day"):d>=n?l(u,d,n,"hour"):d>=e?l(u,d,e,"minute"):d>=t?l(u,d,t,"second"):u+" ms"}function l(u,d,h,f){var g=d>=h*1.5;return Math.round(u/h)+" "+f+(g?"s":"")}return ME}function Hre(t){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=i,n.enabled=o,n.humanize=qre(),n.destroy=l,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let d=0;for(let h=0;h<u.length;h++)d=(d<<5)-d+u.charCodeAt(h),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=e;function n(u){let d,h=null,f,g;function p(...m){if(!p.enabled)return;const y=p,w=Number(new Date),b=w-(d||w);y.diff=b,y.prev=d,y.curr=w,d=w,m[0]=n.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let v=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(A,$)=>{if(A==="%%")return"%";v++;const R=n.formatters[$];if(typeof R=="function"){const P=m[v];A=R.call(y,P),m.splice(v,1),v--}return A}),n.formatArgs.call(y,m),(y.log||n.log).apply(y,m)}return p.namespace=u,p.useColors=n.useColors(),p.color=n.selectColor(u),p.extend=r,p.destroy=n.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(f!==n.namespaces&&(f=n.namespaces,g=n.enabled(u)),g),set:m=>{h=m}}),typeof n.init=="function"&&n.init(p),p}function r(u,d){const h=n(this.namespace+(typeof d>"u"?":":d)+u);return h.log=this.log,h}function i(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let d;const h=(typeof u=="string"?u:"").split(/[\s,]+/),f=h.length;for(d=0;d<f;d++)h[d]&&(u=h[d].replace(/\*/g,".*?"),u[0]==="-"?n.skips.push(new RegExp("^"+u.slice(1)+"$")):n.names.push(new RegExp("^"+u+"$")))}function s(){const u=[...n.names.map(a),...n.skips.map(a).map(d=>"-"+d)].join(",");return n.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let d,h;for(d=0,h=n.skips.length;d<h;d++)if(n.skips[d].test(u))return!1;for(d=0,h=n.names.length;d<h;d++)if(n.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var Wre=Hre;(function(t,e){e.formatArgs=r,e.save=i,e.load=s,e.useColors=n,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let u=0,d=0;c[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(u++,h==="%c"&&(d=u))}),c.splice(d,0,l)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=Wre(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(RE,RE.exports);var Kre=RE.exports;const Kr=$u(Kre);var BE=Object.defineProperty,Vre=Object.getOwnPropertyDescriptor,Gre=Object.getOwnPropertyNames,Zre=Object.prototype.hasOwnProperty,Yre=(t,e)=>{for(var n in e)BE(t,n,{get:e[n],enumerable:!0})},Jre=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Gre(e))!Zre.call(t,i)&&i!==n&&BE(t,i,{get:()=>e[i],enumerable:!(r=Vre(e,i))||r.enumerable});return t},Qre=t=>Jre(BE({},"__esModule",{value:!0}),t),yO={};Yre(yO,{createFinalURL:()=>_O,createPathBasedClient:()=>iie,createQuerySerializer:()=>jE,default:()=>bO,defaultBodySerializer:()=>CO,defaultPathSerializer:()=>EO,mergeHeaders:()=>UE,randomID:()=>wO,removeTrailingSlash:()=>FE,serializeArrayParam:()=>LE,serializeObjectParam:()=>DE,serializePrimitiveParam:()=>qg,wrapAsPathBasedClient:()=>vO});var Xre=Qre(yO),eie=/\{[^{}]+\}/g,tie=()=>{var t,e;return typeof process=="object"&&Number.parseInt((e=(t=process==null?void 0:process.versions)==null?void 0:t.node)==null?void 0:e.substring(0,2))>=18&&process.versions.undici};function wO(){return Math.random().toString(36).slice(2,11)}function bO(t){let{baseUrl:e="",Request:n=globalThis.Request,fetch:r=globalThis.fetch,querySerializer:i,bodySerializer:s,headers:o,requestInitExt:a=void 0,...c}={...t};a=tie()?a:void 0,e=FE(e);const l=[];async function u(d,h){const{baseUrl:f,fetch:g=r,Request:p=n,headers:m,params:y={},parseAs:w="json",querySerializer:b,bodySerializer:v=s??CO,body:C,...A}=h||{};let $=e;f&&($=FE(f)??e);let R=typeof i=="function"?i:jE(i);b&&(R=typeof b=="function"?b:jE({...typeof i=="object"?i:{},...b}));const P=C===void 0?void 0:v(C,UE(o,m,y.header)),L=UE(P===void 0||P instanceof FormData?{}:{"Content-Type":"application/json"},o,m,y.header),U={redirect:"follow",...c,...A,body:P,headers:L};let D,j,I=new n(_O(d,{baseUrl:$,params:y,querySerializer:R}),U),E;for(const k in A)k in I||(I[k]=A[k]);if(l.length){D=wO(),j=Object.freeze({baseUrl:$,fetch:g,parseAs:w,querySerializer:R,bodySerializer:v});for(const k of l)if(k&&typeof k=="object"&&typeof k.onRequest=="function"){const _=await k.onRequest({request:I,schemaPath:d,params:y,options:j,id:D});if(_)if(_ instanceof n)I=_;else if(_ instanceof Response){E=_;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!E){try{E=await g(I,a)}catch(k){let _=k;if(l.length)for(let x=l.length-1;x>=0;x--){const T=l[x];if(T&&typeof T=="object"&&typeof T.onError=="function"){const M=await T.onError({request:I,error:_,schemaPath:d,params:y,options:j,id:D});if(M){if(M instanceof Response){_=void 0,E=M;break}if(M instanceof Error){_=M;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(_)throw _}if(l.length)for(let k=l.length-1;k>=0;k--){const _=l[k];if(_&&typeof _=="object"&&typeof _.onResponse=="function"){const x=await _.onResponse({request:I,response:E,schemaPath:d,params:y,options:j,id:D});if(x){if(!(x instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");E=x}}}}if(E.status===204||I.method==="HEAD"||E.headers.get("Content-Length")==="0")return E.ok?{data:void 0,response:E}:{error:void 0,response:E};if(E.ok)return w==="stream"?{data:E.body,response:E}:{data:await E[w](),response:E};let S=await E.text();try{S=JSON.parse(S)}catch{}return{error:S,response:E}}return{request(d,h,f){return u(h,{...f,method:d.toUpperCase()})},GET(d,h){return u(d,{...h,method:"GET"})},PUT(d,h){return u(d,{...h,method:"PUT"})},POST(d,h){return u(d,{...h,method:"POST"})},DELETE(d,h){return u(d,{...h,method:"DELETE"})},OPTIONS(d,h){return u(d,{...h,method:"OPTIONS"})},HEAD(d,h){return u(d,{...h,method:"HEAD"})},PATCH(d,h){return u(d,{...h,method:"PATCH"})},TRACE(d,h){return u(d,{...h,method:"TRACE"})},use(...d){for(const h of d)if(h){if(typeof h!="object"||!("onRequest"in h||"onResponse"in h||"onError"in h))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");l.push(h)}},eject(...d){for(const h of d){const f=l.indexOf(h);f!==-1&&l.splice(f,1)}}}}var nie=class{constructor(t,e){Vc(this,"GET",t=>this.client.GET(this.url,t));Vc(this,"PUT",t=>this.client.PUT(this.url,t));Vc(this,"POST",t=>this.client.POST(this.url,t));Vc(this,"DELETE",t=>this.client.DELETE(this.url,t));Vc(this,"OPTIONS",t=>this.client.OPTIONS(this.url,t));Vc(this,"HEAD",t=>this.client.HEAD(this.url,t));Vc(this,"PATCH",t=>this.client.PATCH(this.url,t));Vc(this,"TRACE",t=>this.client.TRACE(this.url,t));this.client=t,this.url=e}},rie=class{constructor(){this.client=null}get(t,e){const n=new nie(t,e);return this.client[e]=n,n}};function vO(t){const e=new rie,n=new Proxy(t,e);function r(){}r.prototype=n;const i=new r;return e.client=i,i}function iie(t){return vO(bO(t))}function qg(t,e,n){if(e==null)return"";if(typeof e=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${t}=${(n==null?void 0:n.allowReserved)===!0?e:encodeURIComponent(e)}`}function DE(t,e,n){if(!e||typeof e!="object")return"";const r=[],i={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const a in e)r.push(a,n.allowReserved===!0?e[a]:encodeURIComponent(e[a]));const o=r.join(",");switch(n.style){case"form":return`${t}=${o}`;case"label":return`.${o}`;case"matrix":return`;${t}=${o}`;default:return o}}for(const o in e){const a=n.style==="deepObject"?`${t}[${o}]`:o;r.push(qg(a,e[o],n))}const s=r.join(i);return n.style==="label"||n.style==="matrix"?`${i}${s}`:s}function LE(t,e,n){if(!Array.isArray(e))return"";if(n.explode===!1){const s={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",o=(n.allowReserved===!0?e:e.map(a=>encodeURIComponent(a))).join(s);switch(n.style){case"simple":return o;case"label":return`.${o}`;case"matrix":return`;${t}=${o}`;default:return`${t}=${o}`}}const r={simple:",",label:".",matrix:";"}[n.style]||"&",i=[];for(const s of e)n.style==="simple"||n.style==="label"?i.push(n.allowReserved===!0?s:encodeURIComponent(s)):i.push(qg(t,s,n));return n.style==="label"||n.style==="matrix"?`${r}${i.join(r)}`:i.join(r)}function jE(t){return function(n){const r=[];if(n&&typeof n=="object")for(const i in n){const s=n[i];if(s!=null){if(Array.isArray(s)){if(s.length===0)continue;r.push(LE(i,s,{style:"form",explode:!0,...t==null?void 0:t.array,allowReserved:(t==null?void 0:t.allowReserved)||!1}));continue}if(typeof s=="object"){r.push(DE(i,s,{style:"deepObject",explode:!0,...t==null?void 0:t.object,allowReserved:(t==null?void 0:t.allowReserved)||!1}));continue}r.push(qg(i,s,t))}}return r.join("&")}}function EO(t,e){let n=t;for(const r of t.match(eie)??[]){let i=r.substring(1,r.length-1),s=!1,o="simple";if(i.endsWith("*")&&(s=!0,i=i.substring(0,i.length-1)),i.startsWith(".")?(o="label",i=i.substring(1)):i.startsWith(";")&&(o="matrix",i=i.substring(1)),!e||e[i]===void 0||e[i]===null)continue;const a=e[i];if(Array.isArray(a)){n=n.replace(r,LE(i,a,{style:o,explode:s}));continue}if(typeof a=="object"){n=n.replace(r,DE(i,a,{style:o,explode:s}));continue}if(o==="matrix"){n=n.replace(r,`;${qg(i,a)}`);continue}n=n.replace(r,o==="label"?`.${encodeURIComponent(a)}`:encodeURIComponent(a))}return n}function CO(t,e){return t instanceof FormData?t:e&&(e.get instanceof Function?e.get("Content-Type")??e.get("content-type"):e["Content-Type"]??e["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(t).toString():JSON.stringify(t)}function _O(t,e){var i;let n=`${e.baseUrl}${t}`;(i=e.params)!=null&&i.path&&(n=EO(n,e.params.path));let r=e.querySerializer(e.params.query??{});return r.startsWith("?")&&(r=r.substring(1)),r&&(n+=`?${r}`),n}function UE(...t){const e=new Headers;for(const n of t){if(!n||typeof n!="object")continue;const r=n instanceof Headers?n.entries():Object.entries(n);for(const[i,s]of r)if(s===null)e.delete(i);else if(Array.isArray(s))for(const o of s)e.append(i,o);else s!==void 0&&e.set(i,s)}return e}function FE(t){return t.endsWith("/")?t.substring(0,t.length-1):t}var sie=Object.create,nb=Object.defineProperty,oie=Object.getOwnPropertyDescriptor,aie=Object.getOwnPropertyNames,cie=Object.getPrototypeOf,lie=Object.prototype.hasOwnProperty,uie=(t,e)=>{for(var n in e)nb(t,n,{get:e[n],enumerable:!0})},SO=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of aie(e))!lie.call(t,i)&&i!==n&&nb(t,i,{get:()=>e[i],enumerable:!(r=oie(e,i))||r.enumerable});return t},die=(t,e,n)=>(n=t!=null?sie(cie(t)):{},SO(e||!t||!t.__esModule?nb(n,"default",{value:t,enumerable:!0}):n,t)),hie=t=>SO(nb({},"__esModule",{value:!0}),t),xO={};uie(xO,{analytics:()=>vie});var mn=hie(xO),fie=die(Xre),pie=class{constructor(t){this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=t.batchSize,this.baseTimeoutMs=t.baseTimeoutMs,this.currentTimeoutMs=t.baseTimeoutMs,this.sendFn=t.sendFn}enqueue(t){this.batch.push(t),this.schedule()}schedule(){this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.flush()},this.currentTimeoutMs))}async flush(){if(this.isSending||this.batch.length===0)return;this.isSending=!0;const t=[...this.batch.slice(0,this.batchSize)];this.batch=this.batch.slice(this.batchSize);try{await this.sendFn(t),this.currentTimeoutMs=this.baseTimeoutMs}catch(e){console.error("Sender: Failed to send batch",e),this.batch=[...t,...this.batch],this.currentTimeoutMs=Math.min(this.currentTimeoutMs*2,this.maxTimeoutMs)}finally{this.isSending=!1,this.schedule()}}},gie=pie,mie=class{constructor(t){this.enabled=!1,this.properties={};const e=(0,fie.default)({baseUrl:t}),n=async r=>{const i=await e.POST("/v1/events",{body:r});if(i.response.status!==200)throw new Error(i.error)};this.sender=new gie({batchSize:100,baseTimeoutMs:200,sendFn:n})}enable(){this.enabled=!0}setGlobalProperty(t,e){this.properties[t]=e}track(t,e){if(!this.enabled)return;const n={name:t,...this.properties,...e};this.sender.enqueue(n)}},yie=mie,zE,AO;typeof process<"u"&&process.env&&(zE=(AO=process.env.METAMASK_ANALYTICS_ENDPOINT)!=null?AO:process.env.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var wie=zE??"https://mm-sdk-analytics.api.cx.metamask.io/",bie=new yie(wie),vie=bie,IO={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */(function(t,e){(function(n){var r=Object.hasOwnProperty,i=Array.isArray?Array.isArray:function(x){return Object.prototype.toString.call(x)==="[object Array]"},s=10,o=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",c=typeof Reflect=="object",l=typeof setImmediate=="function",u=l?setImmediate:setTimeout,d=a?c&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(_){var x=Object.getOwnPropertyNames(_);return x.push.apply(x,Object.getOwnPropertySymbols(_)),x}:Object.keys;function h(){this._events={},this._conf&&f.call(this,this._conf)}function f(_){_&&(this._conf=_,_.delimiter&&(this.delimiter=_.delimiter),_.maxListeners!==n&&(this._maxListeners=_.maxListeners),_.wildcard&&(this.wildcard=_.wildcard),_.newListener&&(this._newListener=_.newListener),_.removeListener&&(this._removeListener=_.removeListener),_.verboseMemoryLeak&&(this.verboseMemoryLeak=_.verboseMemoryLeak),_.ignoreErrors&&(this.ignoreErrors=_.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function g(_,x){var T="(node) warning: possible EventEmitter memory leak detected. "+_+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(T+=" Event name: "+x+"."),typeof process<"u"&&process.emitWarning){var M=new Error(T);M.name="MaxListenersExceededWarning",M.emitter=this,M.count=_,process.emitWarning(M)}else console.error(T),console.trace&&console.trace()}var p=function(_,x,T){var M=arguments.length;switch(M){case 0:return[];case 1:return[_];case 2:return[_,x];case 3:return[_,x,T];default:for(var O=new Array(M);M--;)O[M]=arguments[M];return O}};function m(_,x){for(var T={},M,O=_.length,N=x?x.length:0,B=0;B<O;B++)M=_[B],T[M]=B<N?x[B]:n;return T}function y(_,x,T){this._emitter=_,this._target=x,this._listeners={},this._listenersCount=0;var M,O;if((T.on||T.off)&&(M=T.on,O=T.off),x.addEventListener?(M=x.addEventListener,O=x.removeEventListener):x.addListener?(M=x.addListener,O=x.removeListener):x.on&&(M=x.on,O=x.off),!M&&!O)throw Error("target does not implement any known event API");if(typeof M!="function")throw TypeError("on method must be a function");if(typeof O!="function")throw TypeError("off method must be a function");this._on=M,this._off=O;var N=_._observers;N?N.push(this):_._observers=[this]}Object.assign(y.prototype,{subscribe:function(_,x,T){var M=this,O=this._target,N=this._emitter,B=this._listeners,F=function(){var z=p.apply(null,arguments),q={data:z,name:x,original:_};if(T){var H=T.call(O,q);H!==!1&&N.emit.apply(N,[q.name].concat(z));return}N.emit.apply(N,[x].concat(z))};if(B[_])throw Error("Event '"+_+"' is already listening");this._listenersCount++,N._newListener&&N._removeListener&&!M._onNewListener?(this._onNewListener=function(z){z===x&&B[_]===null&&(B[_]=F,M._on.call(O,_,F))},N.on("newListener",this._onNewListener),this._onRemoveListener=function(z){z===x&&!N.hasListeners(z)&&B[_]&&(B[_]=null,M._off.call(O,_,F))},B[_]=null,N.on("removeListener",this._onRemoveListener)):(B[_]=F,M._on.call(O,_,F))},unsubscribe:function(_){var x=this,T=this._listeners,M=this._emitter,O,N,B=this._off,F=this._target,z;if(_&&typeof _!="string")throw TypeError("event must be a string");function q(){x._onNewListener&&(M.off("newListener",x._onNewListener),M.off("removeListener",x._onRemoveListener),x._onNewListener=null,x._onRemoveListener=null);var H=R.call(M,x);M._observers.splice(H,1)}if(_){if(O=T[_],!O)return;B.call(F,_,O),delete T[_],--this._listenersCount||q()}else{for(N=d(T),z=N.length;z-- >0;)_=N[z],B.call(F,_,T[_]);this._listeners={},this._listenersCount=0,q()}}});function w(_,x,T,M){var O=Object.assign({},x);if(!_)return O;if(typeof _!="object")throw TypeError("options must be an object");var N=Object.keys(_),B=N.length,F,z,q;function H(Y){throw Error('Invalid "'+F+'" option value'+(Y?". Reason: "+Y:""))}for(var K=0;K<B;K++){if(F=N[K],!M&&!r.call(x,F))throw Error('Unknown "'+F+'" option');z=_[F],z!==n&&(q=T[F],O[F]=q?q(z,H):z)}return O}function b(_,x){return(typeof _!="function"||!_.hasOwnProperty("prototype"))&&x("value must be a constructor"),_}function v(_){var x="value must be type of "+_.join("|"),T=_.length,M=_[0],O=_[1];return T===1?function(N,B){if(typeof N===M)return N;B(x)}:T===2?function(N,B){var F=typeof N;if(F===M||F===O)return N;B(x)}:function(N,B){for(var F=typeof N,z=T;z-- >0;)if(F===_[z])return N;B(x)}}var C=v(["function"]),A=v(["object","function"]);function $(_,x,T){var M,O,N=0,B,F=new _(function(z,q,H){T=w(T,{timeout:0,overload:!1},{timeout:function(G,te){return G*=1,(typeof G!="number"||G<0||!Number.isFinite(G))&&te("timeout must be a positive number"),G}}),M=!T.overload&&typeof _.prototype.cancel=="function"&&typeof H=="function";function K(){O&&(O=null),N&&(clearTimeout(N),N=0)}var Y=function(G){K(),z(G)},J=function(G){K(),q(G)};M?x(Y,J,H):(O=[function(G){J(G||Error("canceled"))}],x(Y,J,function(G){if(B)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof G!="function")throw TypeError("onCancel callback must be a function");O.push(G)}),B=!0),T.timeout>0&&(N=setTimeout(function(){var G=Error("timeout");G.code="ETIMEDOUT",N=0,F.cancel(G),q(G)},T.timeout))});return M||(F.cancel=function(z){if(O){for(var q=O.length,H=1;H<q;H++)O[H](z);O[0](z),O=null}}),F}function R(_){var x=this._observers;if(!x)return-1;for(var T=x.length,M=0;M<T;M++)if(x[M]._target===_)return M;return-1}function P(_,x,T,M,O){if(!T)return null;if(M===0){var N=typeof x;if(N==="string"){var B,F,z=0,q=0,H=this.delimiter,K=H.length;if((F=x.indexOf(H))!==-1){B=new Array(5);do B[z++]=x.slice(q,F),q=F+K;while((F=x.indexOf(H,q))!==-1);B[z++]=x.slice(q),x=B,O=z}else x=[x],O=1}else N==="object"?O=x.length:(x=[x],O=1)}var Y=null,J,G,te,se,he,fe=x[M],_e=x[M+1],Pe,De;if(M===O)T._listeners&&(typeof T._listeners=="function"?(_&&_.push(T._listeners),Y=[T]):(_&&_.push.apply(_,T._listeners),Y=[T]));else if(fe==="*"){for(Pe=d(T),F=Pe.length;F-- >0;)J=Pe[F],J!=="_listeners"&&(De=P(_,x,T[J],M+1,O),De&&(Y?Y.push.apply(Y,De):Y=De));return Y}else if(fe==="**"){for(he=M+1===O||M+2===O&&_e==="*",he&&T._listeners&&(Y=P(_,x,T,O,O)),Pe=d(T),F=Pe.length;F-- >0;)J=Pe[F],J!=="_listeners"&&(J==="*"||J==="**"?(T[J]._listeners&&!he&&(De=P(_,x,T[J],O,O),De&&(Y?Y.push.apply(Y,De):Y=De)),De=P(_,x,T[J],M,O)):J===_e?De=P(_,x,T[J],M+2,O):De=P(_,x,T[J],M,O),De&&(Y?Y.push.apply(Y,De):Y=De));return Y}else T[fe]&&(Y=P(_,x,T[fe],M+1,O));if(G=T["*"],G&&P(_,x,G,M+1,O),te=T["**"],te)if(M<O)for(te._listeners&&P(_,x,te,O,O),Pe=d(te),F=Pe.length;F-- >0;)J=Pe[F],J!=="_listeners"&&(J===_e?P(_,x,te[J],M+2,O):J===fe?P(_,x,te[J],M+1,O):(se={},se[J]=te[J],P(_,x,{"**":se},M+1,O)));else te._listeners?P(_,x,te,O,O):te["*"]&&te["*"]._listeners&&P(_,x,te["*"],O,O);return Y}function L(_,x,T){var M=0,O=0,N,B=this.delimiter,F=B.length,z;if(typeof _=="string")if((N=_.indexOf(B))!==-1){z=new Array(5);do z[M++]=_.slice(O,N),O=N+F;while((N=_.indexOf(B,O))!==-1);z[M++]=_.slice(O)}else z=[_],M=1;else z=_,M=_.length;if(M>1){for(N=0;N+1<M;N++)if(z[N]==="**"&&z[N+1]==="**")return}var q=this.listenerTree,H;for(N=0;N<M;N++)if(H=z[N],q=q[H]||(q[H]={}),N===M-1)return q._listeners?(typeof q._listeners=="function"&&(q._listeners=[q._listeners]),T?q._listeners.unshift(x):q._listeners.push(x),!q._listeners.warned&&this._maxListeners>0&&q._listeners.length>this._maxListeners&&(q._listeners.warned=!0,g.call(this,q._listeners.length,H))):q._listeners=x,!0;return!0}function U(_,x,T,M){for(var O=d(_),N=O.length,B,F,z,q=_._listeners,H;N-- >0;)F=O[N],B=_[F],F==="_listeners"?z=T:z=T?T.concat(F):[F],H=M||typeof F=="symbol",q&&x.push(H?z:z.join(this.delimiter)),typeof B=="object"&&U.call(this,B,x,z,H);return x}function D(_){for(var x=d(_),T=x.length,M,O,N;T-- >0;)O=x[T],M=_[O],M&&(N=!0,O!=="_listeners"&&!D(M)&&delete _[O]);return N}function j(_,x,T){this.emitter=_,this.event=x,this.listener=T}j.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function I(_,x,T){if(T===!0)O=!0;else if(T===!1)M=!0;else{if(!T||typeof T!="object")throw TypeError("options should be an object or true");var M=T.async,O=T.promisify,N=T.nextTick,B=T.objectify}if(M||N||O){var F=x,z=x._origin||x;if(N&&!o)throw Error("process.nextTick is not supported");O===n&&(O=x.constructor.name==="AsyncFunction"),x=function(){var q=arguments,H=this,K=this.event;return O?N?Promise.resolve():new Promise(function(Y){u(Y)}).then(function(){return H.event=K,F.apply(H,q)}):(N?process.nextTick:u)(function(){H.event=K,F.apply(H,q)})},x._async=!0,x._origin=z}return[x,B?new j(this,_,x):this]}function E(_){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,f.call(this,_)}E.EventEmitter2=E,E.prototype.listenTo=function(_,x,T){if(typeof _!="object")throw TypeError("target musts be an object");var M=this;T=w(T,{on:n,off:n,reducers:n},{on:C,off:C,reducers:A});function O(N){if(typeof N!="object")throw TypeError("events must be an object");var B=T.reducers,F=R.call(M,_),z;F===-1?z=new y(M,_,T):z=M._observers[F];for(var q=d(N),H=q.length,K,Y=typeof B=="function",J=0;J<H;J++)K=q[J],z.subscribe(K,N[K]||K,Y?B:B&&B[K])}return i(x)?O(m(x)):O(typeof x=="string"?m(x.split(/\s+/)):x),this},E.prototype.stopListeningTo=function(_,x){var T=this._observers;if(!T)return!1;var M=T.length,O,N=!1;if(_&&typeof _!="object")throw TypeError("target should be an object");for(;M-- >0;)O=T[M],(!_||O._target===_)&&(O.unsubscribe(x),N=!0);return N},E.prototype.delimiter=".",E.prototype.setMaxListeners=function(_){_!==n&&(this._maxListeners=_,this._conf||(this._conf={}),this._conf.maxListeners=_)},E.prototype.getMaxListeners=function(){return this._maxListeners},E.prototype.event="",E.prototype.once=function(_,x,T){return this._once(_,x,!1,T)},E.prototype.prependOnceListener=function(_,x,T){return this._once(_,x,!0,T)},E.prototype._once=function(_,x,T,M){return this._many(_,1,x,T,M)},E.prototype.many=function(_,x,T,M){return this._many(_,x,T,!1,M)},E.prototype.prependMany=function(_,x,T,M){return this._many(_,x,T,!0,M)},E.prototype._many=function(_,x,T,M,O){var N=this;if(typeof T!="function")throw new Error("many only accepts instances of Function");function B(){return--x===0&&N.off(_,B),T.apply(this,arguments)}return B._origin=T,this._on(_,B,M,O)},E.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var _=arguments[0],x,T=this.wildcard,M,O,N,B,F;if(_==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(T&&(x=_,_!=="newListener"&&_!=="removeListener"&&typeof _=="object")){if(O=_.length,a){for(N=0;N<O;N++)if(typeof _[N]=="symbol"){F=!0;break}}F||(_=_.join(this.delimiter))}var z=arguments.length,q;if(this._all&&this._all.length)for(q=this._all.slice(),N=0,O=q.length;N<O;N++)switch(this.event=_,z){case 1:q[N].call(this,_);break;case 2:q[N].call(this,_,arguments[1]);break;case 3:q[N].call(this,_,arguments[1],arguments[2]);break;default:q[N].apply(this,arguments)}if(T)q=[],P.call(this,q,x,this.listenerTree,0,O);else if(q=this._events[_],typeof q=="function"){switch(this.event=_,z){case 1:q.call(this);break;case 2:q.call(this,arguments[1]);break;case 3:q.call(this,arguments[1],arguments[2]);break;default:for(M=new Array(z-1),B=1;B<z;B++)M[B-1]=arguments[B];q.apply(this,M)}return!0}else q&&(q=q.slice());if(q&&q.length){if(z>3)for(M=new Array(z-1),B=1;B<z;B++)M[B-1]=arguments[B];for(N=0,O=q.length;N<O;N++)switch(this.event=_,z){case 1:q[N].call(this);break;case 2:q[N].call(this,arguments[1]);break;case 3:q[N].call(this,arguments[1],arguments[2]);break;default:q[N].apply(this,M)}return!0}else if(!this.ignoreErrors&&!this._all&&_==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},E.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var _=arguments[0],x=this.wildcard,T,M,O,N,B,F;if(_==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(x&&(T=_,_!=="newListener"&&_!=="removeListener"&&typeof _=="object")){if(N=_.length,a){for(B=0;B<N;B++)if(typeof _[B]=="symbol"){M=!0;break}}M||(_=_.join(this.delimiter))}var z=[],q=arguments.length,H;if(this._all)for(B=0,N=this._all.length;B<N;B++)switch(this.event=_,q){case 1:z.push(this._all[B].call(this,_));break;case 2:z.push(this._all[B].call(this,_,arguments[1]));break;case 3:z.push(this._all[B].call(this,_,arguments[1],arguments[2]));break;default:z.push(this._all[B].apply(this,arguments))}if(x?(H=[],P.call(this,H,T,this.listenerTree,0)):H=this._events[_],typeof H=="function")switch(this.event=_,q){case 1:z.push(H.call(this));break;case 2:z.push(H.call(this,arguments[1]));break;case 3:z.push(H.call(this,arguments[1],arguments[2]));break;default:for(O=new Array(q-1),F=1;F<q;F++)O[F-1]=arguments[F];z.push(H.apply(this,O))}else if(H&&H.length){if(H=H.slice(),q>3)for(O=new Array(q-1),F=1;F<q;F++)O[F-1]=arguments[F];for(B=0,N=H.length;B<N;B++)switch(this.event=_,q){case 1:z.push(H[B].call(this));break;case 2:z.push(H[B].call(this,arguments[1]));break;case 3:z.push(H[B].call(this,arguments[1],arguments[2]));break;default:z.push(H[B].apply(this,O))}}else if(!this.ignoreErrors&&!this._all&&_==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(z)},E.prototype.on=function(_,x,T){return this._on(_,x,!1,T)},E.prototype.prependListener=function(_,x,T){return this._on(_,x,!0,T)},E.prototype.onAny=function(_){return this._onAny(_,!1)},E.prototype.prependAny=function(_){return this._onAny(_,!0)},E.prototype.addListener=E.prototype.on,E.prototype._onAny=function(_,x){if(typeof _!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),x?this._all.unshift(_):this._all.push(_),this},E.prototype._on=function(_,x,T,M){if(typeof _=="function")return this._onAny(_,x),this;if(typeof x!="function")throw new Error("on only accepts instances of Function");this._events||h.call(this);var O=this,N;return M!==n&&(N=I.call(this,_,x,M),x=N[0],O=N[1]),this._newListener&&this.emit("newListener",_,x),this.wildcard?(L.call(this,_,x,T),O):(this._events[_]?(typeof this._events[_]=="function"&&(this._events[_]=[this._events[_]]),T?this._events[_].unshift(x):this._events[_].push(x),!this._events[_].warned&&this._maxListeners>0&&this._events[_].length>this._maxListeners&&(this._events[_].warned=!0,g.call(this,this._events[_].length,_))):this._events[_]=x,O)},E.prototype.off=function(_,x){if(typeof x!="function")throw new Error("removeListener only takes instances of Function");var T,M=[];if(this.wildcard){var O=typeof _=="string"?_.split(this.delimiter):_.slice();if(M=P.call(this,null,O,this.listenerTree,0),!M)return this}else{if(!this._events[_])return this;T=this._events[_],M.push({_listeners:T})}for(var N=0;N<M.length;N++){var B=M[N];if(T=B._listeners,i(T)){for(var F=-1,z=0,q=T.length;z<q;z++)if(T[z]===x||T[z].listener&&T[z].listener===x||T[z]._origin&&T[z]._origin===x){F=z;break}if(F<0)continue;return this.wildcard?B._listeners.splice(F,1):this._events[_].splice(F,1),T.length===0&&(this.wildcard?delete B._listeners:delete this._events[_]),this._removeListener&&this.emit("removeListener",_,x),this}else(T===x||T.listener&&T.listener===x||T._origin&&T._origin===x)&&(this.wildcard?delete B._listeners:delete this._events[_],this._removeListener&&this.emit("removeListener",_,x))}return this.listenerTree&&D(this.listenerTree),this},E.prototype.offAny=function(_){var x=0,T=0,M;if(_&&this._all&&this._all.length>0){for(M=this._all,x=0,T=M.length;x<T;x++)if(_===M[x])return M.splice(x,1),this._removeListener&&this.emit("removeListenerAny",_),this}else{if(M=this._all,this._removeListener)for(x=0,T=M.length;x<T;x++)this.emit("removeListenerAny",M[x]);this._all=[]}return this},E.prototype.removeListener=E.prototype.off,E.prototype.removeAllListeners=function(_){if(_===n)return!this._events||h.call(this),this;if(this.wildcard){var x=P.call(this,null,_,this.listenerTree,0),T,M;if(!x)return this;for(M=0;M<x.length;M++)T=x[M],T._listeners=null;this.listenerTree&&D(this.listenerTree)}else this._events&&(this._events[_]=null);return this},E.prototype.listeners=function(_){var x=this._events,T,M,O,N,B;if(_===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!x)return[];for(T=d(x),N=T.length,O=[];N-- >0;)M=x[T[N]],typeof M=="function"?O.push(M):O.push.apply(O,M);return O}else{if(this.wildcard){if(B=this.listenerTree,!B)return[];var F=[],z=typeof _=="string"?_.split(this.delimiter):_.slice();return P.call(this,F,z,B,0),F}return x?(M=x[_],M?typeof M=="function"?[M]:M:[]):[]}},E.prototype.eventNames=function(_){var x=this._events;return this.wildcard?U.call(this,this.listenerTree,[],null,_):x?d(x):[]},E.prototype.listenerCount=function(_){return this.listeners(_).length},E.prototype.hasListeners=function(_){if(this.wildcard){var x=[],T=typeof _=="string"?_.split(this.delimiter):_.slice();return P.call(this,x,T,this.listenerTree,0),x.length>0}var M=this._events,O=this._all;return!!(O&&O.length||M&&(_===n?d(M).length:M[_]))},E.prototype.listenersAny=function(){return this._all?this._all:[]},E.prototype.waitFor=function(_,x){var T=this,M=typeof x;return M==="number"?x={timeout:x}:M==="function"&&(x={filter:x}),x=w(x,{timeout:0,filter:n,handleError:!1,Promise,overload:!1},{filter:C,Promise:b}),$(x.Promise,function(O,N,B){function F(){var z=x.filter;if(!(z&&!z.apply(T,arguments)))if(T.off(_,F),x.handleError){var q=arguments[0];q?N(q):O(p.apply(null,arguments).slice(1))}else O(p.apply(null,arguments))}B(function(){T.off(_,F)}),T._on(_,F,!1)},{timeout:x.timeout,overload:x.overload})};function S(_,x,T){T=w(T,{Promise,timeout:0,overload:!1},{Promise:b});var M=T.Promise;return $(M,function(O,N,B){var F;if(typeof _.addEventListener=="function"){F=function(){O(p.apply(null,arguments))},B(function(){_.removeEventListener(x,F)}),_.addEventListener(x,F,{once:!0});return}var z=function(){q&&_.removeListener("error",q),O(p.apply(null,arguments))},q;x!=="error"&&(q=function(H){_.removeListener(x,z),N(H)},_.once("error",q)),B(function(){q&&_.removeListener("error",q),_.removeListener(x,z)}),_.once(x,z)},{timeout:T.timeout,overload:T.overload})}var k=E.prototype;Object.defineProperties(E,{defaultMaxListeners:{get:function(){return k._maxListeners},set:function(_){if(typeof _!="number"||_<0||Number.isNaN(_))throw TypeError("n must be a non-negative number");k._maxListeners=_},enumerable:!0},once:{value:S,writable:!0,configurable:!0}}),Object.defineProperties(k,{_maxListeners:{value:s,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof n=="function"&&n.amd?n(function(){return E}):t.exports=E})()})(IO);var rb=IO.exports;const Eie=$u(rb);var ib,Cie=new Uint8Array(16);function _ie(){if(!ib&&(ib=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ib))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ib(Cie)}const Sie=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function qE(t){return typeof t=="string"&&Sie.test(t)}for(var fr=[],HE=0;HE<256;++HE)fr.push((HE+256).toString(16).substr(1));function xie(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(fr[t[e+0]]+fr[t[e+1]]+fr[t[e+2]]+fr[t[e+3]]+"-"+fr[t[e+4]]+fr[t[e+5]]+"-"+fr[t[e+6]]+fr[t[e+7]]+"-"+fr[t[e+8]]+fr[t[e+9]]+"-"+fr[t[e+10]]+fr[t[e+11]]+fr[t[e+12]]+fr[t[e+13]]+fr[t[e+14]]+fr[t[e+15]]).toLowerCase();if(!qE(n))throw TypeError("Stringified UUID is invalid");return n}function sl(t,e,n){t=t||{};var r=t.random||(t.rng||_ie)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return xie(r)}const Ho=Object.create(null);Ho.open="0",Ho.close="1",Ho.ping="2",Ho.pong="3",Ho.message="4",Ho.upgrade="5",Ho.noop="6";const sb=Object.create(null);Object.keys(Ho).forEach(t=>{sb[Ho[t]]=t});const WE={type:"error",data:"parser error"},$O=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",PO=typeof ArrayBuffer=="function",OO=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,KE=({type:t,data:e},n,r)=>$O&&e instanceof Blob?n?r(e):TO(e,r):PO&&(e instanceof ArrayBuffer||OO(e))?n?r(e):TO(new Blob([e]),r):r(Ho[t]+(e||"")),TO=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function NO(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let VE;function Aie(t,e){if($O&&t.data instanceof Blob)return t.data.arrayBuffer().then(NO).then(e);if(PO&&(t.data instanceof ArrayBuffer||OO(t.data)))return e(NO(t.data));KE(t,!1,n=>{VE||(VE=new TextEncoder),e(VE.encode(n))})}const kO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<kO.length;t++)Hg[kO.charCodeAt(t)]=t;const Iie=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<n;r+=4)s=Hg[t.charCodeAt(r)],o=Hg[t.charCodeAt(r+1)],a=Hg[t.charCodeAt(r+2)],c=Hg[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l},$ie=typeof ArrayBuffer=="function",GE=(t,e)=>{if(typeof t!="string")return{type:"message",data:RO(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Pie(t.substring(1),e)}:sb[n]?t.length>1?{type:sb[n],data:t.substring(1)}:{type:sb[n]}:WE},Pie=(t,e)=>{if($ie){const n=Iie(t);return RO(n,e)}else return{base64:!0,data:t}},RO=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},MO=String.fromCharCode(30),Oie=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{KE(s,!1,a=>{r[o]=a,++i===n&&e(r.join(MO))})})},Tie=(t,e)=>{const n=t.split(MO),r=[];for(let i=0;i<n.length;i++){const s=GE(n[i],e);if(r.push(s),s.type==="error")break}return r};function Nie(){return new TransformStream({transform(t,e){Aie(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let ZE;function ob(t){return t.reduce((e,n)=>e+n.length,0)}function ab(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function kie(t,e){ZE||(ZE=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(ob(n)<1)break;const c=ab(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(ob(n)<2)break;const c=ab(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(ob(n)<8)break;const c=ab(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,53-32)-1){a.enqueue(WE);break}i=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(ob(n)<i)break;const c=ab(n,i);a.enqueue(GE(s?c:ZE.decode(c),e)),r=0}if(i===0||i>t){a.enqueue(WE);break}}}})}const BO=4;function In(t){if(t)return Rie(t)}function Rie(t){for(var e in In.prototype)t[e]=In.prototype[e];return t}In.prototype.on=In.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},In.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},In.prototype.off=In.prototype.removeListener=In.prototype.removeAllListeners=In.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this},In.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this},In.prototype.emitReserved=In.prototype.emit,In.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},In.prototype.hasListeners=function(t){return!!this.listeners(t).length};const cb=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),$s=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),Mie="arraybuffer";function jMe(){}function DO(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Bie=$s.setTimeout,Die=$s.clearTimeout;function lb(t,e){e.useNativeTimers?(t.setTimeoutFn=Bie.bind($s),t.clearTimeoutFn=Die.bind($s)):(t.setTimeoutFn=$s.setTimeout.bind($s),t.clearTimeoutFn=$s.clearTimeout.bind($s))}const Lie=1.33;function jie(t){return typeof t=="string"?Uie(t):Math.ceil((t.byteLength||t.size)*Lie)}function Uie(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function LO(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Fie(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function zie(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class qie extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class YE extends In{constructor(e){super(),this.writable=!1,lb(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new qie(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=GE(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Fie(e);return n.length?"?"+n:""}}class Hie extends YE{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Tie(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Oie(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=LO()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let jO=!1;try{jO=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Wie=jO;function Kie(){}class Vie extends Hie{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let ff=class d3 extends In{constructor(e,n,r){super(),this.createRequest=e,lb(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=DO(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=d3.requestsCount++,d3.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Kie,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete d3.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};if(ff.requestsCount=0,ff.requests={},typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",UO);else if(typeof addEventListener=="function"){const t="onpagehide"in $s?"pagehide":"unload";addEventListener(t,UO,!1)}}function UO(){for(let t in ff.requests)ff.requests.hasOwnProperty(t)&&ff.requests[t].abort()}const Gie=function(){const t=FO({xdomain:!1});return t&&t.responseType!==null}();class Zie extends Vie{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Gie&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new ff(FO,this.uri(),e)}}function FO(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Wie))return new XMLHttpRequest}catch{}if(!e)try{return new $s[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const zO=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Yie extends YE{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=zO?{}:DO(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;KE(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&cb(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=LO()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const JE=$s.WebSocket||$s.MozWebSocket;class Jie extends Yie{createSocket(e,n,r){return zO?new JE(e,n,r):n?new JE(e,n):new JE(e)}doWrite(e,n){this.ws.send(n)}}class Qie extends YE{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=kie(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=Nie();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&cb(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Xie={websocket:Jie,webtransport:Qie,polling:Zie},ese=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,tse=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function QE(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=ese.exec(t||""),s={},o=14;for(;o--;)s[tse[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=nse(s,s.path),s.queryKey=rse(s,s.query),s}function nse(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function rse(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const XE=typeof addEventListener=="function"&&typeof removeEventListener=="function",ub=[];XE&&addEventListener("offline",()=>{ub.forEach(t=>t())},!1);class ol extends In{constructor(e,n){if(super(),this.binaryType=Mie,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=QE(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=QE(n.host).host);lb(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=zie(this.opts.query)),XE&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ub.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=BO,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ol.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ol.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=jie(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,cb(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ol.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),XE&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=ub.indexOf(this._offlineEventListener);r!==-1&&ub.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}ol.protocol=BO;class ise extends ol{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;ol.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ol.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=d=>{const h=new Error("probe error: "+d);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function c(){o("socket closed")}function l(d){n&&d.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let sse=class extends ise{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>Xie[i]).filter(i=>!!i)),super(e,r)}};function ose(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=QE(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const ase=typeof ArrayBuffer=="function",cse=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,qO=Object.prototype.toString,lse=typeof Blob=="function"||typeof Blob<"u"&&qO.call(Blob)==="[object BlobConstructor]",use=typeof File=="function"||typeof File<"u"&&qO.call(File)==="[object FileConstructor]";function e8(t){return ase&&(t instanceof ArrayBuffer||cse(t))||lse&&t instanceof Blob||use&&t instanceof File}function db(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(db(t[n]))return!0;return!1}if(e8(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return db(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&db(t[n]))return!0;return!1}function dse(t){const e=[],n=t.data,r=t;return r.data=t8(n,e),r.attachments=e.length,{packet:r,buffers:e}}function t8(t,e){if(!t)return t;if(e8(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=t8(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t8(t[r],e));return n}return t}function hse(t,e){return t.data=n8(t.data,e),delete t.attachments,t}function n8(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=n8(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=n8(t[n],e));return t}const fse=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],pse=5;var ot;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ot||(ot={}));let gse=class{constructor(e){this.replacer=e}encode(e){return(e.type===ot.EVENT||e.type===ot.ACK)&&db(e)?this.encodeAsBinary({type:e.type===ot.EVENT?ot.BINARY_EVENT:ot.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===ot.BINARY_EVENT||e.type===ot.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=dse(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}};function HO(t){return Object.prototype.toString.call(t)==="[object Object]"}let mse=class mV extends In{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===ot.BINARY_EVENT;r||n.type===ot.BINARY_ACK?(n.type=r?ot.EVENT:ot.ACK,this.reconstructor=new yse(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(e8(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(ot[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ot.BINARY_EVENT||r.type===ot.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(mV.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case ot.CONNECT:return HO(n);case ot.DISCONNECT:return n===void 0;case ot.CONNECT_ERROR:return typeof n=="string"||HO(n);case ot.EVENT:case ot.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&fse.indexOf(n[0])===-1);case ot.ACK:case ot.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class yse{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=hse(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const wse=Object.freeze(Object.defineProperty({__proto__:null,Decoder:mse,Encoder:gse,get PacketType(){return ot},protocol:pse},Symbol.toStringTag,{value:"Module"}));function oo(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const bse=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class WO extends In{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[oo(e,"open",this.onopen.bind(this)),oo(e,"packet",this.onpacket.bind(this)),oo(e,"error",this.onerror.bind(this)),oo(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(bse.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:ot.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,d=n.pop();this._registerAckCallback(u,d),o.id=u}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ot.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ot.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ot.EVENT:case ot.BINARY_EVENT:this.onevent(e);break;case ot.ACK:case ot.BINARY_ACK:this.onack(e);break;case ot.DISCONNECT:this.ondisconnect();break;case ot.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:ot.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ot.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function pf(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}pf.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0},pf.prototype.reset=function(){this.attempts=0},pf.prototype.setMin=function(t){this.ms=t},pf.prototype.setMax=function(t){this.max=t},pf.prototype.setJitter=function(t){this.jitter=t};class r8 extends In{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,lb(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new pf({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||wse;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new sse(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=oo(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=oo(n,"error",s);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(oo(e,"ping",this.onping.bind(this)),oo(e,"data",this.ondata.bind(this)),oo(e,"error",this.onerror.bind(this)),oo(e,"close",this.onclose.bind(this)),oo(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){cb(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new WO(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Wg={};function hb(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=ose(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Wg[i]&&s in Wg[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new r8(r,e):(Wg[i]||(Wg[i]=new r8(r,e)),c=Wg[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(hb,{Manager:r8,Socket:WO,io:hb,connect:hb});function oe(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{c(r.next(l))}catch(u){s(u)}}function a(l){try{c(r.throw(l))}catch(u){s(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof n?u:new n(function(d){d(u)})).then(o,a)}c((r=r.apply(t,e||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;var Vr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Wo=[],Ps=[],vse=typeof Uint8Array<"u"?Uint8Array:Array,i8=!1;function KO(){i8=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)Wo[e]=t[e],Ps[t.charCodeAt(e)]=e;Ps["-".charCodeAt(0)]=62,Ps["_".charCodeAt(0)]=63}function Ese(t,e,n){for(var r,i,s=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(Wo[(i=r)>>18&63]+Wo[i>>12&63]+Wo[i>>6&63]+Wo[63&i]);return s.join("")}function VO(t){var e;i8||KO();for(var n=t.length,r=n%3,i="",s=[],o=16383,a=0,c=n-r;a<c;a+=o)s.push(Ese(t,a,a+o>c?c:a+o));return r===1?(e=t[n-1],i+=Wo[e>>2],i+=Wo[e<<4&63],i+="=="):r===2&&(e=(t[n-2]<<8)+t[n-1],i+=Wo[e>>10],i+=Wo[e>>4&63],i+=Wo[e<<2&63],i+="="),s.push(i),s.join("")}function fb(t,e,n,r,i){var s,o,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=t[e+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+t[e+d],d+=h,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+t[e+d],d+=h,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=l}return(f?-1:1)*o*Math.pow(2,s-r)}function GO(t,e,n,r,i,s){var o,a,c,l=8*s-i-1,u=(1<<l)-1,d=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,g=r?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[n+f]=255&a,f+=g,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[n+f]=255&o,f+=g,o/=256,l-=8);t[n+f-g]|=128*p}var Cse={}.toString,ZO=Array.isArray||function(t){return Cse.call(t)=="[object Array]"};ae.TYPED_ARRAY_SUPPORT=Vr.TYPED_ARRAY_SUPPORT===void 0||Vr.TYPED_ARRAY_SUPPORT;var _se=pb();function pb(){return ae.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Va(t,e){if(pb()<e)throw new RangeError("Invalid typed array length");return ae.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=ae.prototype:(t===null&&(t=new ae(e)),t.length=e),t}function ae(t,e,n){if(!(ae.TYPED_ARRAY_SUPPORT||this instanceof ae))return new ae(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return s8(this,t)}return YO(this,t,e,n)}function YO(t,e,n,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?function(i,s,o,a){if(s.byteLength,o<0||s.byteLength<o)throw new RangeError("'offset' is out of bounds");if(s.byteLength<o+(a||0))throw new RangeError("'length' is out of bounds");return s=o===void 0&&a===void 0?new Uint8Array(s):a===void 0?new Uint8Array(s,o):new Uint8Array(s,o,a),ae.TYPED_ARRAY_SUPPORT?(i=s).__proto__=ae.prototype:i=o8(i,s),i}(t,e,n,r):typeof e=="string"?function(i,s,o){if(typeof o=="string"&&o!==""||(o="utf8"),!ae.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var a=0|QO(s,o);i=Va(i,a);var c=i.write(s,o);return c!==a&&(i=i.slice(0,c)),i}(t,e,n):function(i,s){if(Ko(s)){var o=0|a8(s.length);return(i=Va(i,o)).length===0||s.copy(i,0,0,o),i}if(s){if(typeof ArrayBuffer<"u"&&s.buffer instanceof ArrayBuffer||"length"in s)return typeof s.length!="number"||(a=s.length)!=a?Va(i,0):o8(i,s);if(s.type==="Buffer"&&ZO(s.data))return o8(i,s.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function JO(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function s8(t,e){if(JO(e),t=Va(t,e<0?0:0|a8(e)),!ae.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function o8(t,e){var n=e.length<0?0:0|a8(e.length);t=Va(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function a8(t){if(t>=pb())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+pb().toString(16)+" bytes");return 0|t}function Ko(t){return!(t==null||!t._isBuffer)}function QO(t,e){if(Ko(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return yb(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return aT(t).length;default:if(r)return yb(t).length;e=(""+e).toLowerCase(),r=!0}}function Sse(t,e,n){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return kse(this,e,n);case"utf8":case"utf-8":return nT(this,e,n);case"ascii":return Tse(this,e,n);case"latin1":case"binary":return Nse(this,e,n);case"base64":return Ose(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Rse(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function Xu(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function XO(t,e,n,r,i){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if(typeof e=="string"&&(e=ae.from(e,r)),Ko(e))return e.length===0?-1:eT(t,e,n,r,i);if(typeof e=="number")return e&=255,ae.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):eT(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function eT(t,e,n,r,i){var s,o=1,a=t.length,c=e.length;if(r!==void 0&&((r=String(r).toLowerCase())==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,n/=2}function l(f,g){return o===1?f[g]:f.readUInt16BE(g*o)}if(i){var u=-1;for(s=n;s<a;s++)if(l(t,s)===l(e,u===-1?0:s-u)){if(u===-1&&(u=s),s-u+1===c)return u*o}else u!==-1&&(s-=s-u),u=-1}else for(n+c>a&&(n=a-c),s=n;s>=0;s--){for(var d=!0,h=0;h<c;h++)if(l(t,s+h)!==l(e,h)){d=!1;break}if(d)return s}return-1}function xse(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function Ase(t,e,n,r){return wb(yb(e,t.length-n),t,n,r)}function tT(t,e,n,r){return wb(function(i){for(var s=[],o=0;o<i.length;++o)s.push(255&i.charCodeAt(o));return s}(e),t,n,r)}function Ise(t,e,n,r){return tT(t,e,n,r)}function $se(t,e,n,r){return wb(aT(e),t,n,r)}function Pse(t,e,n,r){return wb(function(i,s){for(var o,a,c,l=[],u=0;u<i.length&&!((s-=2)<0);++u)a=(o=i.charCodeAt(u))>>8,c=o%256,l.push(c),l.push(a);return l}(e,t.length-n),t,n,r)}function Ose(t,e,n){return e===0&&n===t.length?VO(t):VO(t.slice(e,n))}function nT(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var s,o,a,c,l=t[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:(192&(s=t[i+1]))==128&&(c=(31&l)<<6|63&s)>127&&(u=c);break;case 3:s=t[i+1],o=t[i+2],(192&s)==128&&(192&o)==128&&(c=(15&l)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(c=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(u=c)}u===null?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(h){var f=h.length;if(f<=rT)return String.fromCharCode.apply(String,h);for(var g="",p=0;p<f;)g+=String.fromCharCode.apply(String,h.slice(p,p+=rT));return g}(r)}ae.poolSize=8192,ae._augment=function(t){return t.__proto__=ae.prototype,t},ae.from=function(t,e,n){return YO(null,t,e,n)},ae.TYPED_ARRAY_SUPPORT&&(ae.prototype.__proto__=Uint8Array.prototype,ae.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&ae[Symbol.species]),ae.alloc=function(t,e,n){return function(r,i,s,o){return JO(i),i<=0?Va(r,i):s!==void 0?typeof o=="string"?Va(r,i).fill(s,o):Va(r,i).fill(s):Va(r,i)}(null,t,e,n)},ae.allocUnsafe=function(t){return s8(null,t)},ae.allocUnsafeSlow=function(t){return s8(null,t)},ae.isBuffer=cT,ae.compare=function(t,e){if(!Ko(t)||!Ko(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},ae.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ae.concat=function(t,e){if(!ZO(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return ae.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=ae.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!Ko(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},ae.byteLength=QO,ae.prototype._isBuffer=!0,ae.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Xu(this,e,e+1);return this},ae.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Xu(this,e,e+3),Xu(this,e+1,e+2);return this},ae.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Xu(this,e,e+7),Xu(this,e+1,e+6),Xu(this,e+2,e+5),Xu(this,e+3,e+4);return this},ae.prototype.toString=function(){var t=0|this.length;return t===0?"":arguments.length===0?nT(this,0,t):Sse.apply(this,arguments)},ae.prototype.equals=function(t){if(!Ko(t))throw new TypeError("Argument must be a Buffer");return this===t||ae.compare(this,t)===0},ae.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ae.prototype.compare=function(t,e,n,r,i){if(!Ko(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),a=Math.min(s,o),c=this.slice(r,i),l=t.slice(e,n),u=0;u<a;++u)if(c[u]!==l[u]){s=c[u],o=l[u];break}return s<o?-1:o<s?1:0},ae.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},ae.prototype.indexOf=function(t,e,n){return XO(this,t,e,n,!0)},ae.prototype.lastIndexOf=function(t,e,n){return XO(this,t,e,n,!1)},ae.prototype.write=function(t,e,n,r){if(e===void 0)r="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,r===void 0&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return xse(this,t,e,n);case"utf8":case"utf-8":return Ase(this,t,e,n);case"ascii":return tT(this,t,e,n);case"latin1":case"binary":return Ise(this,t,e,n);case"base64":return $se(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pse(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},ae.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var rT=4096;function Tse(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function Nse(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function kse(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=e;s<n;++s)i+=Bse(t[s]);return i}function Rse(t,e,n){for(var r=t.slice(e,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function zn(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function fi(t,e,n,r,i,s){if(!Ko(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function gb(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(t.length-n,2);i<s;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function mb(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(t.length-n,4);i<s;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function iT(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function sT(t,e,n,r,i){return i||iT(t,0,n,4),GO(t,e,n,r,23,4),n+4}function oT(t,e,n,r,i){return i||iT(t,0,n,8),GO(t,e,n,r,52,8),n+8}ae.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=e===void 0?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),ae.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=ae.prototype;else{var i=e-t;n=new ae(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+t]}return n},ae.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||zn(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r},ae.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||zn(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},ae.prototype.readUInt8=function(t,e){return e||zn(t,1,this.length),this[t]},ae.prototype.readUInt16LE=function(t,e){return e||zn(t,2,this.length),this[t]|this[t+1]<<8},ae.prototype.readUInt16BE=function(t,e){return e||zn(t,2,this.length),this[t]<<8|this[t+1]},ae.prototype.readUInt32LE=function(t,e){return e||zn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ae.prototype.readUInt32BE=function(t,e){return e||zn(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ae.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||zn(t,e,this.length);for(var r=this[t],i=1,s=0;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},ae.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||zn(t,e,this.length);for(var r=e,i=1,s=this[t+--r];r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},ae.prototype.readInt8=function(t,e){return e||zn(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ae.prototype.readInt16LE=function(t,e){e||zn(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},ae.prototype.readInt16BE=function(t,e){e||zn(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},ae.prototype.readInt32LE=function(t,e){return e||zn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ae.prototype.readInt32BE=function(t,e){return e||zn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ae.prototype.readFloatLE=function(t,e){return e||zn(t,4,this.length),fb(this,t,!0,23,4)},ae.prototype.readFloatBE=function(t,e){return e||zn(t,4,this.length),fb(this,t,!1,23,4)},ae.prototype.readDoubleLE=function(t,e){return e||zn(t,8,this.length),fb(this,t,!0,52,8)},ae.prototype.readDoubleBE=function(t,e){return e||zn(t,8,this.length),fb(this,t,!1,52,8)},ae.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||fi(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},ae.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||fi(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},ae.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||fi(this,t,e,1,255,0),ae.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ae.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||fi(this,t,e,2,65535,0),ae.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):gb(this,t,e,!0),e+2},ae.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||fi(this,t,e,2,65535,0),ae.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):gb(this,t,e,!1),e+2},ae.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||fi(this,t,e,4,4294967295,0),ae.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):mb(this,t,e,!0),e+4},ae.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||fi(this,t,e,4,4294967295,0),ae.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):mb(this,t,e,!1),e+4},ae.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);fi(this,t,e,n,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&a===0&&this[e+s-1]!==0&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},ae.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);fi(this,t,e,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&a===0&&this[e+s+1]!==0&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},ae.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||fi(this,t,e,1,127,-128),ae.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ae.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||fi(this,t,e,2,32767,-32768),ae.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):gb(this,t,e,!0),e+2},ae.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||fi(this,t,e,2,32767,-32768),ae.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):gb(this,t,e,!1),e+2},ae.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||fi(this,t,e,4,2147483647,-2147483648),ae.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):mb(this,t,e,!0),e+4},ae.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||fi(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ae.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):mb(this,t,e,!1),e+4},ae.prototype.writeFloatLE=function(t,e,n){return sT(this,t,e,!0,n)},ae.prototype.writeFloatBE=function(t,e,n){return sT(this,t,e,!1,n)},ae.prototype.writeDoubleLE=function(t,e,n){return oT(this,t,e,!0,n)},ae.prototype.writeDoubleBE=function(t,e,n){return oT(this,t,e,!1,n)},ae.prototype.copy=function(t,e,n,r){if(n||(n=0),r||r===0||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!ae.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},ae.prototype.fill=function(t,e,n,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),t.length===1){var i=t.charCodeAt(0);i<256&&(t=i)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!ae.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=n===void 0?this.length:n>>>0,t||(t=0),typeof t=="number")for(s=e;s<n;++s)this[s]=t;else{var o=Ko(t)?t:yb(new ae(t,r).toString()),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var Mse=/[^+\/0-9A-Za-z-_]/g;function Bse(t){return t<16?"0"+t.toString(16):t.toString(16)}function yb(t,e){var n;e=e||1/0;for(var r=t.length,i=null,s=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function aT(t){return function(e){var n,r,i,s,o,a;i8||KO();var c=e.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=e[c-2]==="="?2:e[c-1]==="="?1:0,a=new vse(3*c/4-o),i=o>0?c-4:c;var l=0;for(n=0,r=0;n<i;n+=4,r+=3)s=Ps[e.charCodeAt(n)]<<18|Ps[e.charCodeAt(n+1)]<<12|Ps[e.charCodeAt(n+2)]<<6|Ps[e.charCodeAt(n+3)],a[l++]=s>>16&255,a[l++]=s>>8&255,a[l++]=255&s;return o===2?(s=Ps[e.charCodeAt(n)]<<2|Ps[e.charCodeAt(n+1)]>>4,a[l++]=255&s):o===1&&(s=Ps[e.charCodeAt(n)]<<10|Ps[e.charCodeAt(n+1)]<<4|Ps[e.charCodeAt(n+2)]>>2,a[l++]=s>>8&255,a[l++]=255&s),a}(function(e){if((e=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(e).replace(Mse,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(t))}function wb(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function cT(t){return t!=null&&(!!t._isBuffer||lT(t)||function(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&lT(e.slice(0,0))}(t))}function lT(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var Dse=Object.freeze({__proto__:null,Buffer:ae,INSPECT_MAX_BYTES:50,SlowBuffer:function(t){return+t!=t&&(t=0),ae.alloc(+t)},isBuffer:cT,kMaxLength:_se}),Os=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Kg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var gf={},Ki={},Rr={};function vb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function uT(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function dT(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function c8(t,...e){if(!dT(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function hT(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");vb(t.outputLen),vb(t.blockLen)}function fT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function pT(t,e){c8(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.isBytes=dT,Rr.number=vb,Rr.bool=uT,Rr.bytes=c8,Rr.hash=hT,Rr.exists=fT,Rr.output=pT;const Lse={number:vb,bool:uT,bytes:c8,hash:hT,exists:fT,output:pT};Rr.default=Lse,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCipher=t.Hash=t.nextTick=t.isLE=t.createView=t.u32=t.u16=t.u8=void 0,t.bytesToHex=r,t.hexToBytes=o,t.hexToNumber=a,t.bytesToNumberBE=function(d){return a(r(d))},t.numberToBytesBE=function(d,h){return o(d.toString(16).padStart(2*h,"0"))},t.asyncLoop=async function(d,h,f){let g=Date.now();for(let p=0;p<d;p++){f(p);const m=Date.now()-g;m>=0&&m<h||(await(0,t.nextTick)(),g+=m)}},t.utf8ToBytes=c,t.bytesToUtf8=function(d){return new TextDecoder().decode(d)},t.toBytes=function(d){if(typeof d=="string")d=c(d);else{if(!(0,e.isBytes)(d))throw new Error("Uint8Array expected, got "+typeof d);d=u(d)}return d},t.concatBytes=function(...d){let h=0;for(let g=0;g<d.length;g++){const p=d[g];(0,e.bytes)(p),h+=p.length}const f=new Uint8Array(h);for(let g=0,p=0;g<d.length;g++){const m=d[g];f.set(m,p),p+=m.length}return f},t.checkOpts=function(d,h){if(h==null||typeof h!="object")throw new Error("options must be defined");return Object.assign(d,h)},t.equalBytes=function(d,h){if(d.length!==h.length)return!1;let f=0;for(let g=0;g<d.length;g++)f|=d[g]^h[g];return f===0},t.setBigUint64=l,t.u64Lengths=function(d,h){const f=new Uint8Array(16),g=(0,t.createView)(f);return l(g,0,BigInt(h?h.length:0),!0),l(g,8,BigInt(d.length),!0),f},t.isAligned32=function(d){return d.byteOffset%4==0},t.copyBytes=u,t.clean=function(...d){for(let h=0;h<d.length;h++)d[h].fill(0)};const e=Rr;if(t.u8=d=>new Uint8Array(d.buffer,d.byteOffset,d.byteLength),t.u16=d=>new Uint16Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/2)),t.u32=d=>new Uint32Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/4)),t.createView=d=>new DataView(d.buffer,d.byteOffset,d.byteLength),t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},(d,h)=>h.toString(16).padStart(2,"0"));function r(d){(0,e.bytes)(d);let h="";for(let f=0;f<d.length;f++)h+=n[d[f]];return h}const i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(d){return d>=i._0&&d<=i._9?d-i._0:d>=i._A&&d<=i._F?d-(i._A-10):d>=i._a&&d<=i._f?d-(i._a-10):void 0}function o(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);const h=d.length,f=h/2;if(h%2)throw new Error("padded hex string expected, got unpadded hex of length "+h);const g=new Uint8Array(f);for(let p=0,m=0;p<f;p++,m+=2){const y=s(d.charCodeAt(m)),w=s(d.charCodeAt(m+1));if(y===void 0||w===void 0){const b=d[m]+d[m+1];throw new Error('hex string expected, got non-hex character "'+b+'" at index '+m)}g[p]=16*y+w}return g}function a(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);return BigInt(d===""?"0":`0x${d}`)}function c(d){if(typeof d!="string")throw new Error("string expected, got "+typeof d);return new Uint8Array(new TextEncoder().encode(d))}t.nextTick=async()=>{},t.Hash=class{};function l(d,h,f,g){if(typeof d.setBigUint64=="function")return d.setBigUint64(h,f,g);const p=BigInt(32),m=BigInt(4294967295),y=Number(f>>p&m),w=Number(f&m),b=g?4:0,v=g?0:4;d.setUint32(h+b,y,g),d.setUint32(h+v,w,g)}function u(d){return Uint8Array.from(d)}t.wrapCipher=(d,h)=>(Object.assign(h,d),h)}(Ki);var Vg={},qn={};Object.defineProperty(qn,"__esModule",{value:!0}),qn.AEAD_TAG_LENGTH=qn.XCHACHA20_NONCE_LENGTH=qn.CURVE25519_PUBLIC_KEY_SIZE=qn.ETH_PUBLIC_KEY_SIZE=qn.UNCOMPRESSED_PUBLIC_KEY_SIZE=qn.COMPRESSED_PUBLIC_KEY_SIZE=qn.SECRET_KEY_LENGTH=void 0,qn.SECRET_KEY_LENGTH=32,qn.COMPRESSED_PUBLIC_KEY_SIZE=33,qn.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,qn.ETH_PUBLIC_KEY_SIZE=64,qn.CURVE25519_PUBLIC_KEY_SIZE=32,qn.XCHACHA20_NONCE_LENGTH=24,qn.AEAD_TAG_LENGTH=16,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ephemeralKeySize=t.symmetricNonceLength=t.symmetricAlgorithm=t.isHkdfKeyCompressed=t.isEphemeralKeyCompressed=t.ellipticCurve=t.ECIES_CONFIG=void 0;var e=qn,n=function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16};t.ECIES_CONFIG=new n,t.ellipticCurve=function(){return t.ECIES_CONFIG.ellipticCurve},t.isEphemeralKeyCompressed=function(){return t.ECIES_CONFIG.isEphemeralKeyCompressed},t.isHkdfKeyCompressed=function(){return t.ECIES_CONFIG.isHkdfKeyCompressed},t.symmetricAlgorithm=function(){return t.ECIES_CONFIG.symmetricAlgorithm},t.symmetricNonceLength=function(){return t.ECIES_CONFIG.symmetricNonceLength},t.ephemeralKeySize=function(){var r={secp256k1:t.ECIES_CONFIG.isEphemeralKeyCompressed?e.COMPRESSED_PUBLIC_KEY_SIZE:e.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:e.CURVE25519_PUBLIC_KEY_SIZE,ed25519:e.CURVE25519_PUBLIC_KEY_SIZE};if(t.ECIES_CONFIG.ellipticCurve in r)return r[t.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}}(Vg);var l8={},Eb={},Cb={},gT={},u8={},_b={};Object.defineProperty(_b,"__esModule",{value:!0}),_b.crypto=void 0,_b.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.gcm=t.ctr=t.cbc=t.utils=void 0,t.randomBytes=i,t.getWebcryptoSubtle=s,t.managedNonce=function(c){return(0,n.number)(c.nonceLength),(l,...u)=>({encrypt(d,...h){const{nonceLength:f}=c,g=i(f),p=c(l,g,...u).encrypt(d,...h),m=(0,r.concatBytes)(g,p);return p.fill(0),m},decrypt(d,...h){const{nonceLength:f}=c,g=d.subarray(0,f),p=d.subarray(f);return c(l,g,...u).decrypt(p,...h)}})};const e=_b,n=Rr,r=Ki;function i(c=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(c));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(c);throw new Error("crypto.getRandomValues must be defined")}function s(){if(e.crypto&&typeof e.crypto.subtle=="object"&&e.crypto.subtle!=null)return e.crypto.subtle;throw new Error("crypto.subtle must be defined")}t.utils={async encrypt(c,l,u,d){const h=s(),f=await h.importKey("raw",c,l,!0,["encrypt"]),g=await h.encrypt(u,f,d);return new Uint8Array(g)},async decrypt(c,l,u,d){const h=s(),f=await h.importKey("raw",c,l,!0,["decrypt"]),g=await h.decrypt(u,f,d);return new Uint8Array(g)}};const o={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function a(c){return(l,u,d)=>{(0,n.bytes)(l),(0,n.bytes)(u);const h={name:c,length:8*l.length},f=function(g,p,m){if(g===o.CBC)return{name:o.CBC,iv:p};if(g===o.CTR)return{name:o.CTR,counter:p,length:64};if(g===o.GCM)return m?{name:o.GCM,iv:p,additionalData:m}:{name:o.GCM,iv:p};throw new Error("unknown aes block mode")}(c,u,d);return{encrypt:g=>((0,n.bytes)(g),t.utils.encrypt(l,h,f,g)),decrypt:g=>((0,n.bytes)(g),t.utils.decrypt(l,h,f,g))}}}t.cbc=a(o.CBC),t.ctr=a(o.CTR),t.gcm=a(o.GCM)}(u8);var mT={},Hn={},Ga={},Vi={};function Sb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function yT(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function wT(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function d8(t,...e){if(!wT(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function bT(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Sb(t.outputLen),Sb(t.blockLen)}function vT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ET(t,e){d8(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.isBytes=wT,Vi.number=Sb,Vi.bool=yT,Vi.bytes=d8,Vi.hash=bT,Vi.exists=vT,Vi.output=ET;const jse={number:Sb,bool:yT,bytes:d8,hash:bT,exists:vT,output:ET};Vi.default=jse;var Za={},xb={};Object.defineProperty(xb,"__esModule",{value:!0}),xb.crypto=void 0,xb.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=function(l){return l instanceof Uint8Array||l!=null&&typeof l=="object"&&l.constructor.name==="Uint8Array"},t.byteSwap32=function(l){for(let u=0;u<l.length;u++)l[u]=(0,t.byteSwap)(l[u])},t.bytesToHex=function(l){(0,n.bytes)(l);let u="";for(let d=0;d<l.length;d++)u+=r[l[d]];return u},t.hexToBytes=function(l){if(typeof l!="string")throw new Error("hex string expected, got "+typeof l);const u=l.length,d=u/2;if(u%2)throw new Error("padded hex string expected, got unpadded hex of length "+u);const h=new Uint8Array(d);for(let f=0,g=0;f<d;f++,g+=2){const p=s(l.charCodeAt(g)),m=s(l.charCodeAt(g+1));if(p===void 0||m===void 0){const y=l[g]+l[g+1];throw new Error('hex string expected, got non-hex character "'+y+'" at index '+g)}h[f]=16*p+m}return h},t.asyncLoop=async function(l,u,d){let h=Date.now();for(let f=0;f<l;f++){d(f);const g=Date.now()-h;g>=0&&g<u||(await(0,t.nextTick)(),h+=g)}},t.utf8ToBytes=o,t.toBytes=a,t.concatBytes=function(...l){let u=0;for(let h=0;h<l.length;h++){const f=l[h];(0,n.bytes)(f),u+=f.length}const d=new Uint8Array(u);for(let h=0,f=0;h<l.length;h++){const g=l[h];d.set(g,f),f+=g.length}return d},t.checkOpts=function(l,u){if(u!==void 0&&c.call(u)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(l,u)},t.wrapConstructor=function(l){const u=h=>l().update(a(h)).digest(),d=l();return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=()=>l(),u},t.wrapConstructorWithOpts=function(l){const u=(h,f)=>l(f).update(a(h)).digest(),d=l({});return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=h=>l(h),u},t.wrapXOFConstructorWithOpts=function(l){const u=(h,f)=>l(f).update(a(h)).digest(),d=l({});return u.outputLen=d.outputLen,u.blockLen=d.blockLen,u.create=h=>l(h),u},t.randomBytes=function(l=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(l));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(l);throw new Error("crypto.getRandomValues must be defined")};const e=xb,n=Vi;t.u8=l=>new Uint8Array(l.buffer,l.byteOffset,l.byteLength),t.u32=l=>new Uint32Array(l.buffer,l.byteOffset,Math.floor(l.byteLength/4)),t.createView=l=>new DataView(l.buffer,l.byteOffset,l.byteLength),t.rotr=(l,u)=>l<<32-u|l>>>u,t.rotl=(l,u)=>l<<u|l>>>32-u>>>0,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,t.byteSwap=l=>l<<24&4278190080|l<<8&16711680|l>>>8&65280|l>>>24&255,t.byteSwapIfBE=t.isLE?l=>l:l=>(0,t.byteSwap)(l);const r=Array.from({length:256},(l,u)=>u.toString(16).padStart(2,"0")),i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(l){return l>=i._0&&l<=i._9?l-i._0:l>=i._A&&l<=i._F?l-(i._A-10):l>=i._a&&l<=i._f?l-(i._a-10):void 0}function o(l){if(typeof l!="string")throw new Error("utf8ToBytes expected string, got "+typeof l);return new Uint8Array(new TextEncoder().encode(l))}function a(l){return typeof l=="string"&&(l=o(l)),(0,n.bytes)(l),l}t.nextTick=async()=>{},t.Hash=class{clone(){return this._cloneInto()}};const c={}.toString}(Za),Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.HashMD=Ga.Maj=Ga.Chi=void 0;const h8=Vi,Gg=Za;Ga.Chi=(t,e,n)=>t&e^~t&n,Ga.Maj=(t,e,n)=>t&e^t&n^e&n,Ga.HashMD=class extends Gg.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Gg.createView)(this.buffer)}update(t){(0,h8.exists)(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=(0,Gg.toBytes)(t)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const a=(0,Gg.createView)(t);for(;r<=i-s;s+=r)this.process(a,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,h8.exists)(this),(0,h8.output)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let u=s;u<r;u++)e[u]=0;(function(u,d,h,f){if(typeof u.setBigUint64=="function")return u.setBigUint64(d,h,f);const g=BigInt(32),p=BigInt(4294967295),m=Number(h>>g&p),y=Number(h&p),w=f?4:0,b=f?0:4;u.setUint32(d+w,m,f),u.setUint32(d+b,y,f)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=(0,Gg.createView)(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)o.setUint32(4*u,l[u],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}};var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.add5L=Ve.add5H=Ve.add4H=Ve.add4L=Ve.add3H=Ve.add3L=Ve.rotlBL=Ve.rotlBH=Ve.rotlSL=Ve.rotlSH=Ve.rotr32L=Ve.rotr32H=Ve.rotrBL=Ve.rotrBH=Ve.rotrSL=Ve.rotrSH=Ve.shrSL=Ve.shrSH=Ve.toBig=void 0,Ve.fromBig=p8,Ve.split=CT,Ve.add=BT;const Ab=BigInt(2**32-1),f8=BigInt(32);function p8(t,e=!1){return e?{h:Number(t&Ab),l:Number(t>>f8&Ab)}:{h:0|Number(t>>f8&Ab),l:0|Number(t&Ab)}}function CT(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=p8(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const _T=(t,e)=>BigInt(t>>>0)<<f8|BigInt(e>>>0);Ve.toBig=_T;const ST=(t,e,n)=>t>>>n;Ve.shrSH=ST;const xT=(t,e,n)=>t<<32-n|e>>>n;Ve.shrSL=xT;const AT=(t,e,n)=>t>>>n|e<<32-n;Ve.rotrSH=AT;const IT=(t,e,n)=>t<<32-n|e>>>n;Ve.rotrSL=IT;const $T=(t,e,n)=>t<<64-n|e>>>n-32;Ve.rotrBH=$T;const PT=(t,e,n)=>t>>>n-32|e<<64-n;Ve.rotrBL=PT;const OT=(t,e)=>e;Ve.rotr32H=OT;const TT=(t,e)=>t;Ve.rotr32L=TT;const NT=(t,e,n)=>t<<n|e>>>32-n;Ve.rotlSH=NT;const kT=(t,e,n)=>e<<n|t>>>32-n;Ve.rotlSL=kT;const RT=(t,e,n)=>e<<n-32|t>>>64-n;Ve.rotlBH=RT;const MT=(t,e,n)=>t<<n-32|e>>>64-n;function BT(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}Ve.rotlBL=MT;const DT=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);Ve.add3L=DT;const LT=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;Ve.add3H=LT;const jT=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);Ve.add4L=jT;const UT=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;Ve.add4H=UT;const FT=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);Ve.add5L=FT;const zT=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;Ve.add5H=zT;const Use={fromBig:p8,split:CT,toBig:_T,shrSH:ST,shrSL:xT,rotrSH:AT,rotrSL:IT,rotrBH:$T,rotrBL:PT,rotr32H:OT,rotr32L:TT,rotlSH:NT,rotlSL:kT,rotlBH:RT,rotlBL:MT,add:BT,add3L:DT,add3H:LT,add4L:jT,add4H:UT,add5H:zT,add5L:FT};Ve.default=Use,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.sha384=Hn.sha512_256=Hn.sha512_224=Hn.sha512=Hn.SHA384=Hn.SHA512_256=Hn.SHA512_224=Hn.SHA512=void 0;const Fse=Ga,Je=Ve,Ib=Za,[zse,qse]=(()=>Je.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),al=new Uint32Array(80),cl=new Uint32Array(80);let Zg=class extends Fse.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:g,Hh:p,Hl:m}=this;return[e,n,r,i,s,o,a,c,l,u,d,h,f,g,p,m]}set(e,n,r,i,s,o,a,c,l,u,d,h,f,g,p,m){this.Ah=0|e,this.Al=0|n,this.Bh=0|r,this.Bl=0|i,this.Ch=0|s,this.Cl=0|o,this.Dh=0|a,this.Dl=0|c,this.Eh=0|l,this.El=0|u,this.Fh=0|d,this.Fl=0|h,this.Gh=0|f,this.Gl=0|g,this.Hh=0|p,this.Hl=0|m}process(e,n){for(let b=0;b<16;b++,n+=4)al[b]=e.getUint32(n),cl[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const v=0|al[b-15],C=0|cl[b-15],A=Je.default.rotrSH(v,C,1)^Je.default.rotrSH(v,C,8)^Je.default.shrSH(v,C,7),$=Je.default.rotrSL(v,C,1)^Je.default.rotrSL(v,C,8)^Je.default.shrSL(v,C,7),R=0|al[b-2],P=0|cl[b-2],L=Je.default.rotrSH(R,P,19)^Je.default.rotrBH(R,P,61)^Je.default.shrSH(R,P,6),U=Je.default.rotrSL(R,P,19)^Je.default.rotrBL(R,P,61)^Je.default.shrSL(R,P,6),D=Je.default.add4L($,U,cl[b-7],cl[b-16]),j=Je.default.add4H(D,A,L,al[b-7],al[b-16]);al[b]=0|j,cl[b]=0|D}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:g,Gh:p,Gl:m,Hh:y,Hl:w}=this;for(let b=0;b<80;b++){const v=Je.default.rotrSH(d,h,14)^Je.default.rotrSH(d,h,18)^Je.default.rotrBH(d,h,41),C=Je.default.rotrSL(d,h,14)^Je.default.rotrSL(d,h,18)^Je.default.rotrBL(d,h,41),A=d&f^~d&p,$=h&g^~h&m,R=Je.default.add5L(w,C,$,qse[b],cl[b]),P=Je.default.add5H(R,y,v,A,zse[b],al[b]),L=0|R,U=Je.default.rotrSH(r,i,28)^Je.default.rotrBH(r,i,34)^Je.default.rotrBH(r,i,39),D=Je.default.rotrSL(r,i,28)^Je.default.rotrBL(r,i,34)^Je.default.rotrBL(r,i,39),j=r&s^r&a^s&a,I=i&o^i&c^o&c;y=0|p,w=0|m,p=0|f,m=0|g,f=0|d,g=0|h,{h:d,l:h}=Je.default.add(0|l,0|u,0|P,0|L),l=0|a,u=0|c,a=0|s,c=0|o,s=0|r,o=0|i;const E=Je.default.add3L(L,D,I);r=Je.default.add3H(E,P,U,j),i=0|E}({h:r,l:i}=Je.default.add(0|this.Ah,0|this.Al,0|r,0|i)),{h:s,l:o}=Je.default.add(0|this.Bh,0|this.Bl,0|s,0|o),{h:a,l:c}=Je.default.add(0|this.Ch,0|this.Cl,0|a,0|c),{h:l,l:u}=Je.default.add(0|this.Dh,0|this.Dl,0|l,0|u),{h:d,l:h}=Je.default.add(0|this.Eh,0|this.El,0|d,0|h),{h:f,l:g}=Je.default.add(0|this.Fh,0|this.Fl,0|f,0|g),{h:p,l:m}=Je.default.add(0|this.Gh,0|this.Gl,0|p,0|m),{h:y,l:w}=Je.default.add(0|this.Hh,0|this.Hl,0|y,0|w),this.set(r,i,s,o,a,c,l,u,d,h,f,g,p,m,y,w)}roundClean(){al.fill(0),cl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Hn.SHA512=Zg;let qT=class extends Zg{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}};Hn.SHA512_224=qT;let HT=class extends Zg{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}};Hn.SHA512_256=HT;let WT=class extends Zg{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};Hn.SHA384=WT,Hn.sha512=(0,Ib.wrapConstructor)(()=>new Zg),Hn.sha512_224=(0,Ib.wrapConstructor)(()=>new qT),Hn.sha512_256=(0,Ib.wrapConstructor)(()=>new HT),Hn.sha384=(0,Ib.wrapConstructor)(()=>new WT);var g8={},mf={},xt={},et={};Object.defineProperty(et,"__esModule",{value:!0}),et.notImplemented=et.bitMask=void 0,et.isBytes=Pb,et.abytes=Ob,et.abool=function(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)},et.bytesToHex=y8,et.numberToHexUnpadded=KT,et.hexToNumber=w8,et.hexToBytes=Tb,et.bytesToNumberBE=function(t){return w8(y8(t))},et.bytesToNumberLE=function(t){return Ob(t),w8(y8(Uint8Array.from(t).reverse()))},et.numberToBytesBE=GT,et.numberToBytesLE=function(t,e){return GT(t,e).reverse()},et.numberToVarBytesBE=function(t){return Tb(KT(t))},et.ensureBytes=function(t,e,n){let r;if(typeof e=="string")try{r=Tb(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else{if(!Pb(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r},et.concatBytes=ZT,et.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0},et.utf8ToBytes=function(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))},et.inRange=YT,et.aInRange=function(t,e,n,r){if(!YT(e,n,r))throw new Error(`expected valid ${t}: ${n} <= n < ${r}, got ${typeof e} ${e}`)},et.bitLen=function(t){let e;for(e=0;t>m8;t>>=$b,e+=1);return e},et.bitGet=function(t,e){return t>>BigInt(e)&$b},et.bitSet=function(t,e,n){return t|(n?$b:m8)<<BigInt(e)},et.createHmacDrbg=function(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=v8(t),i=v8(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),c=(u=v8())=>{i=a(JT([0]),u),r=a(),u.length!==0&&(i=a(JT([1]),u),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return ZT(...d)};return(u,d)=>{let h;for(o(),c(u);!(h=d(l()));)c();return o(),h}},et.validateObject=function(t,e,n={}){const r=(i,s,o)=>{const a=Kse[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=t[i];if(!(o&&c===void 0||a(c,t)))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t},et.memoized=function(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}};const m8=BigInt(0),$b=BigInt(1),Hse=BigInt(2);function Pb(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Ob(t){if(!Pb(t))throw new Error("Uint8Array expected")}const Wse=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function y8(t){Ob(t);let e="";for(let n=0;n<t.length;n++)e+=Wse[t[n]];return e}function KT(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function w8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const Ya={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function VT(t){return t>=Ya._0&&t<=Ya._9?t-Ya._0:t>=Ya._A&&t<=Ya._F?t-(Ya._A-10):t>=Ya._a&&t<=Ya._f?t-(Ya._a-10):void 0}function Tb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=VT(t.charCodeAt(s)),a=VT(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=16*o+a}return r}function GT(t,e){return Tb(t.toString(16).padStart(2*e,"0"))}function ZT(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Ob(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const b8=t=>typeof t=="bigint"&&m8<=t;function YT(t,e,n){return b8(t)&&b8(e)&&b8(n)&&e<=t&&t<n}et.bitMask=t=>(Hse<<BigInt(t-1))-$b;const v8=t=>new Uint8Array(t),JT=t=>Uint8Array.from(t),Kse={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Pb(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};et.notImplemented=()=>{throw new Error("not implemented")},Object.defineProperty(xt,"__esModule",{value:!0}),xt.isNegativeLE=void 0,xt.mod=Zi,xt.pow=eN,xt.pow2=function(t,e,n){let r=t;for(;e-- >Wn;)r*=r,r%=n;return r},xt.invert=Nb,xt.tonelliShanks=tN,xt.FpSqrt=nN,xt.validateField=function(t){const e=Gse.reduce((n,r)=>(n[r]="function",n),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,Gi.validateObject)(t,e)},xt.FpPow=rN,xt.FpInvertBatch=iN,xt.FpDiv=function(t,e,n){return t.mul(e,typeof n=="bigint"?Nb(n,t.ORDER):t.inv(n))},xt.FpLegendre=sN,xt.FpIsSquare=function(t){const e=sN(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}},xt.nLength=C8,xt.Field=function(t,e,n=!1,r={}){if(t<=Wn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=C8(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=nN(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:(0,Gi.bitMask)(i),ZERO:Wn,ONE:Vt,create:c=>Zi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof c);return Wn<=c&&c<t},is0:c=>c===Wn,isOdd:c=>(c&Vt)===Vt,neg:c=>Zi(-c,t),eql:(c,l)=>c===l,sqr:c=>Zi(c*c,t),add:(c,l)=>Zi(c+l,t),sub:(c,l)=>Zi(c-l,t),mul:(c,l)=>Zi(c*l,t),pow:(c,l)=>rN(a,c,l),div:(c,l)=>Zi(c*Nb(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Nb(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>iN(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?(0,Gi.numberToBytesLE)(c,s):(0,Gi.numberToBytesBE)(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?(0,Gi.bytesToNumberLE)(c):(0,Gi.bytesToNumberBE)(c)}});return Object.freeze(a)},xt.FpSqrtOdd=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)},xt.FpSqrtEven=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n},xt.hashToPrivateScalar=function(t,e,n=!1){t=(0,Gi.ensureBytes)("privateHash",t);const r=t.length,i=C8(e).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);const s=n?(0,Gi.bytesToNumberLE)(t):(0,Gi.bytesToNumberBE)(t);return Zi(s,e-Vt)+Vt},xt.getFieldBytesLength=_8,xt.getMinHashLength=oN,xt.mapHashToField=function(t,e,n=!1){const r=t.length,i=_8(e),s=oN(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=Zi(n?(0,Gi.bytesToNumberBE)(t):(0,Gi.bytesToNumberLE)(t),e-Vt)+Vt;return n?(0,Gi.numberToBytesLE)(o,i):(0,Gi.numberToBytesBE)(o,i)};const Gi=et,Wn=BigInt(0),Vt=BigInt(1),ll=BigInt(2),Vse=BigInt(3),E8=BigInt(4),QT=BigInt(5),XT=BigInt(8);function Zi(t,e){const n=t%e;return n>=Wn?n:e+n}function eN(t,e,n){if(n<=Wn||e<Wn)throw new Error("Expected power/modulo > 0");if(n===Vt)return Wn;let r=Vt;for(;e>Wn;)e&Vt&&(r=r*t%n),t=t*t%n,e>>=Vt;return r}function Nb(t,e){if(t===Wn||e<=Wn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Zi(t,e),r=e,i=Wn,s=Vt;for(;n!==Wn;){const o=r%n,a=i-s*(r/n);r=n,n=o,i=s,s=a}if(r!==Vt)throw new Error("invert: does not exist");return Zi(i,e)}function tN(t){const e=(t-Vt)/ll;let n,r,i;for(n=t-Vt,r=0;n%ll===Wn;n/=ll,r++);for(i=ll;i<t&&eN(i,e,t)!==t-Vt;i++);if(r===1){const o=(t+Vt)/E8;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+Vt)/ll;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let g=o.sqr(d);h<c&&!o.eql(g,o.ONE);h++)g=o.sqr(g);const f=o.pow(l,Vt<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function nN(t){if(t%E8===Vse){const e=(t+Vt)/E8;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%XT===QT){const e=(t-QT)/XT;return function(n,r){const i=n.mul(r,ll),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,ll),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return tN(t)}BigInt(9),BigInt(16),xt.isNegativeLE=(t,e)=>(Zi(t,e)&Vt)===Vt;const Gse=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rN(t,e,n){if(n<Wn)throw new Error("Expected power > 0");if(n===Wn)return t.ONE;if(n===Vt)return e;let r=t.ONE,i=e;for(;n>Wn;)n&Vt&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Vt;return r}function iN(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function sN(t){const e=(t-Vt)/ll;return(n,r)=>n.pow(r,e)}function C8(t,e){const n=e!==void 0?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function _8(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function oN(t){const e=_8(t);return e+Math.ceil(e/2)}Object.defineProperty(mf,"__esModule",{value:!0}),mf.wNAF=function(t,e){const n=(s,o)=>{const a=o.negate();return s?a:o},r=s=>{if(!Number.isSafeInteger(s)||s<=0||s>e)throw new Error(`Wrong window size=${s}, should be [1..${e}]`)},i=s=>(r(s),{windows:Math.ceil(e/s)+1,windowSize:2**(s-1)});return{constTimeNegate:n,unsafeLadder(s,o){let a=t.ZERO,c=s;for(;o>Zse;)o&S8&&(a=a.add(c)),c=c.double(),o>>=S8;return a},precomputeWindow(s,o){const{windows:a,windowSize:c}=i(o),l=[];let u=s,d=u;for(let h=0;h<a;h++){d=u,l.push(d);for(let f=1;f<c;f++)d=d.add(u),l.push(d);u=d.double()}return l},wNAF(s,o,a){const{windows:c,windowSize:l}=i(s);let u=t.ZERO,d=t.BASE;const h=BigInt(2**s-1),f=2**s,g=BigInt(s);for(let p=0;p<c;p++){const m=p*l;let y=Number(a&h);a>>=g,y>l&&(y-=f,a+=S8);const w=m,b=m+Math.abs(y)-1,v=p%2!=0,C=y<0;y===0?d=d.add(n(v,o[w])):u=u.add(n(C,o[b]))}return{p:u,f:d}},wNAFCached(s,o,a){const c=lN.get(s)||1;let l=x8.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&x8.set(s,a(l))),this.wNAF(c,l,o)},setWindowSize(s,o){r(o),lN.set(s,o),x8.delete(s)}}},mf.pippenger=function(t,e,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach((u,d)=>{if(!e.isValid(u))throw new Error(`wrong scalar at index ${d}`)}),n.forEach((u,d)=>{if(!(u instanceof t))throw new Error(`wrong point at index ${d}`)});const i=(0,cN.bitLen)(BigInt(n.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,a=new Array(o+1).fill(t.ZERO),c=Math.floor((e.BITS-1)/s)*s;let l=t.ZERO;for(let u=c;u>=0;u-=s){a.fill(t.ZERO);for(let h=0;h<r.length;h++){const f=r[h],g=Number(f>>BigInt(u)&BigInt(o));a[g]=a[g].add(n[h])}let d=t.ZERO;for(let h=a.length-1,f=t.ZERO;h>0;h--)f=f.add(a[h]),d=d.add(f);if(l=l.add(d),u!==0)for(let h=0;h<s;h++)l=l.double()}return l},mf.validateBasic=function(t){return(0,aN.validateField)(t.Fp),(0,cN.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,aN.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};const aN=xt,cN=et,Zse=BigInt(0),S8=BigInt(1),x8=new WeakMap,lN=new WeakMap;Object.defineProperty(g8,"__esModule",{value:!0}),g8.twistedEdwards=function(t){const e=function(j){const I=(0,A8.validateBasic)(j);return pi.validateObject(j,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...I})}(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=kb<<BigInt(8*a)-gi,u=n.create,d=(0,uN.Field)(e.n,e.nBitLength),h=e.uvRatio||((j,I)=>{try{return{isValid:!0,value:n.sqrt(j*n.inv(I))}}catch{return{isValid:!1,value:ao}}}),f=e.adjustScalarBytes||(j=>j),g=e.domain||((j,I,E)=>{if((0,Yi.abool)("phflag",E),I.length||E)throw new Error("Contexts/pre-hash are not supported");return j});function p(j,I){pi.aInRange("coordinate "+j,I,ao,l)}function m(j){if(!(j instanceof b))throw new Error("ExtendedPoint expected")}const y=(0,Yi.memoized)((j,I)=>{const{ex:E,ey:S,ez:k}=j,_=j.is0();I==null&&(I=_?Yse:n.inv(k));const x=u(E*I),T=u(S*I),M=u(k*I);if(_)return{x:ao,y:gi};if(M!==gi)throw new Error("invZ was invalid");return{x,y:T}}),w=(0,Yi.memoized)(j=>{const{a:I,d:E}=e;if(j.is0())throw new Error("bad point: ZERO");const{ex:S,ey:k,ez:_,et:x}=j,T=u(S*S),M=u(k*k),O=u(_*_),N=u(O*O),B=u(T*I);if(u(O*u(B+M))!==u(N+u(E*u(T*M))))throw new Error("bad point: equation left != right (1)");if(u(S*k)!==u(_*x))throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(I,E,S,k){this.ex=I,this.ey=E,this.ez=S,this.et=k,p("x",I),p("y",E),p("z",S),p("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof b)throw new Error("extended point not allowed");const{x:E,y:S}=I||{};return p("x",E),p("y",S),new b(E,S,gi,u(E*S))}static normalizeZ(I){const E=n.invertBatch(I.map(S=>S.ez));return I.map((S,k)=>S.toAffine(E[k])).map(b.fromAffine)}static msm(I,E){return(0,A8.pippenger)(b,d,I,E)}_setWindowSize(I){A.setWindowSize(this,I)}assertValidity(){w(this)}equals(I){m(I);const{ex:E,ey:S,ez:k}=this,{ex:_,ey:x,ez:T}=I,M=u(E*T),O=u(_*k),N=u(S*T),B=u(x*k);return M===O&&N===B}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:I}=e,{ex:E,ey:S,ez:k}=this,_=u(E*E),x=u(S*S),T=u(kb*u(k*k)),M=u(I*_),O=E+S,N=u(u(O*O)-_-x),B=M+x,F=B-T,z=M-x,q=u(N*F),H=u(B*z),K=u(N*z),Y=u(F*B);return new b(q,H,Y,K)}add(I){m(I);const{a:E,d:S}=e,{ex:k,ey:_,ez:x,et:T}=this,{ex:M,ey:O,ez:N,et:B}=I;if(E===BigInt(-1)){const _e=u((_-k)*(O+M)),Pe=u((_+k)*(O-M)),De=u(Pe-_e);if(De===ao)return this.double();const tt=u(x*kb*B),st=u(T*kb*N),ze=st+tt,Ye=Pe+_e,nt=st-tt,xn=u(ze*De),oi=u(Ye*nt),Jy=u(ze*nt),Qy=u(De*Ye);return new b(xn,oi,Qy,Jy)}const F=u(k*M),z=u(_*O),q=u(T*S*B),H=u(x*N),K=u((k+_)*(M+O)-F-z),Y=H-q,J=H+q,G=u(z-E*F),te=u(K*Y),se=u(J*G),he=u(K*G),fe=u(Y*J);return new b(te,se,fe,he)}subtract(I){return this.add(I.negate())}wNAF(I){return A.wNAFCached(this,I,b.normalizeZ)}multiply(I){const E=I;pi.aInRange("scalar",E,gi,r);const{p:S,f:k}=this.wNAF(E);return b.normalizeZ([S,k])[0]}multiplyUnsafe(I){const E=I;return pi.aInRange("scalar",E,ao,r),E===ao?C:this.equals(C)||E===gi?this:this.equals(v)?this.wNAF(E).p:A.unsafeLadder(this,E)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return A.unsafeLadder(this,r).is0()}toAffine(I){return y(this,I)}clearCofactor(){const{h:I}=e;return I===gi?this:this.multiplyUnsafe(I)}static fromHex(I,E=!1){const{d:S,a:k}=e,_=n.BYTES;I=(0,Yi.ensureBytes)("pointHex",I,_),(0,Yi.abool)("zip215",E);const x=I.slice(),T=I[_-1];x[_-1]=-129&T;const M=pi.bytesToNumberLE(x),O=E?l:n.ORDER;pi.aInRange("pointHex.y",M,ao,O);const N=u(M*M),B=u(N-gi),F=u(S*N-k);let{isValid:z,value:q}=h(B,F);if(!z)throw new Error("Point.fromHex: invalid y coordinate");const H=(q&gi)===gi,K=(128&T)!=0;if(!E&&q===ao&&K)throw new Error("Point.fromHex: x=0 and x_0=1");return K!==H&&(q=u(-q)),b.fromAffine({x:q,y:M})}static fromPrivateKey(I){return P(I).point}toRawBytes(){const{x:I,y:E}=this.toAffine(),S=pi.numberToBytesLE(E,n.BYTES);return S[S.length-1]|=I&gi?128:0,S}toHex(){return pi.bytesToHex(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,gi,u(e.Gx*e.Gy)),b.ZERO=new b(ao,gi,gi,ao);const{BASE:v,ZERO:C}=b,A=(0,A8.wNAF)(b,8*a);function $(j){return(0,uN.mod)(j,r)}function R(j){return $(pi.bytesToNumberLE(j))}function P(j){const I=a;j=(0,Yi.ensureBytes)("private key",j,I);const E=(0,Yi.ensureBytes)("hashed private key",s(j),2*I),S=f(E.slice(0,I)),k=E.slice(I,2*I),_=R(S),x=v.multiply(_),T=x.toRawBytes();return{head:S,prefix:k,scalar:_,point:x,pointBytes:T}}function L(j=new Uint8Array,...I){const E=pi.concatBytes(...I);return R(s(g(E,(0,Yi.ensureBytes)("context",j),!!i)))}const U=Jse;return v._setWindowSize(8),{CURVE:e,getPublicKey:function(j){return P(j).pointBytes},sign:function(j,I,E={}){j=(0,Yi.ensureBytes)("message",j),i&&(j=i(j));const{prefix:S,scalar:k,pointBytes:_}=P(I),x=L(E.context,S,j),T=v.multiply(x).toRawBytes(),M=$(x+L(E.context,T,_,j)*k);pi.aInRange("signature.s",M,ao,r);const O=pi.concatBytes(T,pi.numberToBytesLE(M,n.BYTES));return(0,Yi.ensureBytes)("result",O,2*a)},verify:function(j,I,E,S=U){const{context:k,zip215:_}=S,x=n.BYTES;j=(0,Yi.ensureBytes)("signature",j,2*x),I=(0,Yi.ensureBytes)("message",I),_!==void 0&&(0,Yi.abool)("zip215",_),i&&(I=i(I));const T=pi.bytesToNumberLE(j.slice(x,2*x));let M,O,N;try{M=b.fromHex(E,_),O=b.fromHex(j.slice(0,x),_),N=v.multiplyUnsafe(T)}catch{return!1}if(!_&&M.isSmallOrder())return!1;const B=L(k,O.toRawBytes(),M.toRawBytes(),I);return O.add(M.multiplyUnsafe(B)).subtract(N).clearCofactor().equals(b.ZERO)},ExtendedPoint:b,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>o(n.BYTES),precompute:(j=8,I=b.BASE)=>(I._setWindowSize(j),I.multiply(BigInt(3)),I)}}};const A8=mf,uN=xt,pi=et,Yi=et,ao=BigInt(0),gi=BigInt(1),kb=BigInt(2),Yse=BigInt(8),Jse={zip215:!0};var ul={};Object.defineProperty(ul,"__esModule",{value:!0}),ul.expand_message_xmd=dN,ul.expand_message_xof=hN,ul.hash_to_field=I8,ul.isogenyMap=function(t,e){const n=e.map(r=>Array.from(r).reverse());return(r,i)=>{const[s,o,a,c]=n.map(l=>l.reduce((u,d)=>t.add(t.mul(u,r),d)));return r=t.div(s,o),i=t.mul(i,t.div(a,c)),{x:r,y:i}}},ul.createHasher=function(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const s=I8(r,2,{...n,DST:n.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){const s=I8(r,1,{...n,DST:n.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const s of r)if(typeof s!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${s} in array`);const i=t.fromAffine(e(r)).clearCofactor();return i.assertValidity(),i}}};const Qse=xt,Mr=et,Xse=Mr.bytesToNumberBE;function dl(t,e){if(Yg(t),Yg(e),t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=255&t,t>>>=8;return new Uint8Array(n)}function eoe(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function Yg(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function dN(t,e,n,r){(0,Mr.abytes)(t),(0,Mr.abytes)(e),Yg(n),e.length>255&&(e=r((0,Mr.concatBytes)((0,Mr.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=r,o=Math.ceil(n/i);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=(0,Mr.concatBytes)(e,dl(e.length,1)),c=dl(0,s),l=dl(n,2),u=new Array(o),d=r((0,Mr.concatBytes)(c,t,l,dl(0,1),a));u[0]=r((0,Mr.concatBytes)(d,dl(1,1),a));for(let h=1;h<=o;h++){const f=[eoe(d,u[h-1]),dl(h+1,1),a];u[h]=r((0,Mr.concatBytes)(...f))}return(0,Mr.concatBytes)(...u).slice(0,n)}function hN(t,e,n,r,i){if((0,Mr.abytes)(t),(0,Mr.abytes)(e),Yg(n),e.length>255){const s=Math.ceil(2*r/8);e=i.create({dkLen:s}).update((0,Mr.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(t).update(dl(n,2)).update(e).update(dl(e.length,1)).digest()}function I8(t,e,n){(0,Mr.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:s,hash:o,expand:a,DST:c}=n;(0,Mr.abytes)(t),Yg(e);const l=typeof c=="string"?(0,Mr.utf8ToBytes)(c):c,u=r.toString(2).length,d=Math.ceil((u+i)/8),h=e*s*d;let f;if(a==="xmd")f=dN(t,l,h,o);else if(a==="xof")f=hN(t,l,h,i,o);else{if(a!=="_internal_pass")throw new Error('expand must be "xmd" or "xof"');f=t}const g=new Array(e);for(let p=0;p<e;p++){const m=new Array(s);for(let y=0;y<s;y++){const w=d*(y+p*s),b=f.subarray(w,w+d);m[y]=(0,Qse.mod)(Xse(b),r)}g[p]=m}return g}var $8={};Object.defineProperty($8,"__esModule",{value:!0}),$8.montgomery=function(t){const e=function(p){return(0,hl.validateObject)(p,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...p})}(t),{P:n}=e,r=p=>(0,fN.mod)(p,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(p=>p),c=e.powPminus2||(p=>(0,fN.pow)(p,n-BigInt(2),n));function l(p,m,y){const w=r(p*(m-y));return[m=r(m-w),y=r(y+w)]}const u=(e.a-BigInt(2))/BigInt(4);function d(p){return(0,hl.numberToBytesLE)(r(p),s)}function h(p,m){const y=function(v){const C=(0,hl.ensureBytes)("u coordinate",v,s);return o===32&&(C[31]&=127),(0,hl.bytesToNumberLE)(C)}(m),w=function(v){const C=(0,hl.ensureBytes)("scalar",v),A=C.length;if(A!==s&&A!==o)throw new Error(`Expected ${s} or ${o} bytes, got ${A}`);return(0,hl.bytesToNumberLE)(a(C))}(p),b=function(v,C){(0,hl.aInRange)("u",v,yf,n),(0,hl.aInRange)("scalar",C,yf,n);const A=C,$=v;let R,P=P8,L=yf,U=v,D=P8,j=yf;for(let E=BigInt(i-1);E>=yf;E--){const S=A>>E&P8;j^=S,R=l(j,P,U),P=R[0],U=R[1],R=l(j,L,D),L=R[0],D=R[1],j=S;const k=P+L,_=r(k*k),x=P-L,T=r(x*x),M=_-T,O=U+D,N=r((U-D)*k),B=r(O*x),F=N+B,z=N-B;U=r(F*F),D=r($*r(z*z)),P=r(_*T),L=r(M*(_+r(u*M)))}R=l(j,P,U),P=R[0],U=R[1],R=l(j,L,D),L=R[0],D=R[1];const I=c(L);return r(P*I)}(y,w);if(b===yf)throw new Error("Invalid private or public key received");return d(b)}const f=d(e.Gu);function g(p){return h(p,f)}return{scalarMult:h,scalarMultBase:g,getSharedSecret:(p,m)=>h(p,m),getPublicKey:p=>g(p),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:f}};const fN=xt,hl=et,yf=BigInt(0),P8=BigInt(1);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=A,t.edwardsToMontgomeryPriv=function(B){const F=v.hash(B.subarray(0,32));return v.adjustScalarBytes(F).subarray(0,32)};const e=Hn,n=Za,r=g8,i=ul,s=xt,o=$8,a=et,c=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),u=BigInt(0),d=BigInt(1),h=BigInt(2),f=BigInt(3),g=BigInt(5),p=BigInt(8);function m(B){const F=BigInt(10),z=BigInt(20),q=BigInt(40),H=BigInt(80),K=c,Y=B*B%K*B%K,J=(0,s.pow2)(Y,h,K)*Y%K,G=(0,s.pow2)(J,d,K)*B%K,te=(0,s.pow2)(G,g,K)*G%K,se=(0,s.pow2)(te,F,K)*te%K,he=(0,s.pow2)(se,z,K)*se%K,fe=(0,s.pow2)(he,q,K)*he%K,_e=(0,s.pow2)(fe,H,K)*fe%K,Pe=(0,s.pow2)(_e,H,K)*fe%K,De=(0,s.pow2)(Pe,F,K)*te%K;return{pow_p_5_8:(0,s.pow2)(De,h,K)*B%K,b2:Y}}function y(B){return B[0]&=248,B[31]&=127,B[31]|=64,B}function w(B,F){const z=c,q=(0,s.mod)(F*F*F,z),H=m(B*(0,s.mod)(q*q*F,z)).pow_p_5_8;let K=(0,s.mod)(B*q*H,z);const Y=(0,s.mod)(F*K*K,z),J=K,G=(0,s.mod)(K*l,z),te=Y===B,se=Y===(0,s.mod)(-B,z),he=Y===(0,s.mod)(-B*l,z);return te&&(K=J),(se||he)&&(K=G),(0,s.isNegativeLE)(K,z)&&(K=(0,s.mod)(-K,z)),{isValid:te||se,value:K}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const b=(()=>(0,s.Field)(c,void 0,!0))(),v=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:b,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:p,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:n.randomBytes,adjustScalarBytes:y,uvRatio:w}))();function C(B,F,z){if(F.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([z?1:0,F.length]),F,B)}function A(B){const{y:F}=t.ed25519.ExtendedPoint.fromHex(B),z=BigInt(1);return b.toBytes(b.create((z+F)*b.inv(z-F)))}t.ed25519=(0,r.twistedEdwards)(v),t.ed25519ctx=(0,r.twistedEdwards)({...v,domain:C}),t.ed25519ph=(0,r.twistedEdwards)(Object.assign({},v,{domain:C,prehash:e.sha512})),t.x25519=(0,o.montgomery)({P:c,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:B=>{const F=c,{pow_p_5_8:z,b2:q}=m(B);return(0,s.mod)((0,s.pow2)(z,f,F)*q,F)},adjustScalarBytes:y,randomBytes:n.randomBytes}),t.edwardsToMontgomery=A;const $=(()=>(b.ORDER+f)/p)(),R=(()=>b.pow(h,$))(),P=(()=>b.sqrt(b.neg(b.ONE)))(),L=(()=>(0,s.FpSqrtEven)(b,b.neg(BigInt(486664))))();function U(B){const{xMn:F,xMd:z,yMn:q,yMd:H}=function(fe){const _e=(b.ORDER-g)/p,Pe=BigInt(486662);let De=b.sqr(fe);De=b.mul(De,h);let tt=b.add(De,b.ONE),st=b.neg(Pe),ze=b.sqr(tt),Ye=b.mul(ze,tt),nt=b.mul(De,Pe);nt=b.mul(nt,st),nt=b.add(nt,ze),nt=b.mul(nt,st);let xn=b.sqr(Ye);ze=b.sqr(xn),xn=b.mul(xn,Ye),xn=b.mul(xn,nt),ze=b.mul(ze,xn);let oi=b.pow(ze,_e);oi=b.mul(oi,xn);let Jy=b.mul(oi,P);ze=b.sqr(oi),ze=b.mul(ze,Ye);let Qy=b.eql(ze,nt),c3=b.cmov(Jy,oi,Qy),tA=b.mul(st,De),Xy=b.mul(oi,fe);Xy=b.mul(Xy,R);let xMe=b.mul(Xy,P),AMe=b.mul(nt,De);ze=b.sqr(Xy),ze=b.mul(ze,Ye);let IMe=b.eql(ze,AMe),$Me=b.cmov(xMe,Xy,IMe);ze=b.sqr(c3),ze=b.mul(ze,Ye);let nA=b.eql(ze,nt),PMe=b.cmov(tA,st,nA),ew=b.cmov($Me,c3,nA),OMe=b.isOdd(ew);return ew=b.cmov(ew,b.neg(ew),nA!==OMe),{xMn:PMe,xMd:tt,yMn:ew,yMd:d}}(B);let K=b.mul(F,H);K=b.mul(K,L);let Y=b.mul(z,q),J=b.sub(F,z),G=b.add(F,z),te=b.mul(Y,G),se=b.eql(te,b.ZERO);K=b.cmov(K,b.ZERO,se),Y=b.cmov(Y,b.ONE,se),J=b.cmov(J,b.ONE,se),G=b.cmov(G,b.ONE,se);const he=b.invertBatch([Y,G]);return{x:b.mul(K,he[0]),y:b.mul(J,he[1])}}const D=(()=>(0,i.createHasher)(t.ed25519.ExtendedPoint,B=>U(B[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:b.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512}))();function j(B){if(!(B instanceof N))throw new Error("RistrettoPoint expected")}t.hashToCurve=D.hashToCurve,t.encodeToCurve=D.encodeToCurve;const I=l,E=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),S=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),k=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),_=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),x=B=>w(d,B),T=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),M=B=>t.ed25519.CURVE.Fp.create((0,a.bytesToNumberLE)(B)&T);function O(B){const{d:F}=t.ed25519.CURVE,z=t.ed25519.CURVE.Fp.ORDER,q=t.ed25519.CURVE.Fp.create,H=q(I*B*B),K=q((H+d)*k);let Y=BigInt(-1);const J=q((Y-F*H)*q(H+F));let{isValid:G,value:te}=w(K,J),se=q(te*B);(0,s.isNegativeLE)(se,z)||(se=q(-se)),G||(te=se),G||(Y=H);const he=q(Y*(H-d)*_-J),fe=te*te,_e=q((te+te)*J),Pe=q(he*E),De=q(d-fe),tt=q(d+fe);return new t.ed25519.ExtendedPoint(q(_e*tt),q(De*Pe),q(Pe*tt),q(_e*De))}class N{constructor(F){this.ep=F}static fromAffine(F){return new N(t.ed25519.ExtendedPoint.fromAffine(F))}static hashToCurve(F){F=(0,a.ensureBytes)("ristrettoHash",F,64);const z=O(M(F.slice(0,32))),q=O(M(F.slice(32,64)));return new N(z.add(q))}static fromHex(F){F=(0,a.ensureBytes)("ristrettoHex",F,32);const{a:z,d:q}=t.ed25519.CURVE,H=t.ed25519.CURVE.Fp.ORDER,K=t.ed25519.CURVE.Fp.create,Y="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",J=M(F);if(!(0,a.equalBytes)((0,a.numberToBytesLE)(J,32),F)||(0,s.isNegativeLE)(J,H))throw new Error(Y);const G=K(J*J),te=K(d+z*G),se=K(d-z*G),he=K(te*te),fe=K(se*se),_e=K(z*q*he-fe),{isValid:Pe,value:De}=x(K(_e*fe)),tt=K(De*se),st=K(De*tt*_e);let ze=K((J+J)*tt);(0,s.isNegativeLE)(ze,H)&&(ze=K(-ze));const Ye=K(te*st),nt=K(ze*Ye);if(!Pe||(0,s.isNegativeLE)(nt,H)||Ye===u)throw new Error(Y);return new N(new t.ed25519.ExtendedPoint(ze,Ye,d,nt))}toRawBytes(){let{ex:F,ey:z,ez:q,et:H}=this.ep;const K=t.ed25519.CURVE.Fp.ORDER,Y=t.ed25519.CURVE.Fp.create,J=Y(Y(q+z)*Y(q-z)),G=Y(F*z),te=Y(G*G),{value:se}=x(Y(J*te)),he=Y(se*J),fe=Y(se*G),_e=Y(he*fe*H);let Pe;if((0,s.isNegativeLE)(H*_e,K)){let tt=Y(z*I),st=Y(F*I);F=tt,z=st,Pe=Y(he*S)}else Pe=fe;(0,s.isNegativeLE)(F*_e,K)&&(z=Y(-z));let De=Y((q-z)*Pe);return(0,s.isNegativeLE)(De,K)&&(De=Y(-De)),(0,a.numberToBytesLE)(De,32)}toHex(){return(0,a.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(F){j(F);const{ex:z,ey:q}=this.ep,{ex:H,ey:K}=F.ep,Y=t.ed25519.CURVE.Fp.create,J=Y(z*K)===Y(q*H),G=Y(q*K)===Y(z*H);return J||G}add(F){return j(F),new N(this.ep.add(F.ep))}subtract(F){return j(F),new N(this.ep.subtract(F.ep))}multiply(F){return new N(this.ep.multiply(F))}multiplyUnsafe(F){return new N(this.ep.multiplyUnsafe(F))}double(){return new N(this.ep.double())}negate(){return new N(this.ep.negate())}}t.RistrettoPoint=(N.BASE||(N.BASE=new N(t.ed25519.ExtendedPoint.BASE)),N.ZERO||(N.ZERO=new N(t.ed25519.ExtendedPoint.ZERO)),N),t.hashToRistretto255=(B,F)=>{const z=F.DST,q=typeof z=="string"?(0,n.utf8ToBytes)(z):z,H=(0,i.expand_message_xmd)(B,q,64,e.sha512);return N.hashToCurve(H)},t.hash_to_ristretto255=t.hashToRistretto255})(mT);var pN={},Ja={};Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.sha224=Ja.sha256=Ja.SHA256=void 0;const O8=Ga,Ts=Za,toe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pl=new Uint32Array(64);let T8=class extends O8.HashMD{constructor(){super(64,32,8,!1),this.A=0|fl[0],this.B=0|fl[1],this.C=0|fl[2],this.D=0|fl[3],this.E=0|fl[4],this.F=0|fl[5],this.G=0|fl[6],this.H=0|fl[7]}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=0|e,this.B=0|n,this.C=0|r,this.D=0|i,this.E=0|s,this.F=0|o,this.G=0|a,this.H=0|c}process(e,n){for(let d=0;d<16;d++,n+=4)pl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=pl[d-15],f=pl[d-2],g=(0,Ts.rotr)(h,7)^(0,Ts.rotr)(h,18)^h>>>3,p=(0,Ts.rotr)(f,17)^(0,Ts.rotr)(f,19)^f>>>10;pl[d]=p+pl[d-7]+g+pl[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=u+((0,Ts.rotr)(a,6)^(0,Ts.rotr)(a,11)^(0,Ts.rotr)(a,25))+(0,O8.Chi)(a,c,l)+toe[d]+pl[d]|0,f=((0,Ts.rotr)(r,2)^(0,Ts.rotr)(r,13)^(0,Ts.rotr)(r,22))+(0,O8.Maj)(r,i,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=i,i=r,r=h+f|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){pl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};Ja.SHA256=T8;let noe=class extends T8{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};Ja.sha256=(0,Ts.wrapConstructor)(()=>new T8),Ja.sha224=(0,Ts.wrapConstructor)(()=>new noe);var Rb={},N8={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=Vi,n=Za;class r extends n.Hash{constructor(s,o){super(),this.finished=!1,this.destroyed=!1,(0,e.hash)(s);const a=(0,n.toBytes)(o);if(this.iHash=s.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,l=new Uint8Array(c);l.set(a.length>c?s.create().update(a).digest():a);for(let u=0;u<l.length;u++)l[u]^=54;this.iHash.update(l),this.oHash=s.create();for(let u=0;u<l.length;u++)l[u]^=106;this.oHash.update(l),l.fill(0)}update(s){return(0,e.exists)(this),this.iHash.update(s),this}digestInto(s){(0,e.exists)(this),(0,e.bytes)(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const s=new Uint8Array(this.oHash.outputLen);return this.digestInto(s),s}_cloneInto(s){s||(s=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:c,destroyed:l,blockLen:u,outputLen:d}=this;return s.finished=c,s.destroyed=l,s.blockLen=u,s.outputLen=d,s.oHash=o._cloneInto(s.oHash),s.iHash=a._cloneInto(s.iHash),s}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r,t.hmac=(i,s,o)=>new r(i,s).update(o).digest(),t.hmac.create=(i,s)=>new r(i,s)})(N8);var k8={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=void 0,t.weierstrassPoints=f,t.weierstrass=function(p){const m=function(B){const F=(0,e.validateBasic)(B);return r.validateObject(F,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...F})}(p),{Fp:y,n:w}=m,b=y.BYTES+1,v=2*y.BYTES+1;function C(B){return n.mod(B,w)}function A(B){return n.invert(B,w)}const{ProjectivePoint:$,normPrivateKeyToScalar:R,weierstrassEquation:P,isWithinCurveOrder:L}=f({...m,toBytes(B,F,z){const q=F.toAffine(),H=y.toBytes(q.x),K=r.concatBytes;return(0,i.abool)("isCompressed",z),z?K(Uint8Array.from([F.hasEvenY()?2:3]),H):K(Uint8Array.from([4]),H,y.toBytes(q.y))},fromBytes(B){const F=B.length,z=B[0],q=B.subarray(1);if(F!==b||z!==2&&z!==3){if(F===v&&z===4)return{x:y.fromBytes(q.subarray(0,y.BYTES)),y:y.fromBytes(q.subarray(y.BYTES,2*y.BYTES))};throw new Error(`Point of length ${F} was invalid. Expected ${b} compressed bytes or ${v} uncompressed bytes`)}{const H=r.bytesToNumberBE(q);if(!r.inRange(H,l,y.ORDER))throw new Error("Point is not on curve");const K=P(H);let Y;try{Y=y.sqrt(K)}catch(J){const G=J instanceof Error?": "+J.message:"";throw new Error("Point is not on curve"+G)}return(1&z)==1!=((Y&l)===l)&&(Y=y.neg(Y)),{x:H,y:Y}}}}),U=B=>r.bytesToHex(r.numberToBytesBE(B,m.nByteLength));function D(B){return B>w>>l}const j=(B,F,z)=>r.bytesToNumberBE(B.slice(F,z));class I{constructor(F,z,q){this.r=F,this.s=z,this.recovery=q,this.assertValidity()}static fromCompact(F){const z=m.nByteLength;return F=(0,i.ensureBytes)("compactSignature",F,2*z),new I(j(F,0,z),j(F,z,2*z))}static fromDER(F){const{r:z,s:q}=t.DER.toSig((0,i.ensureBytes)("DER",F));return new I(z,q)}assertValidity(){r.aInRange("r",this.r,l,w),r.aInRange("s",this.s,l,w)}addRecoveryBit(F){return new I(this.r,this.s,F)}recoverPublicKey(F){const{r:z,s:q,recovery:H}=this,K=_((0,i.ensureBytes)("msgHash",F));if(H==null||![0,1,2,3].includes(H))throw new Error("recovery id invalid");const Y=H===2||H===3?z+m.n:z;if(Y>=y.ORDER)throw new Error("recovery id 2 or 3 invalid");const J=1&H?"03":"02",G=$.fromHex(J+U(Y)),te=A(Y),se=C(-K*te),he=C(q*te),fe=$.BASE.multiplyAndAddUnsafe(G,se,he);if(!fe)throw new Error("point at infinify");return fe.assertValidity(),fe}hasHighS(){return D(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,C(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return U(this.r)+U(this.s)}}const E={isValidPrivateKey(B){try{return R(B),!0}catch{return!1}},normPrivateKeyToScalar:R,randomPrivateKey:()=>{const B=n.getMinHashLength(m.n);return n.mapHashToField(m.randomBytes(B),m.n)},precompute:(B=8,F=$.BASE)=>(F._setWindowSize(B),F.multiply(BigInt(3)),F)};function S(B){const F=r.isBytes(B),z=typeof B=="string",q=(F||z)&&B.length;return F?q===b||q===v:z?q===2*b||q===2*v:B instanceof $}const k=m.bits2int||function(B){const F=r.bytesToNumberBE(B),z=8*B.length-m.nBitLength;return z>0?F>>BigInt(z):F},_=m.bits2int_modN||function(B){return C(k(B))},x=r.bitMask(m.nBitLength);function T(B){return r.aInRange(`num < 2^${m.nBitLength}`,B,c,x),r.numberToBytesBE(B,m.nByteLength)}function M(B,F,z=O){if(["recovered","canonical"].some(_e=>_e in z))throw new Error("sign() legacy options not supported");const{hash:q,randomBytes:H}=m;let{lowS:K,prehash:Y,extraEntropy:J}=z;K==null&&(K=!0),B=(0,i.ensureBytes)("msgHash",B),s(z),Y&&(B=(0,i.ensureBytes)("prehashed msgHash",q(B)));const G=_(B),te=R(F),se=[T(te),T(G)];if(J!=null&&J!==!1){const _e=J===!0?H(y.BYTES):J;se.push((0,i.ensureBytes)("extraEntropy",_e))}const he=r.concatBytes(...se),fe=G;return{seed:he,k2sig:function(_e){const Pe=k(_e);if(!L(Pe))return;const De=A(Pe),tt=$.BASE.multiply(Pe).toAffine(),st=C(tt.x);if(st===c)return;const ze=C(De*C(fe+st*te));if(ze===c)return;let Ye=(tt.x===st?0:2)|Number(tt.y&l),nt=ze;return K&&D(ze)&&(nt=function(xn){return D(xn)?C(-xn):xn}(ze),Ye^=1),new I(st,nt,Ye)}}}const O={lowS:m.lowS,prehash:!1},N={lowS:m.lowS,prehash:!1};return $.BASE._setWindowSize(8),{CURVE:m,getPublicKey:function(B,F=!0){return $.fromPrivateKey(B).toRawBytes(F)},getSharedSecret:function(B,F,z=!0){if(S(B))throw new Error("first arg must be private key");if(!S(F))throw new Error("second arg must be public key");return $.fromHex(F).multiply(R(B)).toRawBytes(z)},sign:function(B,F,z=O){const{seed:q,k2sig:H}=M(B,F,z),K=m;return r.createHmacDrbg(K.hash.outputLen,K.nByteLength,K.hmac)(q,H)},verify:function(B,F,z,q=N){var st;const H=B;if(F=(0,i.ensureBytes)("msgHash",F),z=(0,i.ensureBytes)("publicKey",z),"strict"in q)throw new Error("options.strict was renamed to lowS");s(q);const{lowS:K,prehash:Y}=q;let J,G;try{if(typeof H=="string"||r.isBytes(H))try{J=I.fromDER(H)}catch(ze){if(!(ze instanceof t.DER.Err))throw ze;J=I.fromCompact(H)}else{if(typeof H!="object"||typeof H.r!="bigint"||typeof H.s!="bigint")throw new Error("PARSE");{const{r:ze,s:Ye}=H;J=new I(ze,Ye)}}G=$.fromHex(z)}catch(ze){if(ze.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(K&&J.hasHighS())return!1;Y&&(F=m.hash(F));const{r:te,s:se}=J,he=_(F),fe=A(se),_e=C(he*fe),Pe=C(te*fe),De=(st=$.BASE.multiplyAndAddUnsafe(G,_e,Pe))==null?void 0:st.toAffine();return De?C(De.x)===te:!1},ProjectivePoint:$,Signature:I,utils:E}},t.SWUFpSqrtRatio=g,t.mapToCurveSimpleSWU=function(p,m){if(n.validateField(p),!p.isValid(m.A)||!p.isValid(m.B)||!p.isValid(m.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const y=g(p,m.Z);if(!p.isOdd)throw new Error("Fp.isOdd is not implemented!");return w=>{let b,v,C,A,$,R,P,L;b=p.sqr(w),b=p.mul(b,m.Z),v=p.sqr(b),v=p.add(v,b),C=p.add(v,p.ONE),C=p.mul(C,m.B),A=p.cmov(m.Z,p.neg(v),!p.eql(v,p.ZERO)),A=p.mul(A,m.A),v=p.sqr(C),R=p.sqr(A),$=p.mul(R,m.A),v=p.add(v,$),v=p.mul(v,C),R=p.mul(R,A),$=p.mul(R,m.B),v=p.add(v,$),P=p.mul(b,C);const{isValid:U,value:D}=y(v,R);L=p.mul(b,w),L=p.mul(L,D),P=p.cmov(P,C,U),L=p.cmov(L,D,U);const j=p.isOdd(w)===p.isOdd(L);return L=p.cmov(p.neg(L),L,j),P=p.div(P,A),{x:P,y:L}}};const e=mf,n=xt,r=et,i=et;function s(p){p.lowS!==void 0&&(0,i.abool)("lowS",p.lowS),p.prehash!==void 0&&(0,i.abool)("prehash",p.prehash)}const{bytesToNumberBE:o,hexToBytes:a}=r;t.DER={Err:class extends Error{constructor(p=""){super(p)}},_tlv:{encode:(p,m)=>{const{Err:y}=t.DER;if(p<0||p>256)throw new y("tlv.encode: wrong tag");if(1&m.length)throw new y("tlv.encode: unpadded data");const w=m.length/2,b=r.numberToHexUnpadded(w);if(b.length/2&128)throw new y("tlv.encode: long form length too big");const v=w>127?r.numberToHexUnpadded(b.length/2|128):"";return`${r.numberToHexUnpadded(p)}${v}${b}${m}`},decode(p,m){const{Err:y}=t.DER;let w=0;if(p<0||p>256)throw new y("tlv.encode: wrong tag");if(m.length<2||m[w++]!==p)throw new y("tlv.decode: wrong tlv");const b=m[w++];let v=0;if(128&b){const A=127&b;if(!A)throw new y("tlv.decode(long): indefinite length not supported");if(A>4)throw new y("tlv.decode(long): byte length is too big");const $=m.subarray(w,w+A);if($.length!==A)throw new y("tlv.decode: length bytes not complete");if($[0]===0)throw new y("tlv.decode(long): zero leftmost byte");for(const R of $)v=v<<8|R;if(w+=A,v<128)throw new y("tlv.decode(long): not minimal encoding")}else v=b;const C=m.subarray(w,w+v);if(C.length!==v)throw new y("tlv.decode: wrong value length");return{v:C,l:m.subarray(w+v)}}},_int:{encode(p){const{Err:m}=t.DER;if(p<c)throw new m("integer: negative integers are not allowed");let y=r.numberToHexUnpadded(p);if(8&Number.parseInt(y[0],16)&&(y="00"+y),1&y.length)throw new m("unexpected assertion");return y},decode(p){const{Err:m}=t.DER;if(128&p[0])throw new m("Invalid signature integer: negative");if(p[0]===0&&!(128&p[1]))throw new m("Invalid signature integer: unnecessary leading zero");return o(p)}},toSig(p){const{Err:m,_int:y,_tlv:w}=t.DER,b=typeof p=="string"?a(p):p;r.abytes(b);const{v,l:C}=w.decode(48,b);if(C.length)throw new m("Invalid signature: left bytes after parsing");const{v:A,l:$}=w.decode(2,v),{v:R,l:P}=w.decode(2,$);if(P.length)throw new m("Invalid signature: left bytes after parsing");return{r:y.decode(A),s:y.decode(R)}},hexFromSig(p){const{_tlv:m,_int:y}=t.DER,w=`${m.encode(2,y.encode(p.r))}${m.encode(2,y.encode(p.s))}`;return m.encode(48,w)}};const c=BigInt(0),l=BigInt(1),u=BigInt(2),d=BigInt(3),h=BigInt(4);function f(p){const m=function(j){const I=(0,e.validateBasic)(j);r.validateObject(I,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:E,Fp:S,a:k}=I;if(E){if(!S.eql(k,S.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof E!="object"||typeof E.beta!="bigint"||typeof E.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...I})}(p),{Fp:y}=m,w=n.Field(m.n,m.nBitLength),b=m.toBytes||((j,I,E)=>{const S=I.toAffine();return r.concatBytes(Uint8Array.from([4]),y.toBytes(S.x),y.toBytes(S.y))}),v=m.fromBytes||(j=>{const I=j.subarray(1);return{x:y.fromBytes(I.subarray(0,y.BYTES)),y:y.fromBytes(I.subarray(y.BYTES,2*y.BYTES))}});function C(j){const{a:I,b:E}=m,S=y.sqr(j),k=y.mul(S,j);return y.add(y.add(k,y.mul(j,I)),E)}if(!y.eql(y.sqr(m.Gy),C(m.Gx)))throw new Error("bad generator point: equation left != right");function A(j){const{allowedPrivateKeyLengths:I,nByteLength:E,wrapPrivateKey:S,n:k}=m;if(I&&typeof j!="bigint"){if(r.isBytes(j)&&(j=r.bytesToHex(j)),typeof j!="string"||!I.includes(j.length))throw new Error("Invalid key");j=j.padStart(2*E,"0")}let _;try{_=typeof j=="bigint"?j:r.bytesToNumberBE((0,i.ensureBytes)("private key",j,E))}catch{throw new Error(`private key must be ${E} bytes, hex or bigint, not ${typeof j}`)}return S&&(_=n.mod(_,k)),r.aInRange("private key",_,l,k),_}function $(j){if(!(j instanceof L))throw new Error("ProjectivePoint expected")}const R=(0,i.memoized)((j,I)=>{const{px:E,py:S,pz:k}=j;if(y.eql(k,y.ONE))return{x:E,y:S};const _=j.is0();I==null&&(I=_?y.ONE:y.inv(k));const x=y.mul(E,I),T=y.mul(S,I),M=y.mul(k,I);if(_)return{x:y.ZERO,y:y.ZERO};if(!y.eql(M,y.ONE))throw new Error("invZ was invalid");return{x,y:T}}),P=(0,i.memoized)(j=>{if(j.is0()){if(m.allowInfinityPoint&&!y.is0(j.py))return;throw new Error("bad point: ZERO")}const{x:I,y:E}=j.toAffine();if(!y.isValid(I)||!y.isValid(E))throw new Error("bad point: x or y not FE");const S=y.sqr(E),k=C(I);if(!y.eql(S,k))throw new Error("bad point: equation left != right");if(!j.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class L{constructor(I,E,S){if(this.px=I,this.py=E,this.pz=S,I==null||!y.isValid(I))throw new Error("x required");if(E==null||!y.isValid(E))throw new Error("y required");if(S==null||!y.isValid(S))throw new Error("z required");Object.freeze(this)}static fromAffine(I){const{x:E,y:S}=I||{};if(!I||!y.isValid(E)||!y.isValid(S))throw new Error("invalid affine point");if(I instanceof L)throw new Error("projective point not allowed");const k=_=>y.eql(_,y.ZERO);return k(E)&&k(S)?L.ZERO:new L(E,S,y.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const E=y.invertBatch(I.map(S=>S.pz));return I.map((S,k)=>S.toAffine(E[k])).map(L.fromAffine)}static fromHex(I){const E=L.fromAffine(v((0,i.ensureBytes)("pointHex",I)));return E.assertValidity(),E}static fromPrivateKey(I){return L.BASE.multiply(A(I))}static msm(I,E){return(0,e.pippenger)(L,w,I,E)}_setWindowSize(I){D.setWindowSize(this,I)}assertValidity(){P(this)}hasEvenY(){const{y:I}=this.toAffine();if(y.isOdd)return!y.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){$(I);const{px:E,py:S,pz:k}=this,{px:_,py:x,pz:T}=I,M=y.eql(y.mul(E,T),y.mul(_,k)),O=y.eql(y.mul(S,T),y.mul(x,k));return M&&O}negate(){return new L(this.px,y.neg(this.py),this.pz)}double(){const{a:I,b:E}=m,S=y.mul(E,d),{px:k,py:_,pz:x}=this;let T=y.ZERO,M=y.ZERO,O=y.ZERO,N=y.mul(k,k),B=y.mul(_,_),F=y.mul(x,x),z=y.mul(k,_);return z=y.add(z,z),O=y.mul(k,x),O=y.add(O,O),T=y.mul(I,O),M=y.mul(S,F),M=y.add(T,M),T=y.sub(B,M),M=y.add(B,M),M=y.mul(T,M),T=y.mul(z,T),O=y.mul(S,O),F=y.mul(I,F),z=y.sub(N,F),z=y.mul(I,z),z=y.add(z,O),O=y.add(N,N),N=y.add(O,N),N=y.add(N,F),N=y.mul(N,z),M=y.add(M,N),F=y.mul(_,x),F=y.add(F,F),N=y.mul(F,z),T=y.sub(T,N),O=y.mul(F,B),O=y.add(O,O),O=y.add(O,O),new L(T,M,O)}add(I){$(I);const{px:E,py:S,pz:k}=this,{px:_,py:x,pz:T}=I;let M=y.ZERO,O=y.ZERO,N=y.ZERO;const B=m.a,F=y.mul(m.b,d);let z=y.mul(E,_),q=y.mul(S,x),H=y.mul(k,T),K=y.add(E,S),Y=y.add(_,x);K=y.mul(K,Y),Y=y.add(z,q),K=y.sub(K,Y),Y=y.add(E,k);let J=y.add(_,T);return Y=y.mul(Y,J),J=y.add(z,H),Y=y.sub(Y,J),J=y.add(S,k),M=y.add(x,T),J=y.mul(J,M),M=y.add(q,H),J=y.sub(J,M),N=y.mul(B,Y),M=y.mul(F,H),N=y.add(M,N),M=y.sub(q,N),N=y.add(q,N),O=y.mul(M,N),q=y.add(z,z),q=y.add(q,z),H=y.mul(B,H),Y=y.mul(F,Y),q=y.add(q,H),H=y.sub(z,H),H=y.mul(B,H),Y=y.add(Y,H),z=y.mul(q,Y),O=y.add(O,z),z=y.mul(J,Y),M=y.mul(K,M),M=y.sub(M,z),z=y.mul(K,q),N=y.mul(J,N),N=y.add(N,z),new L(M,O,N)}subtract(I){return this.add(I.negate())}is0(){return this.equals(L.ZERO)}wNAF(I){return D.wNAFCached(this,I,L.normalizeZ)}multiplyUnsafe(I){r.aInRange("scalar",I,c,m.n);const E=L.ZERO;if(I===c)return E;if(I===l)return this;const{endo:S}=m;if(!S)return D.unsafeLadder(this,I);let{k1neg:k,k1:_,k2neg:x,k2:T}=S.splitScalar(I),M=E,O=E,N=this;for(;_>c||T>c;)_&l&&(M=M.add(N)),T&l&&(O=O.add(N)),N=N.double(),_>>=l,T>>=l;return k&&(M=M.negate()),x&&(O=O.negate()),O=new L(y.mul(O.px,S.beta),O.py,O.pz),M.add(O)}multiply(I){const{endo:E,n:S}=m;let k,_;if(r.aInRange("scalar",I,l,S),E){const{k1neg:x,k1:T,k2neg:M,k2:O}=E.splitScalar(I);let{p:N,f:B}=this.wNAF(T),{p:F,f:z}=this.wNAF(O);N=D.constTimeNegate(x,N),F=D.constTimeNegate(M,F),F=new L(y.mul(F.px,E.beta),F.py,F.pz),k=N.add(F),_=B.add(z)}else{const{p:x,f:T}=this.wNAF(I);k=x,_=T}return L.normalizeZ([k,_])[0]}multiplyAndAddUnsafe(I,E,S){const k=L.BASE,_=(T,M)=>M!==c&&M!==l&&T.equals(k)?T.multiply(M):T.multiplyUnsafe(M),x=_(this,E).add(_(I,S));return x.is0()?void 0:x}toAffine(I){return R(this,I)}isTorsionFree(){const{h:I,isTorsionFree:E}=m;if(I===l)return!0;if(E)return E(L,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:E}=m;return I===l?this:E?E(L,this):this.multiplyUnsafe(m.h)}toRawBytes(I=!0){return(0,i.abool)("isCompressed",I),this.assertValidity(),b(L,this,I)}toHex(I=!0){return(0,i.abool)("isCompressed",I),r.bytesToHex(this.toRawBytes(I))}}L.BASE=new L(m.Gx,m.Gy,y.ONE),L.ZERO=new L(y.ZERO,y.ONE,y.ZERO);const U=m.nBitLength,D=(0,e.wNAF)(L,m.endo?Math.ceil(U/2):U);return{CURVE:m,ProjectivePoint:L,normPrivateKeyToScalar:A,weierstrassEquation:C,isWithinCurveOrder:function(j){return r.inRange(j,l,m.n)}}}function g(p,m){const y=p.ORDER;let w=c;for(let j=y-l;j%u===c;j/=u)w+=l;const b=w,v=u<<b-l-l,C=v*u,A=(y-l)/C,$=(A-l)/u,R=C-l,P=v,L=p.pow(m,A),U=p.pow(m,(A+l)/u);let D=(j,I)=>{let E=L,S=p.pow(I,R),k=p.sqr(S);k=p.mul(k,I);let _=p.mul(j,k);_=p.pow(_,$),_=p.mul(_,S),S=p.mul(_,I),k=p.mul(_,j);let x=p.mul(k,S);_=p.pow(x,P);let T=p.eql(_,p.ONE);S=p.mul(k,U),_=p.mul(x,E),k=p.cmov(S,k,T),x=p.cmov(_,x,T);for(let M=b;M>l;M--){let O=M-u;O=u<<O-l;let N=p.pow(x,O);const B=p.eql(N,p.ONE);S=p.mul(k,E),E=p.mul(E,E),N=p.mul(x,E),k=p.cmov(S,k,B),x=p.cmov(N,x,B)}return{isValid:T,value:k}};if(p.ORDER%h===d){const j=(p.ORDER-d)/h,I=p.sqrt(p.neg(m));D=(E,S)=>{let k=p.sqr(S);const _=p.mul(E,S);k=p.mul(k,_);let x=p.pow(k,j);x=p.mul(x,_);const T=p.mul(x,I),M=p.mul(p.sqr(x),S),O=p.eql(M,E);return{isValid:O,value:p.cmov(T,x,O)}}}return D}})(k8),Object.defineProperty(Rb,"__esModule",{value:!0}),Rb.getHash=mN,Rb.createCurve=function(t,e){const n=r=>(0,ioe.weierstrass)({...t,...mN(r)});return Object.freeze({...n(e),create:n})};const roe=N8,gN=Za,ioe=k8;function mN(t){return{hash:t,hmac:(e,...n)=>(0,roe.hmac)(t,e,(0,gN.concatBytes)(...n)),randomBytes:gN.randomBytes}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const e=Ja,n=Za,r=Rb,i=ul,s=xt,o=et,a=k8,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u=BigInt(1),d=BigInt(2),h=(_,x)=>(_+x/d)/x;function f(_){const x=c,T=BigInt(3),M=BigInt(6),O=BigInt(11),N=BigInt(22),B=BigInt(23),F=BigInt(44),z=BigInt(88),q=_*_*_%x,H=q*q*_%x,K=(0,s.pow2)(H,T,x)*H%x,Y=(0,s.pow2)(K,T,x)*H%x,J=(0,s.pow2)(Y,d,x)*q%x,G=(0,s.pow2)(J,O,x)*J%x,te=(0,s.pow2)(G,N,x)*G%x,se=(0,s.pow2)(te,F,x)*te%x,he=(0,s.pow2)(se,z,x)*se%x,fe=(0,s.pow2)(he,F,x)*te%x,_e=(0,s.pow2)(fe,T,x)*H%x,Pe=(0,s.pow2)(_e,B,x)*G%x,De=(0,s.pow2)(Pe,M,x)*q%x,tt=(0,s.pow2)(De,d,x);if(!g.eql(g.sqr(tt),_))throw new Error("Cannot find square root");return tt}const g=(0,s.Field)(c,void 0,void 0,{sqrt:f});t.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:g,n:l,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:_=>{const x=l,T=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),M=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),O=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),N=T,B=BigInt("0x100000000000000000000000000000000"),F=h(N*_,x),z=h(-M*_,x);let q=(0,s.mod)(_-F*T-z*O,x),H=(0,s.mod)(-F*M-z*N,x);const K=q>B,Y=H>B;if(K&&(q=x-q),Y&&(H=x-H),q>B||H>B)throw new Error("splitScalar: Endomorphism failed, k="+_);return{k1neg:K,k1:q,k2neg:Y,k2:H}}}},e.sha256);const p=BigInt(0),m={};function y(_,...x){let T=m[_];if(T===void 0){const M=(0,e.sha256)(Uint8Array.from(_,O=>O.charCodeAt(0)));T=(0,o.concatBytes)(M,M),m[_]=T}return(0,e.sha256)((0,o.concatBytes)(T,...x))}const w=_=>_.toRawBytes(!0).slice(1),b=_=>(0,o.numberToBytesBE)(_,32),v=_=>(0,s.mod)(_,c),C=_=>(0,s.mod)(_,l),A=t.secp256k1.ProjectivePoint,$=(_,x,T)=>A.BASE.multiplyAndAddUnsafe(_,x,T);function R(_){let x=t.secp256k1.utils.normPrivateKeyToScalar(_),T=A.fromPrivateKey(x);return{scalar:T.hasEvenY()?x:C(-x),bytes:w(T)}}function P(_){(0,o.aInRange)("x",_,u,c);const x=v(_*_);let T=f(v(x*_+BigInt(7)));T%d!==p&&(T=v(-T));const M=new A(_,T,u);return M.assertValidity(),M}const L=o.bytesToNumberBE;function U(..._){return C(L(y("BIP0340/challenge",..._)))}function D(_){return R(_).bytes}function j(_,x,T=(0,n.randomBytes)(32)){const M=(0,o.ensureBytes)("message",_),{bytes:O,scalar:N}=R(x),B=(0,o.ensureBytes)("auxRand",T,32),F=b(N^L(y("BIP0340/aux",B))),z=y("BIP0340/nonce",F,O,M),q=C(L(z));if(q===p)throw new Error("sign failed: k is zero");const{bytes:H,scalar:K}=R(q),Y=U(H,O,M),J=new Uint8Array(64);if(J.set(H,0),J.set(b(C(K+Y*N)),32),!I(J,M,O))throw new Error("sign: Invalid signature produced");return J}function I(_,x,T){const M=(0,o.ensureBytes)("signature",_,64),O=(0,o.ensureBytes)("message",x),N=(0,o.ensureBytes)("publicKey",T,32);try{const B=P(L(N)),F=L(M.subarray(0,32));if(!(0,o.inRange)(F,u,c))return!1;const z=L(M.subarray(32,64));if(!(0,o.inRange)(z,u,l))return!1;const q=U(b(F),w(B),O),H=$(B,z,C(-q));return!(!H||!H.hasEvenY()||H.toAffine().x!==F)}catch{return!1}}t.schnorr={getPublicKey:D,sign:j,verify:I,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:P,pointToBytes:w,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:y,mod:s.mod}};const E=(()=>(0,i.isogenyMap)(g,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(_=>_.map(x=>BigInt(x)))))(),S=(()=>(0,a.mapToCurveSimpleSWU)(g,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:g.create(BigInt("-11"))}))(),k=(()=>(0,i.createHasher)(t.secp256k1.ProjectivePoint,_=>{const{x,y:T}=S(g.create(_[0]));return E(x,T)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:g.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256}))();t.hashToCurve=k.hashToCurve,t.encodeToCurve=k.encodeToCurve})(pN);var R8={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHex=t.remove0x=void 0;var e=Ki;t.remove0x=function(n){return n.startsWith("0x")||n.startsWith("0X")?n.slice(2):n},t.decodeHex=function(n){return(0,e.hexToBytes)((0,t.remove0x)(n))}})(R8),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hexToPublicKey=t.convertPublicKeyFormat=t.getSharedPoint=t.getPublicKey=t.isValidPrivateKey=t.getValidSecret=void 0;var e=u8,n=mT,r=pN,i=Vg,s=qn,o=R8;t.getValidSecret=function(){var u;do u=(0,e.randomBytes)(s.SECRET_KEY_LENGTH);while(!(0,t.isValidPrivateKey)(u));return u},t.isValidPrivateKey=function(u){return a((0,i.ellipticCurve)(),function(d){return d.utils.isValidPrivateKey(u)},function(){return!0},function(){return!0})},t.getPublicKey=function(u){return a((0,i.ellipticCurve)(),function(d){return d.getPublicKey(u)},function(d){return d.getPublicKey(u)},function(d){return d.getPublicKey(u)})},t.getSharedPoint=function(u,d,h){return a((0,i.ellipticCurve)(),function(f){return f.getSharedSecret(u,d,h)},function(f){return f.getSharedSecret(u,d)},function(f){return l(f,u,d)})},t.convertPublicKeyFormat=function(u,d){return a((0,i.ellipticCurve)(),function(h){return h.getSharedSecret(BigInt(1),u,d)},function(){return u},function(){return u})};function a(u,d,h,f){if(u==="secp256k1")return d(r.secp256k1);if(u==="x25519")return h(n.x25519);if(u==="ed25519")return f(n.ed25519);throw new Error("Not implemented")}t.hexToPublicKey=function(u){var d=(0,o.decodeHex)(u);return a((0,i.ellipticCurve)(),function(){return c(d)},function(){return d},function(){return d})};var c=function(u){if(u.length===s.ETH_PUBLIC_KEY_SIZE){var d=new Uint8Array(1+u.length);return d.set([4]),d.set(u,1),d}return u},l=function(u,d,h){var f=u.utils.getExtendedPublicKey(d).scalar;return u.ExtendedPoint.fromHex(h).multiply(f).toRawBytes()}}(gT);var yN={},wf={};Object.defineProperty(wf,"__esModule",{value:!0}),wf.hkdf=void 0,wf.extract=vN,wf.expand=CN;const M8=Vi,wN=Za,bN=N8;function vN(t,e,n){return(0,M8.hash)(t),n===void 0&&(n=new Uint8Array(t.outputLen)),(0,bN.hmac)(t,(0,wN.toBytes)(n),(0,wN.toBytes)(e))}const B8=new Uint8Array([0]),EN=new Uint8Array;function CN(t,e,n,r=32){if((0,M8.hash)(t),(0,M8.number)(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=EN);const s=new Uint8Array(i*t.outputLen),o=bN.hmac.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)B8[0]=l+1,a.update(l===0?EN:c).update(n).update(B8).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),B8.fill(0),s.slice(0,r)}wf.hkdf=(t,e,n,r,i)=>CN(t,vN(t,e,n),r,i),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedKey=t.deriveKey=void 0;var e=Ki,n=wf,r=Ja;t.deriveKey=function(i,s,o){return(0,n.hkdf)(r.sha256,i,s,o,32)},t.getSharedKey=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return(0,t.deriveKey)(e.concatBytes.apply(void 0,i))}}(yN);var _N={},bf={},un={},ed={};Object.defineProperty(ed,"__esModule",{value:!0}),ed.polyval=ed.ghash=void 0,ed._toGHASHKey=SN;const td=Rr,Gr=Ki,Qa=16,D8=new Uint8Array(16),Vo=(0,Gr.u32)(D8),Ns=t=>(t>>>0&255)<<24|(t>>>8&255)<<16|(t>>>16&255)<<8|t>>>24&255|0;function SN(t){t.reverse();const e=1&t[15];let n=0;for(let r=0;r<t.length;r++){const i=t[r];t[r]=i>>>1|n,n=(1&i)<<7}return t[0]^=225&-e,t}let xN=class{constructor(e,n){this.blockLen=Qa,this.outputLen=Qa,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,Gr.toBytes)(e),(0,td.bytes)(e,16);const r=(0,Gr.createView)(e);let i=r.getUint32(0,!1),s=r.getUint32(4,!1),o=r.getUint32(8,!1),a=r.getUint32(12,!1);const c=[];for(let y=0;y<128;y++)c.push({s0:Ns(i),s1:Ns(s),s2:Ns(o),s3:Ns(a)}),{s0:i,s1:s,s2:o,s3:a}={s3:(d=o)<<31|(h=a)>>>1,s2:(u=s)<<31|d>>>1,s1:(l=i)<<31|u>>>1,s0:l>>>1^225<<24&-(1&h)};var l,u,d,h;const f=(y=>y>65536?8:y>1024?4:2)(n||1024);if(![1,2,4,8].includes(f))throw new Error(`ghash: wrong window size=${f}, should be 2, 4 or 8`);this.W=f;const g=128/f,p=this.windowSize=2**f,m=[];for(let y=0;y<g;y++)for(let w=0;w<p;w++){let b=0,v=0,C=0,A=0;for(let $=0;$<f;$++){if(!(w>>>f-$-1&1))continue;const{s0:R,s1:P,s2:L,s3:U}=c[f*y+$];b^=R,v^=P,C^=L,A^=U}m.push({s0:b,s1:v,s2:C,s3:A})}this.t=m}_updateBlock(e,n,r,i){e^=this.s0,n^=this.s1,r^=this.s2,i^=this.s3;const{W:s,t:o,windowSize:a}=this;let c=0,l=0,u=0,d=0;const h=(1<<s)-1;let f=0;for(const g of[e,n,r,i])for(let p=0;p<4;p++){const m=g>>>8*p&255;for(let y=8/s-1;y>=0;y--){const w=m>>>s*y&h,{s0:b,s1:v,s2:C,s3:A}=o[f*a+w];c^=b,l^=v,u^=C,d^=A,f+=1}}this.s0=c,this.s1=l,this.s2=u,this.s3=d}update(e){e=(0,Gr.toBytes)(e),(0,td.exists)(this);const n=(0,Gr.u32)(e),r=Math.floor(e.length/Qa),i=e.length%Qa;for(let s=0;s<r;s++)this._updateBlock(n[4*s+0],n[4*s+1],n[4*s+2],n[4*s+3]);return i&&(D8.set(e.subarray(r*Qa)),this._updateBlock(Vo[0],Vo[1],Vo[2],Vo[3]),(0,Gr.clean)(Vo)),this}destroy(){const{t:e}=this;for(const n of e)n.s0=0,n.s1=0,n.s2=0,n.s3=0}digestInto(e){(0,td.exists)(this),(0,td.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:s}=this,o=(0,Gr.u32)(e);return o[0]=n,o[1]=r,o[2]=i,o[3]=s,e}digest(){const e=new Uint8Array(Qa);return this.digestInto(e),this.destroy(),e}},soe=class extends xN{constructor(e,n){e=(0,Gr.toBytes)(e);const r=SN((0,Gr.copyBytes)(e));super(r,n),(0,Gr.clean)(r)}update(e){e=(0,Gr.toBytes)(e),(0,td.exists)(this);const n=(0,Gr.u32)(e),r=e.length%Qa,i=Math.floor(e.length/Qa);for(let s=0;s<i;s++)this._updateBlock(Ns(n[4*s+3]),Ns(n[4*s+2]),Ns(n[4*s+1]),Ns(n[4*s+0]));return r&&(D8.set(e.subarray(i*Qa)),this._updateBlock(Ns(Vo[3]),Ns(Vo[2]),Ns(Vo[1]),Ns(Vo[0])),(0,Gr.clean)(Vo)),this}digestInto(e){(0,td.exists)(this),(0,td.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:s}=this,o=(0,Gr.u32)(e);return o[0]=n,o[1]=r,o[2]=i,o[3]=s,e.reverse()}};function AN(t){const e=(r,i)=>t(i,r.length).update((0,Gr.toBytes)(r)).digest(),n=t(new Uint8Array(16),0);return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=(r,i)=>t(r,i),e}ed.ghash=AN((t,e)=>new xN(t,e)),ed.polyval=AN((t,e)=>new soe(t,e)),Object.defineProperty(un,"__esModule",{value:!0}),un.unsafe=un.aeskwp=un.aeskw=un.siv=un.gcm=un.cfb=un.cbc=un.ecb=un.ctr=void 0,un.expandKeyLE=co,un.expandKeyDecLE=Jg;const ht=Rr,L8=ed,ue=Ki,mi=16,Mb=new Uint8Array(mi),ooe=283;function j8(t){return t<<1^ooe&-(t>>7)}function vf(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(1&e),t=j8(t);return n}const U8=(()=>{const t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=j8(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,ue.clean)(t),e})(),aoe=U8.map((t,e)=>U8.indexOf(e)),coe=t=>t<<24|t>>>8,F8=t=>t<<8|t>>>24,Bb=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function IN(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((l,u)=>e(t[u])),r=n.map(F8),i=r.map(F8),s=i.map(F8),o=new Uint32Array(65536),a=new Uint32Array(65536),c=new Uint16Array(65536);for(let l=0;l<256;l++)for(let u=0;u<256;u++){const d=256*l+u;o[d]=n[l]^r[u],a[d]=i[l]^s[u],c[d]=t[l]<<8|t[u]}return{sbox:t,sbox2:c,T0:n,T1:r,T2:i,T3:s,T01:o,T23:a}}const z8=IN(U8,t=>vf(t,3)<<24|t<<16|t<<8|vf(t,2)),$N=IN(aoe,t=>vf(t,11)<<24|vf(t,13)<<16|vf(t,9)<<8|vf(t,14)),loe=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=j8(n))t[e]=n;return t})();function co(t){(0,ht.bytes)(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=z8,r=[];(0,ue.isAligned32)(t)||r.push(t=(0,ue.copyBytes)(t));const i=(0,ue.u32)(t),s=i.length,o=c=>Go(n,c,c,c,c),a=new Uint32Array(e+28);a.set(i);for(let c=s;c<a.length;c++){let l=a[c-1];c%s==0?l=o(coe(l))^loe[c/s-1]:s>6&&c%s==4&&(l=o(l)),a[c]=a[c-s]^l}return(0,ue.clean)(...r),a}function Jg(t){const e=co(t),n=e.slice(),r=e.length,{sbox2:i}=z8,{T0:s,T1:o,T2:a,T3:c}=$N;for(let l=0;l<r;l+=4)for(let u=0;u<4;u++)n[l+u]=e[r-l-4+u];(0,ue.clean)(e);for(let l=4;l<r-4;l++){const u=n[l],d=Go(i,u,u,u,u);n[l]=s[255&d]^o[d>>>8&255]^a[d>>>16&255]^c[d>>>24]}return n}function gl(t,e,n,r,i,s){return t[n<<8&65280|r>>>8&255]^e[i>>>8&65280|s>>>24&255]}function Go(t,e,n,r,i){return t[255&e|65280&n]|t[r>>>16&255|i>>>16&65280]<<16}function Zr(t,e,n,r,i){const{sbox2:s,T01:o,T23:a}=z8;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],i^=t[c++];const l=t.length/4-2;for(let u=0;u<l;u++){const d=t[c++]^gl(o,a,e,n,r,i),h=t[c++]^gl(o,a,n,r,i,e),f=t[c++]^gl(o,a,r,i,e,n),g=t[c++]^gl(o,a,i,e,n,r);e=d,n=h,r=f,i=g}return{s0:t[c++]^Go(s,e,n,r,i),s1:t[c++]^Go(s,n,r,i,e),s2:t[c++]^Go(s,r,i,e,n),s3:t[c++]^Go(s,i,e,n,r)}}function Qg(t,e,n,r,i){const{sbox2:s,T01:o,T23:a}=$N;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],i^=t[c++];const l=t.length/4-2;for(let u=0;u<l;u++){const d=t[c++]^gl(o,a,e,i,r,n),h=t[c++]^gl(o,a,n,e,i,r),f=t[c++]^gl(o,a,r,n,e,i),g=t[c++]^gl(o,a,i,r,n,e);e=d,n=h,r=f,i=g}return{s0:t[c++]^Go(s,e,i,r,n),s1:t[c++]^Go(s,n,e,i,r),s2:t[c++]^Go(s,r,n,e,i),s3:t[c++]^Go(s,i,r,n,e)}}function Ef(t,e){if(e===void 0)return new Uint8Array(t);if((0,ht.bytes)(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);if(!(0,ue.isAligned32)(e))throw new Error("unaligned dst");return e}function PN(t,e,n,r){(0,ht.bytes)(e,mi),(0,ht.bytes)(n);const i=n.length;r=Ef(i,r);const s=e,o=(0,ue.u32)(s);let{s0:a,s1:c,s2:l,s3:u}=Zr(t,o[0],o[1],o[2],o[3]);const d=(0,ue.u32)(n),h=(0,ue.u32)(r);for(let g=0;g+4<=d.length;g+=4){h[g+0]=d[g+0]^a,h[g+1]=d[g+1]^c,h[g+2]=d[g+2]^l,h[g+3]=d[g+3]^u;let p=1;for(let m=s.length-1;m>=0;m--)p=p+(255&s[m])|0,s[m]=255&p,p>>>=8;({s0:a,s1:c,s2:l,s3:u}=Zr(t,o[0],o[1],o[2],o[3]))}const f=mi*Math.floor(d.length/4);if(f<i){const g=new Uint32Array([a,c,l,u]),p=(0,ue.u8)(g);for(let m=f,y=0;m<i;m++,y++)r[m]=n[m]^p[y];(0,ue.clean)(g)}return r}function Cf(t,e,n,r,i){(0,ht.bytes)(n,mi),(0,ht.bytes)(r),i=Ef(r.length,i);const s=n,o=(0,ue.u32)(s),a=(0,ue.createView)(s),c=(0,ue.u32)(r),l=(0,ue.u32)(i),u=e?0:12,d=r.length;let h=a.getUint32(u,e),{s0:f,s1:g,s2:p,s3:m}=Zr(t,o[0],o[1],o[2],o[3]);for(let w=0;w+4<=c.length;w+=4)l[w+0]=c[w+0]^f,l[w+1]=c[w+1]^g,l[w+2]=c[w+2]^p,l[w+3]=c[w+3]^m,h=h+1>>>0,a.setUint32(u,h,e),{s0:f,s1:g,s2:p,s3:m}=Zr(t,o[0],o[1],o[2],o[3]);const y=mi*Math.floor(c.length/4);if(y<d){const w=new Uint32Array([f,g,p,m]),b=(0,ue.u8)(w);for(let v=y,C=0;v<d;v++,C++)i[v]=r[v]^b[C];(0,ue.clean)(w)}return i}function ON(t){if((0,ht.bytes)(t),t.length%mi!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function TN(t,e,n){(0,ht.bytes)(t);let r=t.length;const i=r%mi;if(!e&&i!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,ue.isAligned32)(t)||(t=(0,ue.copyBytes)(t));const s=(0,ue.u32)(t);if(e){let a=mi-i;a||(a=mi),r+=a}const o=Ef(r,n);return{b:s,o:(0,ue.u32)(o),out:o}}function NN(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");const i=t.subarray(0,-r);for(let s=0;s<r;s++)if(t[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function kN(t){const e=new Uint8Array(16),n=(0,ue.u32)(e);e.set(t);const r=mi-t.length;for(let i=mi-r;i<mi;i++)e[i]=r;return n}function RN(t,e,n,r,i){const s=i==null?0:i.length,o=t.create(n,r.length+s);i&&o.update(i),o.update(r);const a=new Uint8Array(16),c=(0,ue.createView)(a);i&&(0,ue.setBigUint64)(c,0,BigInt(8*s),e),(0,ue.setBigUint64)(c,8,BigInt(8*r.length),e),o.update(a);const l=o.digest();return(0,ue.clean)(a),l}un.ctr=(0,ue.wrapCipher)({blockSize:16,nonceLength:16},function(t,e){function n(r,i){if((0,ht.bytes)(r),i!==void 0&&((0,ht.bytes)(i),!(0,ue.isAligned32)(i)))throw new Error("unaligned destination");const s=co(t),o=(0,ue.copyBytes)(e),a=[s,o];(0,ue.isAligned32)(r)||a.push(r=(0,ue.copyBytes)(r));const c=PN(s,o,r,i);return(0,ue.clean)(...a),c}return(0,ht.bytes)(t),(0,ht.bytes)(e,mi),{encrypt:(r,i)=>n(r,i),decrypt:(r,i)=>n(r,i)}}),un.ecb=(0,ue.wrapCipher)({blockSize:16},function(t,e={}){(0,ht.bytes)(t);const n=!e.disablePadding;return{encrypt(r,i){const{b:s,o,out:a}=TN(r,n,i),c=co(t);let l=0;for(;l+4<=s.length;){const{s0:u,s1:d,s2:h,s3:f}=Zr(c,s[l+0],s[l+1],s[l+2],s[l+3]);o[l++]=u,o[l++]=d,o[l++]=h,o[l++]=f}if(n){const u=kN(r.subarray(4*l)),{s0:d,s1:h,s2:f,s3:g}=Zr(c,u[0],u[1],u[2],u[3]);o[l++]=d,o[l++]=h,o[l++]=f,o[l++]=g}return(0,ue.clean)(c),a},decrypt(r,i){ON(r);const s=Jg(t),o=Ef(r.length,i),a=[s];(0,ue.isAligned32)(r)||a.push(r=(0,ue.copyBytes)(r));const c=(0,ue.u32)(r),l=(0,ue.u32)(o);for(let u=0;u+4<=c.length;){const{s0:d,s1:h,s2:f,s3:g}=Qg(s,c[u+0],c[u+1],c[u+2],c[u+3]);l[u++]=d,l[u++]=h,l[u++]=f,l[u++]=g}return(0,ue.clean)(...a),NN(o,n)}}}),un.cbc=(0,ue.wrapCipher)({blockSize:16,nonceLength:16},function(t,e,n={}){(0,ht.bytes)(t),(0,ht.bytes)(e,16);const r=!n.disablePadding;return{encrypt(i,s){const o=co(t),{b:a,o:c,out:l}=TN(i,r,s);let u=e;const d=[o];(0,ue.isAligned32)(u)||d.push(u=(0,ue.copyBytes)(u));const h=(0,ue.u32)(u);let f=h[0],g=h[1],p=h[2],m=h[3],y=0;for(;y+4<=a.length;)f^=a[y+0],g^=a[y+1],p^=a[y+2],m^=a[y+3],{s0:f,s1:g,s2:p,s3:m}=Zr(o,f,g,p,m),c[y++]=f,c[y++]=g,c[y++]=p,c[y++]=m;if(r){const w=kN(i.subarray(4*y));f^=w[0],g^=w[1],p^=w[2],m^=w[3],{s0:f,s1:g,s2:p,s3:m}=Zr(o,f,g,p,m),c[y++]=f,c[y++]=g,c[y++]=p,c[y++]=m}return(0,ue.clean)(...d),l},decrypt(i,s){ON(i);const o=Jg(t);let a=e;const c=[o];(0,ue.isAligned32)(a)||c.push(a=(0,ue.copyBytes)(a));const l=(0,ue.u32)(a),u=Ef(i.length,s);(0,ue.isAligned32)(i)||c.push(i=(0,ue.copyBytes)(i));const d=(0,ue.u32)(i),h=(0,ue.u32)(u);let f=l[0],g=l[1],p=l[2],m=l[3];for(let y=0;y+4<=d.length;){const w=f,b=g,v=p,C=m;f=d[y+0],g=d[y+1],p=d[y+2],m=d[y+3];const{s0:A,s1:$,s2:R,s3:P}=Qg(o,f,g,p,m);h[y++]=A^w,h[y++]=$^b,h[y++]=R^v,h[y++]=P^C}return(0,ue.clean)(...c),NN(u,r)}}}),un.cfb=(0,ue.wrapCipher)({blockSize:16,nonceLength:16},function(t,e){function n(r,i,s){(0,ht.bytes)(r);const o=r.length;s=Ef(o,s);const a=co(t);let c=e;const l=[a];(0,ue.isAligned32)(c)||l.push(c=(0,ue.copyBytes)(c)),(0,ue.isAligned32)(r)||l.push(r=(0,ue.copyBytes)(r));const u=(0,ue.u32)(r),d=(0,ue.u32)(s),h=i?d:u,f=(0,ue.u32)(c);let g=f[0],p=f[1],m=f[2],y=f[3];for(let b=0;b+4<=u.length;){const{s0:v,s1:C,s2:A,s3:$}=Zr(a,g,p,m,y);d[b+0]=u[b+0]^v,d[b+1]=u[b+1]^C,d[b+2]=u[b+2]^A,d[b+3]=u[b+3]^$,g=h[b++],p=h[b++],m=h[b++],y=h[b++]}const w=mi*Math.floor(u.length/4);if(w<o){({s0:g,s1:p,s2:m,s3:y}=Zr(a,g,p,m,y));const b=(0,ue.u8)(new Uint32Array([g,p,m,y]));for(let v=w,C=0;v<o;v++,C++)s[v]=r[v]^b[C];(0,ue.clean)(b)}return(0,ue.clean)(...l),s}return(0,ht.bytes)(t),(0,ht.bytes)(e,16),{encrypt:(r,i)=>n(r,!0,i),decrypt:(r,i)=>n(r,!1,i)}}),un.gcm=(0,ue.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(t,e,n){if((0,ht.bytes)(t),(0,ht.bytes)(e),n!==void 0&&(0,ht.bytes)(n),e.length<8)throw new Error("aes/gcm: invalid nonce length");const r=16;function i(o,a,c){const l=RN(L8.ghash,!1,o,c,n);for(let u=0;u<a.length;u++)l[u]^=a[u];return l}function s(){const o=co(t),a=Mb.slice(),c=Mb.slice();if(Cf(o,!1,c,c,a),e.length===12)c.set(e);else{const l=Mb.slice(),u=(0,ue.createView)(l);(0,ue.setBigUint64)(u,8,BigInt(8*e.length),!1);const d=L8.ghash.create(a).update(e).update(l);d.digestInto(c),d.destroy()}return{xk:o,authKey:a,counter:c,tagMask:Cf(o,!1,c,Mb)}}return{encrypt(o){(0,ht.bytes)(o);const{xk:a,authKey:c,counter:l,tagMask:u}=s(),d=new Uint8Array(o.length+r),h=[a,c,l,u];(0,ue.isAligned32)(o)||h.push(o=(0,ue.copyBytes)(o)),Cf(a,!1,l,o,d);const f=i(c,u,d.subarray(0,d.length-r));return h.push(f),d.set(f,o.length),(0,ue.clean)(...h),d},decrypt(o){if((0,ht.bytes)(o),o.length<r)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:a,authKey:c,counter:l,tagMask:u}=s(),d=[a,c,u,l];(0,ue.isAligned32)(o)||d.push(o=(0,ue.copyBytes)(o));const h=o.subarray(0,-16),f=o.subarray(-16),g=i(c,u,h);if(d.push(g),!(0,ue.equalBytes)(g,f))throw new Error("aes/gcm: invalid ghash tag");const p=Cf(a,!1,l,h);return(0,ue.clean)(...d),p}}});const Db=(t,e,n)=>r=>{if(!Number.isSafeInteger(r)||e>r||r>n)throw new Error(`${t}: invalid value=${r}, must be [${e}..${n}]`)};function MN(t){return t!=null&&typeof t=="object"&&(t instanceof Uint32Array||t.constructor.name==="Uint32Array")}function BN(t,e){if((0,ht.bytes)(e,16),!MN(t))throw new Error("_encryptBlock accepts result of expandKeyLE");const n=(0,ue.u32)(e);let{s0:r,s1:i,s2:s,s3:o}=Zr(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=s,n[3]=o,e}function DN(t,e){if((0,ht.bytes)(e,16),!MN(t))throw new Error("_decryptBlock accepts result of expandKeyLE");const n=(0,ue.u32)(e);let{s0:r,s1:i,s2:s,s3:o}=Qg(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=s,n[3]=o,e}un.siv=(0,ue.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(t,e,n){const r=Db("AAD",0,68719476736),i=Db("plaintext",0,2**36),s=Db("nonce",12,12),o=Db("ciphertext",16,2**36+16);function a(){const u=co(t),d=new Uint8Array(t.length),h=new Uint8Array(16),f=[u,d];let g=e;(0,ue.isAligned32)(g)||f.push(g=(0,ue.copyBytes)(g));const p=(0,ue.u32)(g);let m=0,y=p[0],w=p[1],b=p[2],v=0;for(const A of[h,d].map(ue.u32)){const $=(0,ue.u32)(A);for(let R=0;R<$.length;R+=2){const{s0:P,s1:L}=Zr(u,m,y,w,b);$[R+0]=P,$[R+1]=L,m=++v}}const C={authKey:h,encKey:co(d)};return(0,ue.clean)(...f),C}function c(u,d,h){const f=RN(L8.polyval,!0,d,h,n);for(let b=0;b<12;b++)f[b]^=e[b];f[15]&=127;const g=(0,ue.u32)(f);let p=g[0],m=g[1],y=g[2],w=g[3];return{s0:p,s1:m,s2:y,s3:w}=Zr(u,p,m,y,w),g[0]=p,g[1]=m,g[2]=y,g[3]=w,f}function l(u,d,h){let f=(0,ue.copyBytes)(d);f[15]|=128;const g=Cf(u,!0,f,h);return(0,ue.clean)(f),g}return(0,ht.bytes)(t,16,24,32),(0,ht.bytes)(e),s(e.length),n!==void 0&&((0,ht.bytes)(n),r(n.length)),{encrypt(u){(0,ht.bytes)(u),i(u.length);const{encKey:d,authKey:h}=a(),f=c(d,h,u),g=[d,h,f];(0,ue.isAligned32)(u)||g.push(u=(0,ue.copyBytes)(u));const p=new Uint8Array(u.length+16);return p.set(f,u.length),p.set(l(d,f,u)),(0,ue.clean)(...g),p},decrypt(u){(0,ht.bytes)(u),o(u.length);const d=u.subarray(-16),{encKey:h,authKey:f}=a(),g=[h,f];(0,ue.isAligned32)(u)||g.push(u=(0,ue.copyBytes)(u));const p=l(h,d,u.subarray(0,-16)),m=c(h,f,p);if(g.push(m),!(0,ue.equalBytes)(d,m))throw(0,ue.clean)(...g),new Error("invalid polyval tag");return(0,ue.clean)(...g),p}}});const Lb={encrypt(t,e){if(e.length>=2**32)throw new Error("plaintext should be less than 4gb");const n=co(t);if(e.length===16)BN(n,e);else{const r=(0,ue.u32)(e);let i=r[0],s=r[1];for(let o=0,a=1;o<6;o++)for(let c=2;c<r.length;c+=2,a++){const{s0:l,s1:u,s2:d,s3:h}=Zr(n,i,s,r[c],r[c+1]);i=l,s=u^Bb(a),r[c]=d,r[c+1]=h}r[0]=i,r[1]=s}n.fill(0)},decrypt(t,e){if(e.length-8>=2**32)throw new Error("ciphertext should be less than 4gb");const n=Jg(t),r=e.length/8-1;if(r===1)DN(n,e);else{const i=(0,ue.u32)(e);let s=i[0],o=i[1];for(let a=0,c=6*r;a<6;a++)for(let l=2*r;l>=1;l-=2,c--){o^=Bb(c);const{s0:u,s1:d,s2:h,s3:f}=Qg(n,s,o,i[l],i[l+1]);s=u,o=d,i[l]=h,i[l+1]=f}i[0]=s,i[1]=o}n.fill(0)}},LN=new Uint8Array(8).fill(166);un.aeskw=(0,ue.wrapCipher)({blockSize:8},t=>({encrypt(e){if((0,ht.bytes)(e),!e.length||e.length%8!=0)throw new Error("invalid plaintext length");if(e.length===8)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");const n=(0,ue.concatBytes)(LN,e);return Lb.encrypt(t,n),n},decrypt(e){if((0,ht.bytes)(e),e.length%8!=0||e.length<24)throw new Error("invalid ciphertext length");const n=(0,ue.copyBytes)(e);if(Lb.decrypt(t,n),!(0,ue.equalBytes)(n.subarray(0,8),LN))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}}));const jN=2790873510;un.aeskwp=(0,ue.wrapCipher)({blockSize:8},t=>({encrypt(e){if((0,ht.bytes)(e),!e.length)throw new Error("invalid plaintext length");const n=8*Math.ceil(e.length/8),r=new Uint8Array(8+n);r.set(e,8);const i=(0,ue.u32)(r);return i[0]=jN,i[1]=Bb(e.length),Lb.encrypt(t,r),r},decrypt(e){if((0,ht.bytes)(e),e.length<16)throw new Error("invalid ciphertext length");const n=(0,ue.copyBytes)(e),r=(0,ue.u32)(n);Lb.decrypt(t,n);const i=Bb(r[1])>>>0,s=8*Math.ceil(i/8);if(r[0]!==jN||n.length-8!==s)throw new Error("integrity check failed");for(let o=i;o<s;o++)if(n[8+o]!==0)throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+i)}})),un.unsafe={expandKeyLE:co,expandKeyDecLE:Jg,encrypt:Zr,decrypt:Qg,encryptBlock:BN,decryptBlock:DN,ctrCounter:PN,ctr32:Cf},Object.defineProperty(bf,"__esModule",{value:!0}),bf.aes256cbc=bf.aes256gcm=void 0;var UN=un;bf.aes256gcm=function(t,e,n){return(0,UN.gcm)(t,e,n)},bf.aes256cbc=function(t,e,n){return(0,UN.cbc)(t,e)};var jb={},FN={},_f={};Object.defineProperty(_f,"__esModule",{value:!0}),_f.sigma=void 0,_f.rotl=function(t,e){return t<<e|t>>>32-e},_f.createCipher=function(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=(0,ks.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return(0,Xa.number)(i),(0,Xa.number)(o),(0,Xa.bool)(s),(0,Xa.bool)(n),(a,c,l,u,d=0)=>{(0,Xa.bytes)(a),(0,Xa.bytes)(c),(0,Xa.bytes)(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),(0,Xa.bytes)(u),(0,Xa.number)(d),d<0||d>=HN)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let g,p,m=a.length;if(m===32)f.push(g=(0,ks.copyBytes)(a)),p=qN;else{if(m!==16||!n)throw new Error(`arx: invalid 32-byte key, got length=${m}`);g=new Uint8Array(32),g.set(a),g.set(a,16),p=hoe,f.push(g)}q8(c)||f.push(c=(0,ks.copyBytes)(c));const y=(0,ks.u32)(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(p,y,(0,ks.u32)(c.subarray(0,16)),y),c=c.subarray(16)}const w=16-i;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const v=new Uint8Array(12);v.set(c,s?0:12-c.length),c=v,f.push(c)}const b=(0,ks.u32)(c);return function(v,C,A,$,R,P,L,U){const D=R.length,j=new Uint8Array(Ub),I=(0,ks.u32)(j),E=q8(R)&&q8(P),S=E?(0,ks.u32)(R):WN,k=E?(0,ks.u32)(P):WN;for(let _=0;_<D;L++){if(v(C,A,$,I,L,U),L>=HN)throw new Error("arx: counter overflow");const x=Math.min(Ub,D-_);if(E&&x===Ub){const T=_/4;if(_%4!=0)throw new Error("arx: invalid block position");for(let M,O=0;O<foe;O++)M=T+O,k[M]=S[M]^I[O];_+=Ub}else{for(let T,M=0;M<x;M++)T=_+M,P[T]=R[T]^j[M];_+=x}}}(t,p,y,b,l,u,d,o),(0,ks.clean)(...f),u}};const Xa=Rr,ks=Ki,zN=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),uoe=zN("expand 16-byte k"),doe=zN("expand 32-byte k"),hoe=(0,ks.u32)(uoe),qN=(0,ks.u32)(doe);function q8(t){return t.byteOffset%4==0}_f.sigma=qN.slice();const Ub=64,foe=16,HN=2**32-1,WN=new Uint32Array;var Xg={};Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.poly1305=void 0,Xg.wrapConstructorWithKey=KN;const Fb=Rr,e1=Ki,pr=(t,e)=>255&t[e++]|(255&t[e++])<<8;let poe=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,e1.toBytes)(e),(0,Fb.bytes)(e,32);const n=pr(e,0),r=pr(e,2),i=pr(e,4),s=pr(e,6),o=pr(e,8),a=pr(e,10),c=pr(e,12),l=pr(e,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|s<<9),this.r[4]=255&(s>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|a<<2),this.r[7]=8065&(a>>>11|c<<5),this.r[8]=8191&(c>>>8|l<<8),this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=pr(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],g=o[7],p=o[8],m=o[9],y=pr(e,n+0),w=pr(e,n+2),b=pr(e,n+4),v=pr(e,n+6),C=pr(e,n+8),A=pr(e,n+10),$=pr(e,n+12),R=pr(e,n+14);let P=s[0]+(8191&y),L=s[1]+(8191&(y>>>13|w<<3)),U=s[2]+(8191&(w>>>10|b<<6)),D=s[3]+(8191&(b>>>7|v<<9)),j=s[4]+(8191&(v>>>4|C<<12)),I=s[5]+(C>>>1&8191),E=s[6]+(8191&(C>>>14|A<<2)),S=s[7]+(8191&(A>>>11|$<<5)),k=s[8]+(8191&($>>>8|R<<8)),_=s[9]+(R>>>5|i),x=0,T=x+P*a+L*(5*m)+U*(5*p)+D*(5*g)+j*(5*f);x=T>>>13,T&=8191,T+=I*(5*h)+E*(5*d)+S*(5*u)+k*(5*l)+_*(5*c),x+=T>>>13,T&=8191;let M=x+P*c+L*a+U*(5*m)+D*(5*p)+j*(5*g);x=M>>>13,M&=8191,M+=I*(5*f)+E*(5*h)+S*(5*d)+k*(5*u)+_*(5*l),x+=M>>>13,M&=8191;let O=x+P*l+L*c+U*a+D*(5*m)+j*(5*p);x=O>>>13,O&=8191,O+=I*(5*g)+E*(5*f)+S*(5*h)+k*(5*d)+_*(5*u),x+=O>>>13,O&=8191;let N=x+P*u+L*l+U*c+D*a+j*(5*m);x=N>>>13,N&=8191,N+=I*(5*p)+E*(5*g)+S*(5*f)+k*(5*h)+_*(5*d),x+=N>>>13,N&=8191;let B=x+P*d+L*u+U*l+D*c+j*a;x=B>>>13,B&=8191,B+=I*(5*m)+E*(5*p)+S*(5*g)+k*(5*f)+_*(5*h),x+=B>>>13,B&=8191;let F=x+P*h+L*d+U*u+D*l+j*c;x=F>>>13,F&=8191,F+=I*a+E*(5*m)+S*(5*p)+k*(5*g)+_*(5*f),x+=F>>>13,F&=8191;let z=x+P*f+L*h+U*d+D*u+j*l;x=z>>>13,z&=8191,z+=I*c+E*a+S*(5*m)+k*(5*p)+_*(5*g),x+=z>>>13,z&=8191;let q=x+P*g+L*f+U*h+D*d+j*u;x=q>>>13,q&=8191,q+=I*l+E*c+S*a+k*(5*m)+_*(5*p),x+=q>>>13,q&=8191;let H=x+P*p+L*g+U*f+D*h+j*d;x=H>>>13,H&=8191,H+=I*u+E*l+S*c+k*a+_*(5*m),x+=H>>>13,H&=8191;let K=x+P*m+L*p+U*g+D*f+j*h;x=K>>>13,K&=8191,K+=I*d+E*u+S*l+k*c+_*a,x+=K>>>13,K&=8191,x=(x<<2)+x|0,x=x+T|0,T=8191&x,x>>>=13,M+=x,s[0]=T,s[1]=M,s[2]=O,s[3]=N,s[4]=B,s[5]=F,s[6]=z,s[7]=q,s[8]=H,s[9]=K}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(1^i)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let o=e[0]+n[0];e[0]=65535&o;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=65535&o;(0,e1.clean)(r)}update(e){(0,Fb.exists)(this);const{buffer:n,blockLen:r}=this,i=(e=(0,e1.toBytes)(e)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0);else for(;r<=i-s;s+=r)this.process(e,s)}return this}destroy(){(0,e1.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(e){(0,Fb.exists)(this),(0,Fb.output)(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}};function KN(t){const e=(r,i)=>t(i).update((0,e1.toBytes)(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}Xg.poly1305=KN(t=>new poe(t)),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.xchacha20poly1305=t.chacha20poly1305=t._poly1305_aead=t.chacha12=t.chacha8=t.xchacha20=t.chacha20=t.chacha20orig=void 0,t.hchacha=o;const e=_f,n=Rr,r=Xg,i=Ki;function s(d,h,f,g,p,m=20){let y=d[0],w=d[1],b=d[2],v=d[3],C=h[0],A=h[1],$=h[2],R=h[3],P=h[4],L=h[5],U=h[6],D=h[7],j=p,I=f[0],E=f[1],S=f[2],k=y,_=w,x=b,T=v,M=C,O=A,N=$,B=R,F=P,z=L,q=U,H=D,K=j,Y=I,J=E,G=S;for(let se=0;se<m;se+=2)k=k+M|0,K=(0,e.rotl)(K^k,16),F=F+K|0,M=(0,e.rotl)(M^F,12),k=k+M|0,K=(0,e.rotl)(K^k,8),F=F+K|0,M=(0,e.rotl)(M^F,7),_=_+O|0,Y=(0,e.rotl)(Y^_,16),z=z+Y|0,O=(0,e.rotl)(O^z,12),_=_+O|0,Y=(0,e.rotl)(Y^_,8),z=z+Y|0,O=(0,e.rotl)(O^z,7),x=x+N|0,J=(0,e.rotl)(J^x,16),q=q+J|0,N=(0,e.rotl)(N^q,12),x=x+N|0,J=(0,e.rotl)(J^x,8),q=q+J|0,N=(0,e.rotl)(N^q,7),T=T+B|0,G=(0,e.rotl)(G^T,16),H=H+G|0,B=(0,e.rotl)(B^H,12),T=T+B|0,G=(0,e.rotl)(G^T,8),H=H+G|0,B=(0,e.rotl)(B^H,7),k=k+O|0,G=(0,e.rotl)(G^k,16),q=q+G|0,O=(0,e.rotl)(O^q,12),k=k+O|0,G=(0,e.rotl)(G^k,8),q=q+G|0,O=(0,e.rotl)(O^q,7),_=_+N|0,K=(0,e.rotl)(K^_,16),H=H+K|0,N=(0,e.rotl)(N^H,12),_=_+N|0,K=(0,e.rotl)(K^_,8),H=H+K|0,N=(0,e.rotl)(N^H,7),x=x+B|0,Y=(0,e.rotl)(Y^x,16),F=F+Y|0,B=(0,e.rotl)(B^F,12),x=x+B|0,Y=(0,e.rotl)(Y^x,8),F=F+Y|0,B=(0,e.rotl)(B^F,7),T=T+M|0,J=(0,e.rotl)(J^T,16),z=z+J|0,M=(0,e.rotl)(M^z,12),T=T+M|0,J=(0,e.rotl)(J^T,8),z=z+J|0,M=(0,e.rotl)(M^z,7);let te=0;g[te++]=y+k|0,g[te++]=w+_|0,g[te++]=b+x|0,g[te++]=v+T|0,g[te++]=C+M|0,g[te++]=A+O|0,g[te++]=$+N|0,g[te++]=R+B|0,g[te++]=P+F|0,g[te++]=L+z|0,g[te++]=U+q|0,g[te++]=D+H|0,g[te++]=j+K|0,g[te++]=I+Y|0,g[te++]=E+J|0,g[te++]=S+G|0}function o(d,h,f,g){let p=d[0],m=d[1],y=d[2],w=d[3],b=h[0],v=h[1],C=h[2],A=h[3],$=h[4],R=h[5],P=h[6],L=h[7],U=f[0],D=f[1],j=f[2],I=f[3];for(let S=0;S<20;S+=2)p=p+b|0,U=(0,e.rotl)(U^p,16),$=$+U|0,b=(0,e.rotl)(b^$,12),p=p+b|0,U=(0,e.rotl)(U^p,8),$=$+U|0,b=(0,e.rotl)(b^$,7),m=m+v|0,D=(0,e.rotl)(D^m,16),R=R+D|0,v=(0,e.rotl)(v^R,12),m=m+v|0,D=(0,e.rotl)(D^m,8),R=R+D|0,v=(0,e.rotl)(v^R,7),y=y+C|0,j=(0,e.rotl)(j^y,16),P=P+j|0,C=(0,e.rotl)(C^P,12),y=y+C|0,j=(0,e.rotl)(j^y,8),P=P+j|0,C=(0,e.rotl)(C^P,7),w=w+A|0,I=(0,e.rotl)(I^w,16),L=L+I|0,A=(0,e.rotl)(A^L,12),w=w+A|0,I=(0,e.rotl)(I^w,8),L=L+I|0,A=(0,e.rotl)(A^L,7),p=p+v|0,I=(0,e.rotl)(I^p,16),P=P+I|0,v=(0,e.rotl)(v^P,12),p=p+v|0,I=(0,e.rotl)(I^p,8),P=P+I|0,v=(0,e.rotl)(v^P,7),m=m+C|0,U=(0,e.rotl)(U^m,16),L=L+U|0,C=(0,e.rotl)(C^L,12),m=m+C|0,U=(0,e.rotl)(U^m,8),L=L+U|0,C=(0,e.rotl)(C^L,7),y=y+A|0,D=(0,e.rotl)(D^y,16),$=$+D|0,A=(0,e.rotl)(A^$,12),y=y+A|0,D=(0,e.rotl)(D^y,8),$=$+D|0,A=(0,e.rotl)(A^$,7),w=w+b|0,j=(0,e.rotl)(j^w,16),R=R+j|0,b=(0,e.rotl)(b^R,12),w=w+b|0,j=(0,e.rotl)(j^w,8),R=R+j|0,b=(0,e.rotl)(b^R,7);let E=0;g[E++]=p,g[E++]=m,g[E++]=y,g[E++]=w,g[E++]=U,g[E++]=D,g[E++]=j,g[E++]=I}t.chacha20orig=(0,e.createCipher)(s,{counterRight:!1,counterLength:8,allowShortKeys:!0}),t.chacha20=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,allowShortKeys:!1}),t.xchacha20=(0,e.createCipher)(s,{counterRight:!1,counterLength:8,extendNonceFn:o,allowShortKeys:!1}),t.chacha8=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,rounds:8}),t.chacha12=(0,e.createCipher)(s,{counterRight:!1,counterLength:4,rounds:12});const a=new Uint8Array(16),c=(d,h)=>{d.update(h);const f=h.length%16;f&&d.update(a.subarray(f))},l=new Uint8Array(32);function u(d,h,f,g,p){const m=d(h,f,l),y=r.poly1305.create(m);p&&c(y,p),c(y,g);const w=new Uint8Array(16),b=(0,i.createView)(w);(0,i.setBigUint64)(b,0,BigInt(p?p.length:0),!0),(0,i.setBigUint64)(b,8,BigInt(g.length),!0),y.update(w);const v=y.digest();return(0,i.clean)(m,w),v}t._poly1305_aead=d=>(h,f,g)=>((0,n.bytes)(h,32),(0,n.bytes)(f),{encrypt(m,y){const w=m.length,b=w+16;y?(0,n.bytes)(y,b):y=new Uint8Array(b),d(h,f,m,y,1);const v=u(d,h,f,y.subarray(0,-16),g);return y.set(v,w),(0,i.clean)(v),y},decrypt(m,y){const w=m.length,b=w-16;if(w<16)throw new Error("encrypted data must be at least 16 bytes");y?(0,n.bytes)(y,b):y=new Uint8Array(b);const v=m.subarray(0,-16),C=m.subarray(-16),A=u(d,h,f,v,g);if(!(0,i.equalBytes)(C,A))throw new Error("invalid tag");return d(h,f,v,y,1),(0,i.clean)(A),y}}),t.chacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,t._poly1305_aead)(t.chacha20)),t.xchacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,t._poly1305_aead)(t.xchacha20))}(FN),Object.defineProperty(jb,"__esModule",{value:!0}),jb.xchacha20=void 0;var Sf,VN,t1,goe=FN;jb.xchacha20=function(t,e,n){return(0,goe.xchacha20poly1305)(t,e,n)},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.aesDecrypt=t.aesEncrypt=t.symDecrypt=t.symEncrypt=void 0;var e=Ki,n=u8,r=bf,i=jb,s=Vg,o=qn;t.symEncrypt=function(u,d,h){return a(c,u,d,h)};function a(u,d,h,f){var g=(0,s.symmetricAlgorithm)();if(g==="aes-256-gcm")return u(r.aes256gcm,d,h,(0,s.symmetricNonceLength)(),o.AEAD_TAG_LENGTH,f);if(g==="xchacha20")return u(i.xchacha20,d,h,o.XCHACHA20_NONCE_LENGTH,o.AEAD_TAG_LENGTH,f);if(g==="aes-256-cbc")return u(r.aes256cbc,d,h,16,0);throw new Error("Not implemented")}function c(u,d,h,f,g,p){var m=(0,n.randomBytes)(f),y=u(d,m,p).encrypt(h);if(g===0)return(0,e.concatBytes)(m,y);var w=y.length-g,b=y.subarray(0,w),v=y.subarray(w);return(0,e.concatBytes)(m,v,b)}function l(u,d,h,f,g,p){var m=h.subarray(0,f),y=u(d,Uint8Array.from(m),p),w=h.subarray(f);if(g===0)return y.decrypt(w);var b=w.subarray(0,g),v=w.subarray(g);return y.decrypt((0,e.concatBytes)(v,b))}t.symDecrypt=function(u,d,h){return a(l,u,d,h)},t.aesEncrypt=t.symEncrypt,t.aesDecrypt=t.symDecrypt}(_N),Sf=Cb,VN=Os&&Os.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),t1=Os&&Os.__exportStar||function(t,e){for(var n in t)n==="default"||Object.prototype.hasOwnProperty.call(e,n)||VN(e,t,n)},Object.defineProperty(Sf,"__esModule",{value:!0}),t1(gT,Sf),t1(yN,Sf),t1(R8,Sf),t1(_N,Sf);var n1={};Object.defineProperty(n1,"__esModule",{value:!0}),n1.PublicKey=void 0;var GN=Ki,zb=Cb,moe=function(){function t(e){this.data=(0,zb.convertPublicKeyFormat)(e,!0)}return t.fromHex=function(e){return new t((0,zb.hexToPublicKey)(e))},Object.defineProperty(t.prototype,"uncompressed",{get:function(){return ae.from((0,zb.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compressed",{get:function(){return ae.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(e){return e===void 0&&(e=!0),(0,GN.bytesToHex)(e?this.data:this.uncompressed)},t.prototype.decapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.data:this.uncompressed,i=e.multiply(this,n);return(0,zb.getSharedKey)(r,i)},t.prototype.equals=function(e){return(0,GN.equalBytes)(this.data,e.data)},t}();n1.PublicKey=moe,Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.PrivateKey=void 0;var ZN=Ki,xf=Cb,yoe=n1,woe=function(){function t(e){if(e===void 0)this.data=(0,xf.getValidSecret)();else{if(!(0,xf.isValidPrivateKey)(e))throw new Error("Invalid private key");this.data=e}this.publicKey=new yoe.PublicKey((0,xf.getPublicKey)(this.data))}return t.fromHex=function(e){return new t((0,xf.decodeHex)(e))},Object.defineProperty(t.prototype,"secret",{get:function(){return ae.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(){return(0,ZN.bytesToHex)(this.data)},t.prototype.encapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.publicKey.compressed:this.publicKey.uncompressed,i=this.multiply(e,n);return(0,xf.getSharedKey)(r,i)},t.prototype.multiply=function(e,n){return n===void 0&&(n=!1),(0,xf.getSharedPoint)(this.data,e.compressed,n)},t.prototype.equals=function(e){return(0,ZN.equalBytes)(this.data,e.data)},t}();Eb.PrivateKey=woe,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.PrivateKey=void 0;var e=Eb;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return e.PrivateKey}});var n=n1;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})}(l8),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.PublicKey=t.PrivateKey=t.ECIES_CONFIG=void 0,t.encrypt=function(a,c){var l=new r.PrivateKey,u=a instanceof Uint8Array?new r.PublicKey(a):r.PublicKey.fromHex(a),d=l.encapsulate(u,(0,n.isHkdfKeyCompressed)()),h=(0,n.isEphemeralKeyCompressed)()?l.publicKey.compressed:l.publicKey.uncompressed,f=(0,i.symEncrypt)(d,c);return ae.from((0,e.concatBytes)(h,f))},t.decrypt=function(a,c){var l=a instanceof Uint8Array?new r.PrivateKey(a):r.PrivateKey.fromHex(a),u=(0,n.ephemeralKeySize)(),d=new r.PublicKey(c.subarray(0,u)),h=c.subarray(u),f=d.decapsulate(l,(0,n.isHkdfKeyCompressed)());return ae.from((0,i.symDecrypt)(f,h))};var e=Ki,n=Vg,r=l8,i=Cb,s=Vg;Object.defineProperty(t,"ECIES_CONFIG",{enumerable:!0,get:function(){return s.ECIES_CONFIG}});var o=l8;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return o.PrivateKey}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return o.PublicKey}}),t.utils={aesEncrypt:i.aesEncrypt,aesDecrypt:i.aesDecrypt,symEncrypt:i.symEncrypt,symDecrypt:i.symDecrypt,decodeHex:i.decodeHex,getValidSecret:i.getValidSecret,remove0x:i.remove0x}}(gf);const YN=Kr("KeyExchange:Layer"),JN=Kr("SocketService:Layer"),QN=Kr("Ecies:Layer"),XN=Kr("RemoteCommunication:Layer");YN.color="##95c44e",JN.color="#f638d7",QN.color="#465b9c",XN.color="#47a2be";const ne={KeyExchange:YN,SocketService:JN,Ecies:QN,RemoteCommunication:XN};let r1,qb=[],H8=[];const ec=(t,e)=>oe(void 0,void 0,void 0,function*(){r1=e,H8.push(t),function(n){return oe(this,void 0,void 0,function*(){if(!r1||!n)return;(function(){const o=H8;H8=qb,qb=o})();const r=r1.endsWith("/")?`${r1}evt`:`${r1}/evt`,i=Object.assign({},n);if(delete i.params,n.params)for(const[o,a]of Object.entries(n.params))i[o]=a;const s=JSON.stringify(i);ne.RemoteCommunication(`[sendBufferedEvents] Sending ${qb.length} analytics events to ${r}`);try{const o=yield gO(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:s}),a=yield o.text();ne.RemoteCommunication(`[sendBufferedEvents] Response: ${a}`),qb.length=0}catch{}})}(t).catch(()=>{})});let W8=class{constructor(e){this.enabled=!0,e!=null&&e.debug&&Kr.enable("Ecies:Layer"),this.ecies=e!=null&&e.privateKey?gf.PrivateKey.fromHex(e.privateKey):new gf.PrivateKey,ne.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),ne.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),ne.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new gf.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,n){let r=e;if(this.enabled)try{ne.Ecies("[ECIES: encrypt()] using otherPublicKey",n);const i=ae.from(e),s=gf.encrypt(n,i);r=ae.from(s).toString("base64")}catch(i){throw ne.Ecies("[ECIES: encrypt()] error encrypt:",i),ne.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),ne.Ecies("[ECIES: encrypt()] data: ",e),ne.Ecies("[ECIES: encrypt()] otherkey: ",n),i}return r}decrypt(e){let n=e;if(this.enabled)try{ne.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());const r=ae.from(e.toString(),"base64");n=gf.decrypt(this.ecies.toHex(),r).toString()}catch(r){throw ne.Ecies("[ECIES: decrypt()] error decrypt",r),ne.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),ne.Ecies("[ECIES: decrypt()] encryptedData: ",e),r}return n}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){ne.Ecies("[ECIES: toString()]",this.getKeyInfo())}};var ml={name:"@metamask/sdk-communication-layer",version:"0.33.1",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk.git",directory:"packages/sdk-communication-layer"},main:"dist/node/cjs/metamask-sdk-communication-layer.js",unpkg:"dist/browser/umd/metamask-sdk-communication-layer.js",module:"dist/node/es/metamask-sdk-communication-layer.js",browser:"dist/browser/es/metamask-sdk-communication-layer.js","react-native":"dist/react-native/es/metamask-sdk-communication-layer.js",types:"dist/types/src/index.d.ts",files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types","build:clean":"yarn clean && yarn build",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs",dev:'concurrently "tsc --watch" "rollup -c --bundleConfigAsCjs -w"',"build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",size:"size-limit",clean:"rimraf ./dist",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk-communication-layer","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore","publish:preview":"yarn npm publish --tag preview",prepack:"../../scripts/prepack.sh",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:coverage":"jest --coverage","test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":"jest",watch:"rollup -c --bundleConfigAsCjs -w"},dependencies:{"@metamask/sdk-analytics":"workspace:*",bufferutil:"^4.0.8","date-fns":"^2.29.3",debug:"4.3.4","utf-8-validate":"^5.0.2",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@rollup/plugin-commonjs":"^25.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.4","@size-limit/preset-big-lib":"^11.0.2","@types/jest":"^29.2.4","@types/node":"^20.1.3","@types/uuid":"^9.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0",concurrently:"^9.1.2","cross-fetch":"^4.0.0",eciesjs:"^0.4.11",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0",eventemitter2:"^6.4.9",jest:"^29.3.1",prettier:"^2.3.0",rimraf:"^3.0.2",rollup:"^4.26.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-node-globals":"^1.4.0","rollup-plugin-peer-deps-external":"^2.2.4","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.1.6","socket.io-client":"^4.5.1","stream-browserify":"^3.0.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^5.6.3"},peerDependencies:{"cross-fetch":"^4.0.0",eciesjs:"*",eventemitter2:"^6.4.9","readable-stream":"^3.6.2","socket.io-client":"^4.5.1"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"@lavamoat/preinstall-always-fail":!1,canvas:!0,"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,bufferutil:!1,"utf-8-validate":!1}}};const nd="https://metamask-sdk.api.cx.metamask.io/",boe=["websocket"],Af=6048e5,voe=3e3,Br={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_SWITCHETHEREUMCHAIN:"wallet_switchEthereumChain",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},Eoe=[Br.METAMASK_CONNECTSIGN,Br.METAMASK_CONNECTWITH,Br.METAMASK_OPEN,Br.METAMASK_BATCH,Br.PERSONAL_SIGN,Br.WALLET_REQUESTPERMISSIONS,Br.WALLET_REVOKEPERMISSIONS,Br.WALLET_WATCHASSET,Br.ETH_SENDTRANSACTION,Br.ETH_SIGNTYPEDDATA,Br.ETH_SIGNTYPEDDATA_V3,Br.ETH_SIGNTYPEDDATA_V4,Br.ETH_SIGNTRANSACTION,Br.ETH_SIGN,Br.PERSONAL_EC_RECOVER];function i1(t){return Eoe.includes(t)}function ek(t){const{context:e}=t;ne.RemoteCommunication(`[RemoteCommunication: clean()] context=${e}`),t.channelConfig=void 0,t.ready=!1,t.originatorConnectStarted=!1}var Kn,de,Hb,At,tn,yn,If;(If=Kn||(Kn={})).DISCONNECTED="disconnected",If.WAITING="waiting",If.TIMEOUT="timeout",If.LINKED="linked",If.PAUSED="paused",If.TERMINATED="terminated",function(t){t.KEY_INFO="key_info",t.SERVICE_STATUS="service_status",t.PROVIDER_UPDATE="provider_update",t.RPC_UPDATE="rpc_update",t.KEYS_EXCHANGED="keys_exchanged",t.JOIN_CHANNEL="join_channel",t.PUBLIC_KEY="public_key",t.CHANNEL_CREATED="channel_created",t.CLIENTS_CONNECTED="clients_connected",t.CLIENTS_DISCONNECTED="clients_disconnected",t.CLIENTS_WAITING="clients_waiting",t.CLIENTS_READY="clients_ready",t.REJECTED="rejected",t.WALLET_INIT="wallet_init",t.CHANNEL_PERSISTENCE="channel_persistence",t.CONFIG="config",t.MESSAGE_ACK="ack",t.SOCKET_DISCONNECTED="socket_disconnected",t.SOCKET_RECONNECT="socket_reconnect",t.OTP="otp",t.SDK_RPC_CALL="sdk_rpc_call",t.AUTHORIZED="authorized",t.CONNECTION_STATUS="connection_status",t.MESSAGE="message",t.TERMINATE="terminate"}(de||(de={})),(Hb||(Hb={})).KEY_EXCHANGE="key_exchange",function(t){t.KEY_HANDSHAKE_START="key_handshake_start",t.KEY_HANDSHAKE_CHECK="key_handshake_check",t.KEY_HANDSHAKE_SYN="key_handshake_SYN",t.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",t.KEY_HANDSHAKE_ACK="key_handshake_ACK",t.KEY_HANDSHAKE_WALLET="key_handshake_wallet",t.KEY_HANDSHAKE_NONE="none"}(At||(At={}));let Coe=class extends rb.EventEmitter2{constructor({communicationLayer:e,otherPublicKey:n,context:r,ecies:i,logging:s}){super(),this.keysExchanged=!1,this.step=At.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=r,this.communicationLayer=e,i!=null&&i.privateKey&&n&&(ne.KeyExchange(`[KeyExchange: constructor()] otherPubKey=${n} set keysExchanged to true!`,i),this.keysExchanged=!0),this.myECIES=new W8(Object.assign(Object.assign({},i),{debug:s==null?void 0:s.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=(s==null?void 0:s.keyExchangeLayer)===!0,n&&this.setOtherPublicKey(n),this.communicationLayer.on(Hb.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){const{relayPersistence:n}=this.communicationLayer.remote.state;if(ne.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${n}`,e),n)return void ne.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");const{message:r}=e;this.keysExchanged&&ne.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(de.KEY_INFO,r.type),r.type===At.KEY_HANDSHAKE_SYN?(this.checkStep([At.KEY_HANDSHAKE_NONE,At.KEY_HANDSHAKE_ACK]),ne.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",r),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:At.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch(i=>{ne.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",i)}),this.setStep(At.KEY_HANDSHAKE_ACK)):r.type===At.KEY_HANDSHAKE_SYNACK?(this.checkStep([At.KEY_HANDSHAKE_SYNACK,At.KEY_HANDSHAKE_ACK,At.KEY_HANDSHAKE_NONE]),ne.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:At.KEY_HANDSHAKE_ACK}).catch(i=>{ne.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",i)}),this.keysExchanged=!0,this.setStep(At.KEY_HANDSHAKE_ACK),this.emit(de.KEYS_EXCHANGED)):r.type===At.KEY_HANDSHAKE_ACK&&(ne.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([At.KEY_HANDSHAKE_ACK,At.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(At.KEY_HANDSHAKE_ACK),this.emit(de.KEYS_EXCHANGED))}resetKeys(e){this.clean(),this.myECIES=new W8(e)}clean(){ne.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(At.KEY_HANDSHAKE_NONE),this.emit(de.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:e,force:n}){const{relayPersistence:r,protocolVersion:i}=this.communicationLayer.remote.state,s=i>=2;r?ne.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(ne.KeyExchange(`[KeyExchange: start()] context=${this.context} protocolVersion=${i} isOriginator=${e} step=${this.step} force=${n} relayPersistence=${r} keysExchanged=${this.keysExchanged}`),e?!(this.keysExchanged||this.step!==At.KEY_HANDSHAKE_NONE&&this.step!==At.KEY_HANDSHAKE_SYNACK)||n?(ne.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${n}) -- step=${this.step}`,this.step),this.clean(),this.setStep(At.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:At.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch(o=>{ne.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",o)})):ne.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&n!==!0?ne.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):s?this.communicationLayer.sendMessage({type:At.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch(o=>{ne.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",o)}):(this.communicationLayer.sendMessage({type:At.KEY_HANDSHAKE_START}).catch(o=>{ne.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",o)}),this.clean()))}setStep(e){this.step=e,this.emit(de.KEY_INFO,e)}checkStep(e){e.length>0&&e.indexOf(this.step.toString())}setRelayPersistence({localKey:e,otherKey:n}){this.otherPublicKey=n,this.myECIES=new W8({privateKey:e,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){ne.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){const e={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(e)}};(function(t){t.TERMINATE="terminate",t.ANSWER="answer",t.OFFER="offer",t.CANDIDATE="candidate",t.JSONRPC="jsonrpc",t.WALLET_INFO="wallet_info",t.WALLET_INIT="wallet_init",t.ORIGINATOR_INFO="originator_info",t.PAUSE="pause",t.OTP="otp",t.AUTHORIZED="authorized",t.PING="ping",t.READY="ready"})(tn||(tn={})),function(t){t.REQUEST="sdk_connect_request_started",t.REQUEST_MOBILE="sdk_connect_request_started_mobile",t.RECONNECT="sdk_reconnect_request_started",t.CONNECTED="sdk_connection_established",t.CONNECTED_MOBILE="sdk_connection_established_mobile",t.AUTHORIZED="sdk_connection_authorized",t.REJECTED="sdk_connection_rejected",t.TERMINATED="sdk_connection_terminated",t.DISCONNECTED="sdk_disconnected",t.SDK_USE_EXTENSION="sdk_use_extension",t.SDK_RPC_REQUEST="sdk_rpc_request",t.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",t.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",t.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",t.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"}(yn||(yn={}));const Wb=(t,e,n)=>oe(void 0,void 0,void 0,function*(){var r,i,s,o,a,c;const{remote:l,state:u}=t,{channelId:d,isOriginator:h}=u;if(e==="error_terminated")return ne.SocketService(`handleJoinChannelResults: Channel ${d} terminated`),void t.emit(de.TERMINATE);if(!n)return void ne.SocketService(`handleJoinChannelResults: No result for channel ${d}`);const{persistence:f,walletKey:g,rejected:p}=n;if(ne.SocketService(`handleJoinChannelResults: Channel ${d} persistence=${f} walletKey=${g} rejected=${p}`),p)return ne.SocketService(`handleJoinChannelResults: Channel ${d} rejected`),yield t.remote.disconnect({terminate:!0}),t.remote.emit(de.REJECTED,{channelId:d}),void t.remote.emitServiceStatusEvent();if(g&&!(!((r=l.state.channelConfig)===null||r===void 0)&&r.otherKey)){t.getKeyExchange().setOtherPublicKey(g),(i=t.state.keyExchange)===null||i===void 0||i.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(de.AUTHORIZED);const{communicationLayer:m,storageManager:y}=l.state,w=Object.assign(Object.assign({},l.state.channelConfig),{channelId:(s=l.state.channelId)!==null&&s!==void 0?s:"",validUntil:Date.now()+Af,localKey:m==null?void 0:m.getKeyInfo().ecies.private,otherKey:g});t.sendMessage({type:At.KEY_HANDSHAKE_ACK}).catch(b=>{}),(o=t.state.socket)===null||o===void 0||o.emit(tn.PING,{id:d,clientType:h?"dapp":"wallet",context:"on_channel_reconnect",message:""}),yield y==null?void 0:y.persistChannelConfig(w),l.emitServiceStatusEvent(),l.setConnectionStatus(Kn.LINKED)}f&&(t.emit(de.CHANNEL_PERSISTENCE),(a=t.state.keyExchange)===null||a===void 0||a.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(de.AUTHORIZED),ec(Object.assign(Object.assign({id:d??"",event:h?yn.CONNECTED:yn.CONNECTED_MOBILE},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:ml.version,walletVersion:(c=t.remote.state.walletInfo)===null||c===void 0?void 0:c.version}),u.communicationServerUrl).catch(m=>{}))}),$f=t=>new Promise(e=>{setTimeout(e,t)}),tk=(t,e,...n)=>oe(void 0,[t,e,...n],void 0,function*(r,i,s=200){let o;const a=Date.now();let c=!1;for(;!c;){if(c=Date.now()-a>3e5,o=i[r],o.elapsedTime!==void 0)return o;yield $f(s)}throw new Error(`RPC ${r} timed out`)}),K8=t=>oe(void 0,void 0,void 0,function*(){const{state:e}=t,{socket:n,channelId:r,context:i,isOriginator:s,isReconnecting:o}=e;if(o)return ne.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",t),!1;if(!n)return ne.SocketService("[SocketService: reconnectSocket()] socket is not defined",t),!1;if(!r)return!1;const{connected:a}=n;e.isReconnecting=!0,e.reconnectionAttempts=0,ne.SocketService(`[SocketService: reconnectSocket()] connected=${a} trying to reconnect after socketio disconnection`,t);try{for(;3>e.reconnectionAttempts;){if(ne.SocketService(`[SocketService: reconnectSocket()] Attempt ${e.reconnectionAttempts+1} of 3`,t),yield $f(200),n.connected)return ne.SocketService("Socket already connected --- ping to retrieve messages"),n.emit(tn.PING,{id:r,clientType:s?"dapp":"wallet",context:"on_channel_config",message:""}),!0;e.resumed=!0,n.connect(),t.emit(de.SOCKET_RECONNECT);try{if(yield new Promise((c,l)=>{n.emit(de.JOIN_CHANNEL,{channelId:r,context:`${i}connect_again`,clientType:s?"dapp":"wallet"},(u,d)=>oe(void 0,void 0,void 0,function*(){try{yield Wb(t,u,d),c()}catch(h){l(h)}}))}),yield $f(100),n.connected)return ne.SocketService(`Reconnection successful on attempt ${e.reconnectionAttempts+1}`),!0}catch(c){ne.SocketService(`Error during reconnection attempt ${e.reconnectionAttempts+1}:`,c)}e.reconnectionAttempts+=1,3>e.reconnectionAttempts&&(yield $f(200))}return ne.SocketService("Failed to reconnect after 3 attempts"),!1}finally{e.isReconnecting=!1,e.reconnectionAttempts=0}});function nk(t,e){return oe(this,void 0,void 0,function*(){var n;const r=(n=t.state.keyExchange)===null||n===void 0?void 0:n.encryptMessage(JSON.stringify(e)),i={id:t.state.channelId,context:t.state.context,clientType:t.state.isOriginator?"dapp":"wallet",message:r,plaintext:t.state.hasPlaintext?JSON.stringify(e):void 0};return ne.SocketService(`[SocketService: encryptAndSendMessage()] context=${t.state.context}`,i),e.type===tn.TERMINATE&&(t.state.manualDisconnect=!0),new Promise((s,o)=>{var a;(a=t.state.socket)===null||a===void 0||a.emit(de.MESSAGE,i,(c,l)=>{var u;c&&(ne.SocketService(`[SocketService: encryptAndSendMessage()] error=${c}`),o(c)),ne.SocketService("[encryptAndSendMessage] response",l),s((u=l==null?void 0:l.success)!==null&&u!==void 0&&u)})})})}var Pf;(function(t){t.RPC_CHECK="rpcCheck",t.SKIPPED_RPC="skippedRpc"})(Pf||(Pf={}));const rk=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map(t=>t.toLowerCase()),_oe=[{event:de.CLIENTS_CONNECTED,handler:function(t,e){return n=>oe(this,void 0,void 0,function*(){var r,i,s,o,a,c,l,u,d,h,f;const g=(i=(r=t.remote.state.channelConfig)===null||r===void 0?void 0:r.relayPersistence)!==null&&i!==void 0&&i;if(ne.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected-${e}' relayPersistence=${g} resumed=${t.state.resumed}  clientsPaused=${t.state.clientsPaused} keysExchanged=${(s=t.state.keyExchange)===null||s===void 0?void 0:s.areKeysExchanged()} isOriginator=${t.state.isOriginator}`),t.emit(de.CLIENTS_CONNECTED,{isOriginator:t.state.isOriginator,keysExchanged:(o=t.state.keyExchange)===null||o===void 0?void 0:o.areKeysExchanged(),context:t.state.context}),t.state.resumed)t.state.isOriginator||(ne.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} 'clients_connected' / keysExchanged=${(a=t.state.keyExchange)===null||a===void 0?void 0:a.areKeysExchanged()} -- backward compatibility`),(c=t.state.keyExchange)===null||c===void 0||c.start({isOriginator:(l=t.state.isOriginator)!==null&&l!==void 0&&l})),t.state.resumed=!1;else if(t.state.clientsPaused)ne.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause");else if(!t.state.isOriginator){const p=!g;ne.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(u=t.state.keyExchange)===null||u===void 0?void 0:u.areKeysExchanged()} -- force=${p} -- backward compatibility`),ne.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(d=t.state.keyExchange)===null||d===void 0?void 0:d.areKeysExchanged()} -- force=${p} -- backward compatibility`),(h=t.state.keyExchange)===null||h===void 0||h.start({isOriginator:(f=t.state.isOriginator)!==null&&f!==void 0&&f,force:p})}t.state.clientsConnected=!0,t.state.clientsPaused=!1})}},{event:de.CHANNEL_CREATED,handler:function(t,e){return n=>{ne.SocketService(`[SocketService: handleChannelCreated()] context=${t.state.context} on 'channel_created-${e}'`,n),t.emit(de.CHANNEL_CREATED,n)}}},{event:de.CLIENTS_DISCONNECTED,handler:function(t,e){return()=>{var n;t.state.clientsConnected=!1,ne.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}'`),t.remote.state.relayPersistence?ne.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}' - relayPersistence enabled, skipping key exchange cleanup.`):(t.state.isOriginator&&!t.state.clientsPaused&&((n=t.state.keyExchange)===null||n===void 0||n.clean()),t.emit(de.CLIENTS_DISCONNECTED,e))}}},{event:de.CONFIG,handler:function(t,e){return n=>oe(this,void 0,void 0,function*(){var r,i,s;ne.SocketService(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${e}'`,n);const{persistence:o,walletKey:a}=n;t.state.isOriginator&&t.remote.state.channelConfig?(n.walletKey&&!t.remote.state.channelConfig.otherKey&&(ne.SocketService(`Setting wallet key ${a}`),t.remote.state.channelConfig.otherKey=a,t.getKeyExchange().setOtherPublicKey(n.walletKey),(r=t.state.keyExchange)===null||r===void 0||r.setKeysExchanged(!0),yield t.remote.sendMessage({type:At.KEY_HANDSHAKE_ACK}),yield t.remote.sendMessage({type:tn.PING}),yield(i=t.remote.state.storageManager)===null||i===void 0?void 0:i.persistChannelConfig(t.remote.state.channelConfig)),o!==!0||t.remote.state.channelConfig.relayPersistence||(ne.SocketService(`Setting relay persistence ${o}`),t.remote.state.channelConfig.relayPersistence=o,t.remote.state.relayPersistence=!0,t.remote.emit(de.CHANNEL_PERSISTENCE),t.remote.state.authorized=!0,t.remote.state.ready=!0,t.remote.emit(de.AUTHORIZED),yield(s=t.remote.state.storageManager)===null||s===void 0?void 0:s.persistChannelConfig(t.remote.state.channelConfig))):t.state.isOriginator||n.persistence&&(t.remote.state.relayPersistence=!0,t.remote.emit(de.CHANNEL_PERSISTENCE))})}},{event:de.MESSAGE,handler:function(t,e){return n=>{var r,i,s,o,a,c,l,u,d,h,f,g,p,m,y,w,b,v;const{ackId:C,message:A,error:$}=n,R=(r=t.remote.state.relayPersistence)!==null&&r!==void 0&&r;if(ne.SocketService(`[SocketService handleMessage()]  relayPersistence=${R}  context=${t.state.context} on 'message' ${e} keysExchanged=${(i=t.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,n),$)throw ne.SocketService(`
      [SocketService handleMessage()] context=${t.state.context}::on 'message' error=${$}`),new Error($);const P=typeof A=="string";if(!P&&(A==null?void 0:A.type)===At.KEY_HANDSHAKE_START)return R?void 0:(ne.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received HANDSHAKE_START isOriginator=${t.state.isOriginator}`,A),void((s=t.state.keyExchange)===null||s===void 0||s.start({isOriginator:(o=t.state.isOriginator)!==null&&o!==void 0&&o,force:!0})));if(!P&&(!((a=A==null?void 0:A.type)===null||a===void 0)&&a.startsWith("key_handshake")))return R?void 0:(ne.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' emit KEY_EXCHANGE`,A),void t.emit(Hb.KEY_EXCHANGE,{message:A,context:t.state.context}));if(P&&!(!((c=t.state.keyExchange)===null||c===void 0)&&c.areKeysExchanged())){let D=!1;try{ne.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' trying to decrypt message`),(l=t.state.keyExchange)===null||l===void 0||l.decryptMessage(A),D=!0}catch(j){ne.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' error`,j)}if(!D)return t.state.isOriginator?(d=t.state.keyExchange)===null||d===void 0||d.start({isOriginator:(h=t.state.isOriginator)!==null&&h!==void 0&&h}):t.sendMessage({type:At.KEY_HANDSHAKE_START}).catch(j=>{}),void ne.SocketService(`Message ignored because invalid key exchange status. step=${(f=t.state.keyExchange)===null||f===void 0?void 0:f.getKeyInfo().step}`,(g=t.state.keyExchange)===null||g===void 0?void 0:g.getKeyInfo(),A);ne.SocketService("Invalid key exchange status detected --- updating it."),(u=t.state.keyExchange)===null||u===void 0||u.setKeysExchanged(!0)}else if(!P&&(A!=null&&A.type))return void t.emit(de.MESSAGE,A);if(!P)return void t.emit(de.MESSAGE,A);const L=(p=t.state.keyExchange)===null||p===void 0?void 0:p.decryptMessage(A),U=JSON.parse(L??"{}");if(C&&(C==null?void 0:C.length)>0&&(ne.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' ackid=${C} channelId=${e}`),(m=t.state.socket)===null||m===void 0||m.emit(de.MESSAGE_ACK,{ackId:C,channelId:e,clientType:t.state.isOriginator?"dapp":"wallet"})),t.state.clientsPaused=(U==null?void 0:U.type)===tn.PAUSE,t.state.isOriginator&&U.data){const D=U.data,j=t.state.rpcMethodTracker[D.id];if(j){const I=Date.now()-j.timestamp;ne.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received answer for id=${D.id} method=${j.method} responseTime=${I}`,U),t.remote.state.analytics&&rk.includes(j.method.toLowerCase())&&ec(Object.assign(Object.assign({id:(y=t.remote.state.channelId)!==null&&y!==void 0?y:"",event:yn.SDK_RPC_REQUEST_DONE,sdkVersion:t.remote.state.sdkVersion,commLayerVersion:ml.version},t.remote.state.originatorInfo),{walletVersion:(w=t.remote.state.walletInfo)===null||w===void 0?void 0:w.version,params:{method:j.method,from:"mobile"}}),t.remote.state.communicationServerUrl).catch(S=>{}),i1(j.method)&&mn.analytics.track(D.error?D.error.code===4001?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:j.method});const E=Object.assign(Object.assign({},j),{result:D.result,error:D.error?{code:(b=D.error)===null||b===void 0?void 0:b.code,message:(v=D.error)===null||v===void 0?void 0:v.message}:void 0,elapsedTime:I});t.state.rpcMethodTracker[D.id]=E,t.emit(de.RPC_UPDATE,E)}}t.emit(de.MESSAGE,{message:U})}}},{event:de.REJECTED,handler:function(t,e){return n=>oe(this,void 0,void 0,function*(){var r;t.state.isOriginator&&!t.remote.state.ready?(ne.SocketService(`[SocketService: handleChannelRejected()] context=${t.state.context} channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`,t.remote.state.originatorInfo),ec(Object.assign(Object.assign({id:e,event:yn.REJECTED},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:ml.version,walletVersion:(r=t.remote.state.walletInfo)===null||r===void 0?void 0:r.version}),t.remote.state.communicationServerUrl).catch(i=>{}),mn.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),yield t.remote.disconnect({terminate:!0}),t.remote.emit(de.REJECTED,{channelId:e}),t.remote.setConnectionStatus(Kn.DISCONNECTED)):ne.SocketService(`[SocketService: handleChannelRejected()] SKIP -- channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`)})}},{event:"clients_waiting_to_join",handler:function(t,e){return n=>{ne.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${t.state.context} on 'clients_waiting_to_join-${e}'`,n),t.emit(de.CLIENTS_WAITING,n)}}}],Soe=[{event:de.KEY_INFO,handler:function(t){return e=>{ne.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",e),t.emit(de.KEY_INFO,e)}}},{event:de.KEYS_EXCHANGED,handler:function(t){return()=>{var e,n,r;ne.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${(e=t.state.keyExchange)===null||e===void 0?void 0:e.areKeysExchanged()}`);const{channelConfig:i}=t.remote.state;if(i){const o=t.getKeyExchange().getKeyInfo().ecies;i.localKey=o.private,i.otherKey=o.otherPubKey,t.remote.state.channelConfig=i,(n=t.remote.state.storageManager)===null||n===void 0||n.persistChannelConfig(i).catch(a=>{})}t.emit(de.KEYS_EXCHANGED,{keysExchanged:(r=t.state.keyExchange)===null||r===void 0?void 0:r.areKeysExchanged(),isOriginator:t.state.isOriginator});const s={keyInfo:t.getKeyInfo()};t.emit(de.SERVICE_STATUS,s)}}}];function ik(t,e){ne.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} setting socket listeners for channel ${e}...`);const{socket:n}=t.state,{keyExchange:r}=t.state;n&&t.state.isOriginator&&(t.state.debug&&(n==null||n.io.on("error",i=>{ne.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=error`,i)}),n==null||n.io.on("reconnect",i=>{ne.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect`,i),K8(t).catch(s=>{})}),n==null||n.io.on("reconnect_error",i=>{ne.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_error`,i)}),n==null||n.io.on("reconnect_failed",()=>{ne.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_failed`)})),n==null||n.on("disconnect",i=>(ne.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${i}' begin recovery...`),function(s){return o=>{ne.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${s.state.manualDisconnect}`,o),s.state.manualDisconnect||(s.emit(de.SOCKET_DISCONNECTED),K8(s).catch(a=>{}))}}(t)(i)))),_oe.forEach(({event:i,handler:s})=>{n==null||n.on(`${i}-${e}`,s(t,e))}),Soe.forEach(({event:i,handler:s})=>{r==null||r.on(i,s(t))}),t.state.setupChannelListeners=!0}let xoe=class extends rb.EventEmitter2{constructor(e){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=e;const{reconnect:n,communicationLayerPreference:r,communicationServerUrl:i,context:s,remote:o,logging:a}=e;this.state.resumed=n,this.state.context=s,this.state.isOriginator=o.state.isOriginator,this.state.communicationLayerPreference=r,this.state.debug=(a==null?void 0:a.serviceLayer)===!0,this.remote=o,(a==null?void 0:a.serviceLayer)===!0&&Kr.enable("SocketService:Layer"),this.state.communicationServerUrl=i,this.state.hasPlaintext=this.state.communicationServerUrl!==nd&&(a==null?void 0:a.plaintext)===!0,ne.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var e;const{otherPublicKey:n,ecies:r,logging:i}=this.options,s={autoConnect:!1,transports:boe,withCredentials:!0},o=this.state.communicationServerUrl;ne.SocketService(`[SocketService: initSocket()] Socket IO url: ${o}`),this.state.socket=hb(o,s),function(c){if(typeof window<"u"&&typeof document<"u"&&(ne.SocketService(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,c),!c.state.focusListenerAdded)){const l=()=>{ne.SocketService("Document has focus --- reconnecting socket"),K8(c).catch(u=>{})};window.addEventListener("focus",l),c.state.focusListenerAdded=!0,c.state.removeFocusListener=()=>{window.removeEventListener("focus",l),c.state.focusListenerAdded=!1}}}(this);const a={communicationLayer:this,otherPublicKey:n,sendPublicKey:!1,context:(e=this.state.context)!==null&&e!==void 0?e:"",ecies:r,logging:i};this.state.keyExchange=new Coe(a)}resetKeys(){return ne.SocketService("[SocketService: resetKeys()] Resetting keys."),void((e=this.state.keyExchange)===null||e===void 0||e.resetKeys());var e}createChannel(){return oe(this,void 0,void 0,function*(){return function(e){return oe(this,void 0,void 0,function*(){var n,r,i;if(ne.SocketService(`[SocketService: createChannel()] context=${e.state.context}`),e.state.socket||e.initSocket(),(n=e.state.socket)===null||n===void 0?void 0:n.connected)throw new Error("socket already connected");(r=e.state.socket)===null||r===void 0||r.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0;const s=sl();e.state.channelId=s,ik(e,s),yield new Promise((a,c)=>{var l;(l=e.state.socket)===null||l===void 0||l.emit(de.JOIN_CHANNEL,{channelId:s,context:`${e.state.context}createChannel`,clientType:"dapp"},(u,d)=>oe(this,void 0,void 0,function*(){try{yield Wb(e,u,d),a()}catch(h){c(h)}}))});const o=(i=e.state.keyExchange)===null||i===void 0?void 0:i.getKeyInfo();return{channelId:s,pubKey:(o==null?void 0:o.ecies.public)||"",privKey:(o==null?void 0:o.ecies.private)||""}})}(this)})}connectToChannel({channelId:e,withKeyExchange:n=!1,authorized:r}){return function(i){return oe(this,arguments,void 0,function*({options:s,instance:o}){const{channelId:a,authorized:c,withKeyExchange:l}=s,{state:u,remote:d}=o,{isOriginator:h=!1,socket:f,keyExchange:g}=u,{channelConfig:p}=d.state;if(f!=null&&f.connected)throw new Error("socket already connected");if(h&&(p!=null&&p.relayPersistence)){const{localKey:m,otherKey:y}=p;m&&y&&(g==null||g.setRelayPersistence({localKey:m,otherKey:y}))}return Object.assign(u,{manualDisconnect:!1,withKeyExchange:l,isOriginator:h,channelId:a}),f==null||f.connect(),ik(o,a),!h&&c&&(g==null||g.setKeysExchanged(!0),Object.assign(d.state,{ready:!0,authorized:!0})),new Promise(m=>{var y;const w=(y=g==null?void 0:g.getKeyInfo())===null||y===void 0?void 0:y.ecies.public;f==null||f.emit(de.JOIN_CHANNEL,{channelId:a,context:`${u.context}_connectToChannel`,clientType:h?"dapp":"wallet",publicKey:c&&!h?w:void 0},(b,v)=>oe(this,void 0,void 0,function*(){yield Wb(o,b,v),m()}))})})}({options:{channelId:e,withKeyExchange:n,authorized:r},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e,n;(n=(e=this).state.socket)===null||n===void 0||n.emit(de.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:At.KEY_HANDSHAKE_CHECK,pubkey:e.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return oe(this,void 0,void 0,function*(){return function(n,r){return oe(this,void 0,void 0,function*(){var i,s,o;if(!n.state.channelId)throw ne.SocketService("handleSendMessage: no channelId - Create a channel first"),new Error("Create a channel first");if(ne.SocketService(`[SocketService: handleSendMessage()] context=${n.state.context} areKeysExchanged=${(i=n.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()}`,r),(s=r==null?void 0:r.type)===null||s===void 0?void 0:s.startsWith("key_handshake"))return function(c,l){var u;ne.SocketService(`[SocketService: handleKeyHandshake()] context=${c.state.context}`,l),(u=c.state.socket)===null||u===void 0||u.emit(de.MESSAGE,{id:c.state.channelId,context:c.state.context,clientType:c.state.isOriginator?"dapp":"wallet",message:l})}(n,r),!0;(function(c,l){var u;if(!(!((u=c.state.keyExchange)===null||u===void 0)&&u.areKeysExchanged())&&!c.remote.state.relayPersistence)throw ne.SocketService(`[SocketService: validateKeyExchange()] context=${c.state.context} ERROR keys not exchanged`,l),new Error("Keys not exchanged BBB")})(n,r),function(c,l){var u;const d=(u=l==null?void 0:l.method)!==null&&u!==void 0?u:"",h=l==null?void 0:l.id;c.state.isOriginator&&h&&(c.state.rpcMethodTracker[h]={id:h,timestamp:Date.now(),method:d},c.emit(de.RPC_UPDATE,c.state.rpcMethodTracker[h]))}(n,r);const a=yield nk(n,r);return n.remote.state.analytics&&n.remote.state.isOriginator&&r.method&&rk.includes(r.method.toLowerCase())&&ec({id:(o=n.remote.state.channelId)!==null&&o!==void 0?o:"",event:yn.SDK_RPC_REQUEST,params:{method:r.method,from:"mobile"}},n.remote.state.communicationServerUrl).catch(c=>{}),n.remote.state.isOriginator&&r.method&&i1(r.method)&&mn.analytics.track("sdk_action_requested",{action:r.method}),function(c,l){return oe(this,void 0,void 0,function*(){var u;const d=l==null?void 0:l.id,h=(u=l==null?void 0:l.method)!==null&&u!==void 0?u:"";if(c.state.isOriginator&&d)try{const f=tk(d,c.state.rpcMethodTracker,200).then(m=>({type:Pf.RPC_CHECK,result:m})),g=(()=>oe(this,void 0,void 0,function*(){const m=yield(w=>oe(void 0,[w],void 0,function*({rpcId:b,instance:v}){for(;v.state.lastRpcId===b||v.state.lastRpcId===void 0;)yield $f(200);return v.state.lastRpcId}))({instance:c,rpcId:d}),y=yield tk(m,c.state.rpcMethodTracker,200);return{type:Pf.SKIPPED_RPC,result:y}}))(),p=yield Promise.race([f,g]);if(p.type===Pf.RPC_CHECK){const m=p.result;ne.SocketService(`[SocketService:handleRpcReplies()] id=${l.id} ${h} ( ${m.elapsedTime} ms)`,m.result)}else{if(p.type!==Pf.SKIPPED_RPC)throw new Error(`Error handling RPC replies for ${d}`);{const m=Object.assign(Object.assign({},c.state.rpcMethodTracker[d]),{error:new Error("SDK_CONNECTION_ISSUE")});c.emit(de.RPC_UPDATE,m);const y={data:Object.assign(Object.assign({},m),{jsonrpc:"2.0"}),name:"metamask-provider"};c.emit(de.MESSAGE,{message:y})}}}catch(f){throw f}})}(n,r).catch(c=>{}),a})}(this,e)})}ping(){return function(e){return oe(this,void 0,void 0,function*(){var n,r;ne.SocketService(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${(n=e.state.keyExchange)===null||n===void 0?void 0:n.areKeysExchanged()}`),(r=e.state.socket)===null||r===void 0||r.emit(tn.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""})})}(this)}pause(){return function(e){return oe(this,void 0,void 0,function*(){var n,r;ne.SocketService(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,!((n=e.state.keyExchange)===null||n===void 0)&&n.areKeysExchanged()&&(yield e.sendMessage({type:tn.PAUSE})),(r=e.state.socket)===null||r===void 0||r.disconnect()})}(this)}isConnected(){var e;return(e=this.state.socket)===null||e===void 0?void 0:e.connected}resume(){return function(e){return oe(this,void 0,void 0,function*(){const{state:n,remote:r}=e,{socket:i,channelId:s,context:o,keyExchange:a,isOriginator:c}=n,{isOriginator:l}=r.state;if(ne.SocketService(`[SocketService: resume()] channelId=${s} context=${o} connected=${i==null?void 0:i.connected} manualDisconnect=${n.manualDisconnect} resumed=${n.resumed} keysExchanged=${a==null?void 0:a.areKeysExchanged()}`),!s)throw ne.SocketService("[SocketService: resume()] channelId is not defined"),new Error("ChannelId is not defined");i!=null&&i.connected?(ne.SocketService("[SocketService: resume()] already connected."),i.emit(tn.PING,{id:s,clientType:l?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||a!=null&&a.areKeysExchanged()||(c?yield e.sendMessage({type:tn.READY}):a==null||a.start({isOriginator:!1}))):(i==null||i.connect(),ne.SocketService(`[SocketService: resume()] after connecting socket --> connected=${i==null?void 0:i.connected}`),i==null||i.emit(de.JOIN_CHANNEL,{channelId:s,context:`${o}_resume`,clientType:l?"dapp":"wallet"},(u,d)=>oe(this,void 0,void 0,function*(){try{yield Wb(e,u,d)}catch{}}))),n.manualDisconnect=!1,n.resumed=!0})}(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){return function(n,r){var i,s,o,a,c;ne.SocketService(`[SocketService: disconnect()] context=${n.state.context}`,r),r!=null&&r.terminate&&((s=(i=n.state).removeFocusListener)===null||s===void 0||s.call(i),n.state.channelId=r.channelId,(o=n.state.socket)===null||o===void 0||o.removeAllListeners(),(a=n.state.keyExchange)===null||a===void 0||a.clean(),n.remote.state.ready=!1,n.state.socket=void 0,n.state.rpcMethodTracker={}),n.state.manualDisconnect=!0,(c=n.state.socket)===null||c===void 0||c.disconnect()}(this,e)}};var yl,gr,sk;function Aoe(t){return()=>oe(this,void 0,void 0,function*(){var e,n,r;const{state:i}=t;if(i.authorized)return;yield(()=>oe(this,void 0,void 0,function*(){for(;!i.walletInfo;)yield $f(500)}))();const s="7.3".localeCompare(((e=i.walletInfo)===null||e===void 0?void 0:e.version)||"");if(ne.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${(n=i.walletInfo)===null||n===void 0?void 0:n.version} compareValue=${s}`),s!==1)return;const o=i.platformType===gr.MobileWeb||i.platformType===gr.ReactNative||i.platformType===gr.MetaMaskMobileWebview;ne.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${i.platformType} secure=${o} channel=${i.channelId} walletVersion=${(r=i.walletInfo)===null||r===void 0?void 0:r.version}`),o&&(i.authorized=!0,t.emit(de.AUTHORIZED))})}function Ioe(t){return e=>{const{state:n}=t;ne.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${n.context} on 'channel_created' channelId=${e}`),t.emit(de.CHANNEL_CREATED,e)}}function $oe(t,e){return()=>{var n,r,i,s;const{state:o}=t;ne.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${o.channelId} keysExchanged=${(r=(n=o.communicationLayer)===null||n===void 0?void 0:n.getKeyInfo())===null||r===void 0?void 0:r.keysExchanged}`),o.analytics&&ec(Object.assign(Object.assign({id:(i=o.channelId)!==null&&i!==void 0?i:"",event:o.reconnection?yn.RECONNECT:o.isOriginator?yn.REQUEST:yn.REQUEST_MOBILE},o.originatorInfo),{commLayer:e,sdkVersion:o.sdkVersion,walletVersion:(s=o.walletInfo)===null||s===void 0?void 0:s.version,commLayerVersion:ml.version}),o.communicationServerUrl).catch(a=>{}),o.isOriginator&&!o.reconnection&&mn.analytics.track("sdk_connection_established",{transport_type:"websocket"}),o.clientsConnected=!0,o.originatorInfoSent=!1,t.emit(de.CLIENTS_CONNECTED)}}function Poe(t){return e=>{const{state:n}=t;ne.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${n.context} on 'clients_disconnected' channelId=${e}`),n.relayPersistence||(n.clientsConnected=!1,n.ready=!1,n.authorized=!1),t.emit(de.CLIENTS_DISCONNECTED,n.channelId),t.setConnectionStatus(Kn.DISCONNECTED)}}function Ooe(t){return e=>{var n;const{state:r}=t;if(ne.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${e} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),t.setConnectionStatus(Kn.WAITING),t.emit(de.CLIENTS_WAITING,e),r.originatorConnectStarted){ne.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);const i=((n=r.autoConnectOptions)===null||n===void 0?void 0:n.timeout)||3e3,s=setTimeout(()=>{ne.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${i}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||t.setConnectionStatus(Kn.TIMEOUT),clearTimeout(s)},i)}}}function Toe(t,e){return n=>{var r,i,s,o,a,c,l,u;const{state:d}=t;if(ne.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${d.context} on commLayer.'keys_exchanged' channel=${d.channelId}`,n),(i=(r=d.communicationLayer)===null||r===void 0?void 0:r.getKeyInfo())===null||i===void 0?void 0:i.keysExchanged){const h=Object.assign(Object.assign({},d.channelConfig),{channelId:(s=d.channelId)!==null&&s!==void 0?s:"",validUntil:((o=d.channelConfig)===null||o===void 0?void 0:o.validUntil)||Af,localKey:d.communicationLayer.getKeyInfo().ecies.private,otherKey:d.communicationLayer.getKeyInfo().ecies.otherPubKey});(a=d.storageManager)===null||a===void 0||a.persistChannelConfig(h).catch(f=>{}),t.setConnectionStatus(Kn.LINKED)}(function(h,f){var g,p,m,y,w,b,v,C;const{state:A}=h;ne.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${A.channelId}`,f);const $=Object.assign(Object.assign({},A.channelConfig),{channelId:(g=A.channelId)!==null&&g!==void 0?g:"",validUntil:(m=(p=A.channelConfig)===null||p===void 0?void 0:p.validUntil)!==null&&m!==void 0?m:0,relayPersistence:A.relayPersistence,localKey:(w=(y=A.communicationLayer)===null||y===void 0?void 0:y.state.keyExchange)===null||w===void 0?void 0:w.getKeyInfo().ecies.private,otherKey:(v=(b=A.communicationLayer)===null||b===void 0?void 0:b.state.keyExchange)===null||v===void 0?void 0:v.getKeyInfo().ecies.otherPubKey,lastActive:f.getTime()});(C=A.storageManager)===null||C===void 0||C.persistChannelConfig($)})(t,new Date),d.analytics&&d.channelId&&ec(Object.assign(Object.assign({id:d.channelId,event:n.isOriginator?yn.CONNECTED:yn.CONNECTED_MOBILE},d.originatorInfo),{sdkVersion:d.sdkVersion,commLayer:e,commLayerVersion:ml.version,walletVersion:(c=d.walletInfo)===null||c===void 0?void 0:c.version}),d.communicationServerUrl).catch(h=>{}),d.isOriginator=n.isOriginator,n.isOriginator||((l=d.communicationLayer)===null||l===void 0||l.sendMessage({type:tn.READY}),d.ready=!0,d.paused=!1),n.isOriginator&&!d.originatorInfoSent&&((u=d.communicationLayer)===null||u===void 0||u.sendMessage({type:tn.ORIGINATOR_INFO,originatorInfo:d.originatorInfo,originator:d.originatorInfo}),d.originatorInfoSent=!0)}}function Noe(t){return e=>{let n=e;e.message&&(n=n.message),function(r,i){const{state:s}=i;if(ne.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${s.context} on 'message' typeof=${typeof r}`,r),i.state.ready=!0,s.isOriginator||r.type!==tn.ORIGINATOR_INFO)if(s.isOriginator&&r.type===tn.WALLET_INFO)(function(o,a){const{state:c}=o;c.walletInfo=a.walletInfo,c.paused=!1})(i,r);else{if(s.isOriginator&&r.type===tn.WALLET_INIT)(function(o,a){return oe(this,void 0,void 0,function*(){var c,l,u;const{state:d}=o;if(d.isOriginator){const h=a.data||{};if(typeof h=="object"&&"accounts"in h&&"chainId"in h&&"walletKey"in h)try{const{channelConfig:f}=o.state;if(ne.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(f,null,2)),f){const g=h.accounts,p=h.chainId,m=h.walletKey;let y,w=!1;"deeplinkProtocol"in h&&(w=!!h.deeplinkProtocol,o.state.deeplinkProtocolAvailable=w),"walletVersion"in h&&(y=h.walletVersion),yield(c=o.state.storageManager)===null||c===void 0?void 0:c.persistChannelConfig(Object.assign(Object.assign({},f),{otherKey:m,walletVersion:y,deeplinkProtocolAvailable:w,relayPersistence:!0})),yield(l=o.state.storageManager)===null||l===void 0?void 0:l.persistAccounts(g),yield(u=o.state.storageManager)===null||u===void 0?void 0:u.persistChainId(p)}o.emit(de.WALLET_INIT,{accounts:h.accounts,chainId:h.chainId})}catch{}}})})(i,r).catch(o=>{ne.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${o}`)});else if(r.type===tn.TERMINATE)(function(o){return oe(this,void 0,void 0,function*(){const{state:a}=o;a.isOriginator&&(yield ak({options:{terminate:!0,sendMessage:!1},instance:o}),o.emit(de.TERMINATE))})})(i).catch(o=>{ne.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${o}`)});else if(r.type===tn.PAUSE)(function(o){const{state:a}=o;a.paused=!0,o.setConnectionStatus(Kn.PAUSED)})(i);else if(r.type===tn.READY&&s.isOriginator)(function(o){const{state:a}=o;o.setConnectionStatus(Kn.LINKED);const c=a.paused;a.paused=!1,o.emit(de.CLIENTS_READY,{isOriginator:a.isOriginator,walletInfo:a.walletInfo}),c&&(a.authorized=!0,o.emit(de.AUTHORIZED))})(i);else{if(r.type===tn.OTP&&s.isOriginator)return void function(o,a){var c;const{state:l}=o;o.emit(de.OTP,a.otpAnswer),"6.6".localeCompare(((c=l.walletInfo)===null||c===void 0?void 0:c.version)||"")===1&&o.emit(de.SDK_RPC_CALL,{method:Br.ETH_REQUESTACCOUNTS,params:[]})}(i,r);r.type===tn.AUTHORIZED&&s.isOriginator&&function(o){const{state:a}=o;a.authorized=!0,o.emit(de.AUTHORIZED)}(i)}i.emit(de.MESSAGE,r)}else(function(o,a){var c;const{state:l}=o;(c=l.communicationLayer)===null||c===void 0||c.sendMessage({type:tn.WALLET_INFO,walletInfo:l.walletInfo}),l.originatorInfo=a.originatorInfo||a.originator,o.emit(de.CLIENTS_READY,{isOriginator:l.isOriginator,originatorInfo:l.originatorInfo}),l.paused=!1})(i,r)}(n,t)}}function koe(t){return()=>{const{state:e}=t;ne.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),e.ready=!1,e.authorized=!1,ek(e),t.emitServiceStatusEvent({context:"socket_reconnect"})}}function Roe(t){return()=>{const{state:e}=t;ne.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),e.ready=!1}}function Moe(t){return()=>oe(this,void 0,void 0,function*(){var e,n,r,i,s,o,a;const{state:c}=t;ne.RemoteCommunication(`[RemoteCommunication: handleFullPersistenceEvent()] context=${c.context}`),t.state.ready=!0,t.state.clientsConnected=!0,t.state.authorized=!0,t.state.relayPersistence=!0,(e=t.state.communicationLayer)===null||e===void 0||e.getKeyExchange().setKeysExchanged(!0),t.emit(de.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),t.emit(de.AUTHORIZED),t.emit(de.CLIENTS_READY),t.emit(de.CHANNEL_PERSISTENCE);try{c.channelConfig=Object.assign(Object.assign({},c.channelConfig),{localKey:(n=c.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange().getKeyInfo().ecies.private,otherKey:(r=c.communicationLayer)===null||r===void 0?void 0:r.getKeyExchange().getOtherPublicKey(),channelId:(i=c.channelId)!==null&&i!==void 0?i:"",validUntil:(o=(s=c.channelConfig)===null||s===void 0?void 0:s.validUntil)!==null&&o!==void 0?o:Af,relayPersistence:!0}),yield(a=c.storageManager)===null||a===void 0?void 0:a.persistChannelConfig(c.channelConfig)}catch{}})}function ok({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,ecies:r,communicationServerUrl:i=nd,instance:s}){var o,a,c,l,u,d,h,f,g,p,m;const{state:y}=s;if(ne.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(y,null,2)),t!==yl.SOCKET)throw new Error("Invalid communication protocol");y.communicationLayer=new xoe({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,transports:y.transports,communicationServerUrl:i,context:y.context,ecies:r,logging:y.logging,remote:s});let w=typeof document<"u"&&document.URL||"",b=typeof document<"u"&&document.title||"";!((o=y.dappMetadata)===null||o===void 0)&&o.url&&(w=y.dappMetadata.url),!((a=y.dappMetadata)===null||a===void 0)&&a.name&&(b=y.dappMetadata.name);const v=(d=(l=(c=y.dappMetadata)===null||c===void 0?void 0:c.name)!==null&&l!==void 0?l:(u=y.dappMetadata)===null||u===void 0?void 0:u.url)!==null&&d!==void 0?d:"N/A",C=typeof window<"u"&&window.location!==void 0&&(h=window.location.hostname)!==null&&h!==void 0?h:v,A={url:w,title:b,source:(f=y.dappMetadata)===null||f===void 0?void 0:f.source,dappId:C,anonId:y.anonId,icon:((g=y.dappMetadata)===null||g===void 0?void 0:g.iconUrl)||((p=y.dappMetadata)===null||p===void 0?void 0:p.base64Icon),platform:y.platformType,apiVersion:ml.version,connector:(m=y.dappMetadata)===null||m===void 0?void 0:m.connector};y.originatorInfo=A;const $={[de.AUTHORIZED]:Aoe(s),[de.MESSAGE]:Noe(s),[de.CHANNEL_PERSISTENCE]:Moe(s),[de.CLIENTS_CONNECTED]:$oe(s,t),[de.KEYS_EXCHANGED]:Toe(s,t),[de.SOCKET_DISCONNECTED]:Roe(s),[de.SOCKET_RECONNECT]:koe(s),[de.CLIENTS_DISCONNECTED]:Poe(s),[de.KEY_INFO]:()=>{},[de.CHANNEL_CREATED]:Ioe(s),[de.CLIENTS_WAITING]:Ooe(s),[de.RPC_UPDATE]:R=>{s.emit(de.RPC_UPDATE,R)}};for(const[R,P]of Object.entries($))try{y.communicationLayer.on(R,P)}catch{}}function ak(t){return oe(this,arguments,void 0,function*({options:e,instance:n}){const{state:r}=n;return ne.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${r.channelId}`,e),new Promise((i,s)=>{var o,a,c,l,u,d;e!=null&&e.terminate?(n.state.ready&&ec({id:(o=n.state.channelId)!==null&&o!==void 0?o:"",event:yn.TERMINATED},n.state.communicationServerUrl).catch(h=>{}),r.ready=!1,r.paused=!1,(a=r.storageManager)===null||a===void 0||a.terminate((c=r.channelId)!==null&&c!==void 0?c:""),n.state.terminated=!0,e.sendMessage?!((l=r.communicationLayer)===null||l===void 0)&&l.getKeyInfo().keysExchanged&&n.state.communicationLayer&&nk(n.state.communicationLayer,{type:tn.TERMINATE}).then(()=>{i(!0)}).catch(h=>{s(h)}):i(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=sl(),e.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,(u=r.communicationLayer)===null||u===void 0||u.disconnect(e),n.setConnectionStatus(Kn.TERMINATED)):((d=r.communicationLayer)===null||d===void 0||d.disconnect(e),n.setConnectionStatus(Kn.DISCONNECTED),i(!0))})})}(yl||(yl={})).SOCKET="socket",function(t){t.NonBrowser="nodejs",t.MetaMaskMobileWebview="in-app-browser",t.DesktopWeb="web-desktop",t.MobileWeb="web-mobile",t.ReactNative="react-native"}(gr||(gr={}));let Boe=class extends rb.EventEmitter2{constructor(e){super(),this.state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:nd,context:"",persist:!1,clientsConnected:!1,sessionDuration:Af,originatorConnectStarted:!1,debug:!1,_connectionStatus:Kn.DISCONNECTED},this._options=e;const{anonId:n,platformType:r,communicationLayerPreference:i,otherPublicKey:s,reconnect:o,walletInfo:a,dappMetadata:c,protocolVersion:l,transports:u,context:d,relayPersistence:h,ecies:f,analytics:g=!1,storage:p,sdkVersion:m,communicationServerUrl:y=nd,logging:w,autoConnect:b={timeout:voe}}=e;this.state.anonId=n,this.state.otherPublicKey=s,this.state.dappMetadata=c,this.state.walletInfo=a,this.state.transports=u,this.state.platformType=r,this.state.analytics=g,this.state.protocolVersion=l??1,this.state.isOriginator=!s,this.state.relayPersistence=h,this.state.communicationServerUrl=y,this.state.context=d,this.state.terminated=!1,this.state.sdkVersion=m,this.setMaxListeners(50),this.setConnectionStatus(Kn.DISCONNECTED),p!=null&&p.duration&&(this.state.sessionDuration=Af),this.state.storageOptions=p,this.state.autoConnectOptions=b,this.state.debug=(w==null?void 0:w.remoteLayer)===!0,(w==null?void 0:w.remoteLayer)===!0&&Kr.enable("RemoteCommunication:Layer"),(w==null?void 0:w.serviceLayer)===!0&&Kr.enable("SocketService:Layer"),(w==null?void 0:w.eciesLayer)===!0&&Kr.enable("ECIES:Layer"),(w==null?void 0:w.keyExchangeLayer)===!0&&Kr.enable("KeyExchange:Layer"),this.state.logging=w,p!=null&&p.storageManager&&(this.state.storageManager=p.storageManager),ne.RemoteCommunication(`[RemoteCommunication: constructor()] protocolVersion=${l} relayPersistence=${h} isOriginator=${this.state.isOriginator} communicationLayerPreference=${i} otherPublicKey=${s} reconnect=${o}`),this.state.isOriginator||ok({communicationLayerPreference:i,otherPublicKey:s,reconnect:o,ecies:f,communicationServerUrl:y,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return oe(this,void 0,void 0,function*(){var e;if(this.state.storageManager){const n=yield this.state.storageManager.getPersistedChannelConfig({});n&&(this.state.channelConfig=n,this.state.channelId=n.channelId,this.state.deeplinkProtocolAvailable=(e=n.deeplinkProtocolAvailable)!==null&&e!==void 0&&e,n.relayPersistence&&(this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(Kn.LINKED),yield this.connectToChannel({channelId:n.channelId})))}ok({communicationLayerPreference:yl.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this})})}originatorSessionConnect(){return oe(this,void 0,void 0,function*(){return yield function(e){return oe(this,void 0,void 0,function*(){var n;const{state:r}=e;if(!r.storageManager)return void ne.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");const i=yield r.storageManager.getPersistedChannelConfig({});if(ne.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${r.originatorConnectStarted} channelConfig`,i),(n=r.communicationLayer)===null||n===void 0?void 0:n.isConnected())return ne.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),i;if(i){if(i.validUntil>Date.now())return r.channelConfig=i,r.originatorConnectStarted=!0,r.channelId=i==null?void 0:i.channelId,r.reconnection=!0,i;ne.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired")}r.originatorConnectStarted=!1})}(this)})}generateChannelIdConnect(){return oe(this,void 0,void 0,function*(){return function(e){return oe(this,void 0,void 0,function*(){var n,r,i,s,o,a;if(!e.communicationLayer)throw new Error("communication layer not initialized");if(e.ready)throw new Error("Channel already connected");if(e.channelId&&(!((n=e.communicationLayer)===null||n===void 0)&&n.isConnected()))return e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),(r=e.storageManager)===null||r===void 0||r.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:(s=(i=e.communicationLayer)===null||i===void 0?void 0:i.getKeyInfo())===null||s===void 0?void 0:s.ecies.private,pubKey:(a=(o=e.communicationLayer)===null||o===void 0?void 0:o.getKeyInfo())===null||a===void 0?void 0:a.ecies.public};ne.RemoteCommunication("[RemoteCommunication: generateChannelId()]");const c=yield e.communicationLayer.createChannel();ne.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",c);const l=Object.assign(Object.assign({},e.channelConfig),{channelId:c.channelId,localKey:c.privKey,validUntil:Date.now()+e.sessionDuration});return e.channelId=c.channelId,e.channelConfig=l,{channelId:e.channelId,pubKey:c.pubKey,privKey:c.privKey}})}(this.state)})}clean(){return ek(this.state)}connectToChannel({channelId:e,withKeyExchange:n,authorized:r}){return function(i){return oe(this,arguments,void 0,function*({channelId:s,withKeyExchange:o,authorized:a,state:c}){var l,u,d;if(!qE(s))throw ne.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} invalid channel channelId=${s}`),new Error(`Invalid channel ${s}`);if(ne.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} channelId=${s} withKeyExchange=${o}`),(l=c.communicationLayer)===null||l===void 0?void 0:l.isConnected())return void ne.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} already connected - interrupt connection.`);c.channelId=s,yield(u=c.communicationLayer)===null||u===void 0?void 0:u.connectToChannel({channelId:s,authorized:a,withKeyExchange:o});const h=Object.assign(Object.assign({},c.channelConfig),{channelId:s,validUntil:Date.now()+c.sessionDuration});c.channelConfig=h,(d=c.storageManager)===null||d===void 0||d.persistChannelConfig(h)})}({channelId:e,authorized:r,withKeyExchange:n,state:this.state})}sendMessage(e){return oe(this,void 0,void 0,function*(){const n=this.state.isOriginator&&e.method&&i1(e.method);n&&mn.analytics.track("sdk_action_requested",{action:e.method});try{return yield function(r,i){return oe(this,void 0,void 0,function*(){var s,o;const{state:a}=r;ne.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context} paused=${a.paused} ready=${a.ready} relayPersistence=${a.relayPersistence} authorized=${a.authorized} socket=${(s=a.communicationLayer)===null||s===void 0?void 0:s.isConnected()} clientsConnected=${a.clientsConnected} status=${a._connectionStatus}`,i),a.relayPersistence||a.ready&&(!((o=a.communicationLayer)===null||o===void 0)&&o.isConnected())&&a.clientsConnected||(ne.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise(c=>{r.once(de.CLIENTS_READY,c)}),ne.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${a.context}  AFTER SKIP / READY -- sending pending message`));try{return yield function(l,u){return oe(this,void 0,void 0,function*(){return new Promise(d=>{var h;const{state:f}=l;ne.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${f.context} ready=${f.ready} authorized=${f.authorized} method=${u.method}`),!f.isOriginator||f.authorized||f.relayPersistence?(h=f.communicationLayer)===null||h===void 0||h.sendMessage(u).then(g=>{d(g)}).catch(g=>{d(!1)}):l.once(de.AUTHORIZED,()=>{var g;ne.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${f.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),(g=f.communicationLayer)===null||g===void 0||g.sendMessage(u).then(p=>{d(p)}).catch(p=>{d(!1)})})})})}(r,i)}catch(c){throw c}})}(this,e)}catch(r){throw n&&mn.analytics.track("sdk_action_failed",{action:e.method}),r}})}testStorage(){return oe(this,void 0,void 0,function*(){return function(e){return oe(this,void 0,void 0,function*(){var n;const r=yield(n=e.storageManager)===null||n===void 0?void 0:n.getPersistedChannelConfig();ne.RemoteCommunication("[RemoteCommunication: testStorage()] res",r)})}(this.state)})}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return oe(this,void 0,void 0,function*(){var e;ne.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.ping()})}testLogger(){ne.RemoteCommunication(`testLogger() channel=${this.state.channelId}`),ne.SocketService(`testLogger() channel=${this.state.channelId}`),ne.Ecies(`testLogger() channel=${this.state.channelId}`),ne.KeyExchange(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var e;ne.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),(e=this.state.communicationLayer)===null||e===void 0||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(de.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(e={}){this.emit(de.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getKeyInfo()}resetKeys(){var e;(e=this.state.communicationLayer)===null||e===void 0||e.resetKeys()}setOtherPublicKey(e){var n;const r=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange();if(!r)throw new Error("KeyExchange is not initialized.");r.getOtherPublicKey()!==e&&r.setOtherPublicKey(e)}pause(){return oe(this,void 0,void 0,function*(){var e;ne.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.pause(),this.setConnectionStatus(Kn.PAUSED)})}getVersion(){return ml.version}hasRelayPersistence(){var e;return(e=this.state.relayPersistence)!==null&&e!==void 0&&e}resume(){return oe(this,void 0,void 0,function*(){return function(e){return oe(this,void 0,void 0,function*(){var n;const{state:r}=e;ne.RemoteCommunication(`[RemoteCommunication: resume()] channel=${r.channelId}`),yield(n=r.communicationLayer)===null||n===void 0?void 0:n.resume(),e.setConnectionStatus(Kn.LINKED)})}(this)})}encrypt(e){var n,r,i;const s=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange(),o=s==null?void 0:s.getOtherPublicKey();if(!o)throw new Error("KeyExchange not completed");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.encrypt(e,o)}decrypt(e){var n,r,i;if(!(!((n=this.state.communicationLayer)===null||n===void 0)&&n.state.eciesInstance))throw new Error("ECIES instance is not initialized");return(i=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||i===void 0?void 0:i.decrypt(e)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getRPCMethodTracker()}reject({channelId:e}){return function(n){return oe(this,arguments,void 0,function*({channelId:r,state:i}){var s,o,a;if(!qE(r))throw ne.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} invalid channel channelId=${r}`),new Error(`Invalid channel ${r}`);if(i.isOriginator)return void ne.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} isOriginator=${i.isOriginator} channelId=${r}`);const{socket:c}=(o=(s=i.communicationLayer)===null||s===void 0?void 0:s.state)!==null&&o!==void 0?o:{};c!=null&&c.connected||(ne.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket already connected`),c==null||c.connect()),ec(Object.assign(Object.assign({id:r,event:yn.REJECTED},i.originatorInfo),{sdkVersion:i.sdkVersion,commLayerVersion:ml.version,walletVersion:(a=i.walletInfo)===null||a===void 0?void 0:a.version}),i.communicationServerUrl).catch(l=>{}),yield new Promise((l,u)=>{c==null||c.emit(de.REJECTED,{channelId:r},(d,h)=>{ne.RemoteCommunication(`[RemoteCommunication: reject()] context=${i.context} socket=${c==null?void 0:c.id}`,{error:d,response:h}),d?u(d):l(h)})})})}({channelId:e,state:this.state})}disconnect(e){return oe(this,void 0,void 0,function*(){return ak({options:e,instance:this})})}};(function(t){t.RENEW="renew",t.LINK="link"})(sk||(sk={}));var Doe="ERC721",Loe="ERC1155",dn={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:t=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${t} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:t=>`'args.logger' must include required method '${t}'.`},info:{connected:t=>`MetaMask: Connected to chain with ID "${t}".`},warnings:{chainIdDeprecation:`MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,networkVersionDeprecation:`MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,selectedAddressDeprecation:`MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,enableDeprecation:`MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1102`,sendDeprecation:`MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,events:{close:`MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect`,data:`MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`,networkChanged:`MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged`,notification:`MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`},rpc:{ethDecryptDeprecation:`MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,ethGetEncryptionPublicKeyDeprecation:`MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,walletWatchAssetNFTExperimental:`MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle`},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};function joe(t){const e={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(n,r,i)=>{var s;e.ethDecryptDeprecation||n.method!=="eth_decrypt"?e.ethGetEncryptionPublicKeyDeprecation||n.method!=="eth_getEncryptionPublicKey"?!e.walletWatchAssetNFTExperimental&&n.method==="wallet_watchAsset"&&[Doe,Loe].includes(((s=n.params)==null?void 0:s.type)||"")&&(t.warn(dn.warnings.rpc.walletWatchAssetNFTExperimental),e.walletWatchAssetNFTExperimental=!0):(t.warn(dn.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),e.ethGetEncryptionPublicKeyDeprecation=!0):(t.warn(dn.warnings.rpc.ethDecryptDeprecation),e.ethDecryptDeprecation=!0),i()}}var ck=4294967295,lk=Math.floor(Math.random()*ck);function Uoe(){return(t,e,n,r)=>{const i=t.id,s=lk=(lk+1)%ck;t.id=s,e.id=s,n(o=>{t.id=i,e.id=i,o()})}}var V8=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},wl=(t,e,n)=>(V8(t,e,"read from private field"),n?n.call(t):e.get(t)),lo=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Kb=(t,e,n,r)=>(V8(t,e,"write to private field"),e.set(t,n),n),Yr=(t,e,n)=>(V8(t,e,"access private method"),n),bl={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},uk={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function dk(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}var Vb=(t,e)=>Object.hasOwnProperty.call(t,e);let Foe=class extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}};function tc(t){return typeof t=="object"&&t!=null}function Zo(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function zoe(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Zo(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:c}}function*hk(t,e,n,r){(function(i){return tc(i)&&typeof i[Symbol.iterator]=="function"})(t)||(t=[t]);for(const i of t){const s=zoe(i,e,n,r);s&&(yield s)}}function*G8(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i};if(s&&(t=e.coercer(t,a),o&&e.type!=="type"&&tc(e.schema)&&tc(t)&&!Array.isArray(t)))for(const l in t)e.schema[l]===void 0&&delete t[l];let c="valid";for(const l of e.validator(t,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,d]of e.entries(t,a)){const h=G8(u,d,{path:l===void 0?r:[...r,l],branch:l===void 0?i:[...i,u],coerce:s,mask:o,message:n.message});for(const f of h)f[0]?(c=f[0].refinement!=null?"not_refined":"not_valid",yield[f[0],void 0]):s&&(u=f[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):tc(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}let uo=class{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,this.validator=i?(c,l)=>hk(i(c,l),l,this,c):()=>[],this.refiner=s?(c,l)=>hk(s(c,l),l,this,c):()=>[]}assert(e,n){return fk(e,this,n)}create(e,n){return pk(e,this,n)}is(e){return Of(e,this)}mask(e,n){return function(r,i,s){const o=s1(r,i,{coerce:!0,mask:!0,message:s});if(o[0])throw o[0];return o[1]}(e,this,n)}validate(e,n={}){return s1(e,this,n)}};function fk(t,e,n){const r=s1(t,e,{message:n});if(r[0])throw r[0]}function pk(t,e,n){const r=s1(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Of(t,e){return!s1(t,e)[0]}function s1(t,e,n={}){const r=G8(t,e,n),i=function(s){const{done:o,value:a}=s.next();return o?void 0:a}(r);return i[0]?[new Foe(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function vl(t,e){return new uo({type:t,schema:null,validator:e})}function gk(t){let e;return new uo({type:"lazy",schema:null,*entries(n,r){e??(e=t()),yield*e.entries(n,r)},validator:(n,r)=>(e??(e=t()),e.validator(n,r)),coercer:(n,r)=>(e??(e=t()),e.coercer(n,r)),refiner:(n,r)=>(e??(e=t()),e.refiner(n,r))})}function mk(t){return new uo({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${Zo(e)}`})}function yk(t){const e=Zo(t),n=typeof t;return new uo({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${Zo(r)}`})}function wk(){return vl("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Zo(t)}`)}function bk(t){const e=t?Object.keys(t):[],n=vl("never",()=>!1);return new uo({type:"object",schema:t||null,*entries(r){if(t&&tc(r)){const i=new Set(Object.keys(r));for(const s of e)i.delete(s),yield[s,r[s],t[s]];for(const s of i)yield[s,r[s],n]}},validator:r=>tc(r)||`Expected an object, but received: ${Zo(r)}`,coercer:r=>tc(r)?{...r}:r})}function vk(t){return new uo({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function Ek(t,e){return new uo({type:"record",schema:null,*entries(n){if(tc(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator:n=>tc(n)||`Expected an object, but received: ${Zo(n)}`})}function El(){return vl("string",t=>typeof t=="string"||`Expected a string, but received: ${Zo(t)}`)}function Gb(t){const e=t.map(n=>n.type).join(" | ");return new uo({type:"union",schema:null,coercer(n){for(const r of t){const[i,s]=r.validate(n,{coerce:!0});if(!i)return s}return n},validator(n,r){const i=[];for(const s of t){const[...o]=G8(n,s,r),[a]=o;if(!a[0])return[];for(const[c]of o)c&&i.push(c)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Zo(n)}`,...i]}})}function qoe(t){return function(e){return function(n){return typeof n=="object"&&n!==null&&"message"in n}(e)&&typeof e.message=="string"?e.message:e==null?"":String(e)}(t).replace(/\.$/u,"")}function Hoe(t,e){var r,i;return n=t,typeof((i=(r=n==null?void 0:n.prototype)==null?void 0:r.constructor)==null?void 0:i.name)=="string"?new t({message:e}):t({message:e});var n}var Woe=class extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}};function Ck(){throw new Error("setTimeout has not been defined")}function _k(){throw new Error("clearTimeout has not been defined")}var Cl=Ck,_l=_k;function Sk(t){if(Cl===setTimeout)return setTimeout(t,0);if((Cl===Ck||!Cl)&&setTimeout)return Cl=setTimeout,setTimeout(t,0);try{return Cl(t,0)}catch{try{return Cl.call(null,t,0)}catch{return Cl.call(this,t,0)}}}typeof Vr.setTimeout=="function"&&(Cl=setTimeout),typeof Vr.clearTimeout=="function"&&(_l=clearTimeout);var rd,nc=[],Tf=!1,Zb=-1;function Koe(){Tf&&rd&&(Tf=!1,rd.length?nc=rd.concat(nc):Zb=-1,nc.length&&xk())}function xk(){if(!Tf){var t=Sk(Koe);Tf=!0;for(var e=nc.length;e;){for(rd=nc,nc=[];++Zb<e;)rd&&rd[Zb].run();Zb=-1,e=nc.length}rd=null,Tf=!1,function(n){if(_l===clearTimeout)return clearTimeout(n);if((_l===_k||!_l)&&clearTimeout)return _l=clearTimeout,clearTimeout(n);try{return _l(n)}catch{try{return _l.call(null,n)}catch{return _l.call(this,n)}}}(t)}}function Ak(t,e){this.fun=t,this.array=e}Ak.prototype.run=function(){this.fun.apply(null,this.array)};function id(){}var Voe=id,Goe=id,Zoe=id,Yoe=id,Joe=id,Qoe=id,Xoe=id,Nf=Vr.performance||{},eae=Nf.now||Nf.mozNow||Nf.msNow||Nf.oNow||Nf.webkitNow||function(){return new Date().getTime()},tae=new Date,ft={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];nc.push(new Ak(t,e)),nc.length!==1||Tf||Sk(xk)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Voe,addListener:Goe,once:Zoe,off:Yoe,removeListener:Joe,removeAllListeners:Qoe,emit:Xoe,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*eae.call(Nf),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-tae)/1e3}},o1=t=>bk(t);function Ik({path:t,branch:e}){const n=t[t.length-1];return Vb(e[e.length-2],n)}function Yb(t){return new uo({...t,type:`optional ${t.type}`,validator:(e,n)=>!Ik(n)||t.validator(e,n),refiner:(e,n)=>!Ik(n)||t.refiner(e,n)})}var Jb,$k,Pk,Qb=Gb([yk(null),vl("boolean",t=>typeof t=="boolean"),vl("finite number",t=>Of(t,wk())&&Number.isFinite(t)),El(),mk(gk(()=>Qb)),Ek(El(),gk(()=>Qb))]),a1=(Jb=Qb,$k=vl("any",()=>!0),Pk=t=>(function(e,n,r="Assertion failed",i=Woe){try{fk(e,n)}catch(s){throw Hoe(i,`${r}: ${qoe(s)}.`)}}(t,Qb),JSON.parse(JSON.stringify(t,(e,n)=>{if(e!=="__proto__"&&e!=="constructor")return n}))),new uo({...Jb,coercer:(t,e)=>Of(t,$k)?Jb.coercer(Pk(t,e),e):Jb.coercer(t,e)}));function Z8(t){try{return function(e){pk(e,a1)}(t),!0}catch{return!1}}var c1=yk("2.0"),Xb=function(t){return new uo({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}(Gb([wk(),El()])),Y8=o1({code:vl("integer",t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${Zo(t)}`),message:El(),data:Yb(a1),stack:Yb(El())}),Ok=Gb([Ek(El(),a1),mk(a1)]),nae=o1({id:Xb,jsonrpc:c1,method:El(),params:Yb(Ok)}),rae=o1({jsonrpc:c1,method:El(),params:Yb(Ok)});function Tk(t){return Of(t,nae)}function Nk(t){return Of(t,Y8)}bk({id:Xb,jsonrpc:c1,result:vk(vl("unknown",()=>!0)),error:vk(Y8)}),Gb([o1({id:Xb,jsonrpc:c1,result:a1}),o1({id:Xb,jsonrpc:c1,error:Y8})]);var kk=bl.internal,iae="Unspecified error message. This is a bug, please report it.",sae={code:kk,message:Rk(kk)},oae="Unspecified server error.";function Rk(t,e=iae){if(function(n){return Number.isInteger(n)}(t)){const n=t.toString();if(Vb(uk,n))return uk[n].message;if(function(r){return r>=-32099&&r<=-32e3}(t))return oae}return e}function Mk(t,{fallbackError:e=sae,shouldIncludeStack:n=!0}={}){if(!Nk(e))throw new Error("Must provide fallback error with integer number code and string message.");const r=function(i,s){if(i&&typeof i=="object"&&"serialize"in i&&typeof i.serialize=="function")return i.serialize();if(Nk(i))return i;const o=Bk(i);return{...s,data:{cause:o}}}(t,e);return n||delete r.stack,r}function Bk(t){return Array.isArray(t)?t.map(e=>Z8(e)?e:dk(e)?Dk(e):null):dk(t)?Dk(t):Z8(t)?t:null}function Dk(t){return Object.getOwnPropertyNames(t).reduce((e,n)=>{const r=t[n];return Z8(r)&&(e[n]=r),e},{})}var Lk=l1;l1.default=l1,l1.stable=Fk,l1.stableStringify=Fk;var ev="[...]",jk="[Circular]",sd=[],od=[];function Uk(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function l1(t,e,n,r){var i;r===void 0&&(r=Uk()),J8(t,"",0,[],void 0,0,r);try{i=od.length===0?JSON.stringify(t,e,n):JSON.stringify(t,zk(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;sd.length!==0;){var s=sd.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function kf(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),sd.push([r,n,e,i])):od.push([e,n,t]):(r[n]=t,sd.push([r,n,e]))}function J8(t,e,n,r,i,s,o){var a;if(s+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void kf(jk,t,e,i);if(o.depthLimit!==void 0&&s>o.depthLimit||o.edgesLimit!==void 0&&n+1>o.edgesLimit)return void kf(ev,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)J8(t[a],a,a,r,t,s,o);else{var c=Object.keys(t);for(a=0;a<c.length;a++){var l=c[a];J8(t[l],l,a,r,t,s,o)}}r.pop()}}function aae(t,e){return t<e?-1:t>e?1:0}function Fk(t,e,n,r){r===void 0&&(r=Uk());var i,s=Q8(t,"",0,[],void 0,0,r)||t;try{i=od.length===0?JSON.stringify(s,e,n):JSON.stringify(s,zk(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;sd.length!==0;){var o=sd.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Q8(t,e,n,r,i,s,o){var a;if(s+=1,typeof t=="object"&&t!==null){for(a=0;a<r.length;a++)if(r[a]===t)return void kf(jk,t,e,i);try{if(typeof t.toJSON=="function")return}catch{return}if(o.depthLimit!==void 0&&s>o.depthLimit||o.edgesLimit!==void 0&&n+1>o.edgesLimit)return void kf(ev,t,e,i);if(r.push(t),Array.isArray(t))for(a=0;a<t.length;a++)Q8(t[a],a,a,r,t,s,o);else{var c={},l=Object.keys(t).sort(aae);for(a=0;a<l.length;a++){var u=l[a];Q8(t[u],u,a,r,t,s,o),c[u]=t[u]}if(i===void 0)return c;sd.push([i,e,t]),i[e]=c}r.pop()}}function zk(t){return t=t!==void 0?t:function(e,n){return n},function(e,n){if(od.length>0)for(var r=0;r<od.length;r++){var i=od[r];if(i[1]===e&&i[0]===n){n=i[2],od.splice(r,1);break}}return t.call(this,e,n)}}var cae=bb(Lk),rc=class extends Error{constructor(t,e,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!e||typeof e!="string")throw new Error('"message" must be a non-empty string.');super(e),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data,function(e){if(typeof e!="object"||e===null)return!1;try{let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}catch{return!1}}(this.data)&&(t.data.cause=Bk(this.data.cause))),this.stack&&(t.stack=this.stack),t}toString(){return cae(this.serialize(),lae,2)}};function lae(t,e){if(e!=="[Circular]")return e}var u1=t=>uae(bl.invalidRequest,t);function uae(t,e){const[n,r]=function(i){if(i){if(typeof i=="string")return[i];if(typeof i=="object"&&!Array.isArray(i)){const{message:s,data:o}=i;if(s&&typeof s!="string")throw new Error("Must specify string message.");return[s??void 0,o]}}return[]}(e);return new rc(t,n??Rk(t),r)}var qk={};function Sl(){}function It(){It.init.call(this)}function Hk(t){return t._maxListeners===void 0?It.defaultMaxListeners:t._maxListeners}function Wk(t,e,n,r){var i,s,o;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]):(s=t._events=new Sl,t._eventsCount=0),o){if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=Hk(t))&&i>0&&o.length>i){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,function(c){typeof console.warn=="function"?console.warn(c):console.log(c)}(a)}}else o=s[e]=n,++t._eventsCount;return t}function Kk(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function Vk(t){var e=this._events;if(e){var n=e[t];if(typeof n=="function")return 1;if(n)return n.length}return 0}function d1(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}Sl.prototype=Object.create(null),It.EventEmitter=It,It.usingDomains=!1,It.prototype.domain=void 0,It.prototype._events=void 0,It.prototype._maxListeners=void 0,It.defaultMaxListeners=10,It.init=function(){this.domain=null,It.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Sl,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},It.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},It.prototype.getMaxListeners=function(){return Hk(this)},It.prototype.emit=function(t){var e,n,r,i,s,o,a,c=t==="error";if(o=this._events)c=c&&o.error==null;else if(!c)return!1;if(a=this.domain,c){if(e=arguments[1],!a){if(e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=a,e.domainThrown=!1,a.emit("error",e),!1}if(!(n=o[t]))return!1;var u=typeof n=="function";switch(r=arguments.length){case 1:(function(d,h,f){if(h)d.call(f);else for(var g=d.length,p=d1(d,g),m=0;m<g;++m)p[m].call(f)})(n,u,this);break;case 2:(function(d,h,f,g){if(h)d.call(f,g);else for(var p=d.length,m=d1(d,p),y=0;y<p;++y)m[y].call(f,g)})(n,u,this,arguments[1]);break;case 3:(function(d,h,f,g,p){if(h)d.call(f,g,p);else for(var m=d.length,y=d1(d,m),w=0;w<m;++w)y[w].call(f,g,p)})(n,u,this,arguments[1],arguments[2]);break;case 4:(function(d,h,f,g,p,m){if(h)d.call(f,g,p,m);else for(var y=d.length,w=d1(d,y),b=0;b<y;++b)w[b].call(f,g,p,m)})(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];(function(d,h,f,g){if(h)d.apply(f,g);else for(var p=d.length,m=d1(d,p),y=0;y<p;++y)m[y].apply(f,g)})(n,u,this,i)}return!0},It.prototype.addListener=function(t,e){return Wk(this,t,e,!1)},It.prototype.on=It.prototype.addListener,It.prototype.prependListener=function(t,e){return Wk(this,t,e,!0)},It.prototype.once=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,Kk(this,t,e)),this},It.prototype.prependOnceListener=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Kk(this,t,e)),this},It.prototype.removeListener=function(t,e){var n,r,i,s,o;if(typeof e!="function")throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)--this._eventsCount==0?this._events=new Sl:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,s=n.length;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount==0)return this._events=new Sl,this;delete r[t]}else(function(a,c){for(var l=c,u=l+1,d=a.length;u<d;l+=1,u+=1)a[l]=a[u];a.pop()})(n,i);r.removeListener&&this.emit("removeListener",t,o||e)}return this},It.prototype.off=function(t,e){return this.removeListener(t,e)},It.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return arguments.length===0?(this._events=new Sl,this._eventsCount=0):n[t]&&(--this._eventsCount==0?this._events=new Sl:delete n[t]),this;if(arguments.length===0){for(var r,i=Object.keys(n),s=0;s<i.length;++s)(r=i[s])!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Sl,this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e)do this.removeListener(t,e[e.length-1]);while(e[0]);return this},It.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?typeof e=="function"?[e.listener||e]:function(i){for(var s=new Array(i.length),o=0;o<s.length;++o)s[o]=i[o].listener||i[o];return s}(e):[],n},It.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Vk.call(t,e)},It.prototype.listenerCount=Vk,It.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var X8=Kg(Object.freeze({__proto__:null,EventEmitter:It,default:It}));Object.defineProperty(qk,"__esModule",{value:!0});const dae=X8;function Gk(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}let hae=class extends dae.EventEmitter{emit(e,...n){let r=e==="error";const i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){let o;if(n.length>0&&([o]=n),o instanceof Error)throw o;const a=new Error("Unhandled error."+(o?` (${o.message})`:""));throw a.context=o,a}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")Gk(s,this,n);else{const o=s.length,a=function(c){const l=c.length,u=new Array(l);for(let d=0;d<l;d+=1)u[d]=c[d];return u}(s);for(let c=0;c<o;c+=1)Gk(a[c],this,n)}return!0}};var tv,xl,Rf,h1,nv,rv,e4,iv,t4,n4,Zk,sv,r4,i4,Yk,f1,ov,s4,Jk,Qk=qk.default=hae,ho=class h3 extends Qk{constructor({notificationHandler:e}={}){super(),lo(this,h1),lo(this,rv),lo(this,iv),lo(this,tv,!1),lo(this,xl,void 0),lo(this,Rf,void 0),Kb(this,xl,[]),Kb(this,Rf,e)}destroy(){wl(this,xl).forEach(e=>{"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}),Kb(this,xl,[]),Kb(this,tv,!0)}push(e){Yr(this,h1,nv).call(this),wl(this,xl).push(e)}handle(e,n){if(Yr(this,h1,nv).call(this),n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?n?Yr(this,rv,e4).call(this,e,n):Yr(this,rv,e4).call(this,e):n?Yr(this,iv,t4).call(this,e,n):this._promiseHandle(e)}asMiddleware(){return Yr(this,h1,nv).call(this),async(e,n,r,i)=>{var s,o;try{const[a,c,l]=await Yr(s=h3,sv,r4).call(s,e,n,wl(this,xl));return c?(await Yr(o=h3,f1,ov).call(o,l),i(a)):r(async u=>{var d;try{await Yr(d=h3,f1,ov).call(d,l)}catch(h){return u(h)}return u()})}catch(a){return i(a)}}}async _promiseHandle(e){return new Promise((n,r)=>{Yr(this,iv,t4).call(this,e,(i,s)=>{i&&s===void 0?r(i):n(s)}).catch(r)})}};tv=new WeakMap,xl=new WeakMap,Rf=new WeakMap,h1=new WeakSet,nv=function(){if(wl(this,tv))throw new Error("This engine is destroyed and can no longer be used.")},rv=new WeakSet,e4=async function(t,e){try{if(t.length===0){const r=[{id:null,jsonrpc:"2.0",error:new rc(bl.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return e?e(null,r):r}const n=(await Promise.all(t.map(this._promiseHandle.bind(this)))).filter(r=>r!==void 0);return e?e(null,n):n}catch(n){if(e)return e(n);throw n}},iv=new WeakSet,t4=async function(t,e){var n;if(!t||Array.isArray(t)||typeof t!="object"){const o=new rc(bl.invalidRequest,"Requests must be plain objects. Received: "+typeof t,{request:t});return e(o,{id:null,jsonrpc:"2.0",error:o})}if(typeof t.method!="string"){const o=new rc(bl.invalidRequest,"Must specify a string method. Received: "+typeof t.method,{request:t});return wl(this,Rf)&&!Tk(t)?e(null):e(o,{id:t.id??null,jsonrpc:"2.0",error:o})}if(wl(this,Rf)&&Of(t,rae)&&!Tk(t)){try{await wl(this,Rf).call(this,t)}catch(o){return e(o)}return e(null)}let r=null;const i={...t},s={id:i.id,jsonrpc:i.jsonrpc};try{await Yr(n=ho,n4,Zk).call(n,i,s,wl(this,xl))}catch(o){r=o}return r&&(delete s.result,s.error||(s.error=Mk(r))),e(r,s)},n4=new WeakSet,Zk=async function(t,e,n){var r,i,s;const[o,a,c]=await Yr(r=ho,sv,r4).call(r,t,e,n);if(Yr(i=ho,s4,Jk).call(i,t,e,a),await Yr(s=ho,f1,ov).call(s,c),o)throw o},sv=new WeakSet,r4=async function(t,e,n){var r;const i=[];let s=null,o=!1;for(const a of n)if([s,o]=await Yr(r=ho,i4,Yk).call(r,t,e,a,i),o)break;return[s,o,i.reverse()]},i4=new WeakSet,Yk=async function(t,e,n,r){return new Promise(i=>{const s=a=>{const c=a||e.error;c&&(e.error=Mk(c)),i([c,!0])},o=a=>{e.error?s(e.error):(a&&(typeof a!="function"&&s(new rc(bl.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof a}" for request:
${o4(t)}`,{request:t})),r.push(a)),i([null,!1]))};try{n(t,e,o,s)}catch(a){s(a)}})},f1=new WeakSet,ov=async function(t){for(const e of t)await new Promise((n,r)=>{e(i=>i?r(i):n())})},s4=new WeakSet,Jk=function(t,e,n){if(!Vb(e,"result")&&!Vb(e,"error"))throw new rc(bl.internal,`JsonRpcEngine: Response has no error or result for request:
${o4(t)}`,{request:t});if(!n)throw new rc(bl.internal,`JsonRpcEngine: Nothing ended request:
${o4(t)}`,{request:t})},lo(ho,n4),lo(ho,sv),lo(ho,i4),lo(ho,f1),lo(ho,s4);var fae=ho;function o4(t){return JSON.stringify(t,null,2)}var Xk=Object.freeze(["eth_subscription"]),pae=(t=console)=>[Uoe(),gae(t),joe(t)];function gae(t){return(e,n,r)=>{typeof e.method=="string"&&e.method||(n.error=u1({message:"The request 'method' must be a non-empty string.",data:e})),r(i=>{const{error:s}=n;return s&&t.error(`MetaMask - RPC Error: ${s.message}`,s),i()})}}var av=(t,e,n=!0)=>(r,i)=>{r||i.error?e(r||i.error):!n||Array.isArray(i)?t(i):t(i.result)},eR=t=>!!t&&typeof t=="string"&&t.startsWith("0x"),tR=()=>{};async function nR(t,e){try{const n=await async function(){return{name:mae(window),icon:await yae(window)}}();t.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:n},tR)}catch(n){e.error({message:dn.errors.sendSiteMetadata(),originalError:n})}}function mae(t){const{document:e}=t,n=e.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=e.querySelector('head > meta[name="title"]');return r?r.content:e.title&&e.title.length>0?e.title:window.location.hostname}async function yae(t){const{document:e}=t,n=e.querySelectorAll('head > link[rel~="icon"]');for(const r of Array.from(n))if(r&&await wae(r.href))return r.href;return null}async function wae(t){return new Promise((e,n)=>{try{const r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=t}catch(r){n(r)}})}var rR=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Yo=(t,e,n)=>(rR(t,e,"read from private field"),n?n.call(t):e.get(t)),a4=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ic=(t,e,n,r)=>(rR(t,e,"write to private field"),e.set(t,n),n);function iR(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}let bae=class extends It{emit(e,...n){let r=e==="error";const i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){let o;if(n.length>0&&([o]=n),o instanceof Error)throw o;const a=new Error("Unhandled error."+(o?` (${o.message})`:""));throw a.context=o,a}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")iR(s,this,n);else{const o=s.length,a=function(c){const l=c.length,u=new Array(l);for(let d=0;d<l;d+=1)u[d]=c[d];return u}(s);for(let c=0;c<o;c+=1)iR(a[c],this,n)}return!0}};var Al,ad,vae=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;i--!=0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(s=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;i--!=0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!=0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!=e&&n!=n},Eae=bb(vae),sR=class yV extends bae{constructor({logger:e=console,maxEventListeners:n=100,rpcMiddleware:r=[]}={}){super(),a4(this,Al,void 0),a4(this,ad,void 0),this._log=e,this.setMaxListeners(n),this._state={...yV._defaultState},ic(this,ad,null),ic(this,Al,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);const i=new fae;r.forEach(s=>i.push(s)),this._rpcEngine=i}get chainId(){return Yo(this,Al)}get selectedAddress(){return Yo(this,ad)}isConnected(){return this._state.isConnected}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw u1({message:dn.errors.invalidRequestArgs(),data:e});const{method:n,params:r}=e;if(typeof n!="string"||n.length===0)throw u1({message:dn.errors.invalidRequestMethod(),data:e});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw u1({message:dn.errors.invalidRequestParams(),data:e});const i=r==null?{method:n}:{method:n,params:r};return new Promise((s,o)=>{this._rpcRequest(i,av(s,o))})}_initializeState(e){if(this._state.initialized)throw new Error("Provider already initialized.");if(e){const{accounts:n,chainId:r,isUnlocked:i,networkVersion:s}=e;this._handleConnect(r),this._handleChainChanged({chainId:r,networkVersion:s}),this._handleUnlockStateChanged({accounts:n,isUnlocked:i}),this._handleAccountsChanged(n)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,n){let r=n;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),e.method!=="eth_accounts"&&e.method!=="eth_requestAccounts"||(r=(i,s)=>{this._handleAccountsChanged(s.result??[],e.method==="eth_accounts"),n(i,s)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(dn.info.connected(e)))}_handleDisconnect(e,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new rc(1013,n??dn.errors.disconnected()),this._log.debug(r)):(r=new rc(1011,n??dn.errors.permanentlyDisconnected()),this._log.error(r),ic(this,Al,null),this._state.accounts=null,ic(this,ad,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleChainChanged({chainId:e}={}){eR(e)?(this._handleConnect(e),e!==Yo(this,Al)&&(ic(this,Al,e),this._state.initialized&&this.emit("chainChanged",Yo(this,Al)))):this._log.error(dn.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e,n=!1){let r=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]);for(const i of e)if(typeof i!="string"){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}if(!Eae(this._state.accounts,r)&&(n&&this._state.accounts!==null&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,Yo(this,ad)!==r[0]&&ic(this,ad,r[0]||null),this._state.initialized)){const i=[...r];this.emit("accountsChanged",i)}}_handleUnlockStateChanged({accounts:e,isUnlocked:n}={}){typeof n=="boolean"?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(e??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};Al=new WeakMap,ad=new WeakMap,sR._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var c4,Cae=sR,l4={exports:{}},oR=X8.EventEmitter,u4=Kg(Dse);c4=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t};var aR=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},_ae=/%[sdj%]/g;function cv(t){if(!g1(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(Jo(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(_ae,function(a){if(a==="%%")return"%";if(n>=i)return a;switch(a){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return a}}),o=r[n];n<i;o=r[++n])p1(o)||!cd(o)?s+=" "+o:s+=" "+Jo(o);return s}function d4(t,e){if(Qo(Vr.process))return function(){return d4(t,e).apply(this,arguments)};if(ft.noDeprecation===!0)return t;var n=!1;return function(){if(!n){if(ft.throwDeprecation)throw new Error(e);ft.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var h4,lv={};function cR(t){return Qo(h4)&&(h4=ft.env.NODE_DEBUG||""),t=t.toUpperCase(),!lv[t]&&(new RegExp("\\b"+t+"\\b","i").test(h4)?lv[t]=function(){var e=cv.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:lv[t]=function(){}),lv[t]}function Jo(t,e){var n={seen:[],stylize:xae};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),dv(e)?n.showHidden=e:e&&b4(n,e),Qo(n.showHidden)&&(n.showHidden=!1),Qo(n.depth)&&(n.depth=2),Qo(n.colors)&&(n.colors=!1),Qo(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Sae),uv(n,t,n.depth)}function Sae(t,e){var n=Jo.styles[e];return n?"\x1B["+Jo.colors[n][0]+"m"+t+"\x1B["+Jo.colors[n][1]+"m":t}function xae(t,e){return t}function uv(t,e,n){if(t.customInspect&&e&&w1(e.inspect)&&e.inspect!==Jo&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return g1(r)||(r=uv(t,r,n)),r}var i=function(h,f){if(Qo(f))return h.stylize("undefined","undefined");if(g1(f)){var g="'"+JSON.stringify(f).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return h.stylize(g,"string")}if(m4(f))return h.stylize(""+f,"number");if(dv(f))return h.stylize(""+f,"boolean");if(p1(f))return h.stylize("null","null")}(t,e);if(i)return i;var s=Object.keys(e),o=function(h){var f={};return h.forEach(function(g,p){f[g]=!0}),f}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),y1(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f4(e);if(s.length===0){if(w1(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(m1(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(hv(e))return t.stylize(Date.prototype.toString.call(e),"date");if(y1(e))return f4(e)}var c,l="",u=!1,d=["{","}"];return g4(e)&&(u=!0,d=["[","]"]),w1(e)&&(l=" [Function"+(e.name?": "+e.name:"")+"]"),m1(e)&&(l=" "+RegExp.prototype.toString.call(e)),hv(e)&&(l=" "+Date.prototype.toUTCString.call(e)),y1(e)&&(l=" "+f4(e)),s.length!==0||u&&e.length!=0?n<0?m1(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=u?function(h,f,g,p,m){for(var y=[],w=0,b=f.length;w<b;++w)pR(f,String(w))?y.push(p4(h,f,g,p,String(w),!0)):y.push("");return m.forEach(function(v){v.match(/^\d+$/)||y.push(p4(h,f,g,p,v,!0))}),y}(t,e,n,o,s):s.map(function(h){return p4(t,e,n,o,h,u)}),t.seen.pop(),function(h,f,g){var p=h.reduce(function(m,y){return y.indexOf(`
`),m+y.replace(/\u001b\[\d\d?m/g,"").length+1},0);return p>60?g[0]+(f===""?"":f+`
 `)+" "+h.join(`,
  `)+" "+g[1]:g[0]+f+" "+h.join(", ")+" "+g[1]}(c,l,d)):d[0]+l+d[1]}function f4(t){return"["+Error.prototype.toString.call(t)+"]"}function p4(t,e,n,r,i,s){var o,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),pR(r,i)||(o="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=p1(n)?uv(t,c.value,null):uv(t,c.value,n-1)).indexOf(`
`)>-1&&(a=s?a.split(`
`).map(function(l){return"  "+l}).join(`
`).substr(2):`
`+a.split(`
`).map(function(l){return"   "+l}).join(`
`)):a=t.stylize("[Circular]","special")),Qo(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function g4(t){return Array.isArray(t)}function dv(t){return typeof t=="boolean"}function p1(t){return t===null}function lR(t){return t==null}function m4(t){return typeof t=="number"}function g1(t){return typeof t=="string"}function uR(t){return typeof t=="symbol"}function Qo(t){return t===void 0}function m1(t){return cd(t)&&y4(t)==="[object RegExp]"}function cd(t){return typeof t=="object"&&t!==null}function hv(t){return cd(t)&&y4(t)==="[object Date]"}function y1(t){return cd(t)&&(y4(t)==="[object Error]"||t instanceof Error)}function w1(t){return typeof t=="function"}function dR(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||t===void 0}function hR(t){return ae.isBuffer(t)}function y4(t){return Object.prototype.toString.call(t)}function w4(t){return t<10?"0"+t.toString(10):t.toString(10)}Jo.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Jo.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Aae=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function fR(){var t,e;console.log("%s - %s",(t=new Date,e=[w4(t.getHours()),w4(t.getMinutes()),w4(t.getSeconds())].join(":"),[t.getDate(),Aae[t.getMonth()],e].join(" ")),cv.apply(null,arguments))}function b4(t,e){if(!e||!cd(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function pR(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var ld=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function v4(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(ld&&t[ld]){var e;if(typeof(e=t[ld])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,ld,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var n,r,i=new Promise(function(a,c){n=a,r=c}),s=[],o=0;o<arguments.length;o++)s.push(arguments[o]);s.push(function(a,c){a?r(a):n(c)});try{t.apply(this,s)}catch(a){r(a)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),ld&&Object.defineProperty(e,ld,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,aR(t))}function Iae(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function gR(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return i.apply(s,arguments)};t.apply(this,n).then(function(a){ft.nextTick(o.bind(null,null,a))},function(a){ft.nextTick(Iae.bind(null,a,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,aR(t)),e}v4.custom=ld;var E4,mR,$ae={inherits:c4,_extend:b4,log:fR,isBuffer:hR,isPrimitive:dR,isFunction:w1,isError:y1,isDate:hv,isObject:cd,isRegExp:m1,isUndefined:Qo,isSymbol:uR,isString:g1,isNumber:m4,isNullOrUndefined:lR,isNull:p1,isBoolean:dv,isArray:g4,inspect:Jo,deprecate:d4,format:cv,debuglog:cR,promisify:v4,callbackify:gR},yR=Kg(Object.freeze({__proto__:null,_extend:b4,callbackify:gR,debuglog:cR,default:$ae,deprecate:d4,format:cv,inherits:c4,inspect:Jo,isArray:g4,isBoolean:dv,isBuffer:hR,isDate:hv,isError:y1,isFunction:w1,isNull:p1,isNullOrUndefined:lR,isNumber:m4,isObject:cd,isPrimitive:dR,isRegExp:m1,isString:g1,isSymbol:uR,isUndefined:Qo,log:fR,promisify:v4}));function Pae(){if(mR)return E4;function t(c,l){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(c);l&&(d=d.filter(function(h){return Object.getOwnPropertyDescriptor(c,h).enumerable})),u.push.apply(u,d)}return u}function e(c){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?t(Object(u),!0).forEach(function(d){n(c,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):t(Object(u)).forEach(function(d){Object.defineProperty(c,d,Object.getOwnPropertyDescriptor(u,d))})}return c}function n(c,l,u){return(l=i(l))in c?Object.defineProperty(c,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[l]=u,c}function r(c,l,u){return l&&function(d,h){for(var f=0;f<h.length;f++){var g=h[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,i(g.key),g)}}(c.prototype,l),Object.defineProperty(c,"prototype",{writable:!1}),c}function i(c){var l=function(u,d){if(typeof u!="object"||u===null)return u;var h=u[Symbol.toPrimitive];if(h!==void 0){var f=h.call(u,d||"default");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(u)}(c,"string");return typeof l=="symbol"?l:String(l)}mR=1;var s=u4.Buffer,o=yR.inspect,a=o&&o.custom||"inspect";return E4=function(){function c(){(function(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}return r(c,[{key:"push",value:function(l){var u={data:l,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}},{key:"unshift",value:function(l){var u={data:l,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}},{key:"shift",value:function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(l){if(this.length===0)return"";for(var u=this.head,d=""+u.data;u=u.next;)d+=l+u.data;return d}},{key:"concat",value:function(l){if(this.length===0)return s.alloc(0);for(var u,d,h,f=s.allocUnsafe(l>>>0),g=this.head,p=0;g;)u=g.data,d=f,h=p,s.prototype.copy.call(u,d,h),p+=g.data.length,g=g.next;return f}},{key:"consume",value:function(l,u){var d;return l<this.head.data.length?(d=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):d=l===this.head.data.length?this.shift():u?this._getString(l):this._getBuffer(l),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var u=this.head,d=1,h=u.data;for(l-=h.length;u=u.next;){var f=u.data,g=l>f.length?f.length:l;if(g===f.length?h+=f:h+=f.slice(0,l),(l-=g)===0){g===f.length?(++d,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=f.slice(g));break}++d}return this.length-=d,h}},{key:"_getBuffer",value:function(l){var u=s.allocUnsafe(l),d=this.head,h=1;for(d.data.copy(u),l-=d.data.length;d=d.next;){var f=d.data,g=l>f.length?f.length:l;if(f.copy(u,u.length-l,0,g),(l-=g)===0){g===f.length?(++h,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=f.slice(g));break}++h}return this.length-=h,u}},{key:a,value:function(l,u){return o(this,e(e({},u),{},{depth:0,customInspect:!1}))}}]),c}(),E4}function wR(t,e){C4(t,e),fv(t)}function fv(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function C4(t,e){t.emit("error",e)}var bR={destroy:function(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ft.nextTick(C4,this,t)):ft.nextTick(C4,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?n._writableState?n._writableState.errorEmitted?ft.nextTick(fv,n):(n._writableState.errorEmitted=!0,ft.nextTick(wR,n,s)):ft.nextTick(wR,n,s):e?(ft.nextTick(fv,n),e(s)):ft.nextTick(fv,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}},ud={},vR={};function Rs(t,e,n){n||(n=Error);var r=function(i){var s,o;function a(c,l,u){return i.call(this,function(d,h,f){return typeof e=="string"?e:e(d,h,f)}(c,l,u))||this}return o=i,(s=a).prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o,a}(n);r.prototype.name=n.name,r.prototype.code=t,vR[t]=r}function ER(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(r){return String(r)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}Rs("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),Rs("ERR_INVALID_ARG_TYPE",function(t,e,n){var r,i,s;if(typeof e=="string"&&(i="not ",e.substr(0,i.length)===i)?(r="must not be",e=e.replace(/^not /,"")):r="must be",function(a,c,l){return(l===void 0||l>a.length)&&(l=a.length),a.substring(l-c.length,l)===c}(t," argument"))s="The ".concat(t," ").concat(r," ").concat(ER(e,"type"));else{var o=function(a,c,l){return typeof l!="number"&&(l=0),!(l+c.length>a.length)&&a.indexOf(c,l)!==-1}(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(o," ").concat(r," ").concat(ER(e,"type"))}return s+=". Received type ".concat(typeof n)},TypeError),Rs("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Rs("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),Rs("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Rs("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),Rs("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Rs("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Rs("ERR_STREAM_WRITE_AFTER_END","write after end"),Rs("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Rs("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),Rs("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ud.codes=vR;var Oae=ud.codes.ERR_INVALID_OPT_VALUE,_4,CR,S4,_R,SR={getHighWaterMark:function(t,e,n,r){var i=function(s,o,a){return s.highWaterMark!=null?s.highWaterMark:o?s[a]:null}(e,r,n);if(i!=null){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new Oae(r?n:"highWaterMark",i);return Math.floor(i)}return t.objectMode?16:16384}},Tae=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},b1=Kg(Object.freeze({__proto__:null,default:Tae})),Nae=function(t,e){if(x4("noDeprecation"))return t;var n=!1;return function(){if(!n){if(x4("throwDeprecation"))throw new Error(e);x4("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}};function x4(t){try{if(!Os.localStorage)return!1}catch{return!1}var e=Os.localStorage[t];return e!=null&&String(e).toLowerCase()==="true"}function xR(){if(CR)return _4;function t(D){var j=this;this.next=null,this.entry=null,this.finish=function(){(function(I,E,S){var k=I.entry;for(I.entry=null;k;){var _=k.callback;E.pendingcb--,_(S),k=k.next}E.corkedRequestsFree.next=I})(j,D)}}var e;CR=1,_4=C,C.WritableState=v;var n={deprecate:Nae},r=oR,i=u4.Buffer,s=(Os!==void 0?Os:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},o,a=bR,c=SR.getHighWaterMark,l=ud.codes,u=l.ERR_INVALID_ARG_TYPE,d=l.ERR_METHOD_NOT_IMPLEMENTED,h=l.ERR_MULTIPLE_CALLBACK,f=l.ERR_STREAM_CANNOT_PIPE,g=l.ERR_STREAM_DESTROYED,p=l.ERR_STREAM_NULL_VALUES,m=l.ERR_STREAM_WRITE_AFTER_END,y=l.ERR_UNKNOWN_ENCODING,w=a.errorOrDestroy;function b(){}function v(D,j,I){e=e||Mf(),D=D||{},typeof I!="boolean"&&(I=j instanceof e),this.objectMode=!!D.objectMode,I&&(this.objectMode=this.objectMode||!!D.writableObjectMode),this.highWaterMark=c(this,D,"writableHighWaterMark",I),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var E=D.decodeStrings===!1;this.decodeStrings=!E,this.defaultEncoding=D.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(S){(function(k,_){var x=k._writableState,T=x.sync,M=x.writecb;if(typeof M!="function")throw new h;if(function(N){N.writing=!1,N.writecb=null,N.length-=N.writelen,N.writelen=0}(x),_)(function(N,B,F,z,q){--B.pendingcb,F?(ft.nextTick(q,z),ft.nextTick(U,N,B),N._writableState.errorEmitted=!0,w(N,z)):(q(z),N._writableState.errorEmitted=!0,w(N,z),U(N,B))})(k,x,T,_,M);else{var O=P(x)||k.destroyed;O||x.corked||x.bufferProcessing||!x.bufferedRequest||R(k,x),T?ft.nextTick($,k,x,O,M):$(k,x,O,M)}})(j,S)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=D.emitClose!==!1,this.autoDestroy=!!D.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function C(D){var j=this instanceof(e=e||Mf());if(!j&&!o.call(C,this))return new C(D);this._writableState=new v(D,this,j),this.writable=!0,D&&(typeof D.write=="function"&&(this._write=D.write),typeof D.writev=="function"&&(this._writev=D.writev),typeof D.destroy=="function"&&(this._destroy=D.destroy),typeof D.final=="function"&&(this._final=D.final)),r.call(this)}function A(D,j,I,E,S,k,_){j.writelen=E,j.writecb=_,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new g("write")):I?D._writev(S,j.onwrite):D._write(S,k,j.onwrite),j.sync=!1}function $(D,j,I,E){I||function(S,k){k.length===0&&k.needDrain&&(k.needDrain=!1,S.emit("drain"))}(D,j),j.pendingcb--,E(),U(D,j)}function R(D,j){j.bufferProcessing=!0;var I=j.bufferedRequest;if(D._writev&&I&&I.next){var E=j.bufferedRequestCount,S=new Array(E),k=j.corkedRequestsFree;k.entry=I;for(var _=0,x=!0;I;)S[_]=I,I.isBuf||(x=!1),I=I.next,_+=1;S.allBuffers=x,A(D,j,!0,j.length,S,"",k.finish),j.pendingcb++,j.lastBufferedRequest=null,k.next?(j.corkedRequestsFree=k.next,k.next=null):j.corkedRequestsFree=new t(j),j.bufferedRequestCount=0}else{for(;I;){var T=I.chunk,M=I.encoding,O=I.callback;if(A(D,j,!1,j.objectMode?1:T.length,T,M,O),I=I.next,j.bufferedRequestCount--,j.writing)break}I===null&&(j.lastBufferedRequest=null)}j.bufferedRequest=I,j.bufferProcessing=!1}function P(D){return D.ending&&D.length===0&&D.bufferedRequest===null&&!D.finished&&!D.writing}function L(D,j){D._final(function(I){j.pendingcb--,I&&w(D,I),j.prefinished=!0,D.emit("prefinish"),U(D,j)})}function U(D,j){var I=P(j);if(I&&(function(S,k){k.prefinished||k.finalCalled||(typeof S._final!="function"||k.destroyed?(k.prefinished=!0,S.emit("prefinish")):(k.pendingcb++,k.finalCalled=!0,ft.nextTick(L,S,k)))}(D,j),j.pendingcb===0&&(j.finished=!0,D.emit("finish"),j.autoDestroy))){var E=D._readableState;(!E||E.autoDestroy&&E.endEmitted)&&D.destroy()}return I}return b1(C,r),v.prototype.getBuffer=function(){for(var D=this.bufferedRequest,j=[];D;)j.push(D),D=D.next;return j},function(){try{Object.defineProperty(v.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(D){return!!o.call(this,D)||this===C&&D&&D._writableState instanceof v}})):o=function(D){return D instanceof this},C.prototype.pipe=function(){w(this,new f)},C.prototype.write=function(D,j,I){var E,S=this._writableState,k=!1,_=!S.objectMode&&(E=D,i.isBuffer(E)||E instanceof s);return _&&!i.isBuffer(D)&&(D=function(x){return i.from(x)}(D)),typeof j=="function"&&(I=j,j=null),_?j="buffer":j||(j=S.defaultEncoding),typeof I!="function"&&(I=b),S.ending?function(x,T){var M=new m;w(x,M),ft.nextTick(T,M)}(this,I):(_||function(x,T,M,O){var N;return M===null?N=new p:typeof M=="string"||T.objectMode||(N=new u("chunk",["string","Buffer"],M)),!N||(w(x,N),ft.nextTick(O,N),!1)}(this,S,D,I))&&(S.pendingcb++,k=function(x,T,M,O,N,B){if(!M){var F=function(K,Y,J){return K.objectMode||K.decodeStrings===!1||typeof Y!="string"||(Y=i.from(Y,J)),Y}(T,O,N);O!==F&&(M=!0,N="buffer",O=F)}var z=T.objectMode?1:O.length;T.length+=z;var q=T.length<T.highWaterMark;if(q||(T.needDrain=!0),T.writing||T.corked){var H=T.lastBufferedRequest;T.lastBufferedRequest={chunk:O,encoding:N,isBuf:M,callback:B,next:null},H?H.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1}else A(x,T,!1,z,O,N,B);return q}(this,S,_,D,j,I)),k},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var D=this._writableState;D.corked&&(D.corked--,D.writing||D.corked||D.bufferProcessing||!D.bufferedRequest||R(this,D))},C.prototype.setDefaultEncoding=function(D){if(typeof D=="string"&&(D=D.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((D+"").toLowerCase())>-1))throw new y(D);return this._writableState.defaultEncoding=D,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(D,j,I){I(new d("_write()"))},C.prototype._writev=null,C.prototype.end=function(D,j,I){var E=this._writableState;return typeof D=="function"?(I=D,D=null,j=null):typeof j=="function"&&(I=j,j=null),D!=null&&this.write(D,j),E.corked&&(E.corked=1,this.uncork()),E.ending||function(S,k,_){k.ending=!0,U(S,k),_&&(k.finished?ft.nextTick(_):S.once("finish",_)),k.ended=!0,S.writable=!1}(this,E,I),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(D){this._writableState&&(this._writableState.destroyed=D)}}),C.prototype.destroy=a.destroy,C.prototype._undestroy=a.undestroy,C.prototype._destroy=function(D,j){j(D)},_4}function Mf(){if(_R)return S4;_R=1;var t=Object.keys||function(l){var u=[];for(var d in l)u.push(d);return u};S4=o;var e=NR(),n=xR();b1(o,e);for(var r=t(n.prototype),i=0;i<r.length;i++){var s=r[i];o.prototype[s]||(o.prototype[s]=n.prototype[s])}function o(l){if(!(this instanceof o))return new o(l);e.call(this,l),n.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||ft.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}),S4}var kae=ae.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function pv(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!kae(e))throw new Error("Unknown encoding: "+e)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Mae;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Bae;break;default:return void(this.write=Rae)}this.charBuffer=new ae(6),this.charReceived=0,this.charLength=0}function Rae(t){return t.toString(this.encoding)}function Mae(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function Bae(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}pv.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var i;if(r=(e+=t.toString(this.encoding,0,r)).length-1,(i=e.charCodeAt(r))>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),t.copy(this.charBuffer,0,0,s),e.substring(0,r)}return e},pv.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},pv.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e};var AR=Kg(Object.freeze({__proto__:null,StringDecoder:pv})),IR=ud.codes.ERR_STREAM_PREMATURE_CLOSE;function Dae(){}var A4,$R,PR,OR,I4,TR,$4=function t(e,n,r){if(typeof n=="function")return t(e,null,n);n||(n={}),r=function(g){var p=!1;return function(){if(!p){p=!0;for(var m=arguments.length,y=new Array(m),w=0;w<m;w++)y[w]=arguments[w];g.apply(this,y)}}}(r||Dae);var i=n.readable||n.readable!==!1&&e.readable,s=n.writable||n.writable!==!1&&e.writable,o=function(){e.writable||c()},a=e._writableState&&e._writableState.finished,c=function(){s=!1,a=!0,i||r.call(e)},l=e._readableState&&e._readableState.endEmitted,u=function(){i=!1,l=!0,s||r.call(e)},d=function(g){r.call(e,g)},h=function(){var g;return i&&!l?(e._readableState&&e._readableState.ended||(g=new IR),r.call(e,g)):s&&!a?(e._writableState&&e._writableState.ended||(g=new IR),r.call(e,g)):void 0},f=function(){e.req.on("finish",c)};return function(g){return g.setHeader&&typeof g.abort=="function"}(e)?(e.on("complete",c),e.on("abort",h),e.req?f():e.on("request",f)):s&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",c),n.error!==!1&&e.on("error",d),e.on("close",h),function(){e.removeListener("complete",c),e.removeListener("abort",h),e.removeListener("request",f),e.req&&e.req.removeListener("finish",c),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",c),e.removeListener("end",u),e.removeListener("error",d),e.removeListener("close",h)}};function Lae(){if($R)return A4;var t;function e(p,m,y){return(m=function(w){var b=function(v,C){if(typeof v!="object"||v===null)return v;var A=v[Symbol.toPrimitive];if(A!==void 0){var $=A.call(v,C||"default");if(typeof $!="object")return $;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(v)}(w,"string");return typeof b=="symbol"?b:String(b)}(m))in p?Object.defineProperty(p,m,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[m]=y,p}$R=1;var n=$4,r=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream");function u(p,m){return{value:p,done:m}}function d(p){var m=p[r];if(m!==null){var y=p[l].read();y!==null&&(p[a]=null,p[r]=null,p[i]=null,m(u(y,!1)))}}function h(p){ft.nextTick(d,p)}var f=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((e(t={get stream(){return this[l]},next:function(){var p=this,m=this[s];if(m!==null)return Promise.reject(m);if(this[o])return Promise.resolve(u(void 0,!0));if(this[l].destroyed)return new Promise(function(v,C){ft.nextTick(function(){p[s]?C(p[s]):v(u(void 0,!0))})});var y,w=this[a];if(w)y=new Promise(function(v,C){return function(A,$){v.then(function(){C[o]?A(u(void 0,!0)):C[c](A,$)},$)}}(w,this));else{var b=this[l].read();if(b!==null)return Promise.resolve(u(b,!1));y=new Promise(this[c])}return this[a]=y,y}},Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var p=this;return new Promise(function(m,y){p[l].destroy(null,function(w){w?y(w):m(u(void 0,!0))})})}),t),f);return A4=function(p){var m,y=Object.create(g,(e(m={},l,{value:p,writable:!0}),e(m,r,{value:null,writable:!0}),e(m,i,{value:null,writable:!0}),e(m,s,{value:null,writable:!0}),e(m,o,{value:p._readableState.endEmitted,writable:!0}),e(m,c,{value:function(w,b){var v=y[l].read();v?(y[a]=null,y[r]=null,y[i]=null,w(u(v,!1))):(y[r]=w,y[i]=b)},writable:!0}),m));return y[a]=null,n(p,function(w){if(w&&w.code!=="ERR_STREAM_PREMATURE_CLOSE"){var b=y[i];return b!==null&&(y[a]=null,y[r]=null,y[i]=null,b(w)),void(y[s]=w)}var v=y[r];v!==null&&(y[a]=null,y[r]=null,y[i]=null,v(u(void 0,!0))),y[o]=!0}),p.on("readable",h.bind(null,y)),y},A4}function NR(){if(TR)return I4;var t;TR=1,I4=C,C.ReadableState=v,X8.EventEmitter;var e=function(O,N){return O.listeners(N).length},n=oR,r=u4.Buffer,i=(Os!==void 0?Os:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},s,o=yR;s=o&&o.debuglog?o.debuglog("stream"):function(){};var a,c,l,u=Pae(),d=bR,h=SR.getHighWaterMark,f=ud.codes,g=f.ERR_INVALID_ARG_TYPE,p=f.ERR_STREAM_PUSH_AFTER_EOF,m=f.ERR_METHOD_NOT_IMPLEMENTED,y=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;b1(C,n);var w=d.errorOrDestroy,b=["error","close","destroy","pause","resume"];function v(O,N,B){t=t||Mf(),O=O||{},typeof B!="boolean"&&(B=N instanceof t),this.objectMode=!!O.objectMode,B&&(this.objectMode=this.objectMode||!!O.readableObjectMode),this.highWaterMark=h(this,O,"readableHighWaterMark",B),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.destroyed=!1,this.defaultEncoding=O.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,O.encoding&&(a||(a=AR.StringDecoder),this.decoder=new a(O.encoding),this.encoding=O.encoding)}function C(O){if(t=t||Mf(),!(this instanceof C))return new C(O);var N=this instanceof t;this._readableState=new v(O,this,N),this.readable=!0,O&&(typeof O.read=="function"&&(this._read=O.read),typeof O.destroy=="function"&&(this._destroy=O.destroy)),n.call(this)}function A(O,N,B,F,z){s("readableAddChunk",N);var q,H=O._readableState;if(N===null)H.reading=!1,function(K,Y){if(s("onEofChunk"),!Y.ended){if(Y.decoder){var J=Y.decoder.end();J&&J.length&&(Y.buffer.push(J),Y.length+=Y.objectMode?1:J.length)}Y.ended=!0,Y.sync?L(K):(Y.needReadable=!1,Y.emittedReadable||(Y.emittedReadable=!0,U(K)))}}(O,H);else if(z||(q=function(K,Y){var J;G=Y,r.isBuffer(G)||G instanceof i||typeof Y=="string"||Y===void 0||K.objectMode||(J=new g("chunk",["string","Buffer","Uint8Array"],Y));var G;return J}(H,N)),q)w(O,q);else if(H.objectMode||N&&N.length>0)if(typeof N=="string"||H.objectMode||Object.getPrototypeOf(N)===r.prototype||(N=function(K){return r.from(K)}(N)),F)H.endEmitted?w(O,new y):$(O,H,N,!0);else if(H.ended)w(O,new p);else{if(H.destroyed)return!1;H.reading=!1,H.decoder&&!B?(N=H.decoder.write(N),H.objectMode||N.length!==0?$(O,H,N,!1):D(O,H)):$(O,H,N,!1)}else F||(H.reading=!1,D(O,H));return!H.ended&&(H.length<H.highWaterMark||H.length===0)}function $(O,N,B,F){N.flowing&&N.length===0&&!N.sync?(N.awaitDrain=0,O.emit("data",B)):(N.length+=N.objectMode?1:B.length,F?N.buffer.unshift(B):N.buffer.push(B),N.needReadable&&L(O)),D(O,N)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(O){this._readableState&&(this._readableState.destroyed=O)}}),C.prototype.destroy=d.destroy,C.prototype._undestroy=d.undestroy,C.prototype._destroy=function(O,N){N(O)},C.prototype.push=function(O,N){var B,F=this._readableState;return F.objectMode?B=!0:typeof O=="string"&&((N=N||F.defaultEncoding)!==F.encoding&&(O=r.from(O,N),N=""),B=!0),A(this,O,N,!1,B)},C.prototype.unshift=function(O){return A(this,O,null,!0,!1)},C.prototype.isPaused=function(){return this._readableState.flowing===!1},C.prototype.setEncoding=function(O){a||(a=AR.StringDecoder);var N=new a(O);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;for(var B=this._readableState.buffer.head,F="";B!==null;)F+=N.write(B.data),B=B.next;return this._readableState.buffer.clear(),F!==""&&this._readableState.buffer.push(F),this._readableState.length=F.length,this};var R=1073741824;function P(O,N){return O<=0||N.length===0&&N.ended?0:N.objectMode?1:O!=O?N.flowing&&N.length?N.buffer.head.data.length:N.length:(O>N.highWaterMark&&(N.highWaterMark=function(B){return B>=R?B=R:(B--,B|=B>>>1,B|=B>>>2,B|=B>>>4,B|=B>>>8,B|=B>>>16,B++),B}(O)),O<=N.length?O:N.ended?N.length:(N.needReadable=!0,0))}function L(O){var N=O._readableState;s("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(s("emitReadable",N.flowing),N.emittedReadable=!0,ft.nextTick(U,O))}function U(O){var N=O._readableState;s("emitReadable_",N.destroyed,N.length,N.ended),N.destroyed||!N.length&&!N.ended||(O.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,k(O)}function D(O,N){N.readingMore||(N.readingMore=!0,ft.nextTick(j,O,N))}function j(O,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&N.length===0);){var B=N.length;if(s("maybeReadMore read 0"),O.read(0),B===N.length)break}N.readingMore=!1}function I(O){var N=O._readableState;N.readableListening=O.listenerCount("readable")>0,N.resumeScheduled&&!N.paused?N.flowing=!0:O.listenerCount("data")>0&&O.resume()}function E(O){s("readable nexttick read 0"),O.read(0)}function S(O,N){s("resume",N.reading),N.reading||O.read(0),N.resumeScheduled=!1,O.emit("resume"),k(O),N.flowing&&!N.reading&&O.read(0)}function k(O){var N=O._readableState;for(s("flow",N.flowing);N.flowing&&O.read()!==null;);}function _(O,N){return N.length===0?null:(N.objectMode?B=N.buffer.shift():!O||O>=N.length?(B=N.decoder?N.buffer.join(""):N.buffer.length===1?N.buffer.first():N.buffer.concat(N.length),N.buffer.clear()):B=N.buffer.consume(O,N.decoder),B);var B}function x(O){var N=O._readableState;s("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,ft.nextTick(T,N,O))}function T(O,N){if(s("endReadableNT",O.endEmitted,O.length),!O.endEmitted&&O.length===0&&(O.endEmitted=!0,N.readable=!1,N.emit("end"),O.autoDestroy)){var B=N._writableState;(!B||B.autoDestroy&&B.finished)&&N.destroy()}}function M(O,N){for(var B=0,F=O.length;B<F;B++)if(O[B]===N)return B;return-1}return C.prototype.read=function(O){s("read",O),O=parseInt(O,10);var N=this._readableState,B=O;if(O!==0&&(N.emittedReadable=!1),O===0&&N.needReadable&&((N.highWaterMark!==0?N.length>=N.highWaterMark:N.length>0)||N.ended))return s("read: emitReadable",N.length,N.ended),N.length===0&&N.ended?x(this):L(this),null;if((O=P(O,N))===0&&N.ended)return N.length===0&&x(this),null;var F,z=N.needReadable;return s("need readable",z),(N.length===0||N.length-O<N.highWaterMark)&&s("length less than watermark",z=!0),N.ended||N.reading?s("reading or ended",z=!1):z&&(s("do read"),N.reading=!0,N.sync=!0,N.length===0&&(N.needReadable=!0),this._read(N.highWaterMark),N.sync=!1,N.reading||(O=P(B,N))),(F=O>0?_(O,N):null)===null?(N.needReadable=N.length<=N.highWaterMark,O=0):(N.length-=O,N.awaitDrain=0),N.length===0&&(N.ended||(N.needReadable=!0),B!==O&&N.ended&&x(this)),F!==null&&this.emit("data",F),F},C.prototype._read=function(O){w(this,new m("_read()"))},C.prototype.pipe=function(O,N){var B=this,F=this._readableState;switch(F.pipesCount){case 0:F.pipes=O;break;case 1:F.pipes=[F.pipes,O];break;default:F.pipes.push(O)}F.pipesCount+=1,s("pipe count=%d opts=%j",F.pipesCount,N);var z=(!N||N.end!==!1)&&O!==ft.stdout&&O!==ft.stderr?H:he;function q(fe,_e){s("onunpipe"),fe===B&&_e&&_e.hasUnpiped===!1&&(_e.hasUnpiped=!0,s("cleanup"),O.removeListener("close",te),O.removeListener("finish",se),O.removeListener("drain",K),O.removeListener("error",G),O.removeListener("unpipe",q),B.removeListener("end",H),B.removeListener("end",he),B.removeListener("data",J),Y=!0,!F.awaitDrain||O._writableState&&!O._writableState.needDrain||K())}function H(){s("onend"),O.end()}F.endEmitted?ft.nextTick(z):B.once("end",z),O.on("unpipe",q);var K=function(fe){return function(){var _e=fe._readableState;s("pipeOnDrain",_e.awaitDrain),_e.awaitDrain&&_e.awaitDrain--,_e.awaitDrain===0&&e(fe,"data")&&(_e.flowing=!0,k(fe))}}(B);O.on("drain",K);var Y=!1;function J(fe){s("ondata");var _e=O.write(fe);s("dest.write",_e),_e===!1&&((F.pipesCount===1&&F.pipes===O||F.pipesCount>1&&M(F.pipes,O)!==-1)&&!Y&&(s("false write response, pause",F.awaitDrain),F.awaitDrain++),B.pause())}function G(fe){s("onerror",fe),he(),O.removeListener("error",G),e(O,"error")===0&&w(O,fe)}function te(){O.removeListener("finish",se),he()}function se(){s("onfinish"),O.removeListener("close",te),he()}function he(){s("unpipe"),B.unpipe(O)}return B.on("data",J),function(fe,_e,Pe){if(typeof fe.prependListener=="function")return fe.prependListener(_e,Pe);fe._events&&fe._events[_e]?Array.isArray(fe._events[_e])?fe._events[_e].unshift(Pe):fe._events[_e]=[Pe,fe._events[_e]]:fe.on(_e,Pe)}(O,"error",G),O.once("close",te),O.once("finish",se),O.emit("pipe",B),F.flowing||(s("pipe resume"),B.resume()),O},C.prototype.unpipe=function(O){var N=this._readableState,B={hasUnpiped:!1};if(N.pipesCount===0)return this;if(N.pipesCount===1)return O&&O!==N.pipes||(O||(O=N.pipes),N.pipes=null,N.pipesCount=0,N.flowing=!1,O&&O.emit("unpipe",this,B)),this;if(!O){var F=N.pipes,z=N.pipesCount;N.pipes=null,N.pipesCount=0,N.flowing=!1;for(var q=0;q<z;q++)F[q].emit("unpipe",this,{hasUnpiped:!1});return this}var H=M(N.pipes,O);return H===-1||(N.pipes.splice(H,1),N.pipesCount-=1,N.pipesCount===1&&(N.pipes=N.pipes[0]),O.emit("unpipe",this,B)),this},C.prototype.on=function(O,N){var B=n.prototype.on.call(this,O,N),F=this._readableState;return O==="data"?(F.readableListening=this.listenerCount("readable")>0,F.flowing!==!1&&this.resume()):O==="readable"&&(F.endEmitted||F.readableListening||(F.readableListening=F.needReadable=!0,F.flowing=!1,F.emittedReadable=!1,s("on readable",F.length,F.reading),F.length?L(this):F.reading||ft.nextTick(E,this))),B},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(O,N){var B=n.prototype.removeListener.call(this,O,N);return O==="readable"&&ft.nextTick(I,this),B},C.prototype.removeAllListeners=function(O){var N=n.prototype.removeAllListeners.apply(this,arguments);return O!=="readable"&&O!==void 0||ft.nextTick(I,this),N},C.prototype.resume=function(){var O=this._readableState;return O.flowing||(s("resume"),O.flowing=!O.readableListening,function(N,B){B.resumeScheduled||(B.resumeScheduled=!0,ft.nextTick(S,N,B))}(this,O)),O.paused=!1,this},C.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(O){var N=this,B=this._readableState,F=!1;for(var z in O.on("end",function(){if(s("wrapped end"),B.decoder&&!B.ended){var H=B.decoder.end();H&&H.length&&N.push(H)}N.push(null)}),O.on("data",function(H){s("wrapped data"),B.decoder&&(H=B.decoder.write(H)),B.objectMode&&H==null||(B.objectMode||H&&H.length)&&(N.push(H)||(F=!0,O.pause()))}),O)this[z]===void 0&&typeof O[z]=="function"&&(this[z]=function(H){return function(){return O[H].apply(O,arguments)}}(z));for(var q=0;q<b.length;q++)O.on(b[q],this.emit.bind(this,b[q]));return this._read=function(H){s("wrapped _read",H),F&&(F=!1,O.resume())},this},typeof Symbol=="function"&&(C.prototype[Symbol.asyncIterator]=function(){return c===void 0&&(c=Lae()),c(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(O){this._readableState&&(this._readableState.flowing=O)}}),C._fromList=_,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(C.from=function(O,N){return l===void 0&&(l=OR?PR:(OR=1,PR=function(){throw new Error("Readable.from is not available in the browser")})),l(C,O,N)}),I4}var kR=sc,gv=ud.codes,jae=gv.ERR_METHOD_NOT_IMPLEMENTED,Uae=gv.ERR_MULTIPLE_CALLBACK,Fae=gv.ERR_TRANSFORM_ALREADY_TRANSFORMING,zae=gv.ERR_TRANSFORM_WITH_LENGTH_0,mv=Mf();function qae(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new Uae);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function sc(t){if(!(this instanceof sc))return new sc(t);mv.call(this,t),this._transformState={afterTransform:qae.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Hae)}function Hae(){var t=this;typeof this._flush!="function"||this._readableState.destroyed?RR(this,null,null):this._flush(function(e,n){RR(t,e,n)})}function RR(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new zae;if(t._transformState.transforming)throw new Fae;return t.push(null)}b1(sc,mv),sc.prototype.push=function(t,e){return this._transformState.needTransform=!1,mv.prototype.push.call(this,t,e)},sc.prototype._transform=function(t,e,n){n(new jae("_transform()"))},sc.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},sc.prototype._read=function(t){var e=this._transformState;e.writechunk===null||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},sc.prototype._destroy=function(t,e){mv.prototype._destroy.call(this,t,function(n){e(n)})};var P4,Wae=v1,MR=kR;function v1(t){if(!(this instanceof v1))return new v1(t);MR.call(this,t)}b1(v1,MR),v1.prototype._transform=function(t,e,n){n(null,t)};var BR=ud.codes,Kae=BR.ERR_MISSING_ARGS,Vae=BR.ERR_STREAM_DESTROYED;function DR(t){if(t)throw t}function LR(t){t()}function Gae(t,e){return t.pipe(e)}var Zae=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=function(o){return o.length?typeof o[o.length-1]!="function"?DR:o.pop():DR}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Kae("streams");var s=e.map(function(o,a){var c=a<e.length-1;return function(l,u,d,h){h=function(p){var m=!1;return function(){m||(m=!0,p.apply(void 0,arguments))}}(h);var f=!1;l.on("close",function(){f=!0}),P4===void 0&&(P4=$4),P4(l,{readable:u,writable:d},function(p){if(p)return h(p);f=!0,h()});var g=!1;return function(p){if(!f&&!g)return g=!0,function(m){return m.setHeader&&typeof m.abort=="function"}(l)?l.abort():typeof l.destroy=="function"?l.destroy():void h(p||new Vae("pipe"))}}(o,c,a>0,function(l){r||(r=l),l&&s.forEach(LR),c||(s.forEach(LR),i(r))})});return e.reduce(Gae)};(function(t,e){(e=l4.exports=NR()).Stream=e,e.Readable=e,e.Writable=xR(),e.Duplex=Mf(),e.Transform=kR,e.PassThrough=Wae,e.finished=$4,e.pipeline=Zae})(0,l4.exports);var Bf=l4.exports;function Yae(t={}){const e={},n=new Bf.Duplex({objectMode:!0,read:()=>{},write:function(s,o,a){let c=null;try{s.id?function(l){const{id:u}=l;if(u===null)return;const d=e[u];if(!d)return void console.warn(`StreamMiddleware - Unknown response id "${u}"`);delete e[u],Object.assign(d.res,l),setTimeout(d.end)}(s):function(l){t!=null&&t.retryOnMessage&&l.method===t.retryOnMessage&&Object.values(e).forEach(({req:u,retryCount:d=0})=>{if(!u.id)return;if(d>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${u.id}"`);const h=e[u.id];h&&(h.retryCount=d+1),i(u)}),r.emit("notification",l)}(s)}catch(l){c=l}a(c)}}),r=new Qk;return{events:r,middleware:(s,o,a,c)=>{e[s.id]={req:s,res:o,next:a,end:c},i(s)},stream:n};function i(s){n.push(s)}}var yv={},O4={exports:{}},Jae=function t(e,n){if(e&&n)return t(e)(n);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(i){r[i]=e[i]}),r;function r(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];var o=e.apply(this,i),a=i[i.length-1];return typeof o=="function"&&o!==a&&Object.keys(a).forEach(function(c){o[c]=a[c]}),o}},jR=Jae;function wv(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function UR(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}O4.exports=jR(wv),O4.exports.strict=jR(UR),wv.proto=wv(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return wv(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return UR(this)},configurable:!0})});var Qae=O4.exports,bv={};Object.defineProperty(bv,"__esModule",{value:!0}),bv.Substream=void 0;const Xae=Bf;class ece extends Xae.Duplex{constructor({parent:e,name:n}){super({objectMode:!0}),this._parent=e,this._name=n}_read(){}_write(e,n,r){this._parent.push({name:this._name,data:e}),r()}}bv.Substream=ece;var tce=Os&&Os.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yv,"__esModule",{value:!0}),yv.ObjectMultiplex=void 0;const T4=Bf,nce=tce(Qae),rce=bv,FR=Symbol("IGNORE_SUBSTREAM");let ice=class extends T4.Duplex{constructor(t={}){super(Object.assign(Object.assign({},t),{objectMode:!0})),this._substreams={}}createStream(t){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already ended`);if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const e=new rce.Substream({parent:this,name:t});return this._substreams[t]=e,function(n,r){const i=(0,nce.default)(r);(0,T4.finished)(n,{readable:!1},i),(0,T4.finished)(n,{writable:!1},i)}(this,n=>e.destroy(n||void 0)),e}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=FR}_read(){}_write(t,e,n){const{name:r,data:i}=t;if(!r)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const s=this._substreams[r];return s?(s!==FR&&s.push(i),n()):(console.warn(`ObjectMultiplex - orphaned data for stream "${r}"`),n())}};yv.ObjectMultiplex=ice;var sce=bb(yv.ObjectMultiplex);const Xo=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Xo.writable=t=>Xo(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object",Xo.readable=t=>Xo(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object",Xo.duplex=t=>Xo.writable(t)&&Xo.readable(t),Xo.transform=t=>Xo.duplex(t)&&typeof t._transform=="function";var ea,oce=Xo,ace=class extends Cae{constructor(t,{jsonRpcStreamName:e,logger:n=console,maxEventListeners:r=100,rpcMiddleware:i=[]}){if(super({logger:n,maxEventListeners:r,rpcMiddleware:i}),!oce.duplex(t))throw new Error(dn.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);const s=new sce;Bf.pipeline(t,s,t,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=Yae({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),Bf.pipeline(this._jsonRpcConnection.stream,s.createStream(e),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",o=>{const{method:a,params:c}=o;a==="metamask_accountsChanged"?this._handleAccountsChanged(c):a==="metamask_unlockStateChanged"?this._handleUnlockStateChanged(c):a==="metamask_chainChanged"?this._handleChainChanged(c):Xk.includes(a)?this.emit("message",{type:a,data:c}):a==="METAMASK_STREAM_FAILURE"&&t.destroy(new Error(dn.errors.permanentlyDisconnected()))})}async _initializeStateAsync(){let t;try{t=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(t)}_handleStreamDisconnect(t,e){let n=`MetaMask: Lost connection to "${t}".`;e!=null&&e.stack&&(n+=`
${e.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,e?e.message:void 0)}_handleChainChanged({chainId:t,networkVersion:e}={}){eR(t)&&(n=>!!n&&typeof n=="string")(e)?e==="loading"?this._handleDisconnect(!0):super._handleChainChanged({chainId:t}):this._log.error(dn.errors.invalidNetworkParams(),{chainId:t,networkVersion:e})}},cce=class extends ace{constructor(t,{jsonRpcStreamName:e="metamask-provider",logger:n=console,maxEventListeners:r=100,shouldSendMetadata:i}={}){if(super(t,{jsonRpcStreamName:e,logger:n,maxEventListeners:r,rpcMiddleware:pae(n)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},a4(this,ea,void 0),this._initializeStateAsync(),ic(this,ea,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",s=>{const{method:o}=s;Xk.includes(o)&&(this.emit("data",s),this.emit("notification",s.params.result))}),i)if(document.readyState==="complete")nR(this._rpcEngine,this._log);else{const s=()=>{nR(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",s)};window.addEventListener("DOMContentLoaded",s)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(dn.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(dn.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),Yo(this,ea)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(dn.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(t,e){this._rpcRequest(t,e)}addListener(t,e){return this._warnOfDeprecation(t),super.addListener(t,e)}on(t,e){return this._warnOfDeprecation(t),super.on(t,e)}once(t,e){return this._warnOfDeprecation(t),super.once(t,e)}prependListener(t,e){return this._warnOfDeprecation(t),super.prependListener(t,e)}prependOnceListener(t,e){return this._warnOfDeprecation(t),super.prependOnceListener(t,e)}_handleDisconnect(t,e){super._handleDisconnect(t,e),Yo(this,ea)&&!t&&ic(this,ea,null)}_warnOfDeprecation(t){var e;((e=this._sentWarnings)==null?void 0:e.events[t])===!1&&(this._log.warn(dn.warnings.events[t]),this._sentWarnings.events[t]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(dn.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise((t,e)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},av(t,e))}catch(n){e(n)}})}send(t,e){return this._sentWarnings.send||(this._log.warn(dn.warnings.sendDeprecation),this._sentWarnings.send=!0),typeof t!="string"||e&&!Array.isArray(e)?t&&typeof t=="object"&&typeof e=="function"?this._rpcRequest(t,e):this._sendSync(t):new Promise((n,r)=>{try{this._rpcRequest({method:t,params:e},av(n,r,!1))}catch(i){r(i)}})}_sendSync(t){let e;switch(t.method){case"eth_accounts":e=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":e=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(t,tR),e=!0;break;case"net_version":e=Yo(this,ea)??null;break;default:throw new Error(dn.errors.unsupportedSync(t.method))}return{id:t.id,jsonrpc:t.jsonrpc,result:e}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise(t=>{this.on("_initialized",()=>t())}),this._state.isUnlocked),requestBatch:async t=>{if(!Array.isArray(t))throw u1({message:"Batch requests must be made with an array of request objects.",data:t});return new Promise((e,n)=>{this._rpcRequest(t,av(e,n))})}},{get:(t,e,...n)=>(this._sentWarnings.experimentalMethods||(this._log.warn(dn.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(t,e,...n))})}_handleChainChanged({chainId:t,networkVersion:e}={}){super._handleChainChanged({chainId:t,networkVersion:e}),this._state.isConnected&&e!==Yo(this,ea)&&(ic(this,ea,e),this._state.initialized&&this.emit("networkChanged",Yo(this,ea)))}};ea=new WeakMap;const re=Kr("MM_SDK");let zR;re.color="#FFAC1C";var qR={},Il={};Object.defineProperty(Il,"__esModule",{value:!0}),Il.EthereumProviderError=Il.EthereumRpcError=void 0;const lce=Lk;class HR extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=e,r!==void 0&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return lce.default(this.serialize(),uce,2)}}Il.EthereumRpcError=HR;function uce(t,e){if(e!=="[Circular]")return e}Il.EthereumProviderError=class extends HR{constructor(t,e,n){if(!function(r){return Number.isInteger(r)&&r>=1e3&&r<=4999}(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,e,n)}};var N4={},$l={};Object.defineProperty($l,"__esModule",{value:!0}),$l.errorValues=$l.errorCodes=void 0,$l.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},$l.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=$l,n=Il,r=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:r,message:o(r)};function o(d,h=i){if(Number.isInteger(d)){const f=d.toString();if(u(e.errorValues,f))return e.errorValues[f].message;if(c(d))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return h}function a(d){if(!Number.isInteger(d))return!1;const h=d.toString();return!!e.errorValues[h]||!!c(d)}function c(d){return d>=-32099&&d<=-32e3}function l(d){return d&&typeof d=="object"&&!Array.isArray(d)?Object.assign({},d):d}function u(d,h){return Object.prototype.hasOwnProperty.call(d,h)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=o,t.isValidCode=a,t.serializeError=function(d,{fallbackError:h=s,shouldIncludeStack:f=!1}={}){var g,p;if(!h||!Number.isInteger(h.code)||typeof h.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(d instanceof n.EthereumRpcError)return d.serialize();const m={};if(d&&typeof d=="object"&&!Array.isArray(d)&&u(d,"code")&&a(d.code)){const w=d;m.code=w.code,w.message&&typeof w.message=="string"?(m.message=w.message,u(w,"data")&&(m.data=w.data)):(m.message=o(m.code),m.data={originalError:l(d)})}else{m.code=h.code;const w=(g=d)===null||g===void 0?void 0:g.message;m.message=w&&typeof w=="string"?w:h.message,m.data={originalError:l(d)}}const y=(p=d)===null||p===void 0?void 0:p.stack;return f&&d&&y&&typeof y=="string"&&(m.stack=y),m}}(N4);var vv={};Object.defineProperty(vv,"__esModule",{value:!0}),vv.ethErrors=void 0;const k4=Il,WR=N4,Dr=$l;function Ms(t,e){const[n,r]=KR(e);return new k4.EthereumRpcError(t,n||WR.getMessageFromCode(t),r)}function E1(t,e){const[n,r]=KR(e);return new k4.EthereumProviderError(t,n||WR.getMessageFromCode(t),r)}function KR(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,n]}}return[]}vv.ethErrors={rpc:{parse:t=>Ms(Dr.errorCodes.rpc.parse,t),invalidRequest:t=>Ms(Dr.errorCodes.rpc.invalidRequest,t),invalidParams:t=>Ms(Dr.errorCodes.rpc.invalidParams,t),methodNotFound:t=>Ms(Dr.errorCodes.rpc.methodNotFound,t),internal:t=>Ms(Dr.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Ms(e,t)},invalidInput:t=>Ms(Dr.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>Ms(Dr.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>Ms(Dr.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>Ms(Dr.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>Ms(Dr.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>Ms(Dr.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>E1(Dr.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>E1(Dr.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>E1(Dr.errorCodes.provider.unsupportedMethod,t),disconnected:t=>E1(Dr.errorCodes.provider.disconnected,t),chainDisconnected:t=>E1(Dr.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new k4.EthereumProviderError(e,n,r)}}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=Il;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const n=N4;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=vv;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const i=$l;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})}(qR);var VR={exports:{}};VR.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(r,i,s){n.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,i){if(1&i&&(r=n(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var o in r)n.d(s,o,(function(a){return r[a]}).bind(null,o));return s},n.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(i,"a",i),i},n.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},n.p="",n(n.s=90)}({17:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=n(18),i=function(){function s(){}return s.getFirstMatch=function(o,a){var c=a.match(o);return c&&c.length>0&&c[1]||""},s.getSecondMatch=function(o,a){var c=a.match(o);return c&&c.length>1&&c[2]||""},s.matchAndReturnConst=function(o,a,c){if(o.test(a))return c},s.getWindowsVersionName=function(o){switch(o){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},s.getMacOSVersionName=function(o){var a=o.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},s.getAndroidVersionName=function(o){var a=o.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},s.getVersionPrecision=function(o){return o.split(".").length},s.compareVersions=function(o,a,c){c===void 0&&(c=!1);var l=s.getVersionPrecision(o),u=s.getVersionPrecision(a),d=Math.max(l,u),h=0,f=s.map([o,a],function(g){var p=d-s.getVersionPrecision(g),m=g+new Array(p+1).join(".0");return s.map(m.split("."),function(y){return new Array(20-y.length).join("0")+y}).reverse()});for(c&&(h=d-Math.min(l,u)),d-=1;d>=h;){if(f[0][d]>f[1][d])return 1;if(f[0][d]===f[1][d]){if(d===h)return 0;d-=1}else if(f[0][d]<f[1][d])return-1}},s.map=function(o,a){var c,l=[];if(Array.prototype.map)return Array.prototype.map.call(o,a);for(c=0;c<o.length;c+=1)l.push(a(o[c]));return l},s.find=function(o,a){var c,l;if(Array.prototype.find)return Array.prototype.find.call(o,a);for(c=0,l=o.length;c<l;c+=1){var u=o[c];if(a(u,c))return u}},s.assign=function(o){for(var a,c,l=o,u=arguments.length,d=new Array(u>1?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];if(Object.assign)return Object.assign.apply(Object,[o].concat(d));var f=function(){var g=d[a];typeof g=="object"&&g!==null&&Object.keys(g).forEach(function(p){l[p]=g[p]})};for(a=0,c=d.length;a<c;a+=1)f();return o},s.getBrowserAlias=function(o){return r.BROWSER_ALIASES_MAP[o]},s.getBrowserTypeByAlias=function(o){return r.BROWSER_MAP[o]||""},s}();e.default=i,t.exports=e.default},18:function(t,e,n){e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},s=n(18);function o(c,l){for(var u=0;u<l.length;u++){var d=l[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}var a=function(){function c(){}var l,u,d;return c.getParser=function(h,f){if(f===void 0&&(f=!1),typeof h!="string")throw new Error("UserAgent should be a string");return new i.default(h,f)},c.parse=function(h){return new i.default(h).getResult()},l=c,d=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(u=null)&&o(l.prototype,u),d&&o(l,d),c}();e.default=a,t.exports=e.default},91:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=c(n(92)),i=c(n(93)),s=c(n(94)),o=c(n(95)),a=c(n(17));function c(u){return u&&u.__esModule?u:{default:u}}var l=function(){function u(h,f){if(f===void 0&&(f=!1),h==null||h==="")throw new Error("UserAgent parameter can't be empty");this._ua=h,this.parsedResult={},f!==!0&&this.parse()}var d=u.prototype;return d.getUA=function(){return this._ua},d.test=function(h){return h.test(this._ua)},d.parseBrowser=function(){var h=this;this.parsedResult.browser={};var f=a.default.find(r.default,function(g){if(typeof g.test=="function")return g.test(h);if(g.test instanceof Array)return g.test.some(function(p){return h.test(p)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.browser=f.describe(this.getUA())),this.parsedResult.browser},d.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},d.getBrowserName=function(h){return h?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},d.getBrowserVersion=function(){return this.getBrowser().version},d.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},d.parseOS=function(){var h=this;this.parsedResult.os={};var f=a.default.find(i.default,function(g){if(typeof g.test=="function")return g.test(h);if(g.test instanceof Array)return g.test.some(function(p){return h.test(p)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.os=f.describe(this.getUA())),this.parsedResult.os},d.getOSName=function(h){var f=this.getOS().name;return h?String(f).toLowerCase()||"":f||""},d.getOSVersion=function(){return this.getOS().version},d.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},d.getPlatformType=function(h){h===void 0&&(h=!1);var f=this.getPlatform().type;return h?String(f).toLowerCase()||"":f||""},d.parsePlatform=function(){var h=this;this.parsedResult.platform={};var f=a.default.find(s.default,function(g){if(typeof g.test=="function")return g.test(h);if(g.test instanceof Array)return g.test.some(function(p){return h.test(p)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.platform=f.describe(this.getUA())),this.parsedResult.platform},d.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},d.getEngineName=function(h){return h?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},d.parseEngine=function(){var h=this;this.parsedResult.engine={};var f=a.default.find(o.default,function(g){if(typeof g.test=="function")return g.test(h);if(g.test instanceof Array)return g.test.some(function(p){return h.test(p)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.engine=f.describe(this.getUA())),this.parsedResult.engine},d.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},d.getResult=function(){return a.default.assign({},this.parsedResult)},d.satisfies=function(h){var f=this,g={},p=0,m={},y=0;if(Object.keys(h).forEach(function(P){var L=h[P];typeof L=="string"?(m[P]=L,y+=1):typeof L=="object"&&(g[P]=L,p+=1)}),p>0){var w=Object.keys(g),b=a.default.find(w,function(P){return f.isOS(P)});if(b){var v=this.satisfies(g[b]);if(v!==void 0)return v}var C=a.default.find(w,function(P){return f.isPlatform(P)});if(C){var A=this.satisfies(g[C]);if(A!==void 0)return A}}if(y>0){var $=Object.keys(m),R=a.default.find($,function(P){return f.isBrowser(P,!0)});if(R!==void 0)return this.compareVersion(m[R])}},d.isBrowser=function(h,f){f===void 0&&(f=!1);var g=this.getBrowserName().toLowerCase(),p=h.toLowerCase(),m=a.default.getBrowserTypeByAlias(p);return f&&m&&(p=m.toLowerCase()),p===g},d.compareVersion=function(h){var f=[0],g=h,p=!1,m=this.getBrowserVersion();if(typeof m=="string")return h[0]===">"||h[0]==="<"?(g=h.substr(1),h[1]==="="?(p=!0,g=h.substr(2)):f=[],h[0]===">"?f.push(1):f.push(-1)):h[0]==="="?g=h.substr(1):h[0]==="~"&&(p=!0,g=h.substr(1)),f.indexOf(a.default.compareVersions(m,g,p))>-1},d.isOS=function(h){return this.getOSName(!0)===String(h).toLowerCase()},d.isPlatform=function(h){return this.getPlatformType(!0)===String(h).toLowerCase()},d.isEngine=function(h){return this.getEngineName(!0)===String(h).toLowerCase()},d.is=function(h,f){return f===void 0&&(f=!1),this.isBrowser(h,f)||this.isOS(h)||this.isPlatform(h)},d.some=function(h){var f=this;return h===void 0&&(h=[]),h.some(function(g){return f.is(g)})},u}();e.default=l,t.exports=e.default},92:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(a){var c={name:"Googlebot"},l=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/opera/i],describe:function(a){var c={name:"Opera"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opr\/|opios/i],describe:function(a){var c={name:"Opera"},l=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/SamsungBrowser/i],describe:function(a){var c={name:"Samsung Internet for Android"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Whale/i],describe:function(a){var c={name:"NAVER Whale Browser"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MZBrowser/i],describe:function(a){var c={name:"MZ Browser"},l=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/focus/i],describe:function(a){var c={name:"Focus"},l=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/swing/i],describe:function(a){var c={name:"Swing"},l=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/coast/i],describe:function(a){var c={name:"Opera Coast"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var c={name:"Opera Touch"},l=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/yabrowser/i],describe:function(a){var c={name:"Yandex Browser"},l=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/ucbrowser/i],describe:function(a){var c={name:"UC Browser"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/Maxthon|mxios/i],describe:function(a){var c={name:"Maxthon"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/epiphany/i],describe:function(a){var c={name:"Epiphany"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/puffin/i],describe:function(a){var c={name:"Puffin"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sleipnir/i],describe:function(a){var c={name:"Sleipnir"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/k-meleon/i],describe:function(a){var c={name:"K-Meleon"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/micromessenger/i],describe:function(a){var c={name:"WeChat"},l=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/qqbrowser/i],describe:function(a){var c={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},l=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/msie|trident/i],describe:function(a){var c={name:"Internet Explorer"},l=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/\sedg\//i],describe:function(a){var c={name:"Microsoft Edge"},l=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/edg([ea]|ios)/i],describe:function(a){var c={name:"Microsoft Edge"},l=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/vivaldi/i],describe:function(a){var c={name:"Vivaldi"},l=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/seamonkey/i],describe:function(a){var c={name:"SeaMonkey"},l=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/sailfish/i],describe:function(a){var c={name:"Sailfish"},l=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return l&&(c.version=l),c}},{test:[/silk/i],describe:function(a){var c={name:"Amazon Silk"},l=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/phantom/i],describe:function(a){var c={name:"PhantomJS"},l=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/slimerjs/i],describe:function(a){var c={name:"SlimerJS"},l=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c={name:"BlackBerry"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c={name:"WebOS Browser"},l=i.default.getFirstMatch(s,a)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/bada/i],describe:function(a){var c={name:"Bada"},l=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/tizen/i],describe:function(a){var c={name:"Tizen"},l=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/qupzilla/i],describe:function(a){var c={name:"QupZilla"},l=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var c={name:"Firefox"},l=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/electron/i],describe:function(a){var c={name:"Electron"},l=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/MiuiBrowser/i],describe:function(a){var c={name:"Miui"},l=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/chromium/i],describe:function(a){var c={name:"Chromium"},l=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/chrome|crios|crmo/i],describe:function(a){var c={name:"Chrome"},l=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/GSA/i],describe:function(a){var c={name:"Google Search"},l=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c={name:"Android Browser"},l=i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/playstation 4/i],describe:function(a){var c={name:"PlayStation 4"},l=i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/safari|applewebkit/i],describe:function(a){var c={name:"Safari"},l=i.default.getFirstMatch(s,a);return l&&(c.version=l),c}},{test:[/.*/i],describe:function(a){var c=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(c,a),version:i.default.getSecondMatch(c,a)}}}];e.default=o,t.exports=e.default},93:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:[/Roku\/DVP/],describe:function(a){var c=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:s.OS_MAP.Roku,version:c}}},{test:[/windows phone/i],describe:function(a){var c=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.WindowsPhone,version:c}}},{test:[/windows /i],describe:function(a){var c=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),l=i.default.getWindowsVersionName(c);return{name:s.OS_MAP.Windows,version:c,versionName:l}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var c={name:s.OS_MAP.iOS},l=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return l&&(c.version=l),c}},{test:[/macintosh/i],describe:function(a){var c=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),l=i.default.getMacOSVersionName(c),u={name:s.OS_MAP.MacOS,version:c};return l&&(u.versionName=l),u}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var c=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:c}}},{test:function(a){var c=!a.test(/like android/i),l=a.test(/android/i);return c&&l},describe:function(a){var c=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),l=i.default.getAndroidVersionName(c),u={name:s.OS_MAP.Android,version:c};return l&&(u.versionName=l),u}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var c=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),l={name:s.OS_MAP.WebOS};return c&&c.length&&(l.version=c),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var c=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||i.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:s.OS_MAP.BlackBerry,version:c}}},{test:[/bada/i],describe:function(a){var c=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Bada,version:c}}},{test:[/tizen/i],describe:function(a){var c=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.Tizen,version:c}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var c=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:s.OS_MAP.PlayStation4,version:c}}}];e.default=o,t.exports=e.default},94:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var c=i.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",l={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return c&&(l.model=c),l}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){var c=a.test(/ipod|iphone/i),l=a.test(/like (ipod|iphone)/i);return c&&!l},describe:function(a){var c=i.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:c}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var c=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&c>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];e.default=o,t.exports=e.default},95:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},s=n(18),o=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:s.ENGINE_MAP.Blink};var c=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:s.ENGINE_MAP.EdgeHTML,version:c}}},{test:[/trident/i],describe:function(a){var c={name:s.ENGINE_MAP.Trident},l=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){return a.test(/presto/i)},describe:function(a){var c={name:s.ENGINE_MAP.Presto},l=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:function(a){var c=a.test(/gecko/i),l=a.test(/like gecko/i);return c&&!l},describe:function(a){var c={name:s.ENGINE_MAP.Gecko},l=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var c={name:s.ENGINE_MAP.WebKit},l=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return l&&(c.version=l),c}}];e.default=o,t.exports=e.default}});var GR=bb(VR.exports);const Jr={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"};class fo{constructor({shouldSetOnWindow:e,connectionStream:n,shouldSendMetadata:r=!1,shouldShimWeb3:i,sdkInstance:s}){const o=new YR({connectionStream:n,shouldSendMetadata:r,shouldSetOnWindow:e,shouldShimWeb3:i,autoRequestAccounts:!1}),a=new Proxy(o,{deleteProperty:()=>!0});if(this.provider=a,this.sdkInstance=s,e&&typeof window<"u")try{c=o,window.ethereum=c,window.dispatchEvent(new Event("ethereum#initialized"))}catch(l){re("[Ethereum] Unable to set global provider - window.ethereum may be read-only",l)}var c;if(i&&typeof window<"u")try{(function(l,u=console){let d=!1,h=!1;if(!window.web3){const f="__isMetaMaskShim__";let g={currentProvider:l};Object.defineProperty(g,f,{value:!0,enumerable:!0,configurable:!1,writable:!1}),g=new Proxy(g,{get:(p,m,...y)=>(m!=="currentProvider"||d?m==="currentProvider"||m===f||h||(h=!0,u.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),l.request({method:"metamask_logWeb3ShimUsage"}).catch(w=>{u.debug("MetaMask: Failed to log web3 shim usage.",w)})):(d=!0,u.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(p,m,...y)),set:(...p)=>(u.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...p))}),Object.defineProperty(window,"web3",{value:g,enumerable:!1,configurable:!0,writable:!0})}})(this.provider)}catch(l){re("[Ethereum] Unable to shim web3 - window.web3 may be read-only",l)}this.provider.on("display_uri",l=>{this.sdkInstance.emit(Jr.DisplayURI,l)}),this.provider.on("_initialized",()=>{const l={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit(Jr.Initialized,l),re("[Ethereum: constructor()] provider initialized",l)})}static init(e){var n;return re("[Ethereum: init()] Initializing Ethereum service"),this.instance=new fo(e),(n=this.instance)===null||n===void 0?void 0:n.provider}static destroy(){}static getInstance(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}class C1{constructor({useDeepLink:e,preferredOpenLink:n,debug:r=!1}){this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=e,this.state.preferredOpenLink=n,this.state.debug=r}openDeeplink(e,n,r){return function(i,s,o,a){const{state:c}=i;re(`[PlatfformManager: openDeeplink()] universalLink --> ${s}`),re(`[PlatfformManager: openDeeplink()] deepLink --> ${o}`);try{if(c.preferredOpenLink)return void c.preferredOpenLink(c.useDeeplink?o:s,a);if(re(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${c.useDeeplink} link=${c.useDeeplink?o:s}`),c.useDeeplink)typeof window<"u"&&(window.location.href=o);else if(typeof document<"u"){const l=document.createElement("a");l.href=s,l.target="_self",l.rel="noreferrer noopener",l.click()}}catch(l){console.log("[PlatfformManager: openDeeplink()] can't open link",l)}}(this,e,n,r)}isReactNative(){var e;return this.isNotBrowser()&&typeof window<"u"&&(window==null?void 0:window.navigator)&&((e=window.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"}isMetaMaskInstalled(){return function(){const e=fo.getProvider()||(window==null?void 0:window.ethereum);return re(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${e==null?void 0:e.isMetaMask} isConnected=${e==null?void 0:e.isConnected()}`),(e==null?void 0:e.isMetaMask)&&(e==null?void 0:e.isConnected())}()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,n;const r=GR.parse(window.navigator.userAgent);return((e=r==null?void 0:r.platform)===null||e===void 0?void 0:e.type)==="mobile"||((n=r==null?void 0:r.platform)===null||n===void 0?void 0:n.type)==="tablet"}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return typeof window<"u"&&!!window.ReactNativeWebView&&!!navigator.userAgent.endsWith("MetaMaskMobile")}isMobileWeb(){return this.state.platformType===gr.MobileWeb}static isNotBrowser(){var e;return typeof window>"u"||!(window!=null&&window.navigator)||Vr!==void 0&&((e=Vr==null?void 0:Vr.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"||(navigator==null?void 0:navigator.product)==="ReactNative"}isNotBrowser(){return C1.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return C1.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return function(e){const{state:n}=e;return n.platformType?n.platformType:e.isReactNative()?gr.ReactNative:e.isNotBrowser()?gr.NonBrowser:e.isMetaMaskMobileWebView()?gr.MetaMaskMobileWebview:e.isMobile()?gr.MobileWeb:gr.DesktopWeb}(this)}}const ZR=t=>oe(void 0,void 0,void 0,function*(){if(C1.isBrowser()){const{StorageManagerWeb:n}=yield Promise.resolve().then(function(){return Lce});return new n(t)}const e={persistChannelConfig:()=>oe(void 0,void 0,void 0,function*(){}),getPersistedChannelConfig:()=>oe(void 0,void 0,void 0,function*(){}),persistAccounts:()=>oe(void 0,void 0,void 0,function*(){}),getCachedAccounts:()=>oe(void 0,void 0,void 0,function*(){return[]}),persistChainId:()=>oe(void 0,void 0,void 0,function*(){}),getCachedChainId:()=>oe(void 0,void 0,void 0,function*(){}),terminate:()=>oe(void 0,void 0,void 0,function*(){})};return Promise.resolve(e)});class YR extends cce{constructor({connectionStream:e,shouldSendMetadata:n,autoRequestAccounts:r=!1}){super(e,{logger:console,maxEventListeners:100,shouldSendMetadata:n}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},re(`[SDKProvider: constructor()] autoRequestAccounts=${r}`),this.state.autoRequestAccounts=r}forceInitializeState(){return oe(this,void 0,void 0,function*(){return re(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()})}_setConnected(){re("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e;const{accounts:n}=this._state;return n&&n.length!==0?((e=n[0])===null||e===void 0?void 0:e.toLowerCase())||"":(re("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleAccountsChanged(e,n){return this._handleAccountsChanged(e,n)}handleDisconnect({terminate:e=!1}){(function({terminate:n=!1,instance:r}){const{state:i}=r;re(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${n}`,r),n&&(r._state.accounts=null,r._state.isUnlocked=!1,r._state.isPermanentlyDisconnected=!0,r._state.initialized=!1),r._handleAccountsChanged([]),r._state.isConnected=!1,r.emit("disconnect",qR.ethErrors.provider.disconnected()),i.providerStateRequested=!1})({terminate:e,instance:this})}_initializeStateAsync(){return oe(this,void 0,void 0,function*(){return function(e){var n,r;return oe(this,void 0,void 0,function*(){e.state===void 0&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});const{state:i}=e;let s;if(i.providerStateRequested)re("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let o;i.providerStateRequested=!0;let a=null,c=!1,l=!1;const u=yield ZR({enabled:!0});if(u){const d=yield u.getPersistedChannelConfig({});c=(n=d==null?void 0:d.relayPersistence)!==null&&n!==void 0&&n,o=yield u.getCachedChainId();const h=yield u.getCachedAccounts();h.length>0&&(a=h[0])}if(re(`[SDKProvider: initializeStateAsync()] relayPersistence=${c}`,{relayPersistence:c,cachedChainId:o,cachedSelectedAddress:a}),c)if(o&&a)s={accounts:[a],chainId:o,isUnlocked:!1},l=!0;else try{s=yield e.request({method:"metamask_getProviderState"})}catch(d){return e._log.error("MetaMask: Failed to get initial state. Please report this bug.",d),void(i.providerStateRequested=!1)}if(((r=s==null?void 0:s.accounts)===null||r===void 0?void 0:r.length)===0)if(e.getSelectedAddress())s.accounts=[e.getSelectedAddress()];else{re("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");const d=yield e.request({method:"eth_requestAccounts",params:[]});s.accounts=d}e._initializeState(s),i.providerStateRequested=!1,l&&(e._state.isConnected=!0,e.emit("connect",{chainId:s==null?void 0:s.chainId}))}})}(this)})}_initializeState(e){return re("[SDKProvider: _initializeState()]",e),function(n,r,i){return re("[SDKProvider: initializeState()] set state._initialized to false"),n._state.initialized=!1,r(i)}(this,super._initializeState.bind(this),e)}_handleChainChanged({chainId:e,networkVersion:n}={}){this.state.chainId=e,this.state.networkVersion=n,function({instance:r,chainId:i,networkVersion:s,superHandleChainChanged:o}){re(`[SDKProvider: handleChainChanged()] chainId=${i} networkVersion=${s}`);let a=s;s||(re("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),a="1"),i!==zR&&(mn.analytics.track("sdk_used_chain",{caip_chain_id:`eip155:${parseInt(i??"0x1",16)}`}),zR=i),r._state.isConnected=!0,r.emit("connect",{chainId:i}),o({chainId:i,networkVersion:a})}({instance:this,chainId:e,networkVersion:n,superHandleChainChanged:super._handleChainChanged.bind(this)})}}var _1,dd={name:"@metamask/sdk",version:"0.33.1",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk",directory:"packages/sdk"},main:"dist/node/cjs/metamask-sdk.js",module:"dist/browser/es/metamask-sdk.js",browser:"dist/browser/es/metamask-sdk.js",unpkg:"dist/browser/umd/metamask-sdk.js","react-native":"dist/react-native/es/metamask-sdk.js",types:"dist/types/src/index.d.ts",sideEffects:!1,files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:clean":"yarn clean && yarn build","build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",typecheck:"tsc --noEmit",clean:"rimraf ./dist",size:"node bundle-size && size-limit",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore",prepack:"../../scripts/prepack.sh","publish:preview":"yarn npm publish --tag preview",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:coverage":'jest --coverage --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":'jest -c ./jest.config.ts --detectOpenHandles  --testPathIgnorePatterns "/e2e/"',watch:"rollup -c -w",dev:'concurrently "tsc --watch" "rollup -c -w --bundleConfigAsCjs"',"build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs"},dependencies:{"@babel/runtime":"^7.26.0","@metamask/onboarding":"^1.0.1","@metamask/providers":"16.1.0","@metamask/sdk-analytics":"workspace:*","@metamask/sdk-communication-layer":"workspace:*","@metamask/sdk-install-modal-web":"workspace:*","@paulmillr/qr":"^0.2.1",bowser:"^2.9.0","cross-fetch":"^4.0.0",debug:"4.3.4",eciesjs:"^0.4.11","eth-rpc-errors":"^4.0.3",eventemitter2:"^6.4.9","obj-multiplex":"^1.0.0",pump:"^3.0.0","readable-stream":"^3.6.2","socket.io-client":"^4.5.1",tslib:"^2.6.0",util:"^0.12.4",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@react-native-async-storage/async-storage":"^1.19.6","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.1","@size-limit/preset-big-lib":"^11.0.2","@types/dom-screen-wake-lock":"^1.0.2","@types/node":"^20.1.3","@types/pump":"^1.1.1","@types/qrcode-terminal":"^0.12.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",concurrently:"^9.1.2","crypto-browserify":"^3.12.0",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","https-browserify":"^1.0.0",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1",prettier:"^2.3.0",process:"^0.11.10",rimraf:"^4.4.0",rollup:"^4.26.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.3.2",url:"^0.11.0",webpack:"^5.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,"@metamask/sdk-communication-layer>bufferutil":!1,"@metamask/sdk-communication-layer>eciesjs>secp256k1":!1,"@metamask/sdk-communication-layer>utf-8-validate":!1}}};(function(t){t.INPAGE="metamask-inpage",t.CONTENT_SCRIPT="metamask-contentscript",t.PROVIDER="metamask-provider"})(_1||(_1={}));const JR="direct",S1="https://metamask.app.link/connect",x1="metamask://connect",QR={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},dce=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,Ue={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},A1={[Ue.ETH_REQUESTACCOUNTS]:!0,[Ue.ETH_SENDTRANSACTION]:!0,[Ue.ETH_SIGNTRANSACTION]:!0,[Ue.ETH_SIGN]:!0,[Ue.PERSONAL_SIGN]:!0,[Ue.ETH_ACCOUNTS]:!1,[Ue.ETH_CHAINID]:!1,[Ue.PERSONAL_SIGN]:!0,[Ue.ETH_SIGNTYPEDDATA]:!0,[Ue.ETH_SIGNTYPEDDATA_V3]:!0,[Ue.ETH_SIGNTYPEDDATA_V4]:!0,[Ue.WALLET_REQUESTPERMISSIONS]:!0,[Ue.WALLET_GETPERMISSIONS]:!0,[Ue.WALLET_WATCHASSET]:!0,[Ue.WALLET_ADDETHEREUMCHAIN]:!0,[Ue.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[Ue.METAMASK_CONNECTSIGN]:!0,[Ue.METAMASK_CONNECTWITH]:!0,[Ue.PERSONAL_EC_RECOVER]:!0,[Ue.METAMASK_BATCH]:!0,[Ue.METAMASK_OPEN]:!0},hce=Object.keys(A1).filter(t=>A1[t]===!0).map(t=>t.toLowerCase()),XR=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map(t=>t.toLowerCase()),R4=".sdk-comm",Ev="providerType",M4=".MMSDK_cached_address",B4=".MMSDK_cached_chainId",ta={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"},fce=1e6;var po;(function(t){t.TERMINATE="terminate",t.EXTENSION="extension",t.INITIALIZED="initialized"})(po||(po={}));const pce=typeof window<"u"&&window.localStorage;function gce({instance:t,msg:e}){return oe(this,void 0,void 0,function*(){if(t._initialized||(re("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield t.init()),re(`[MetaMaskSDK: connectAndSign()] activeProvider=${t.activeProvider}`),!t.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=/^0x([0-9A-Fa-f]{2})*$/u.test(e)?e:function(r){let i;if(ae!==void 0)i=ae.from(r,"utf8").toString("hex");else if(typeof TextEncoder<"u"){const s=new TextEncoder().encode(r);i=Array.from(s).map(o=>o.toString(16).padStart(2,"0")).join("")}else{if(typeof Vr!="object"||!("Buffer"in Vr))throw new Error("Unable to convert string to hex: No available method.");i=Vr.Buffer.from(r,"utf8").toString("hex")}return`0x${i}`}(e);return t.activeProvider.request({method:Ue.METAMASK_CONNECTWITH,params:[{method:Ue.PERSONAL_SIGN,params:[n]}]})})}function eM(t){var e,n;return oe(this,void 0,void 0,function*(){re("[MetaMaskSDK: connectWithExtensionProvider()] ",t),t.sdkProvider=t.activeProvider,t.activeProvider=window.extension,window.ethereum=window.extension;try{const r=yield(e=window.extension)===null||e===void 0?void 0:e.request({method:"eth_requestAccounts"});re(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${r}`)}catch(r){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",r)}localStorage.setItem(Ev,"extension"),t.extensionActive=!0,t.emit(Jr.ProviderUpdate,po.EXTENSION),t.options.enableAnalytics&&((n=t.analytics)===null||n===void 0||n.send({event:yn.SDK_USE_EXTENSION}))})}function Cv(t){let e;if(ae!==void 0)e=ae.from(t,"utf8").toString("base64");else if(typeof btoa=="function")e=btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/gu,(n,r)=>String.fromCharCode(parseInt(r,16))));else{if(typeof Vr!="object"||!("Buffer"in Vr))throw new Error("Unable to base64 encode: No available method.");e=Vr.Buffer.from(t,"utf8").toString("base64")}return e}function mce(t,e,n,r){var i,s,o,a,c,l,u,d,h,f,g,p,m,y,w,b,v,C,A,$;return oe(this,void 0,void 0,function*(){const R=(i=t.state.remote)===null||i===void 0?void 0:i.isReady(),P=(s=t.state.remote)===null||s===void 0?void 0:s.isConnected(),L=(o=t.state.remote)===null||o===void 0?void 0:o.isPaused(),U=fo.getProvider(),D=(a=t.state.remote)===null||a===void 0?void 0:a.getChannelId(),j=(c=t.state.remote)===null||c===void 0?void 0:c.isAuthorized(),{deeplinkProtocol:I}=t.state,{method:E,data:S,triggeredInstaller:k}=(M=>{var O,N,B,F;let z;ae.isBuffer(M)?(z=M.toJSON(),z._isBuffer=!0):z=M;const q=(O=z==null?void 0:z.data)===null||O===void 0?void 0:O.method;let H=!1;return typeof((N=z==null?void 0:z.data)===null||N===void 0?void 0:N.params)=="object"&&((F=(B=z==null?void 0:z.data)===null||B===void 0?void 0:B.params)===null||F===void 0?void 0:F.__triggeredInstaller)===!0&&(H=!0,z.data.params=z.data.params.wrappedParams),{method:q,data:z,triggeredInstaller:H}})(e);if(re(`[RCPMS: write()] method='${E}' isRemoteReady=${R} channelId=${D} isSocketConnected=${P} isRemotePaused=${L} providerConnected=${U.isConnected()}`,e),!D)return E!==Ue.METAMASK_GETPROVIDERSTATE&&re(`[RCPMS: write()] ${E} --> channelId is undefined`),r(new Error("disconnected"));re(`[RCPMS: write()] remote.isPaused()=${(l=t.state.remote)===null||l===void 0?void 0:l.isPaused()} authorized=${j} ready=${R} socketConnected=${P}`,e);const _=(u=t.state.platformManager)===null||u===void 0?void 0:u.isSecure(),x=(h=(d=t.state.platformManager)===null||d===void 0?void 0:d.isMobileWeb())!==null&&h!==void 0&&h,T=(g=(f=t.state.remote)===null||f===void 0?void 0:f.hasDeeplinkProtocol())!==null&&g!==void 0&&g&&x&&j;try{if(!k){const N=JSON.stringify(S==null?void 0:S.data);if(N.length>fce)return r(new Error(`Message size ${N.length} exceeds maximum allowed size of 1000000 bytes`));(p=t.state.remote)===null||p===void 0||p.sendMessage(S==null?void 0:S.data).then(()=>{re(`[RCPMS: _write()] ${E} sent successfully`)}).catch(B=>{re("[RCPMS: _write()] error sending message",B)})}if(!_)return re(`[RCPMS: _write()] unsecure platform for method ${E} -- return callback`),r();if(k)return re("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r();const M=(w=(y=(m=t.state.remote)===null||m===void 0?void 0:m.getKeyInfo())===null||y===void 0?void 0:y.ecies.public)!==null&&w!==void 0?w:"";let O=encodeURI(`channelId=${D}&pubkey=${M}&comm=socket&t=d&v=2`);if(T){const N=JSON.stringify(S==null?void 0:S.data),B=(b=t.state.remote)===null||b===void 0?void 0:b.encrypt(N);if(!B)return re("[RCPMS: _write()] error encrypting message"),r(new Error("RemoteCommunicationPostMessageStream - disconnected"));O+=`&scheme=${I}&rpc=${Cv(B)}`}if(!(!((v=t.state.platformManager)===null||v===void 0)&&v.isMetaMaskInstalled()))return re("[RCPMS: _write()] prevent deeplink until installation is completed."),r();A1[E]?(re(`[RCPMS: _write()] redirect link for '${E}' socketConnected=${P} connect?${O}`),(C=t.state.platformManager)===null||C===void 0||C.openDeeplink(`${S1}?${O}`,`${x1}?${O}`,"_self")):!((A=t.state.remote)===null||A===void 0)&&A.isPaused()?(re(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${E}`),($=t.state.platformManager)===null||$===void 0||$.openDeeplink(`${S1}?redirect=true&${O}`,`${x1}?redirect=true&${O}`,"_self")):re(`[RCPMS: _write()] method ${E} doesn't need redirect.`)}catch(M){return re("[RCPMS: _write()] error sending message",M),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))}return r()})}class yce extends Bf.Duplex{constructor({name:e,remote:n,deeplinkProtocol:r,platformManager:i}){super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},this.state._name=e,this.state.remote=n,this.state.deeplinkProtocol=r,this.state.platformManager=i,this._onMessage=this._onMessage.bind(this),this.state.remote.on(de.MESSAGE,this._onMessage)}_write(e,n,r){return oe(this,void 0,void 0,function*(){return mce(this,e,0,r)})}_read(){}_onMessage(e){return function(n,r){try{if(re("[RCPMS: onMessage()] message",r),!r||typeof r!="object"||typeof(r==null?void 0:r.data)!="object")return;if(!(r!=null&&r.name))return void re("[RCPMS: onMessage()] ignore message without name",r);if((r==null?void 0:r.name)!==_1.PROVIDER)return void re(`[RCPMS: onMessage()] ignore message with wrong name message=${r}`);if(ae.isBuffer(r)){const i=ae.from(r);n.push(i)}else n.push(r)}catch(i){re(`[RCPMS: onMessage()] ignore message error err=${i}`)}}(this,e)}start(){}}let tM=1;const nM=t=>new Promise(e=>{setTimeout(()=>{e(!0)},t)}),wce=({checkInstallationOnAllCalls:t=!1,communicationLayerPreference:e,injectProvider:n,shouldShimWeb3:r,platformManager:i,installer:s,sdk:o,remoteConnection:a,debug:c})=>oe(void 0,void 0,void 0,function*(){var l,u;const d=(({name:L,remoteConnection:U})=>{if(!U||!(U!=null&&U.getConnector()))throw new Error("Missing remote connection parameter");return new yce({name:L,remote:U==null?void 0:U.getConnector(),deeplinkProtocol:U==null?void 0:U.state.deeplinkProtocol,platformManager:U==null?void 0:U.getPlatformManager()})})({name:_1.INPAGE,target:_1.CONTENT_SCRIPT,platformManager:i,communicationLayerPreference:e,remoteConnection:a}),h=i.getPlatformType(),f=o.options.dappMetadata,g=`Sdk/Javascript SdkVersion/${dd.version} Platform/${h} dApp/${(l=f.url)!==null&&l!==void 0?l:f.name} dAppTitle/${f.name}`;let p=null,m=null;const y=(u=o.options.storage)===null||u===void 0?void 0:u.storageManager;if(y){try{const L=yield y.getCachedAccounts();L.length>0&&(p=L[0])}catch(L){console.error(`[initializeMobileProvider] failed to get cached addresses: ${L}`)}try{const L=yield y.getCachedChainId();L&&(m=L)}catch(L){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${L}`)}}re(`[initializeMobileProvider] cachedAccountAddress: ${p}, cachedChainId: ${m}`);const w=!(!n||h===gr.NonBrowser||h===gr.ReactNative),b=fo.init({shouldSetOnWindow:w,connectionStream:d,shouldShimWeb3:r,sdkInstance:o});let v=!1;const C=L=>{v=L},A=()=>v,$=(L,U,D,j)=>oe(void 0,void 0,void 0,function*(){var I,E,S,k,_,x,T,M,O;const N=fo.getProvider();if(v){N.emit("display_uri",(a==null?void 0:a.state.qrcodeLink)||""),a==null||a.showActiveModal();let G=A();for(;G;){const te=A(),se=a==null?void 0:a.isAuthorized();G=te&&!se,re(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${te} authorized: ${se}`),yield nM(1e3)}return re("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),D(...U)}const B=i.isMetaMaskInstalled(),F=a==null?void 0:a.isConnected();let z=null,q=null,H=null;if(z=(I=N.getSelectedAddress())!==null&&I!==void 0?I:p,H=N.getChainId()||m,z&&y&&z!==p&&y.persistAccounts([z]).catch(G=>{console.error(`[initializeMobileProvider] failed to persist account: ${G}`)}),H&&(m=H,y&&y.persistChainId(H).catch(G=>{console.error(`[initializeMobileProvider] failed to persist chainId: ${G}`)})),re("[initializeMobileProvider: sendRequest()]",{selectedAddress:z,chainId:H}),j&&re(`[initializeMobileProvider: sendRequest()] method=${L} ongoing=${v} selectedAddress=${z} isInstalled=${B} checkInstallationOnAllCalls=${t} socketConnected=${F}`),z&&L.toLowerCase()===Ue.ETH_ACCOUNTS.toLowerCase())return[z];if(H&&L.toLowerCase()===Ue.ETH_CHAINID.toLowerCase())return H;const K=[Ue.ETH_REQUESTACCOUNTS,Ue.WALLET_REQUESTPERMISSIONS,Ue.METAMASK_CONNECTSIGN,Ue.METAMASK_CONNECTWITH],Y=!A1[L],J=(E=o.options.readonlyRPCMap)===null||E===void 0?void 0:E[H];if(J&&Y)try{const G=(S=U==null?void 0:U[0])===null||S===void 0?void 0:S.params,te=yield(({rpcEndpoint:se,method:he,sdkInfo:fe,params:_e})=>oe(void 0,void 0,void 0,function*(){const Pe=JSON.stringify({jsonrpc:"2.0",method:he,params:_e,id:(tM+=1,tM)}),De={Accept:"application/json","Content-Type":"application/json"};let tt;se.includes("infura")&&(De["Metamask-Sdk-Info"]=fe);try{tt=yield gO(se,{method:"POST",headers:De,body:Pe})}catch(st){throw st instanceof Error?new Error(`Failed to fetch from RPC: ${st.message}`):new Error(`Failed to fetch from RPC: ${st}`)}if(!tt.ok)throw new Error(`Server responded with a status of ${tt.status}`);return(yield tt.json()).result}))({rpcEndpoint:J,sdkInfo:g,method:L,params:G||[]});return j&&re(`initializeProvider::ReadOnlyRPCResponse ${te}`),te}catch(G){console.warn(`[initializeMobileProvider: sendRequest()] method=${L} readOnlyRPCRequest failed:`,G)}if((!B||B&&!F)&&L!==Ue.METAMASK_GETPROVIDERSTATE){const G=((k=U==null?void 0:U[0])===null||k===void 0?void 0:k.params)||[];if(K.indexOf(L)!==-1||t){C(!0);const te=L===Ue.METAMASK_CONNECTWITH,se=`${Date.now()}`;try{yield s.start({wait:!1,connectWith:te?{method:L,id:se,params:G}:void 0}),yield new Promise((he,fe)=>{a!=null&&a.isAuthorized()&&(re("[initializeMobileProvider: sendRequest()] already authorized"),he(!0)),a==null||a.getConnector().once(de.AUTHORIZED,()=>{he(!0)}),o.once(de.PROVIDER_UPDATE,_e=>{re(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${_e}`),_e===po.EXTENSION?fe(de.PROVIDER_UPDATE):fe(new Error("Connection Terminated"))})})}catch(he){if(po.EXTENSION===he){if(re(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${L} on the active provider`),L.toLowerCase()===Ue.METAMASK_CONNECTSIGN.toLowerCase()){const fe=yield(_=o.getProvider())===null||_===void 0?void 0:_.request({method:Ue.ETH_REQUESTACCOUNTS,params:[]});if(!fe.length)throw new Error("SDK state invalid -- undefined accounts");const _e=yield(x=o.getProvider())===null||x===void 0?void 0:x.request({method:Ue.PERSONAL_SIGN,params:[G[0],fe[0]]});return o.emit(Jr.ConnectWithResponse,_e),_e}if(L.toLowerCase()===Ue.METAMASK_CONNECTWITH.toLowerCase()){const[fe]=G,_e=yield(({method:Pe,sdk:De,params:tt})=>oe(void 0,void 0,void 0,function*(){var st,ze,Ye,nt;if(!De.isExtensionActive())throw new Error("SDK state invalid -- extension is not active");re("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",Pe,tt);const xn=yield(st=De.getProvider())===null||st===void 0?void 0:st.request({method:Ue.ETH_REQUESTACCOUNTS,params:[]});if(!xn.length)throw new Error("SDK state invalid -- undefined accounts");if((Pe==null?void 0:Pe.toLowerCase())===Ue.PERSONAL_SIGN.toLowerCase()){const oi={method:Pe,params:[tt[0],xn[0]]};return yield(ze=De.getProvider())===null||ze===void 0?void 0:ze.request(oi)}if((Pe==null?void 0:Pe.toLowerCase())===Ue.ETH_SENDTRANSACTION.toLowerCase()){const oi={method:Pe,params:[Object.assign(Object.assign({},tt[0]),{from:xn[0]})]};return yield(Ye=De.getProvider())===null||Ye===void 0?void 0:Ye.request(oi)}return XR.includes(Pe.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${Pe} -- not handled by the extension -- call separately`),xn):yield(nt=De.getProvider())===null||nt===void 0?void 0:nt.request({method:Pe,params:tt})}))({method:fe.method,sdk:o,params:fe.params});return o.emit(Jr.ConnectWithResponse,_e),_e}return re(`[initializeMobileProvider: sendRequest()] sending '${L}' on active provider`,G),yield(T=o.getProvider())===null||T===void 0?void 0:T.request({method:L,params:G})}throw he===de.REJECTED?(a==null||a.closeModal(),(M=o.getProvider())===null||M===void 0||M.handleDisconnect({terminate:!1}),Object.assign(new Error("User rejected connection"),{code:4001})):(re(`[initializeMobileProvider: sendRequest()] failed to start installer: ${he}`),he)}finally{C(!1)}if(L===Ue.ETH_REQUESTACCOUNTS)return q=yield new Promise(he=>{const fe=setInterval(()=>{const{accounts:_e}=N.getState();_e&&(clearInterval(fe),he(_e))},100)}),re(`[initializeMobileProvider: sendRequest()] selectedAddress: ${z} --- SKIP rpc call`),q;if(L===Ue.METAMASK_CONNECTWITH)try{let he=0;const fe=5,_e=({resolve:st,reject:ze})=>{he+=1;const Ye=a==null?void 0:a.getConnector().getRPCMethodTracker(),nt=Ye==null?void 0:Ye[se];return re(`TRACKER: update method ${se}`,nt),nt!=null&&nt.result?(re("[initializeMobileProvider: sendRequest()] found result",nt.result),o.emit(Jr.ConnectWithResponse,nt.result),void st(nt.result)):nt!=null&&nt.error?(re("[initializeMobileProvider: sendRequest()] found error",nt.error),void ze(nt.error)):he>=fe?(re("[initializeMobileProvider: sendRequest()] max message count reached without result"),void ze(new Error("Max message count reached without result"))):void re("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")};let Pe,De;const tt=yield new Promise((st,ze)=>{const Ye=a==null?void 0:a.getConnector().getRPCMethodTracker();re(`TRACKER: method ${se}`,Ye),Ye!=null&&Ye[se].result?(re("[initializeMobileProvider: sendRequest()] found result",Ye==null?void 0:Ye[se].result),st(Ye==null?void 0:Ye[se].result)):Ye!=null&&Ye[se].error&&(re("[initializeMobileProvider: sendRequest()] found error",Ye==null?void 0:Ye[se].error),ze(Ye==null?void 0:Ye[se].error)),De=()=>_e({resolve:st,reject:ze}),Pe=a==null?void 0:a.getConnector().on(de.RPC_UPDATE,De)});return De&&(Pe==null||Pe.off(de.RPC_UPDATE,De)),re("TRACKER: result",tt),tt}catch(he){throw re("[initializeMobileProvider: sendRequest()] error:",he),he}return U[0]&&typeof U[0]=="object"&&(U[0].params={__triggeredInstaller:!0,wrappedParams:U[0].params}),D(...U)}if(i.isSecure()&&A1[L])return D(...U);if(o.isExtensionActive())return re(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${L}' to it`,U,G),yield(O=o.getProvider())===null||O===void 0?void 0:O.request({method:L,params:G});throw re(`[initializeMobileProvider: sendRequest()] method=${L} --- skip --- not connected/installed`),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}try{const G=yield D(...U);if(re(`[initializeMobileProvider: sendRequest()] method=${L} rpcResponse`,G),L===Ue.WALLET_REQUESTPERMISSIONS){const te=G.reduce((se,he)=>{var fe;if(he.parentCapability==="eth_accounts"){const _e=(fe=he.caveats.find(Pe=>Pe.type==="restrictReturnedAccounts"))===null||fe===void 0?void 0:fe.value;_e&&se.push(..._e)}return se},[]);re("[initializeMobileProvider: sendRequest()] accountsToPersist:",te),te.length>0&&(N.handleAccountsChanged(te,!1),y==null||y.persistAccounts(te))}return G}catch(G){throw console.error("[initializeMobileProvider: sendRequest()] error:",G),G}}),{request:R}=b;b.request=(...L)=>oe(void 0,void 0,void 0,function*(){return $(L==null?void 0:L[0].method,L,R,c)});const{send:P}=b;return b.send=(...L)=>oe(void 0,void 0,void 0,function*(){return $(L==null?void 0:L[0],L,P,c)}),re("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),d.start(),b});function bce(t){var e,n,r,i;return oe(this,void 0,void 0,function*(){const{options:s}=t,o={communicationLayerPreference:(e=s.communicationLayerPreference)!==null&&e!==void 0?e:yl.SOCKET,platformManager:t.platformManager,sdk:t,checkInstallationOnAllCalls:s.checkInstallationOnAllCalls,injectProvider:(n=s.injectProvider)===null||n===void 0||n,shouldShimWeb3:(r=s.shouldShimWeb3)===null||r===void 0||r,extensionOnly:(i=s.extensionOnly)===null||i===void 0||i,installer:t.installer,remoteConnection:t.remoteConnection,debug:t.debug},a=yield wce(o);t.activeProvider=a,function(c){var l,u,d,h;(u=(l=c.remoteConnection)===null||l===void 0?void 0:l.getConnector())===null||u===void 0||u.on(Jr.ConnectionStatus,f=>{c.emit(Jr.ConnectionStatus,f)}),(h=(d=c.remoteConnection)===null||d===void 0?void 0:d.getConnector())===null||h===void 0||h.on(Jr.ServiceStatus,f=>{c.emit(Jr.ServiceStatus,f)})}(t)})}const vce="sdk";class Ece{constructor({serverUrl:e,enabled:n,originatorInfo:r}){this.serverURL=nd,this.serverURL=e,this.originatorInfo=r,this.enabled=n==null||n}send({event:e,params:n}){if(!this.enabled)return;const r=Object.assign(Object.assign({id:vce,event:e,sdkVersion:dd.version},this.originatorInfo),{params:n});re(`[Analytics: send()] event: ${e}`,r),ec(r,this.serverURL).catch(i=>{re(`[Analytics: send()] error: ${i}`)})}}const Cce=()=>{if(typeof document>"u")return;let t;const e=document.getElementsByTagName("link");for(let n=0;n<e.length;n++)e[n].getAttribute("rel")!=="icon"&&e[n].getAttribute("rel")!=="shortcut icon"||(t=e[n].getAttribute("href"));return t},_ce=163400;function rM(t){var e,n,r;const{dappMetadata:i}=t,s=function({url:u,name:d}){var h;const f=u+d,g=Cv(f);if(!localStorage)return"";let p=(h=localStorage.getItem(g))!==null&&h!==void 0?h:"";if(!p){p=sl();try{localStorage.setItem(g,p)}catch{return""}}return p}({url:(e=i==null?void 0:i.url)!==null&&e!==void 0?e:"no_url",name:(n=i==null?void 0:i.name)!==null&&n!==void 0?n:"no_name"}),o=(r=t.platformManager)===null||r===void 0?void 0:r.getPlatformType(),a=o===gr.DesktopWeb,c=o===gr.MetaMaskMobileWebview;let l="N/A";return a?l="extension":c&&(l="mobile"),{id:s,from:l}}const _v=(t,e,n)=>{if(i1(t))if(n||e&&typeof e=="object"&&e!==null&&"error"in e){const r=n||(e==null?void 0:e.error);r&&r.code===4001?mn.analytics.track("sdk_action_rejected",{action:t}):mn.analytics.track("sdk_action_failed",{action:t})}else mn.analytics.track("sdk_action_succeeded",{action:t})},D4=({provider:t,sdkInstance:e})=>{if("state"in t)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(t,{get:(n,r)=>r==="request"?function(i){var s,o;return oe(this,void 0,void 0,function*(){re("[wrapExtensionProvider()] Overwriting request method",i);const{method:a,params:c}=i,l=hce.includes(a.toLowerCase()),{id:u,from:d}=rM(e);if(l&&((s=e.analytics)===null||s===void 0||s.send({event:yn.SDK_RPC_REQUEST,params:{method:a,from:d,id:u}})),i1(a)&&mn.analytics.track("sdk_action_requested",{action:a}),a===Ue.METAMASK_BATCH&&Array.isArray(c))return(({target:g,args:p,trackEvent:m,sdkInstance:y})=>oe(void 0,void 0,void 0,function*(){var w,b;if(p.method!=="metamask_batch")throw new Error("Invalid usage");const v=[],C=(w=p==null?void 0:p.params)!==null&&w!==void 0?w:[];for(const R of C){const P=yield g==null?void 0:g.request({method:R.method,params:R.params});v.push(P)}const{id:A,from:$}=rM(y);m&&((b=y.analytics)===null||b===void 0||b.send({event:yn.SDK_RPC_REQUEST_DONE,params:{method:p.method,from:$,id:A}}));for(const R of v)_v(p.method,R,null);return v}))({target:n,args:i,trackEvent:l,sdkInstance:e});if(a.toLowerCase()===Ue.METAMASK_CONNECTSIGN.toLowerCase()&&Array.isArray(c))return(({target:g,params:p})=>oe(void 0,void 0,void 0,function*(){let m,y=null;try{const w=yield g.request({method:Ue.ETH_REQUESTACCOUNTS,params:[]});if(!w.length)throw new Error("SDK state invalid -- undefined accounts");return m=yield g.request({method:Ue.PERSONAL_SIGN,params:[p[0],w[0]]}),m}catch(w){throw y=w,w}finally{_v(Ue.PERSONAL_SIGN,m,y)}}))({target:n,params:c});if(a.toLowerCase()===Ue.METAMASK_CONNECTWITH.toLowerCase()&&Array.isArray(c))return(({target:g,params:p})=>oe(void 0,void 0,void 0,function*(){const[m]=p,y=m.method,w=m.params;let b,v=null;try{const C=yield g.request({method:Ue.ETH_REQUESTACCOUNTS,params:[]});if(!Array.isArray(C)||!C.length)throw new Error("SDK state invalid -- undefined accounts");return(y==null?void 0:y.toLowerCase())===Ue.PERSONAL_SIGN.toLowerCase()?(b=yield g.request({method:y,params:[w[0],C[0]]}),b):(y==null?void 0:y.toLowerCase())===Ue.ETH_SENDTRANSACTION.toLowerCase()?(b=yield g.request({method:y,params:[Object.assign(Object.assign({},w[0]),{from:C[0]})]}),b):XR.includes(y.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${y} -- not handled by the extension -- call separately`),b=C,b):(b=yield g.request({method:y,params:w}),b)}catch(C){throw v=C,C}finally{_v(y,b,v)}}))({target:n,params:c});let h,f=null;try{return h=yield n.request(i),h}catch(g){throw f=g,g}finally{l&&((o=e.analytics)===null||o===void 0||o.send({event:yn.SDK_RPC_REQUEST_DONE,params:{method:a,from:d,id:u}})),_v(a,h,f)}})}:r==="getChainId"?function(){return t.chainId}:r==="getNetworkVersion"?function(){return t.networkVersion}:r==="getSelectedAddress"?function(){return t.selectedAddress}:r==="isConnected"?function(){return t._state.isConnected}:n[r]})};var Sv;function Sce({mustBeMetaMask:t,sdkInstance:e}){return oe(this,void 0,void 0,function*(){if(typeof window>"u")throw new Error("window not available");try{const n=yield new Promise((r,i)=>{const s=setTimeout(()=>{i(new Error("eip6963RequestProvider timed out"))},500);window.addEventListener(Sv.Announce,o=>{const a=o,{detail:{info:c,provider:l}={}}=a,{name:u,rdns:d,uuid:h}=c??{};dce.test(h)&&u.startsWith(QR.NAME)&&QR.RDNS.includes(d)&&(clearTimeout(s),r(l))}),window.dispatchEvent(new Event(Sv.Request))});return D4({provider:n,sdkInstance:e})}catch{if(!t&&window.ethereum)return D4({provider:window.ethereum,sdkInstance:e});throw new Error("Provider not found")}})}(function(t){t.Announce="eip6963:announceProvider",t.Request="eip6963:requestProvider"})(Sv||(Sv={}));const xce=t=>oe(void 0,void 0,void 0,function*(){const{options:e}=t,{infuraAPIKey:n}=e;if(!n)return;const r={"0x1":`https://mainnet.infura.io/v3/${n}`,"0x5":`https://goerli.infura.io/v3/${n}`,"0xaa36a7":`https://sepolia.infura.io/v3/${n}`,"0xe708":`https://linea-mainnet.infura.io/v3/${n}`,"0xe704":`https://linea-goerli.infura.io/v3/${n}`,"0x89":`https://polygon-mainnet.infura.io/v3/${n}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${n}`,"0x45":`https://optimism-mainnet.infura.io/v3/${n}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${n}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${n}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${n}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${n}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${n}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${n}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${n}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${n}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${n}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${n}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${n}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${n}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${n}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${n}`};t.options.readonlyRPCMap?t.options.readonlyRPCMap=Object.assign(Object.assign({},t.options.readonlyRPCMap),r):t.options.readonlyRPCMap=r}),Ace=t=>oe(void 0,void 0,void 0,function*(){const{options:e}=t,{readonlyRPCMap:n}=e;if(n)try{re("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",n),t.setReadOnlyRPCCalls(!0)}catch{throw new Error("Invalid Infura Settings")}});function Ice(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{c(r.next(l))}catch(u){s(u)}}function a(l){try{c(r.throw(l))}catch(u){s(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof n?u:new n(function(d){d(u)})).then(o,a)}c((r=r.apply(t,[])).next())})}function $ce(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(d){u=[6,d],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([c,l])}}}var iM="INSTALLED",sM="NOT_INSTALLED",oM="REGISTERED",aM="REGISTERING",cM="RELOADING",lM={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},xv="REGISTRATION_IN_PROGRESS",uM="FORWARDER_ID",Pce=function(){function t(e){var n=e===void 0?{}:e,r=n.forwarderOrigin,i=r===void 0?"https://fwd.metamask.io":r,s=n.forwarderMode,o=s===void 0?t.FORWARDER_MODE.INJECT:s;this.forwarderOrigin=i,this.forwarderMode=o,this.state=t.isMetaMaskInstalled()?iM:sM;var a=t._detectBrowser();this.downloadUrl=a?lM[a]:lM.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),o===t.FORWARDER_MODE.INJECT&&sessionStorage.getItem(xv)==="true"&&t._injectForwarder(this.forwarderOrigin)}return t.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return e.data.type==="metamask:reload"?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},t.prototype._onMessageUnknownStateError=function(e){throw new Error("Unknown state: '"+e+"'")},t.prototype._onMessageFromForwarder=function(e){return Ice(this,0,void 0,function(){return $ce(this,function(n){switch(n.label){case 0:switch(this.state){case cM:return[3,1];case sM:return[3,2];case iM:return[3,3];case aM:return[3,5];case oM:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=cM,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=aM,[4,t._register()];case 4:return n.sent(),this.state=oM,e.source.postMessage({type:"metamask:registrationCompleted"},e.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}})})},t.prototype.startOnboarding=function(){sessionStorage.setItem(xv,"true"),this._openDownloadPage(),this._openForwarder()},t.prototype.stopOnboarding=function(){sessionStorage.getItem(xv)==="true"&&(this.forwarderMode===t.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),t._removeForwarder()),sessionStorage.setItem(xv,"false"))},t.prototype._openForwarder=function(){this.forwarderMode===t.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):t._injectForwarder(this.forwarderOrigin)},t.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},t.isMetaMaskInstalled=function(){return!!(window.ethereum&&window.ethereum.isMetaMask)},t._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},t._injectForwarder=function(e){var n=document.body,r=document.createElement("iframe");r.setAttribute("height","0"),r.setAttribute("width","0"),r.setAttribute("style","display: none;"),r.setAttribute("src",e),r.setAttribute("id",uM),n.insertBefore(r,n.children[0])},t._removeForwarder=function(){var e;(e=document.getElementById(uM))===null||e===void 0||e.remove()},t._detectBrowser=function(){var e=GR.parse(window.navigator.userAgent);return e.browser.name==="Firefox"?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},t.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},t}();function Oce(t,{wait:e=!1}){return oe(this,void 0,void 0,function*(){return re(`[MetamaskInstaller: startInstaller()] wait=${e}`),e&&(yield nM(1e3)),yield t.checkInstallation()})}class Tce{constructor({remote:e,preferDesktop:n,platformManager:r,debug:i=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=e,this.state.preferDesktop=n,this.state.platformManager=r,this.state.debug=i}startDesktopOnboarding(){return function(){return oe(this,void 0,void 0,function*(){re("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),new Pce().startOnboarding()})}()}redirectToProperInstall(){return oe(this,void 0,void 0,function*(){return function(e){var n,r;return oe(this,void 0,void 0,function*(){const{state:i}=e,s=(n=i.platformManager)===null||n===void 0?void 0:n.getPlatformType();if(re(`[MetamaskInstaller: redirectToProperInstall()] platform=${s}`),s===gr.MetaMaskMobileWebview)return!1;i.isInstalling=!0;try{yield(r=i.remote)===null||r===void 0?void 0:r.startConnection({connectWith:i.connectWith}),i.isInstalling=!1,i.hasInstalled=!0}catch(o){throw i.isInstalling=!1,o}return!0})}(this)})}checkInstallation(){return oe(this,void 0,void 0,function*(){return function(e){var n;return oe(this,void 0,void 0,function*(){const{state:r}=e,i=(n=r.platformManager)===null||n===void 0?void 0:n.isMetaMaskInstalled();return re(`[MetamaskInstaller: checkInstallation()] isInstalled=${i}`),!!i||(yield e.redirectToProperInstall())})}(this)})}start({wait:e=!1,connectWith:n}){return oe(this,void 0,void 0,function*(){this.state.connectWith=n,re(`[MetaMaskInstaller: start()] wait=${e}`,n),yield Oce(this,{wait:e})})}}class dM{constructor({debug:e,sdkVersion:n}){this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=e!=null&&e,this.sdkVersion=n}loadComponent(e){return oe(this,void 0,void 0,function*(){if(!this.defined[e]){this.defined[e]=!0;try{const n=yield Promise.resolve().then(function(){return dle});console.log("loader",n),n.defineCustomElements()}catch(n){console.error(`Failed to load ${e} modal:`,n)}}})}renderInstallModal(e){var n;return oe(this,void 0,void 0,function*(){this.debug&&console.debug("ModalLoader: renderInstallModal",e),this.containers.install=e.parentElement,yield this.loadComponent("install");const r=document.createElement("mm-install-modal");r.link=e.link,r.preferDesktop=e.preferDesktop,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.addEventListener("close",({detail:{shouldTerminate:i}})=>e.onClose(i)),r.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",i=>{var s;return(s=e.onAnalyticsEvent)===null||s===void 0?void 0:s.call(e,i.detail)}),e.parentElement.appendChild(r)})}renderSelectModal(e){var n;return oe(this,void 0,void 0,function*(){this.containers.select=e.parentElement,yield this.loadComponent("select");const r=document.createElement("mm-select-modal");r.link=e.link,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.preferDesktop=e.preferDesktop,r.addEventListener("close",({detail:{shouldTerminate:i}})=>e.onClose(i)),r.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(r),setTimeout(()=>this.updateQRCode(e.link),100)})}renderPendingModal(e){var n;return oe(this,void 0,void 0,function*(){this.containers.pending=e.parentElement,yield this.loadComponent("pending");const r=document.createElement("mm-pending-modal");r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.displayOTP=e.displayOTP,r.addEventListener("close",e.onClose),r.addEventListener("updateOTPValue",({detail:{otpValue:i}})=>e.updateOTPValue(i)),e.onDisconnect&&r.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(r)})}updateOTPValue(e){const n=()=>{var r;const i=(r=this.containers.pending)===null||r===void 0?void 0:r.querySelector("mm-pending-modal");return!!i&&(i.otpCode=e,!0)};setTimeout(()=>{n()},800)}updateQRCode(e){var n,r;const i=(n=this.containers.install)===null||n===void 0?void 0:n.querySelector("mm-install-modal");if(i)i.link=e;else{const s=(r=this.containers.select)===null||r===void 0?void 0:r.querySelector("mm-select-modal");s&&(s.link=e)}}unmount(){Object.entries(this.containers).forEach(([e,n])=>{var r;(r=n==null?void 0:n.parentNode)===null||r===void 0||r.removeChild(n),this.containers[e]=void 0})}}const Nce=({link:t,debug:e,installer:n,terminate:r,connectWithExtension:i,preferDesktop:s,onAnalyticsEvent:o})=>{let a=null,c=null;re("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),re(`[UI: InstallModal-web: sdkWebInstallModal()] link=${t}`),re(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --ios`),re(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --android`),re(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${t}"`);const l=u=>{var d;re("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",u,c),c!=null&&c.parentNode&&((d=c.parentNode)===null||d===void 0||d.removeChild(c)),c=null,a=null,u===!0&&(r==null||r())};return{mount:u=>{if(re("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",c),c)return c.style.display="block",void(a==null||a.updateQRCode(u));a=new dM({debug:e,sdkVersion:dd.version}),c=document.createElement("div"),document.body.appendChild(c),window.extension?a.renderSelectModal({parentElement:c,connectWithExtension:()=>{l(),i==null||i()},onClose:l,link:t,preferDesktop:s!=null&&s}).catch(d=>{console.error(d)}):a.renderInstallModal({parentElement:c,preferDesktop:s!=null&&s,link:t,metaMaskInstaller:n,onClose:l,onAnalyticsEvent:o}).catch(d=>{console.error("[UI: InstallModal-web: sdkWebInstallModal()]",d)})},unmount:l}},kce=({onDisconnect:t,debug:e})=>{let n=null,r=null;const i=()=>{re("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",n),n!=null&&n.parentNode&&n.parentNode.removeChild(n),n=null,r=null},s=a=>{re("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",a),r&&r.updateOTPValue(a)},o=({displayOTP:a}={displayOTP:!0})=>{re("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",n),n?n.style.display="block":(r=new dM({debug:e,sdkVersion:dd.version}),n=document.createElement("div"),document.body.appendChild(n),r.renderPendingModal({parentElement:n,onClose:i,onDisconnect:t,updateOTPValue:s,displayOTP:a}).catch(c=>{console.error("[UI: pendingModal-web: sdkWebPendingModal()]",c)}))};return o(),{mount:o,unmount:i,updateOTPValue:s}};function hM(t,e){var n,r,i,s;t.connector||(re("[RemoteConnection: initializeConnector()] initialize connector"),t.connector=new Boe({anonId:e.anonId,platformType:e.platformManager.getPlatformType(),communicationLayerPreference:e.communicationLayerPreference,transports:e.transports,dappMetadata:Object.assign(Object.assign({},e.dappMetadata),{source:e._source}),analytics:e.enableAnalytics,communicationServerUrl:e.communicationServerUrl,sdkVersion:dd.version,context:"dapp",ecies:e.ecies,storage:e.storage,logging:e.logging}),e.timer&&(re("[RemoteConnection: initializeConnector()] reset background timer",e.timer),(r=(n=e.timer)===null||n===void 0?void 0:n.stopBackgroundTimer)===null||r===void 0||r.call(n),(s=(i=e.timer)===null||i===void 0?void 0:i.runBackgroundTimer)===null||s===void 0||s.call(i,()=>!1,1e4)))}function L4(t){t.listeners.forEach(({event:e,handler:n})=>{var r;(r=t.connector)===null||r===void 0||r.off(e,n)}),t.listeners=[]}function Rce(t,e,n){return oe(this,void 0,void 0,function*(){const r=setTimeout(()=>{mn.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return new Promise((i,s)=>{if(!t.connector)return void s(new Error("No connector available"));re("[RemoteConnection: connectWithModalInstaller()]",{state:t,options:e,linkParams:n});const o=`${t.useDeeplink?x1:S1}?${n}`;(function(a,c,l){var u,d,h,f;a.installModal=(d=(u=c.modals).install)===null||d===void 0?void 0:d.call(u,{link:l,preferDesktop:a.preferDesktop,installer:c.getMetaMaskInstaller(),terminate:()=>{re("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),c.sdk.terminate().catch(g=>{console.warn("[MMSDK] failed to terminate connection",g)})},debug:a.developerMode,connectWithExtension:()=>{var g;return(g=c.connectWithExtensionProvider)===null||g===void 0||g.call(c),!1},onAnalyticsEvent:({event:g,params:p})=>{var m,y,w;const b=Object.assign(Object.assign({},p),{sdkVersion:c.sdk.getVersion(),dappId:(m=c.dappMetadata)===null||m===void 0?void 0:m.name,source:c._source,url:(y=c.dappMetadata)===null||y===void 0?void 0:y.url});(w=a.analytics)===null||w===void 0||w.send({event:g,params:b})}}),(f=(h=a.installModal)===null||h===void 0?void 0:h.mount)===null||f===void 0||f.call(h,l)})(t,e,o),e.sdk.once(de.PROVIDER_UPDATE,a=>oe(this,void 0,void 0,function*(){if(re("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),a===po.TERMINATE){const c={code:4001,message:"User rejected the request."};return clearTimeout(r),void s(c)}s(a)})),t.connector.once(de.AUTHORIZED,()=>{clearTimeout(r),i()}),t.connector.once(de.REJECTED,()=>{clearTimeout(r),s(de.REJECTED)}),t.connector.once(de.CLIENTS_READY,()=>oe(this,void 0,void 0,function*(){re("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(r),i()}))})})}function fM(t,e){function n(r,i){var s;(s=t.connector)===null||s===void 0||s.on(r,i),t.listeners.push({event:r,handler:i})}t.connector&&(L4(t),n(de.WALLET_INIT,({accounts:r,chainId:i})=>oe(this,void 0,void 0,function*(){re(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${r} chainId=${i}`);const s=fo.getProvider();s._setConnected();const o={accounts:r,chainId:i,isUnlocked:!1};s._initializeState(o),s.emit("chainChanged",i),s.emit("accountsChanged",r)})),n(de.AUTHORIZED,()=>oe(this,void 0,void 0,function*(){var r,i,s,o;try{re("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",t.pendingModal,t.installModal);const a=fo.getProvider();a._setConnected(),(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(o=(s=t.installModal)===null||s===void 0?void 0:s.unmount)===null||o===void 0||o.call(s,!1),t.otpAnswer=void 0,t.authorized=!0,re("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),yield a.forceInitializeState()}catch{}})),n(de.TERMINATE,()=>{var r,i,s,o,a;(i=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r),(o=(s=t.installModal)===null||s===void 0?void 0:s.unmount)===null||o===void 0||o.call(s,!0),t.pendingModal=void 0,t.installModal=void 0,t.otpAnswer=void 0,(a=t.connector)===null||a===void 0||a.disconnect({terminate:!0}),t.authorized=!1,fo.getProvider().handleDisconnect({terminate:!0}),L4(t),re("[RemoteConnection: setupListeners()] All listeners cleaned up")}))}function Mce(t,e,{initialCheck:n,connectWith:r}={}){var i,s,o,a,c,l,u,d,h,f,g,p,m,y,w,b,v,C,A;return oe(this,void 0,void 0,function*(){try{if(hM(t,e),!t.connector)throw new Error("no connector defined");fM(t);const $=fo.getProvider();t.authorized=!1,$.emit("connecting");const R=yield(i=t.connector)===null||i===void 0?void 0:i.originatorSessionConnect();re(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${n}`,R);let P=(s=R==null?void 0:R.channelId)!==null&&s!==void 0?s:"",L=(a=(o=t.connector.getKeyInfo())===null||o===void 0?void 0:o.ecies.public)!==null&&a!==void 0?a:"",U=(l=(c=t.connector.getKeyInfo())===null||c===void 0?void 0:c.ecies.private)!==null&&l!==void 0?l:"";if(n&&!R)return Promise.resolve();if(!R&&!n){const F=yield t.connector.generateChannelIdConnect();P=(u=F.channelId)!==null&&u!==void 0?u:"",L=(d=F.pubKey)!==null&&d!==void 0?d:"",U=(h=F.privKey)!==null&&h!==void 0?h:"";const z=Date.now();(f=t.connector.state.storageManager)===null||f===void 0||f.persistChannelConfig({channelId:P,localKey:U,lastActive:z,validUntil:z+Af})}if(n&&(R!=null&&R.channelId))return!((g=t.connector)===null||g===void 0)&&g.isConnected()||(re(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${n}`,R),yield(p=t.connector)===null||p===void 0?void 0:p.connectToChannel({channelId:P})),Promise.resolve();R&&!(!((m=t.connector)===null||m===void 0)&&m.isConnected())&&(re("[RemoteConnection: startConnection()] reconnecting to channel",R),yield(y=t.connector)===null||y===void 0?void 0:y.connectToChannel({channelId:P}));const D=!((w=t.platformManager)===null||w===void 0)&&w.isSecure()?"":"&t=q",j=dd.version,{iconUrl:I,name:E,url:S,scheme:k}=e.dappMetadata||{},_=(b=t.platformManager)===null||b===void 0?void 0:b.getPlatformType();let x="N/A";typeof window<"u"&&window.location&&window.location.hostname?x=window.location.hostname:E!==void 0?x=E:S!==void 0&&(x=S);const T={url:S??"",title:E??"",icon:I,scheme:k??"",apiVersion:j,dappId:x||S||"N/A",anonId:e.anonId,platform:_??"",source:(v=e._source)!==null&&v!==void 0?v:""},M=Cv(JSON.stringify(T));let O=`channelId=${P}&v=2&comm=${(C=t.communicationLayerPreference)!==null&&C!==void 0?C:""}&pubkey=${L}${D}&originatorInfo=${M}`;if(r){O+=`&rpc=${Cv(JSON.stringify(r))}`;const F=t.connector.getRPCMethodTracker();F&&(F[`${r.id}`]=Object.assign(Object.assign({},r),{id:`${r.id}`,timestamp:Date.now()}))}const N=encodeURI(O),B=`${t.useDeeplink?x1:S1}?${O}`;if(t.qrcodeLink=B,t.developerMode&&re(`[RemoteConnection: startConnection()] qrcodeLink=${N}`),$.emit("display_uri",B),mn.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),(A=t.platformManager)===null||A===void 0?void 0:A.isSecure()){const F=setTimeout(()=>{mn.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return yield function(z,q){var H,K;return oe(this,void 0,void 0,function*(){const Y=`${S1}?${q}`,J=`${x1}?${q}`;(K=(H=z.platformManager)===null||H===void 0?void 0:H.openDeeplink)===null||K===void 0||K.call(H,Y,J,"_self")})}(t,N),new Promise((z,q)=>{var H,K,Y;if(!((H=t.connector)===null||H===void 0)&&H.isAuthorized())return clearTimeout(F),void z();(K=t.connector)===null||K===void 0||K.once(de.AUTHORIZED,()=>{clearTimeout(F),z()}),(Y=t.connector)===null||Y===void 0||Y.once(de.REJECTED,()=>{clearTimeout(F),q(de.REJECTED)})})}return Rce(t,e,N)}catch($){throw console.error("[startConnection] error",$),$}})}class Bce{constructor(e){var n,r,i;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;const s=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0||((r=e.logging)===null||r===void 0?void 0:r.sdk)===!0;this.state.developerMode=s,this.state.analytics=e.analytics,this.state.preferDesktop=(i=e.preferDesktop)!==null&&i!==void 0&&i,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=Nce),e.modals.otp||(e.modals.otp=kce)}startConnection(e){return oe(this,void 0,void 0,function*(){return Mce(this.state,this.options,e)})}initRemoteCommunication({sdkInstance:e}){var n,r,i;return oe(this,void 0,void 0,function*(){const s=yield(r=(n=e.options.storage)===null||n===void 0?void 0:n.storageManager)===null||r===void 0?void 0:r.getPersistedChannelConfig();if(!this.options.ecies){const o={privateKey:s==null?void 0:s.localKey};this.options.ecies=o}hM(this.state,this.options),yield(i=this.getConnector())===null||i===void 0?void 0:i.initFromDappStorage(),fM(this.state,this.options)})}showActiveModal(){return function(e){var n,r,i,s;e.authorized?re("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?(r=(n=e.pendingModal).mount)===null||r===void 0||r.call(n):e.installModal&&((s=(i=e.installModal).mount)===null||s===void 0||s.call(i,e.qrcodeLink||""))}(this.state)}closeModal(){var e,n,r,i;(n=(e=this.state.pendingModal)===null||e===void 0?void 0:e.unmount)===null||n===void 0||n.call(e),(i=(r=this.state.installModal)===null||r===void 0?void 0:r.unmount)===null||i===void 0||i.call(r,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getChannelConfig()}getKeyInfo(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw new Error("PlatformManager not available");return this.state.platformManager}isConnected(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isReady())||!1}isAuthorized(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isAuthorized())||!1}isPaused(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.isPaused()}disconnect(e){var n,r,i;re("[RemoteConnection: disconnect()]",e),e!=null&&e.terminate&&(fo.getProvider().handleDisconnect({terminate:!0}),(r=(n=this.state.pendingModal)===null||n===void 0?void 0:n.unmount)===null||r===void 0||r.call(n),this.state.otpAnswer=void 0),(i=this.state.connector)===null||i===void 0||i.disconnect(e),function(s){re("[RemoteConnection: cleanupConnector()] cleaning up connector"),s.connector&&(L4(s),s.connector.disconnect({terminate:!0}).catch(o=>{re("[RemoteConnection: cleanupConnector()] error disconnecting connector",o)}))}(this.state)}}function Dce(t){var e,n,r,i,s,o,a,c,l,u,d;return oe(this,void 0,void 0,function*(){const{options:h}=t;if(h.logging=(e=h.logging)!==null&&e!==void 0?e:{},h.communicationLayerPreference=(n=h.communicationLayerPreference)!==null&&n!==void 0?n:yl.SOCKET,h.enableDebug!==void 0&&(Kr.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),h.enableAnalytics=(r=h.enableAnalytics)===null||r===void 0||r,h.injectProvider=(i=h.injectProvider)===null||i===void 0||i,h.shouldShimWeb3=(s=h.shouldShimWeb3)===null||s===void 0||s,h.extensionOnly=(o=h.extensionOnly)===null||o===void 0||o,h.useDeeplink=(a=h.useDeeplink)===null||a===void 0||a,h.storage=(c=h.storage)!==null&&c!==void 0?c:{enabled:!0},h.headless){Kr("[MetaMaskSDK: performSDKInitialization()] headless mode enabled");const w=()=>{},b={install:()=>({mount:w,unmount:w})},v={installer:w};h.modals=b,h.ui=v}const f=((l=h.logging)===null||l===void 0?void 0:l.developerMode)===!0;t.debug=((u=h.logging)===null||u===void 0?void 0:u.sdk)||f,re("[MetaMaskSDK: performSDKInitialization()] options",t.options);const g=Object.assign({},h.logging);f&&(g.sdk=!0,g.eciesLayer=!0,g.keyExchangeLayer=!0,g.remoteLayer=!0,g.serviceLayer=!0,g.plaintext=!0),yield function(w){var b;return oe(this,void 0,void 0,function*(){const{options:v}=w;w.platformManager=new C1({useDeepLink:(b=v.useDeeplink)!==null&&b!==void 0&&b,preferredOpenLink:v.openDeeplink,debug:w.debug})})}(t),yield function(w){var b,v,C,A,$;return oe(this,void 0,void 0,function*(){const{options:R}=w,P=(b=w.platformManager)===null||b===void 0?void 0:b.getPlatformType();w.analytics=new Ece({serverUrl:(v=R.communicationServerUrl)!==null&&v!==void 0?v:nd,enabled:R.enableAnalytics,originatorInfo:{url:(C=R.dappMetadata.url)!==null&&C!==void 0?C:"",title:(A=R.dappMetadata.name)!==null&&A!==void 0?A:"",dappId:w.getDappId(),platform:P??"",source:($=R._source)!==null&&$!==void 0?$:"",anonId:""}})})}(t),yield function(w){var b,v,C;return oe(this,void 0,void 0,function*(){if(!w.options.enableAnalytics||!(!((b=w.platformManager)===null||b===void 0)&&b.isBrowser())&&!(!((v=w.platformManager)===null||v===void 0)&&v.isReactNative()))return;const A=w.getVersion(),$=w.getDappId(),R=yield w.getAnonId(),P=(C=w.platformManager)===null||C===void 0?void 0:C.getPlatformType(),L=w.options._source;mn.analytics.setGlobalProperty("sdk_version",A),mn.analytics.setGlobalProperty("dapp_id",$),mn.analytics.setGlobalProperty("anon_id",R),mn.analytics.setGlobalProperty("platform",P),mn.analytics.setGlobalProperty("integration_type",L),mn.analytics.enable(),mn.analytics.track("sdk_initialized",{})})}(t),yield function(w){var b;return oe(this,void 0,void 0,function*(){const{options:v}=w;((b=v.storage)===null||b===void 0?void 0:b.enabled)!==!0||v.storage.storageManager||(v.storage.storageManager=yield ZR(v.storage))})}(t),yield function(w){return oe(this,void 0,void 0,function*(){const{options:b}=w,v=/^(http|https):\/\/[^\s]*$/;if(b.dappMetadata){b.dappMetadata.iconUrl&&!v.test(b.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),b.dappMetadata.iconUrl=void 0),b.dappMetadata.base64Icon&&b.dappMetadata.base64Icon.length>_ce&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),b.dappMetadata.base64Icon=void 0),b.dappMetadata.url&&!v.test(b.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");const C=Cce();if(C&&!b.dappMetadata.iconUrl&&!b.dappMetadata.base64Icon){const A=`${window.location.protocol}//${window.location.host}${C}`;b.dappMetadata.iconUrl=A}}w.dappMetadata=b.dappMetadata})}(t),yield xce(t),yield Ace(t);const{metamaskBrowserExtension:p,preferExtension:m,shouldReturn:y}=yield function(w){var b,v,C,A;return oe(this,void 0,void 0,function*(){const{options:$}=w;let R,P=!1,L=!1;if(typeof window<"u"&&window.ethereum&&!(!((b=w.platformManager)===null||b===void 0)&&b.isMetaMaskMobileWebView())){P=localStorage.getItem(Ev)==="extension";try{R=yield Sce({mustBeMetaMask:!0,sdkInstance:w}),window.extension=R,R.on(ta.CHAIN_CHANGED,U=>{re(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${U}`),w.sdkProvider&&w.getMobileProvider().emit(ta.CHAIN_CHANGED,U)}),R.on(ta.ACCOUNTS_CHANGED,U=>oe(this,void 0,void 0,function*(){var D;re(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${U}`);const j=!!w.sdkProvider,I=!!w.extensionActive;if(j&&w.getMobileProvider().emit(ta.ACCOUNTS_CHANGED,U),I&&(U==null?void 0:U.length)===0&&(yield(D=w.getProvider())===null||D===void 0?void 0:D.request({method:Ue.WALLET_GETPERMISSIONS,params:[]})).length===0)try{yield w.terminate()}catch(E){re("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",E)}})),R.on(ta.DISCONNECT,U=>{re(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${U}`),w.sdkProvider&&w.getMobileProvider().emit(ta.DISCONNECT,U)}),R.on(ta.CONNECT,U=>{re(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${U}`),w.sdkProvider&&w.getMobileProvider().emit(ta.CONNECT,U)}),R.on(ta.CONNECTED,U=>{re("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",U),w.sdkProvider&&w.getMobileProvider().emit(ta.CONNECTED,U)})}catch{window.extension=void 0}}else!((v=w.platformManager)===null||v===void 0)&&v.isMetaMaskMobileWebView()&&((C=w.analytics)===null||C===void 0||C.send({event:yn.SDK_USE_INAPP_BROWSER}),w.activeProvider=D4({provider:window.ethereum,sdkInstance:w}),w._initialized=!0,L=!0);return R&&$.extensionOnly&&(re("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),(A=w.analytics)===null||A===void 0||A.send({event:yn.SDK_USE_EXTENSION}),w.activeProvider=R,w.extensionActive=!0,w.extension=R,w._initialized=!0,L=!0),{preferExtension:P,shouldReturn:L,metamaskBrowserExtension:R}})}(t);if(y)re("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization");else{yield function(w,b){var v,C,A,$,R;return oe(this,void 0,void 0,function*(){const{options:P}=w,L=Object.assign({},P.logging);w.remoteConnection=new Bce({anonId:yield w.getAnonId(),preferDesktop:(v=P.preferDesktop)!==null&&v!==void 0&&v,communicationLayerPreference:(C=P.communicationLayerPreference)!==null&&C!==void 0?C:yl.SOCKET,analytics:w.analytics,dappMetadata:P.dappMetadata,_source:P._source,enableAnalytics:(A=P.enableAnalytics)===null||A===void 0||A,timer:P.timer,sdk:w,platformManager:w.platformManager,transports:P.transports,communicationServerUrl:P.communicationServerUrl,storage:($=P.storage)!==null&&$!==void 0?$:{enabled:!0},getMetaMaskInstaller:()=>{if(!w.installer)throw new Error("Invalid SDK status -- installer not initialized");return w.installer},logging:L,connectWithExtensionProvider:b===void 0?void 0:()=>eM(w),modals:Object.assign(Object.assign({},P.modals),{onPendingModalDisconnect:w.terminate.bind(w)})}),yield w.remoteConnection.initRemoteCommunication({sdkInstance:w}),w.installer=new Tce({remote:w.remoteConnection,preferDesktop:(R=P.preferDesktop)!==null&&R!==void 0&&R,platformManager:w.platformManager,debug:w.debug})})}(t,p),yield bce(t),yield function(w,b){var v,C;return oe(this,void 0,void 0,function*(){const{options:A}=w;b?(re("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),(v=w.analytics)===null||v===void 0||v.send({event:yn.SDK_EXTENSION_UTILIZED}),eM(w).catch($=>{console.warn("Can't connect with MetaMask extension...",$),localStorage.removeItem(Ev)})):A.checkInstallationImmediately&&(!((C=w.platformManager)===null||C===void 0)&&C.isDesktopWeb()?(re("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),w.connect().catch($=>{re(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${$}`)})):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),w._initialized=!0})}(t,m);try{yield(d=t.remoteConnection)===null||d===void 0?void 0:d.startConnection({initialCheck:!0})}catch(w){console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",w)}t.emit(Jr.ProviderUpdate,po.INITIALIZED)}})}class pM extends Eie{constructor(e={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:JR,i18nOptions:{enabled:!1}}){var n,r,i;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],this.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",Kr.disable();const s=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0;if((!((r=e.logging)===null||r===void 0)&&r.sdk||s)&&Kr.enable("MM_SDK"),re("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(!((i=e.dappMetadata)===null||i===void 0)&&i.url)){if(typeof window>"u"||typeof document>"u")throw new Error("You must provide dAppMetadata url");e.dappMetadata=Object.assign(Object.assign({},e.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.options=e,this.options._source||(e._source=JR),this.init().then(()=>{re("[MetaMaskSDK: constructor()]: initialized successfully."),typeof window<"u"&&(window.mmsdk=this)}).catch(o=>{console.error("[MetaMaskSDK: constructor()] error during initialization",o)})}init(){return oe(this,void 0,void 0,function*(){return function(e){var n;return oe(this,void 0,void 0,function*(){if(typeof window<"u"&&(!((n=window.mmsdk)===null||n===void 0)&&n.isInitialized()))return re("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(e._initialized)return re("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise;if(e.sdkInitPromise)return re("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise;try{e.sdkInitPromise=Dce(e),yield e.sdkInitPromise}catch(r){throw console.error(r),r}return e.sdkInitPromise})}(this)})}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var e;return typeof window<"u"&&!!(!((e=window.ethereum)===null||e===void 0)&&e.isMetaMask)}connect(){return oe(this,void 0,void 0,function*(){return function(e){return oe(this,void 0,void 0,function*(){if(e._initialized||(re("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield e.init()),re(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=e.activeProvider.getSelectedAddress();return n?[n]:e.activeProvider.request({method:Ue.ETH_REQUESTACCOUNTS,params:[]})})}(this)})}connectAndSign({msg:e}){return oe(this,void 0,void 0,function*(){return gce({instance:this,msg:e})})}connectWith(e){return oe(this,void 0,void 0,function*(){return function({instance:n,rpc:r}){return oe(this,void 0,void 0,function*(){if(n._initialized||(re("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield n.init()),re(`[MetaMaskSDK: connectWith()] method: ${r.method} rpc=${r}`),!n.activeProvider)throw new Error("SDK state invalid -- undefined provider");return n.activeProvider.request({method:Ue.METAMASK_CONNECTWITH,params:[r]})})}({instance:this,rpc:e})})}resume(){return function(e){var n,r,i;return oe(this,void 0,void 0,function*(){if(!(!((r=(n=e.remoteConnection)===null||n===void 0?void 0:n.getConnector())===null||r===void 0)&&r.isReady()))return re("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void((i=e.remoteConnection)===null||i===void 0||i.startConnection());re("[MetaMaskSDK: resume()] channel is ready")})}(this)}disconnect(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var e;(e=this.remoteConnection)===null||e===void 0||e.isAuthorized()}terminate(){return function(e){var n,r,i;return oe(this,void 0,void 0,function*(){if(!(!((n=e.platformManager)===null||n===void 0)&&n.isMetaMaskMobileWebView())){if(pce&&(window.localStorage.removeItem(Ev),window.localStorage.removeItem(B4),window.localStorage.removeItem(M4)),e.extensionActive){try{yield(r=e.activeProvider)===null||r===void 0?void 0:r.request({method:Ue.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]})}catch(s){re("[MetaMaskSDK: terminate()] error revoking permissions",s)}return e.options.extensionOnly?(e.emit(Jr.ProviderUpdate,po.TERMINATE),void re("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,void e.emit(Jr.ProviderUpdate,po.TERMINATE))}e.emit(Jr.ProviderUpdate,po.TERMINATE),re(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),(i=e.remoteConnection)===null||i===void 0||i.disconnect({terminate:!0,sendMessage:!0})}})}(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e;const n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getUniversalLink();if(!n)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return n}getChannelId(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig())===null||n===void 0?void 0:n.channelId}getRPCHistory(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getRPCMethodTracker()}getVersion(){return dd.version}getDappId(){var e,n,r,i;return typeof window>"u"||window.location===void 0?(i=(n=(e=this.options.dappMetadata)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:(r=this.options.dappMetadata)===null||r===void 0?void 0:r.url)!==null&&i!==void 0?i:"N/A":window.location.hostname}getAnonId(){var e,n;return oe(this,void 0,void 0,function*(){if(this._anonId)return this._anonId;let r;return r=!((e=this.platformManager)===null||e===void 0)&&e.isBrowser()?this.getBrowserAnonId():!((n=this.platformManager)===null||n===void 0)&&n.isReactNative()?yield this.getReactNativeAnonId():sl(),this._anonId=r,r})}getBrowserAnonId(){const e=this.ANON_ID_STORAGE_KEY;try{const n=localStorage.getItem(e);if(n)return n;const r=sl();return localStorage.setItem(e,r),r}catch(n){return console.error("[MetaMaskSDK: getBrowserAnonId()] LocalStorage access error:",n),sl()}}getReactNativeAnonId(){return oe(this,void 0,void 0,function*(){const e=this.ANON_ID_STORAGE_KEY;try{const n=require("@react-native-async-storage/async-storage").default,r=yield n.getItem(e);if(r)return r;const i=sl();return yield n.setItem(e,i),i}catch(n){return console.error("[MetaMaskSDK: getReactNativeAnonId()] Error accessing AsyncStorage:",n),sl()}})}getWalletStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getConnectionStatus()}_getChannelConfig(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig()}_ping(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.ping()}_keyCheck(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.keyCheck()}_getServiceStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getKeyInfo()}_resetKeys(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.resetKeys()}_getConnection(){return this.remoteConnection}emit(e,n){return super.emit(e,n)}on(e,n){return super.on(e,n)}}var Lce=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor({enabled:t}={enabled:!1}){this.enabled=!1,this.enabled=t}persistChannelConfig(t){return oe(this,void 0,void 0,function*(){const e=JSON.stringify(t);re(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,t),localStorage.setItem(R4,e)})}getPersistedChannelConfig(){return oe(this,void 0,void 0,function*(){let t;try{if(re(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),t=localStorage.getItem(R4),re("[StorageManagerWeb: getPersistedChannelConfig()]",t),!t)return;const e=JSON.parse(t);return re("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",e),e}catch(e){return void console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",e)}})}persistAccounts(t){return oe(this,void 0,void 0,function*(){re(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,t);const e=JSON.stringify(t);localStorage.setItem(M4,e)})}getCachedAccounts(){return oe(this,void 0,void 0,function*(){try{const t=localStorage.getItem(M4);return t?JSON.parse(t):[]}catch(t){throw console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",t),t}})}persistChainId(t){return oe(this,void 0,void 0,function*(){re(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,t),localStorage.setItem(B4,t)})}getCachedChainId(){return oe(this,void 0,void 0,function*(){try{const t=localStorage.getItem(B4);return t??void 0}catch(t){throw console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",t),t}})}terminate(){return oe(this,void 0,void 0,function*(){re(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(R4)})}}});const jce="hydrated",Uce=!1,Fce=!1,zce=!0;var qce=Object.defineProperty,j4=new WeakMap,Pl=t=>j4.get(t),U4=(t,e)=>j4.set(e.$lazyInstance$=t,e),gM=(t,e)=>e in t,hd=(t,e)=>(0,console.error)(t,e),F4=new Map,Av=new Map,mM="slot-fb{display:contents}slot-fb[hidden]{display:none}",Iv=typeof window<"u"?window:{},na=Iv.document||{head:{}},mr={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r),ce:(t,e)=>new CustomEvent(t,e)},yM=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),z4=!1,wM=[],bM=[],Hce=(t,e)=>n=>{t.push(n),z4||(z4=!0,4&mr.$flags$?H4(q4):mr.raf(q4))},vM=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){hd(n)}t.length=0},q4=()=>{vM(wM),vM(bM),(z4=wM.length>0)&&mr.raf(q4)},H4=t=>(e=>Promise.resolve(e))().then(t),Wce=Hce(bM),EM={},W4=t=>(t=typeof t)=="object"||t==="function";function CM(t){var e,n,r;return(r=(n=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?r:void 0}((t,e)=>{for(var n in e)qce(t,n,{get:e[n],enumerable:!0})})({},{err:()=>_M,map:()=>Kce,ok:()=>K4,unwrap:()=>Vce,unwrapErr:()=>Gce});var K4=t=>({isOk:!0,isErr:!1,value:t}),_M=t=>({isOk:!1,isErr:!0,value:t});function Kce(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then(r=>K4(r)):K4(n)}if(t.isErr){const n=t.value;return _M(n)}throw"should never get here"}var $v,V4,Vce=t=>{if(t.isOk)return t.value;throw t.value},Gce=t=>{if(t.isErr)return t.value;throw t.value},ie=(t,e,...n)=>{let r=null,i=!1,s=!1;const o=[],a=l=>{for(let u=0;u<l.length;u++)r=l[u],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((i=typeof t!="function"&&!W4(r))&&(r=String(r)),i&&s?o[o.length-1].$text$+=r:o.push(i?Pv(null,r):r),s=i)};if(a(n),e){const l=e.className||e.class;l&&(e.class=typeof l!="object"?l:Object.keys(l).filter(u=>l[u]).join(" "))}if(typeof t=="function")return t(e===null?{}:e,o,Yce);const c=Pv(t,null);return c.$attrs$=e,o.length>0&&(c.$children$=o),c},Pv=(t,e)=>({$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null,$attrs$:null}),Zce={},Yce={forEach:(t,e)=>t.map(SM).forEach(e),map:(t,e)=>t.map(SM).map(e).map(Jce)},SM=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),Jce=t=>{if(typeof t.vtag=="function"){const n={...t.vattrs};return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),ie(t.vtag,n,...t.vchildren||[])}const e=Pv(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},Ov=t=>Pl(t).$hostElement$,Ol=(t,e,n)=>{const r=Ov(t);return{emit:i=>xM(r,e,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:i})}},xM=(t,e,n)=>{const r=mr.ce(e,n);return t.dispatchEvent(r),r},AM=new WeakMap,Qce=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,r=e.$flags$;e.$tagName$;const i=((s,o,a)=>{var c;const l=IM(o),u=Av.get(l);if(s=s.nodeType===11?s:na,u)if(typeof u=="string"){s=s.head||s;let d,h=AM.get(s);if(h||AM.set(s,h=new Set),!h.has(l)){{d=na.createElement("style"),d.innerHTML=u;const f=(c=mr.$nonce$)!=null?c:CM(na);if(f!=null&&d.setAttribute("nonce",f),!(1&o.$flags$))if(s.nodeName==="HEAD"){const g=s.querySelectorAll("link[rel=preconnect]"),p=g.length>0?g[g.length-1].nextSibling:s.querySelector("style");s.insertBefore(d,p)}else if("host"in s)if(yM){const g=new CSSStyleSheet;g.replaceSync(u),s.adoptedStyleSheets=[g,...s.adoptedStyleSheets]}else{const g=s.querySelector("style");g?g.innerHTML=u+g.innerHTML:s.prepend(d)}else s.append(d);1&o.$flags$&&s.nodeName!=="HEAD"&&s.insertBefore(d,null)}4&o.$flags$&&(d.innerHTML+=mM),h&&h.add(l)}}else s.adoptedStyleSheets.includes(u)||(s.adoptedStyleSheets=[...s.adoptedStyleSheets,u]);return l})(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);10&r&&2&r&&(n["s-sc"]=i,n.classList.add(i+"-h"))},IM=(t,e)=>"sc-"+t.$tagName$,$M=(t,e,n,r,i,s)=>{if(n!==r){let o=gM(t,e),a=e.toLowerCase();if(e==="class"){const c=t.classList,l=PM(n),u=PM(r);c.remove(...l.filter(d=>d&&!u.includes(d))),c.add(...u.filter(d=>d&&!l.includes(d)))}else if(e==="style"){for(const c in n)r&&r[c]!=null||(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in r)n&&r[c]===n[c]||(c.includes("-")?t.style.setProperty(c,r[c]):t.style[c]=r[c])}else if(o||e[0]!=="o"||e[1]!=="n"){const c=W4(r);if((o||c&&r!==null)&&!i)try{if(t.tagName.includes("-"))t[e]=r;else{const l=r??"";e==="list"?o=!1:n!=null&&t[e]==l||(typeof t.__lookupSetter__(e)=="function"?t[e]=l:t.setAttribute(e,l))}}catch{}r==null||r===!1?r===!1&&t.getAttribute(e)!==""||t.removeAttribute(e):(!o||4&s||i)&&!c&&(r=r===!0?"":r,t.setAttribute(e,r))}else if(e=e[2]==="-"?e.slice(3):gM(Iv,a)?a.slice(2):a[2]+e.slice(3),n||r){const c=e.endsWith(OM);e=e.replace(ele,""),n&&mr.rel(t,e,n,c),r&&mr.ael(t,e,r,c)}}},Xce=/\s/,PM=t=>t?t.split(Xce):[],OM="Capture",ele=new RegExp(OM+"$"),TM=(t,e,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,i=t&&t.$attrs$||EM,s=e.$attrs$||EM;for(const o of NM(Object.keys(i)))o in s||$M(r,o,i[o],void 0,n,e.$flags$);for(const o of NM(Object.keys(s)))$M(r,o,i[o],s[o],n,e.$flags$)};function NM(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var kM=!1,Bs=!1,G4=(t,e,n,r)=>{const i=e.$children$[n];let s,o,a=0;if(i.$text$!==null)s=i.$elm$=na.createTextNode(i.$text$);else{if(Bs||(Bs=i.$tag$==="svg"),s=i.$elm$=na.createElementNS(Bs?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!kM&&Fce&&2&i.$flags$?"slot-fb":i.$tag$),Bs&&i.$tag$==="foreignObject"&&(Bs=!1),TM(null,i,Bs),s.getRootNode().querySelector("body")&&Uce&&(c=>c!=null)($v)&&s["s-si"]!==$v&&s.classList.add(s["s-si"]=$v),i.$children$)for(a=0;a<i.$children$.length;++a)o=G4(t,i,a),o&&s.appendChild(o);i.$tag$==="svg"?Bs=!1:s.tagName==="foreignObject"&&(Bs=!0)}return s["s-hn"]=V4,s},RM=(t,e,n,r,i,s)=>{let o,a=t;for(a.shadowRoot&&a.tagName===V4&&(a=a.shadowRoot);i<=s;++i)r[i]&&(o=G4(null,n,i),o&&(r[i].$elm$=o,Nv(a,o,e)))},MM=(t,e,n)=>{for(let r=e;r<=n;++r){const i=t[r];if(i){const s=i.$elm$;s&&s.remove()}}},Tv=(t,e,n=!1)=>t.$tag$===e.$tag$,I1=(t,e,n=!1)=>{const r=e.$elm$=t.$elm$,i=t.$children$,s=e.$children$,o=e.$tag$,a=e.$text$;a===null?(TM(t,e,Bs=o==="svg"||o!=="foreignObject"&&Bs),i!==null&&s!==null?((c,l,u,d,h=!1)=>{let f,g=0,p=0,m=l.length-1,y=l[0],w=l[m],b=d.length-1,v=d[0],C=d[b];for(;g<=m&&p<=b;)y==null?y=l[++g]:w==null?w=l[--m]:v==null?v=d[++p]:C==null?C=d[--b]:Tv(y,v,h)?(I1(y,v,h),y=l[++g],v=d[++p]):Tv(w,C,h)?(I1(w,C,h),w=l[--m],C=d[--b]):Tv(y,C,h)?(I1(y,C,h),Nv(c,y.$elm$,w.$elm$.nextSibling),y=l[++g],C=d[--b]):Tv(w,v,h)?(I1(w,v,h),Nv(c,w.$elm$,y.$elm$),w=l[--m],v=d[++p]):(f=G4(l&&l[p],u,p),v=d[++p],f&&Nv(y.$elm$.parentNode,f,y.$elm$));g>m?RM(c,d[b+1]==null?null:d[b+1].$elm$,u,d,p,b):p>b&&MM(l,g,m)})(r,i,e,s,n):s!==null?(t.$text$!==null&&(r.textContent=""),RM(r,null,e,s,0,s.length-1)):!n&&zce&&i!==null&&MM(i,0,i.length-1),Bs&&o==="svg"&&(Bs=!1)):t.$text$!==a&&(r.data=a)},Nv=(t,e,n)=>t==null?void 0:t.insertBefore(e,n),tle=(t,e,n=!1)=>{const r=t.$hostElement$,i=t.$cmpMeta$,s=t.$vnode$||Pv(null,null),o=(a=e)&&a.$tag$===Zce?e:ie(null,null,e);var a;if(V4=r.tagName,n&&o.$attrs$)for(const c of Object.keys(o.$attrs$))r.hasAttribute(c)&&!["key","ref","style","class"].includes(c)&&(o.$attrs$[c]=r[c]);o.$tag$=null,o.$flags$|=4,t.$vnode$=o,o.$elm$=s.$elm$=r.shadowRoot||r,$v=r["s-sc"],kM=(1&i.$flags$)!=0,I1(s,o,n)},BM=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise(n=>t.$onRenderResolve$=n))},Z4=(t,e)=>(t.$flags$|=16,4&t.$flags$?void(t.$flags$|=512):(BM(t,t.$ancestorComponent$),Wce(()=>nle(t,e)))),nle=(t,e)=>{const n=t.$hostElement$;t.$cmpMeta$.$tagName$;const r=t.$lazyInstance$;if(!r)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return rle(void 0,()=>sle(t,r,e))},rle=(t,e)=>ile(t)?t.then(e).catch(n=>{console.error(n),e()}):e(),ile=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",sle=async(t,e,n)=>{var r;const i=t.$hostElement$;t.$cmpMeta$.$tagName$;const s=i["s-rc"];n&&Qce(t),t.$cmpMeta$.$tagName$,ole(t,e,i,n),s&&(s.map(o=>o()),i["s-rc"]=void 0);{const o=(r=i["s-p"])!=null?r:[],a=()=>ale(t);o.length===0?a():(Promise.all(o).then(a),t.$flags$|=4,o.length=0)}},ole=(t,e,n,r)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,tle(t,e,r)}catch(i){hd(i,t.$hostElement$)}return null},ale=t=>{t.$cmpMeta$.$tagName$;const e=t.$hostElement$,n=()=>{},r=t.$lazyInstance$,i=t.$ancestorComponent$;64&t.$flags$?n():(t.$flags$|=64,LM(e),Y4(r,"componentDidLoad"),t.$onReadyResolve$(e),i||DM()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&H4(()=>Z4(t,!1)),t.$flags$&=-517},DM=t=>{LM(na.documentElement),H4(()=>xM(Iv,"appload",{detail:{namespace:"sdk-install-modal-web"}}))},Y4=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(r){hd(r)}},LM=t=>{var e;return t.classList.add((e=jce)!=null?e:"hydrated")},cle=(t,e,n,r)=>{const i=Pl(t);if(!i)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const s=i.$hostElement$,o=i.$instanceValues$.get(e),a=i.$flags$,c=i.$lazyInstance$;var l,u;l=n,u=r.$members$[e][0],n=l==null||W4(l)?l:4&u?l!=="false"&&(l===""||!!l):1&u?String(l):l;const d=Number.isNaN(o)&&Number.isNaN(n);if((!(8&a)||o===void 0)&&n!==o&&!d&&(i.$instanceValues$.set(e,n),c)){if(r.$watchers$&&128&a){const h=r.$watchers$[e];h&&h.map(f=>{try{c[f](n,o,e)}catch(g){hd(g,s)}})}(18&a)==2&&Z4(i,!1)}},jM=(t,e,n)=>{var r,i;const s=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const o=Object.entries((r=e.$members$)!=null?r:{});if(o.map(([a,[c]])=>{(31&c||2&n&&32&c)&&Object.defineProperty(s,a,{get(){return l=a,Pl(this).$instanceValues$.get(l);var l},set(l){cle(this,a,l,e)},configurable:!0,enumerable:!0})}),1&n){const a=new Map;s.attributeChangedCallback=function(c,l,u){mr.jmp(()=>{var d;const h=a.get(c);if(this.hasOwnProperty(h))u=this[h],delete this[h];else{if(s.hasOwnProperty(h)&&typeof this[h]=="number"&&this[h]==u)return;if(h==null){const f=Pl(this),g=f==null?void 0:f.$flags$;if(g&&!(8&g)&&128&g&&u!==l){const p=f.$lazyInstance$,m=(d=e.$watchers$)==null?void 0:d[c];m==null||m.forEach(y=>{p[y]!=null&&p[y].call(p,u,l,c)})}return}}this[h]=(u!==null||typeof this[h]!="boolean")&&u})},t.observedAttributes=Array.from(new Set([...Object.keys((i=e.$watchers$)!=null?i:{}),...o.filter(([c,l])=>15&l[0]).map(([c,l])=>{const u=l[1]||c;return a.set(u,c),u})]))}}return t},lle=async(t,e,n,r)=>{let i;if(!(32&e.$flags$)){if(e.$flags$|=32,n.$lazyBundleId$){const a=((c,l,u)=>{const d=c.$tagName$.replace(/-/g,"_"),h=c.$lazyBundleId$;if(!h)return;const f=F4.get(h);if(f)return f[d];{const g=p=>(F4.set(h,p),p[d]);if(h==="mm-install-modal_3")return Promise.resolve().then(function(){return Sle}).then(g,hd)}return import(`./${h}.entry.js`).then(g=>(F4.set(h,g),g[d]),hd)})(n);if(a&&"then"in a?i=await a:i=a,!i)throw new Error(`Constructor for "${n.$tagName$}#${e.$modeName$}" was not found`);i.isProxied||(n.$watchers$=i.watchers,jM(i,n,2),i.isProxied=!0),n.$tagName$,e.$flags$|=8;try{new i(e)}catch(c){hd(c)}e.$flags$&=-9,e.$flags$|=128,J4(e.$lazyInstance$)}else{i=t.constructor;const a=t.localName;customElements.whenDefined(a).then(()=>e.$flags$|=128)}if(i&&i.style){let a;typeof i.style=="string"&&(a=i.style);const c=IM(n);Av.has(c)||(n.$tagName$,((l,u,d)=>{let h=Av.get(l);yM&&d?(h=h||new CSSStyleSheet,typeof h=="string"?h=u:h.replaceSync(u)):h=u,Av.set(l,h)})(c,a,!!(1&n.$flags$)))}}const s=e.$ancestorComponent$,o=()=>Z4(e,!0);s&&s["s-rc"]?s["s-rc"].push(o):o()},J4=t=>{Y4(t,"connectedCallback")},UM=t=>{Y4(t,"disconnectedCallback")},ule=(t,e={})=>{var n;const r=[],i=e.exclude||[],s=Iv.customElements,o=na.head,a=o.querySelector("meta[charset]"),c=na.createElement("style"),l=[];let u,d=!0;Object.assign(mr,e),mr.$resourcesUrl$=new URL(e.resourcesUrl||"./",na.baseURI).href;let h=!1;if(t.map(f=>{f[1].map(g=>{var p;const m={$flags$:g[0],$tagName$:g[1],$members$:g[2],$listeners$:g[3]};4&m.$flags$&&(h=!0),m.$members$=g[2],m.$watchers$=(p=g[4])!=null?p:{};const y=m.$tagName$,w=class extends HTMLElement{constructor(b){if(super(b),this.hasRegisteredEventListeners=!1,((v,C)=>{const A={$flags$:0,$hostElement$:v,$cmpMeta$:C,$instanceValues$:new Map};A.$onReadyPromise$=new Promise($=>A.$onReadyResolve$=$),v["s-p"]=[],v["s-rc"]=[],j4.set(v,A)})(b=this,m),1&m.$flags$)if(b.shadowRoot){if(b.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${m.$tagName$}! Mode is set to ${b.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else b.attachShadow({mode:"open"})}connectedCallback(){Pl(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),u&&(clearTimeout(u),u=null),d?l.push(this):mr.jmp(()=>(b=>{if(!(1&mr.$flags$)){const v=Pl(b),C=v.$cmpMeta$;if(C.$tagName$,1&v.$flags$)v!=null&&v.$lazyInstance$?J4(v.$lazyInstance$):v!=null&&v.$onReadyPromise$&&v.$onReadyPromise$.then(()=>J4(v.$lazyInstance$));else{v.$flags$|=1;{let A=b;for(;A=A.parentNode||A.host;)if(A["s-p"]){BM(v,v.$ancestorComponent$=A);break}}C.$members$&&Object.entries(C.$members$).map(([A,[$]])=>{if(31&$&&b.hasOwnProperty(A)){const R=b[A];delete b[A],b[A]=R}}),lle(b,v,C)}}})(this))}disconnectedCallback(){mr.jmp(()=>(async b=>{if(!(1&mr.$flags$)){const v=Pl(b);v!=null&&v.$lazyInstance$?UM(v.$lazyInstance$):v!=null&&v.$onReadyPromise$&&v.$onReadyPromise$.then(()=>UM(v.$lazyInstance$))}})(this))}componentOnReady(){return Pl(this).$onReadyPromise$}};m.$lazyBundleId$=f[0],i.includes(y)||s.get(y)||(r.push(y),s.define(y,jM(w,m,1)))})}),r.length>0&&(h&&(c.textContent+=mM),c.textContent+=r.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",c.innerHTML.length)){c.setAttribute("data-styles","");const f=(n=mr.$nonce$)!=null?n:CM(na);f!=null&&c.setAttribute("nonce",f),o.insertBefore(c,a?a.nextSibling:o.firstChild)}d=!1,l.length?l.map(f=>f.connectedCallback()):mr.jmp(()=>u=setTimeout(DM,30))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();var dle=Object.freeze({__proto__:null,defineCustomElements:async(t,e)=>{if(typeof window<"u")return await void 0,ule([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],e)},setNonce:t=>mr.$nonce$=t});const hle={fontFamily:"Roboto, sans-serif"},Q4=({className:t},e)=>ie("div",{style:hle,class:t},e),X4=({Icon:t,text:e})=>ie("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},ie("div",{class:"flexItem1"},ie(t,null)),ie("div",{class:"flexItem11"},ie("span",{style:{lineHeight:"2",color:"black"}},e))),fle=()=>ie("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ie("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),ie("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),ple=()=>ie("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ie("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),gle=()=>ie("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ie("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),mle=()=>ie("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ie("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),ie("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),ie("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));function eC({version:t}){return ie("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",t?`v${t}`:"unknown")}const tC=()=>ie("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ie("rect",{width:"16",height:"16",fill:"white"}),ie("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),nC=()=>ie("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},ie("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}));function fd(t,e){return t.toString(2).padStart(e,"0")}function FM(t,e){const n=t%e;return n>=0?n:e+n}function Ji(t,e){return new Array(t).fill(e)}function zM(...t){let e=0;for(const r of t)e=Math.max(e,r.length);const n=[];for(let r=0;r<e;r++)for(const i of t)r>=i.length||n.push(i[r]);return new Uint8Array(n)}function qM(t,e,n){if(n<0||n+e.length>t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n+r])return!1;return!0}function HM(t){return{has:e=>t.includes(e),decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})},encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(function(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)}(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})}}}class Qi{static size(e,n){if(typeof e=="number"&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return n!==void 0&&(e={width:Math.min(e.width,n.width),height:Math.min(e.height,n.height)}),e}static fromString(e){const n=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split(`
`),r=n.length,i=new Array(r);let s;for(const o of n){const a=o.split("").map(c=>{if(c==="X")return!0;if(c===" ")return!1;if(c!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${c}`)});if(s&&a.length!==s)throw new Error(`Bitmap.fromString different row sizes: width=${s} cur=${a.length}`);s=a.length,i.push(a)}return s||(s=0),new Qi({height:r,width:s},i)}constructor(e,n){const{height:r,width:i}=Qi.size(e);this.data=n||Array.from({length:r},()=>Ji(i,void 0)),this.height=r,this.width=i}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:n,y:r}=this.xy(e);return{height:this.height-r,width:this.width-n}}xy(e){if(typeof e=="number"&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: wrong x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: wrong y=${e.y}`);return e.x=FM(e.x,this.width),e.y=FM(e.y,this.height),e}rect(e,n,r){const{x:i,y:s}=this.xy(e),{height:o,width:a}=Qi.size(n,this.size({x:i,y:s}));for(let c=0;c<o;c++)for(let l=0;l<a;l++)this.data[s+c][i+l]=typeof r=="function"?r({x:l,y:c},this.data[s+c][i+l]):r;return this}rectRead(e,n,r){return this.rect(e,n,(i,s)=>(r(i,s),s))}hLine(e,n,r){return this.rect(e,{width:n,height:1},r)}vLine(e,n,r){return this.rect(e,{width:1,height:n},r)}border(e=2,n){const r=this.height+2*e,i=this.width+2*e,s=Ji(e,n),o=Array.from({length:e},()=>Ji(i,n));return new Qi({height:r,width:i},[...o,...this.data.map(a=>[...s,...a,...s]),...o])}embed(e,n){return this.rect(e,n.size(),({x:r,y:i})=>n.data[i][r])}rectSlice(e,n=this.size()){const r=new Qi(Qi.size(n,this.size(this.xy(e))));return this.rect(e,n,({x:i,y:s},o)=>r.data[s][i]=o),r}inverse(){const{height:e,width:n}=this;return new Qi({height:n,width:e}).rect({x:0,y:0},1/0,({x:r,y:i})=>this.data[r][i])}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`Wrong scale factor: ${e}`);const{height:n,width:r}=this;return new Qi({height:e*n,width:e*r}).rect({x:0,y:0},1/0,({x:i,y:s})=>this.data[Math.floor(s/e)][Math.floor(i/e)])}clone(){return new Qi(this.size()).rect({x:0,y:0},this.size(),({x:e,y:n})=>this.data[n][e])}assertDrawn(){this.rectRead(0,1/0,(e,n)=>{if(typeof n!="boolean")throw new Error("Invalid color type="+typeof n)})}toString(){return this.data.map(e=>e.map(n=>n===void 0?"?":n?"X":" ").join("")).join(`
`)}toASCII(){const{height:e,width:n,data:r}=this;let i="";for(let s=0;s<e;s+=2){for(let o=0;o<n;o++){const a=r[s][o],c=s+1>=e||r[s+1][o];a||c?!a&&c?i+="":a&&!c?i+="":a&&c&&(i+=" "):i+=""}i+=`
`}return i}toTerm(){const e="\x1B[0m",n=`\x1B[1;47m  ${e}`,r=`\x1B[40m  ${e}`;return this.data.map(i=>i.map(s=>s?r:n).join("")).join(`
`)}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,({x:n,y:r},i)=>{i&&(e+=`<rect x="${n}" y="${r}" width="1" height="1" />`)}),e+="</svg>",e}toGIF(){const e=a=>[255&a,a>>>8&255],n=[...e(this.width),...e(this.height)],r=[];this.rectRead(0,1/0,(a,c)=>r.push(+(c===!0)));const i=126,s=[71,73,70,56,55,97,...n,246,0,0,255,255,255,...Ji(381,0),44,0,0,0,0,...n,0,7],o=Math.floor(r.length/i);for(let a=0;a<o;a++)s.push(127,128,...r.slice(i*a,i*(a+1)).map(c=>+c));return s.push(r.length%i+1,128,...r.slice(o*i).map(a=>+a)),s.push(1,129,0,59),new Uint8Array(s)}toImage(e=!1){const{height:n,width:r}=this.size(),i=new Uint8Array(n*r*(e?3:4));let s=0;for(let o=0;o<n;o++)for(let a=0;a<r;a++){const c=this.data[o][a]?0:255;i[s++]=c,i[s++]=c,i[s++]=c,e||(i[s++]=255)}return{height:n,width:r,data:i}}}const WM=["low","medium","quartile","high"],KM=["numeric","alphanumeric","byte","kanji","eci"],yle=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],wle={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},ble={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},Lr={size:{encode:t=>21+4*(t-1),decode:t=>(t-17)/4},sizeType:t=>Math.floor((t+7)/17),alignmentPatterns(t){if(t===1)return[];const e=Lr.size.encode(t)-6-1,n=e-6,r=Math.ceil(n/28);let i=Math.floor(n/r);i%2?i+=1:n%r*2>=r&&(i+=2);const s=[6];for(let o=1;o<r;o++)s.push(e-(r-o)*i);return s.push(e),s},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(t,e){const n=Lr.ECCode[t]<<3|e;let r=n;for(let i=0;i<10;i++)r=r<<1^1335*(r>>9);return(n<<10|r)^Lr.formatMask},versionBits(t){let e=t;for(let n=0;n<12;n++)e=e<<1^7973*(e>>11);return t<<12|e},alphabet:{numeric:HM("0123456789"),alphanumerc:HM("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(t,e)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]})[e][Lr.sizeType(t)],modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(t,e){const n=yle[t-1],r=wle[e][t-1],i=ble[e][t-1],s=Math.floor(n/i)-r,o=i-n%i;return{words:r,numBlocks:i,shortBlocks:o,blockLen:s,capacity:8*(n-r*i),total:(r+s)*i+i-o}}},rC=[(t,e)=>(t+e)%2==0,(t,e)=>e%2==0,(t,e)=>t%3==0,(t,e)=>(t+e)%3==0,(t,e)=>(Math.floor(e/2)+Math.floor(t/3))%2==0,(t,e)=>t*e%2+t*e%3==0,(t,e)=>(t*e%2+t*e%3)%2==0,(t,e)=>((t+e)%2+t*e%3)%2==0],Oe={tables:(t=>{const e=Ji(256,0),n=Ji(256,0);for(let r=0,i=1;r<256;r++)e[r]=i,n[i]=r,i<<=1,256&i&&(i^=285);return{exp:e,log:n}})(),exp:t=>Oe.tables.exp[t],log(t){if(t===0)throw new Error(`GF.log: wrong arg=${t}`);return Oe.tables.log[t]%255},mul:(t,e)=>t===0||e===0?0:Oe.tables.exp[(Oe.tables.log[t]+Oe.tables.log[e])%255],add:(t,e)=>t^e,pow:(t,e)=>Oe.tables.exp[Oe.tables.log[t]*e%255],inv(t){if(t===0)throw new Error(`GF.inverse: wrong arg=${t}`);return Oe.tables.exp[255-Oe.tables.log[t]]},polynomial(t){if(t.length==0)throw new Error("GF.polymomial: wrong length");if(t[0]!==0)return t;let e=0;for(;e<t.length-1&&t[e]==0;e++);return t.slice(e)},monomial(t,e){if(t<0)throw new Error(`GF.monomial: wrong degree=${t}`);if(e==0)return[0];let n=Ji(t+1,0);return n[0]=e,Oe.polynomial(n)},degree:t=>t.length-1,coefficient:(t,e)=>t[Oe.degree(t)-e],mulPoly(t,e){if(t[0]===0||e[0]===0)return[0];const n=Ji(t.length+e.length-1,0);for(let r=0;r<t.length;r++)for(let i=0;i<e.length;i++)n[r+i]=Oe.add(n[r+i],Oe.mul(t[r],e[i]));return Oe.polynomial(n)},mulPolyScalar(t,e){if(e==0)return[0];if(e==1)return t;const n=Ji(t.length,0);for(let r=0;r<t.length;r++)n[r]=Oe.mul(t[r],e);return Oe.polynomial(n)},mulPolyMonomial(t,e,n){if(e<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(n==0)return[0];const r=Ji(t.length+e,0);for(let i=0;i<t.length;i++)r[i]=Oe.mul(t[i],n);return Oe.polynomial(r)},addPoly(t,e){if(t[0]===0)return e;if(e[0]===0)return t;let n=t,r=e;n.length>r.length&&([n,r]=[r,n]);let i=Ji(r.length,0),s=r.length-n.length,o=r.slice(0,s);for(let a=0;a<o.length;a++)i[a]=o[a];for(let a=s;a<r.length;a++)i[a]=Oe.add(n[a-s],r[a]);return Oe.polynomial(i)},remainderPoly(t,e){const n=Array.from(t);for(let r=0;r<t.length-e.length+1;r++){const i=n[r];if(i!==0)for(let s=1;s<e.length;s++)e[s]!==0&&(n[r+s]=Oe.add(n[r+s],Oe.mul(e[s],i)))}return n.slice(t.length-e.length+1,n.length)},divisorPoly(t){let e=[1];for(let n=0;n<t;n++)e=Oe.mulPoly(e,[1,Oe.pow(2,n)]);return e},evalPoly(t,e){if(e==0)return Oe.coefficient(t,0);let n=t[0];for(let r=1;r<t.length;r++)n=Oe.add(Oe.mul(e,n),t[r]);return n},euclidian(t,e,n){Oe.degree(t)<Oe.degree(e)&&([t,e]=[e,t]);let r=t,i=e,s=[0],o=[1];for(;2*Oe.degree(i)>=n;){let l=r,u=s;if(r=i,s=o,r[0]===0)throw new Error("rLast[0] === 0");i=l;let d=[0];const h=Oe.inv(r[0]);for(;Oe.degree(i)>=Oe.degree(r)&&i[0]!==0;){const f=Oe.degree(i)-Oe.degree(r),g=Oe.mul(i[0],h);d=Oe.addPoly(d,Oe.monomial(f,g)),i=Oe.addPoly(i,Oe.mulPolyMonomial(r,f,g))}if(d=Oe.mulPoly(d,s),o=Oe.addPoly(d,u),Oe.degree(i)>=Oe.degree(r))throw new Error(`Division failed r: ${i}, rLast: ${r}`)}const a=Oe.coefficient(o,0);if(a==0)throw new Error("sigmaTilde(0) was zero");const c=Oe.inv(a);return[Oe.mulPolyScalar(o,c),Oe.mulPolyScalar(i,c)]}};function vle(t,e){const{words:n,shortBlocks:r,numBlocks:i,blockLen:s,total:o}=Lr.capacity(t,e),a=(c=n,{encode(l){const u=Oe.divisorPoly(c),d=Array.from(l);return d.push(...u.slice(0,-1).fill(0)),Uint8Array.from(Oe.remainderPoly(d,u))},decode(l){const u=l.slice(),d=Oe.polynomial(Array.from(l));let h=Ji(c,0),f=!1;for(let b=0;b<c;b++){const v=Oe.evalPoly(d,Oe.exp(b));h[h.length-1-b]=v,v!==0&&(f=!0)}if(!f)return u;h=Oe.polynomial(h);const g=Oe.monomial(c,1),[p,m]=Oe.euclidian(g,h,c),y=Ji(Oe.degree(p),0);let w=0;for(let b=1;b<256&&w<y.length;b++)Oe.evalPoly(p,b)===0&&(y[w++]=Oe.inv(b));if(w!==y.length)throw new Error("RS.decode: wrong errors number");for(let b=0;b<y.length;b++){const v=u.length-1-Oe.log(y[b]);if(v<0)throw new Error("RS.decode: wrong error location");const C=Oe.inv(y[b]);let A=1;for(let $=0;$<y.length;$++)b!==$&&(A=Oe.mul(A,Oe.add(1,Oe.mul(y[$],C))));u[v]=Oe.add(u[v],Oe.mul(Oe.evalPoly(m,C),Oe.inv(A)))}return u}});var c;return{encode(l){const u=[],d=[];for(let p=0;p<i;p++){const m=s+(p<r?0:1);u.push(l.subarray(0,m)),d.push(a.encode(l.subarray(0,m))),l=l.subarray(m)}const h=zM(...u),f=zM(...d),g=new Uint8Array(h.length+f.length);return g.set(h),g.set(f,h.length),g},decode(l){if(l.length!==o)throw new Error(`interleave.decode: len(data)=${l.length}, total=${o}`);const u=[];for(let f=0;f<i;f++){const g=f<r;u.push(new Uint8Array(n+s+(g?0:1)))}let d=0;for(let f=0;f<s;f++)for(let g=0;g<i;g++)u[g][f]=l[d++];for(let f=r;f<i;f++)u[f][s]=l[d++];for(let f=s;f<s+n;f++)for(let g=0;g<i;g++){const p=g<r;u[g][f+(p?0:1)]=l[d++]}const h=[];for(const f of u)h.push(...Array.from(a.decode(f)).slice(0,-n));return Uint8Array.from(h)}}}function VM(t,e,n,r){let i="",s=n.length;if(r==="numeric"){const d=Lr.alphabet.numeric.decode(n.split("")),h=d.length;for(let f=0;f<h-2;f+=3)i+=fd(100*d[f]+10*d[f+1]+d[f+2],10);h%3==1?i+=fd(d[h-1],4):h%3==2&&(i+=fd(10*d[h-2]+d[h-1],7))}else if(r==="alphanumeric"){const d=Lr.alphabet.alphanumerc.decode(n.split("")),h=d.length;for(let f=0;f<h-1;f+=2)i+=fd(45*d[f]+d[f+1],11);h%2==1&&(i+=fd(d[h-1],6))}else{if(r!=="byte")throw new Error("encode: unsupported type");{const d=function(h){if(typeof h!="string")throw new Error("utf8ToBytes expected string, got "+typeof h);return new Uint8Array(new TextEncoder().encode(h))}(n);s=d.length,i=Array.from(d).map(h=>fd(h,8)).join("")}}const{capacity:o}=Lr.capacity(t,e),a=fd(s,Lr.lengthBits(t,r));let c=Lr.modeBits[r]+a+i;if(c.length>o)throw new Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,o-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));const l="1110110000010001";for(let d=0;c.length!==o;d++)c+=l[d%16];const u=Uint8Array.from(c.match(/(.{8})/g).map(d=>+`0b${d}`));return vle(t,e).encode(u)}function GM(t,e,n,r,i=!1){const s=function(c,l,u,d=!1){const h=Lr.size.encode(c);let f=new Qi(h+2);const g=new Qi(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);f=f.embed(0,g).embed({x:-g.width,y:0},g).embed({x:0,y:-g.height},g),f=f.rectSlice(1,h);const p=new Qi(1).rect(0,1,!0).border(1,!1).border(1,!0),m=Lr.alignmentPatterns(c);for(const y of m)for(const w of m)f.data[y][w]===void 0&&f.embed({x:w-2,y:y-2},p);f=f.hLine({x:0,y:6},1/0,({x:y},w)=>w===void 0?y%2==0:w).vLine({x:6,y:0},1/0,({y},w)=>w===void 0?y%2==0:w);{const y=Lr.formatBits(l,u),w=b=>!d&&(y>>b&1)==1;for(let b=0;b<6;b++)f.data[b][8]=w(b);for(let b=6;b<8;b++)f.data[b+1][8]=w(b);for(let b=8;b<15;b++)f.data[h-15+b][8]=w(b);for(let b=0;b<8;b++)f.data[8][h-b-1]=w(b);for(let b=8;b<9;b++)f.data[8][15-b-1+1]=w(b);for(let b=9;b<15;b++)f.data[8][15-b-1]=w(b);f.data[h-8][8]=!d}if(c>=7){const y=Lr.versionBits(c);for(let w=0;w<18;w+=1){const b=!d&&(y>>w&1)==1,v=Math.floor(w/3),C=w%3+h-8-3;f.data[v][C]=b,f.data[C][v]=b}}return f}(t,e,r,i);let o=0;const a=8*n.length;if(function(c,l,u){const d=c.height,h=rC[l];let f=-1,g=d-1;for(let p=d-1;p>0;p-=2){for(p==6&&(p=5);;g+=f){for(let m=0;m<2;m+=1){const y=p-m;c.data[g][y]===void 0&&u(y,g,h(y,g))}if(g+f<0||g+f>=d)break}f=-f}}(s,r,(c,l,u)=>{let d=!1;o<a&&(d=(n[o>>>3]>>(7-o&7)&1)!=0,o++),s.data[l][c]=d!==u}),o!==a)throw new Error("QR: bytes left after draw");return s}function Ele(t){const e=t.inverse(),n=f=>{let g=0;for(let p,m=0,y=1;m<f.length;m++)p===f[m]&&(y++,m!==f.length-1)||(y>=5&&(g+=y-5+3),p=f[m],y=1);return g};let r=0;t.data.forEach(f=>r+=n(f)),e.data.forEach(f=>r+=n(f));let i=0,s=t.data;const o=t.width-1,a=t.height-1;for(let f=0;f<o;f++)for(let g=0;g<a;g++){const p=f+1,m=g+1;s[f][g]===s[p][g]&&s[p][g]===s[f][m]&&s[p][g]===s[p][m]&&(i+=3)}const c=f=>{const g=[!0,!1,!0,!0,!0,!1,!0],p=[!1,!1,!1,!1],m=[...g,...p],y=[...p,...g];let w=0;for(let b=0;b<f.length;b++)qM(f,m,b)&&(w+=40),qM(f,y,b)&&(w+=40);return w};let l=0;for(const f of t.data)l+=c(f);for(const f of e.data)l+=c(f);let u=0;t.rectRead(0,1/0,(f,g)=>u+=g?1:0);const d=u/(t.height*t.width)*100,h=10*Math.floor(Math.abs(d-50)/5);return r+i+l+h}function ZM(t,e="raw",n={}){const r=n.ecc!==void 0?n.ecc:"medium";(function(u){if(!WM.includes(u))throw new Error(`Invalid error correction mode=${u}. Expected: ${WM}`)})(r);const i=n.encoding!==void 0?n.encoding:function(u){let d="numeric";for(let h of u)if(!Lr.alphabet.numeric.has(h)&&(d="alphanumeric",!Lr.alphabet.alphanumerc.has(h)))return"byte";return d}(t);(function(u){if(!KM.includes(u))throw new Error(`Encoding: invalid mode=${u}. Expected: ${KM}`);if(u==="kanji"||u==="eci")throw new Error(`Encoding: ${u} is not supported (yet?).`)})(i),n.mask!==void 0&&function(u){if(![0,1,2,3,4,5,6,7].includes(u)||!rC[u])throw new Error(`Invalid mask=${u}. Expected number [0..7]`)}(n.mask);let s,o=n.version,a=new Error("Unknown error");if(o!==void 0)(function(u){if(!Number.isSafeInteger(u)||u<1||u>40)throw new Error(`Invalid version=${u}. Expected number [1..40]`)})(o),s=VM(o,r,t,i);else for(let u=1;u<=40;u++)try{s=VM(u,r,t,i),o=u;break}catch(d){a=d}if(!o||!s)throw a;let c=function(u,d,h,f){if(f===void 0){const g=function(){let p,m=1/0;return{add(y,w){y>=m||(p=w,m=y)},get:()=>p,score:()=>m}}();for(let p=0;p<rC.length;p++)g.add(Ele(GM(u,d,h,p,!0)),p);f=g.get()}if(f===void 0)throw new Error("Cannot find mask");return GM(u,d,h,f)}(o,r,s,n.mask);c.assertDrawn();const l=n.border===void 0?2:n.border;if(!Number.isSafeInteger(l))throw new Error("Wrong border type="+typeof l);if(c=c.border(l,!1),n.scale!==void 0&&(c=c.scale(n.scale)),e==="raw")return c.data;if(e==="ascii")return c.toASCII();if(e==="svg")return c.toSVG();if(e==="gif")return c.toGIF();if(e==="term")return c.toTerm();throw new Error(`Unknown output: ${e}`)}const iC={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}};class sC{constructor(e){var n;this.translations=iC,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=(n=e==null?void 0:e.baseUrl)!==null&&n!==void 0?n:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some(n=>n.toLowerCase().startsWith("en")))return"en";const e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}async init(e){const n=this.getBrowserLanguage()||e.fallbackLng;await this.loadTranslations(n)}async loadTranslations(e){const n=e.split("-")[0];if(n!=="en"&&this.supportedLocales.includes(n))try{const r=`${this.baseUrl}/${n}.json`,i=await fetch(r);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);this.translations=await i.json()}catch(r){console.warn(` Failed to load ${n} translations, falling back to English:`,r),this.translations=iC}else this.translations=iC}t(e){return this.getNestedTranslation(e,this.translations)||e}getNestedTranslation(e,n){const r=e.split(".");let i=n;for(const s of r){if(typeof i!="object")return"";i=i[s]}return typeof i=="string"?i:""}}var $1;(function(t){t.SDK_MODAL_VIEWED="sdk_modal_viewed",t.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",t.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed"})($1||($1={}));const YM=class{constructor(t){U4(this,t),this.close=Ol(this,"close",7),this.startDesktopOnboarding=Ol(this,"startDesktopOnboarding",7),this.trackAnalytics=Ol(this,"trackAnalytics",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new sC}componentDidLoad(){this.trackAnalytics.emit({event:$1.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:this.tab===1?"desktop":"mobile"}})}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}onClose(t=!1){this.close.emit({shouldTerminate:t})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:$1.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(t,e=!1){e&&this.trackAnalytics.emit({event:$1.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:this.tab===1?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=t,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;const t=r=>this.i18nInstance.t(r),e=this.isDefaultTab?this.preferDesktop?1:2:this.tab,n=ZM(this.link,"svg",{ecc:"medium",scale:2});return ie(Q4,{className:"install-model"},ie("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),ie("div",{class:"modal"},ie("div",{class:"closeButtonContainer"},ie("div",{class:"right"},ie("span",{class:"closeButton",onClick:()=>this.onClose(!0)},ie(tC,null)))),ie("div",{class:"logoContainer"},ie(nC,null)),ie("div",null,ie("div",{class:"tabcontainer"},ie("div",{class:"flexContainer"},ie("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(e===1?"tabactive":"")},t("DESKTOP")),ie("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(e===2?"tabactive":"")},t("MOBILE")))),ie("div",{style:{display:e===1?"none":"block"}},ie("div",{class:"flexContainer"},ie("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},n&&ie("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:n}),ie("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT")," ",ie("br",null),ie("span",{class:"blue"},ie("b",null,t("META_MASK_MOBILE_APP"))))))),ie("div",{style:{display:e===2?"none":"block"}},ie("div",{class:"item"},ie(X4,{Icon:ple,text:t("INSTALL_MODAL.TRUSTED_BY_USERS")})),ie("div",{class:"item"},ie(X4,{Icon:fle,text:t("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),ie("div",{class:"item"},ie(X4,{Icon:gle,text:t("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),ie("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},ie(mle,null),ie("span",{class:"installExtensionText"},t("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),ie(eC,{version:this.sdkVersion})))}get el(){return Ov(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};YM.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const JM=class{constructor(t){U4(this,t),this.close=Ol(this,"close",7),this.disconnect=Ol(this,"disconnect",7),this.updateOTPValue=Ol(this,"updateOTPValue",7),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new sC}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(t){this.updateOTPValue.emit({otpValue:t})}disconnectedCallback(){this.onClose()}render(){var t;if(!this.translationsLoaded)return null;const e=(t=this.displayOTP)===null||t===void 0||t,n=this.sdkVersion,r=i=>this.i18nInstance.t(i);return ie(Q4,{className:"pending-modal"},ie("div",{class:"backdrop",onClick:()=>this.onClose()}),ie("div",{class:"modal"},ie("div",{class:"closeButtonContainer"},ie("div",{class:"right"},ie("span",{class:"closeButton",onClick:()=>this.onClose()},ie(tC,null)))),ie("div",{class:"logoContainer"},ie(nC,null)),ie("div",null,ie("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},ie("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},r(e?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),ie("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),e&&ie("div",{class:"notice"},"* ",r("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),ie("div",{style:{marginTop:"20px"}},ie("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},r("PENDING_MODAL.DISCONNECT")))),ie(eC,{version:n})))}get el(){return Ov(this)}};JM.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const Cle=()=>ie("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ie("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),_le=()=>ie("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ie("rect",{width:"400",height:"300",fill:"white"}),ie("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),ie("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),ie("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),ie("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),ie("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),ie("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),ie("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),ie("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),ie("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),ie("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),ie("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),ie("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),ie("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),ie("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),ie("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),ie("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),ie("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),ie("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),ie("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),ie("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),ie("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),ie("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),QM=class{constructor(t){U4(this,t),this.close=Ol(this,"close",7),this.connectWithExtension=Ol(this,"connectWithExtension",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new sC,this.setTab(this.preferDesktop?1:2)}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(t=!1){this.close.emit({shouldTerminate:t})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(t){this.tab=t,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;const t=i=>this.i18nInstance.t(i),e=this.sdkVersion,n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=ZM(this.link,"svg",{ecc:"medium",scale:2});return ie(Q4,{className:"select-modal"},ie("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),ie("div",{class:"modal"},ie("div",{class:"closeButtonContainer"},ie("div",{class:"right"},ie("span",{class:"closeButton",onClick:()=>this.onClose(!0)},ie(tC,null)))),ie("div",{class:"logoContainer"},ie(nC,null)),ie("div",null,ie("div",{class:"tabcontainer"},ie("div",{class:"flexContainer"},ie("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(n===1?"tabactive":"")},t("DESKTOP")),ie("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(n===2?"tabactive":"")},t("MOBILE")))),ie("div",{style:{display:n===1?"none":"block"}},ie("div",{class:"flexContainer"},ie("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},ie("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:r}),ie("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT"),ie("br",null),ie("span",{class:"blue"},ie("b",null,t("META_MASK_MOBILE_APP"))))))),ie("div",{style:{display:n===2?"none":"block"}},ie("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},ie(_le,null)),ie("div",{class:"extensionLabel"},t("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),ie("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},ie(Cle,null),ie("span",{class:"installExtensionText"},t("CONNECT_WITH_EXTENSION"))))),ie(eC,{version:e})))}get el(){return Ov(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};QM.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;var Sle=Object.freeze({__proto__:null,mm_install_modal:YM,mm_pending_modal:JM,mm_select_modal:QM});const xle=Object.freeze(Object.defineProperty({__proto__:null,get CommunicationLayerPreference(){return yl},get ConnectionStatus(){return Kn},DEFAULT_SERVER_URL:nd,get EventType(){return de},get MessageType(){return tn},MetaMaskSDK:pM,MetaMaskSDKEvent:Jr,get PROVIDER_UPDATE_TYPE(){return po},get PlatformType(){return gr},SDKProvider:YR,default:pM},Symbol.toStringTag,{value:"Module"}));var XM=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},Ale=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Ile=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),$le=function(){function t(e,n,r,i){this.name=e,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return t}(),Ple=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Ole=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Tle=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Nle=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,eB=3,kle=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Tle]],tB=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function nB(t){return t?rB(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ole:typeof navigator<"u"?rB(navigator.userAgent):Ble()}function Rle(t){return t!==""&&kle.reduce(function(e,n){var r=n[0],i=n[1];if(e)return e;var s=i.exec(t);return!!s&&[r,s]},!1)}function rB(t){var e=Rle(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new Ple;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<eB&&(i=XM(XM([],i,!0),Dle(eB-i.length),!0)):i=[];var s=i.join("."),o=Mle(t),a=Nle.exec(t);return a&&a[1]?new $le(n,s,o,a[1]):new Ale(n,s,o)}function Mle(t){for(var e=0,n=tB.length;e<n;e++){var r=tB[e],i=r[0],s=r[1],o=s.exec(t);if(o)return i}return null}function Ble(){var t=typeof process<"u"&&process.version;return t?new Ile(process.version.slice(1)):null}function Dle(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var X={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var oC=function(t,e){return oC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},oC(t,e)};function Lle(t,e){oC(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var aC=function(){return aC=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},aC.apply(this,arguments)};function jle(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ule(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function Fle(t,e){return function(n,r){e(n,r,t)}}function zle(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function qle(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Hle(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Wle(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Kle(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function cC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function iB(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Vle(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(iB(arguments[e]));return t}function Gle(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function P1(t){return this instanceof P1?(this.v=t,this):new P1(t)}function Zle(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(g,p){s.push([h,f,g,p])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(g){d(s[0][3],g)}}function c(h){h.value instanceof P1?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Yle(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:P1(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function Jle(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof cC=="function"?cC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function Qle(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Xle(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function eue(t){return t&&t.__esModule?t:{default:t}}function tue(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function nue(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const kv=yA(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return aC},__asyncDelegator:Yle,__asyncGenerator:Zle,__asyncValues:Jle,__await:P1,__awaiter:qle,__classPrivateFieldGet:tue,__classPrivateFieldSet:nue,__createBinding:Wle,__decorate:Ule,__exportStar:Kle,__extends:Lle,__generator:Hle,__importDefault:eue,__importStar:Xle,__makeTemplateObject:Qle,__metadata:zle,__param:Fle,__read:iB,__rest:jle,__spread:Vle,__spreadArrays:Gle,__values:cC},Symbol.toStringTag,{value:"Module"})));var lC={},O1={},sB;function rue(){if(sB)return O1;sB=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return O1.delay=t,O1}var pd={},uC={},gd={},oB;function iue(){return oB||(oB=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.ONE_THOUSAND=gd.ONE_HUNDRED=void 0,gd.ONE_HUNDRED=100,gd.ONE_THOUSAND=1e3),gd}var dC={},aB;function sue(){return aB||(aB=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(dC)),dC}var cB;function lB(){return cB||(cB=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kv;e.__exportStar(iue(),t),e.__exportStar(sue(),t)}(uC)),uC}var uB;function oue(){if(uB)return pd;uB=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.fromMiliseconds=pd.toMiliseconds=void 0;const t=lB();function e(r){return r*t.ONE_THOUSAND}pd.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return pd.fromMiliseconds=n,pd}var dB;function aue(){return dB||(dB=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kv;e.__exportStar(rue(),t),e.__exportStar(oue(),t)}(lC)),lC}var Df={},hB;function cue(){if(hB)return Df;hB=1,Object.defineProperty(Df,"__esModule",{value:!0}),Df.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Df.Watch=t,Df.default=t,Df}var hC={},T1={},fB;function lue(){if(fB)return T1;fB=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.IWatch=void 0;class t{}return T1.IWatch=t,T1}var pB;function uue(){return pB||(pB=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),kv.__exportStar(lue(),t)}(hC)),hC}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=kv;e.__exportStar(aue(),t),e.__exportStar(cue(),t),e.__exportStar(uue(),t),e.__exportStar(lB(),t)})(X);var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.getLocalStorage=Gt.getLocalStorageOrThrow=Gt.getCrypto=Gt.getCryptoOrThrow=fC=Gt.getLocation=Gt.getLocationOrThrow=N1=Gt.getNavigator=Gt.getNavigatorOrThrow=Xi=Gt.getDocument=Gt.getDocumentOrThrow=Gt.getFromWindowOrThrow=Gt.getFromWindow=void 0;function md(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Gt.getFromWindow=md;function Lf(t){const e=md(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Gt.getFromWindowOrThrow=Lf;function due(){return Lf("document")}Gt.getDocumentOrThrow=due;function hue(){return md("document")}var Xi=Gt.getDocument=hue;function fue(){return Lf("navigator")}Gt.getNavigatorOrThrow=fue;function pue(){return md("navigator")}var N1=Gt.getNavigator=pue;function gue(){return Lf("location")}Gt.getLocationOrThrow=gue;function mue(){return md("location")}var fC=Gt.getLocation=mue;function yue(){return Lf("crypto")}Gt.getCryptoOrThrow=yue;function wue(){return md("crypto")}Gt.getCrypto=wue;function bue(){return Lf("localStorage")}Gt.getLocalStorageOrThrow=bue;function vue(){return md("localStorage")}Gt.getLocalStorage=vue;var pC={};Object.defineProperty(pC,"__esModule",{value:!0});var gC=pC.getWindowMetadata=void 0;const gB=Gt;function Eue(){let t,e;try{t=gB.getDocumentOrThrow(),e=gB.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const g=d[f],p=g.getAttribute("rel");if(p&&p.toLowerCase().indexOf("icon")>-1){const m=g.getAttribute("href");if(m)if(m.toLowerCase().indexOf("https:")===-1&&m.toLowerCase().indexOf("http:")===-1&&m.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(m.indexOf("/")===0)y+=m;else{const w=e.pathname.split("/");w.pop();const b=w.join("/");y+=b+"/"+m}h.push(y)}else if(m.indexOf("//")===0){const y=e.protocol+m;h.push(y)}else h.push(m)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const g=h[f],p=["itemprop","property","name"].map(m=>g.getAttribute(m)).filter(m=>m?d.includes(m):!1);if(p.length&&p){const m=g.getAttribute("content");if(m)return m}}return""}function i(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function s(){return r("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}gC=pC.getWindowMetadata=Eue;function k1(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function mB(t){return k1(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const yB="2.23.2";let R1={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${yB}`},Rv=class mA extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof mA?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),i=(()=>n.cause instanceof mA&&n.cause.docsPath||n.docsPath)(),s=(a=R1.getDocsUrl)==null?void 0:a.call(R1,{...n,docsPath:i}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],...R1.version?[`Version: ${R1.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=yB}walk(e){return wB(this,e)}};function wB(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?wB(t.cause,e):e?null:t}let bB=class extends Rv{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};function jf(t,{dir:e,size:n=32}={}){return typeof t=="string"?Cue(t,{dir:e,size:n}):_ue(t,{dir:e,size:n})}function Cue(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new bB({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function _ue(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new bB({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const s=e==="right";r[s?i:n-i-1]=t[s?i:t.length-i-1]}return r}let Sue=class extends Rv{constructor({max:e,min:n,signed:r,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},xue=class extends Rv{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Uf(t,{size:e}){if(mB(t)>e)throw new xue({givenSize:mB(t),maxSize:e})}function mC(t,e={}){const{signed:n}=e;e.size&&Uf(t,{size:e.size});const r=BigInt(t);if(!n)return r;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return r<=s?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Aue(t,e={}){return Number(mC(t,e))}const Iue=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function yC(t,e={}){return typeof t=="number"||typeof t=="bigint"?EB(t,e):typeof t=="string"?Oue(t,e):typeof t=="boolean"?$ue(t,e):vB(t,e)}function $ue(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Uf(n,{size:e.size}),jf(n,{size:e.size})):n}function vB(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=Iue[t[i]];const r=`0x${n}`;return typeof e.size=="number"?(Uf(r,{size:e.size}),jf(r,{dir:"right",size:e.size})):r}function EB(t,e={}){const{signed:n,size:r}=e,i=BigInt(t);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new Sue({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?jf(a,{size:r}):a}const Pue=new TextEncoder;function Oue(t,e={}){const n=Pue.encode(t);return vB(n,e)}const Tue=new TextEncoder;function Nue(t,e={}){return typeof t=="number"||typeof t=="bigint"?Rue(t,e):typeof t=="boolean"?kue(t,e):k1(t)?_B(t,e):SB(t,e)}function kue(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Uf(n,{size:e.size}),jf(n,{size:e.size})):n}const oc={zero:48,nine:57,A:65,F:70,a:97,f:102};function CB(t){if(t>=oc.zero&&t<=oc.nine)return t-oc.zero;if(t>=oc.A&&t<=oc.F)return t-(oc.A-10);if(t>=oc.a&&t<=oc.f)return t-(oc.a-10)}function _B(t,e={}){let n=t;e.size&&(Uf(n,{size:e.size}),n=jf(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=CB(r.charCodeAt(a++)),l=CB(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Rv(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);s[o]=c*16+l}return s}function Rue(t,e){const n=EB(t,e);return _B(n)}function SB(t,e={}){const n=Tue.encode(t);return typeof e.size=="number"?(Uf(n,{size:e.size}),jf(n,{dir:"right",size:e.size})):n}function Mv(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Mue(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function M1(t,...e){if(!Mue(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Bue(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Mv(t.outputLen),Mv(t.blockLen)}function Ff(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function xB(t,e){M1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Bv=BigInt(2**32-1),AB=BigInt(32);function Due(t,e=!1){return e?{h:Number(t&Bv),l:Number(t>>AB&Bv)}:{h:Number(t>>AB&Bv)|0,l:Number(t&Bv)|0}}function Lue(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Due(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const jue=(t,e,n)=>t<<n|e>>>32-n,Uue=(t,e,n)=>e<<n|t>>>32-n,Fue=(t,e,n)=>e<<n-32|t>>>64-n,zue=(t,e,n)=>t<<n-32|e>>>64-n,zf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function que(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function wC(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ra(t,e){return t<<32-e|t>>>e}const IB=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function Hue(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function $B(t){for(let e=0;e<t.length;e++)t[e]=Hue(t[e])}function Wue(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Dv(t){return typeof t=="string"&&(t=Wue(t)),M1(t),t}function Kue(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];M1(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}let bC=class{clone(){return this._cloneInto()}};function PB(t){const e=r=>t().update(Dv(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Vue(t=32){if(zf&&typeof zf.getRandomValues=="function")return zf.getRandomValues(new Uint8Array(t));if(zf&&typeof zf.randomBytes=="function")return zf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const OB=[],TB=[],NB=[],Gue=BigInt(0),B1=BigInt(1),Zue=BigInt(2),Yue=BigInt(7),Jue=BigInt(256),Que=BigInt(113);for(let t=0,e=B1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],OB.push(2*(5*r+n)),TB.push((t+1)*(t+2)/2%64);let i=Gue;for(let s=0;s<7;s++)e=(e<<B1^(e>>Yue)*Que)%Jue,e&Zue&&(i^=B1<<(B1<<BigInt(s))-B1);NB.push(i)}const[Xue,ede]=Lue(NB,!0),kB=(t,e,n)=>n>32?Fue(t,e,n):jue(t,e,n),RB=(t,e,n)=>n>32?zue(t,e,n):Uue(t,e,n);function tde(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=kB(l,u,1)^n[a],h=RB(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=TB[o],c=kB(i,s,a),l=RB(i,s,a),u=OB[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Xue[r],t[1]^=ede[r]}n.fill(0)}let nde=class wV extends bC{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Mv(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=que(this.state)}keccak(){IB||$B(this.state32),tde(this.state32,this.rounds),IB||$B(this.state32),this.posOut=0,this.pos=0}update(e){Ff(this);const{blockLen:n,state:r}=this;e=Dv(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ff(this,!1),M1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Mv(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(xB(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new wV(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const rde=((t,e,n)=>PB(()=>new nde(e,t,n)))(1,136,256/8);function MB(t,e){const n=e||"hex",r=rde(k1(t,{strict:!1})?Nue(t):t);return n==="bytes"?r:yC(r)}let ide=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const vC=new ide(8192);function sde(t,e){if(vC.has(`${t}.${e}`))return vC.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=MB(SB(n),"bytes"),i=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(r[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return vC.set(`${t}.${e}`,s),s}function ode(t){const e=MB(`0x${t.substring(4)}`).substring(26);return sde(`0x${e}`)}async function ade({hash:t,signature:e}){const n=k1(t)?t:yC(t),{secp256k1:r}=await Promise.resolve().then(()=>Zde);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),g=BB(f);return new r.Signature(mC(l),mC(u)).addRecoveryBit(g)}const o=k1(e)?e:yC(e),a=Aue(`0x${o.slice(130)}`),c=BB(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function BB(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function cde({hash:t,signature:e}){return ode(await ade({hash:t,signature:e}))}function lde(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function ude(t,e,n){return t&e^~t&n}function dde(t,e,n){return t&e^t&n^e&n}let hde=class extends bC{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=wC(this.buffer)}update(e){Ff(this);const{view:n,buffer:r,blockLen:i}=this;e=Dv(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=wC(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ff(this),xB(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;lde(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=wC(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const fde=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Tl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Nl=new Uint32Array(64);let pde=class extends hde{constructor(){super(64,32,8,!1),this.A=Tl[0]|0,this.B=Tl[1]|0,this.C=Tl[2]|0,this.D=Tl[3]|0,this.E=Tl[4]|0,this.F=Tl[5]|0,this.G=Tl[6]|0,this.H=Tl[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Nl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Nl[d-15],f=Nl[d-2],g=ra(h,7)^ra(h,18)^h>>>3,p=ra(f,17)^ra(f,19)^f>>>10;Nl[d]=p+Nl[d-7]+g+Nl[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ra(a,6)^ra(a,11)^ra(a,25),f=u+h+ude(a,c,l)+fde[d]+Nl[d]|0,p=(ra(r,2)^ra(r,13)^ra(r,22))+dde(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+p|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Nl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const gde=PB(()=>new pde);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lv=BigInt(0),jv=BigInt(1),mde=BigInt(2);function yd(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function D1(t){if(!yd(t))throw new Error("Uint8Array expected")}function qf(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const yde=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Hf(t){D1(t);let e="";for(let n=0;n<t.length;n++)e+=yde[t[n]];return e}function Wf(t){const e=t.toString(16);return e.length&1?"0"+e:e}function EC(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Lv:BigInt("0x"+t)}const ac={_0:48,_9:57,A:65,F:70,a:97,f:102};function DB(t){if(t>=ac._0&&t<=ac._9)return t-ac._0;if(t>=ac.A&&t<=ac.F)return t-(ac.A-10);if(t>=ac.a&&t<=ac.f)return t-(ac.a-10)}function Kf(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=DB(t.charCodeAt(s)),a=DB(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function wd(t){return EC(Hf(t))}function CC(t){return D1(t),EC(Hf(Uint8Array.from(t).reverse()))}function Vf(t,e){return Kf(t.toString(16).padStart(e*2,"0"))}function _C(t,e){return Vf(t,e).reverse()}function wde(t){return Kf(Wf(t))}function go(t,e,n){let r;if(typeof e=="string")try{r=Kf(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(yd(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function L1(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];D1(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function bde(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function vde(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const SC=t=>typeof t=="bigint"&&Lv<=t;function Uv(t,e,n){return SC(t)&&SC(e)&&SC(n)&&e<=t&&t<n}function bd(t,e,n,r){if(!Uv(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function LB(t){let e;for(e=0;t>Lv;t>>=jv,e+=1);return e}function Ede(t,e){return t>>BigInt(e)&jv}function Cde(t,e,n){return t|(n?jv:Lv)<<BigInt(e)}const xC=t=>(mde<<BigInt(t-1))-jv,AC=t=>new Uint8Array(t),jB=t=>Uint8Array.from(t);function UB(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=AC(t),i=AC(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),c=(d=AC())=>{i=a(jB([0]),d),r=a(),d.length!==0&&(i=a(jB([1]),d),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return L1(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const _de={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||yd(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function j1(t,e,n={}){const r=(i,s,o)=>{const a=_de[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const Sde=()=>{throw new Error("not implemented")};function IC(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const xde=Object.freeze(Object.defineProperty({__proto__:null,aInRange:bd,abool:qf,abytes:D1,bitGet:Ede,bitLen:LB,bitMask:xC,bitSet:Cde,bytesToHex:Hf,bytesToNumberBE:wd,bytesToNumberLE:CC,concatBytes:L1,createHmacDrbg:UB,ensureBytes:go,equalBytes:bde,hexToBytes:Kf,hexToNumber:EC,inRange:Uv,isBytes:yd,memoized:IC,notImplemented:Sde,numberToBytesBE:Vf,numberToBytesLE:_C,numberToHexUnpadded:Wf,numberToVarBytesBE:wde,utf8ToBytes:vde,validateObject:j1},Symbol.toStringTag,{value:"Module"}));let FB=class extends bC{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Bue(e);const r=Dv(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Ff(this),this.iHash.update(e),this}digestInto(e){Ff(this),M1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const zB=(t,e,n)=>new FB(t,e).update(n).digest();zB.create=(t,e)=>new FB(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vn=BigInt(0),wn=BigInt(1),vd=BigInt(2),Ade=BigInt(3),$C=BigInt(4),qB=BigInt(5),HB=BigInt(8);function yi(t,e){const n=t%e;return n>=Vn?n:e+n}function Ide(t,e,n){if(e<Vn)throw new Error("invalid exponent, negatives unsupported");if(n<=Vn)throw new Error("invalid modulus");if(n===wn)return Vn;let r=wn;for(;e>Vn;)e&wn&&(r=r*t%n),t=t*t%n,e>>=wn;return r}function Ds(t,e,n){let r=t;for(;e-- >Vn;)r*=r,r%=n;return r}function PC(t,e){if(t===Vn)throw new Error("invert: expected non-zero number");if(e<=Vn)throw new Error("invert: expected positive modulus, got "+e);let n=yi(t,e),r=e,i=Vn,s=wn;for(;n!==Vn;){const a=r/n,c=r%n,l=i-s*a;r=n,n=c,i=s,s=l}if(r!==wn)throw new Error("invert: does not exist");return yi(i,e)}function $de(t){const e=(t-wn)/vd;let n,r,i;for(n=t-wn,r=0;n%vd===Vn;n/=vd,r++);for(i=vd;i<t&&Ide(i,e,t)!==t-wn;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+wn)/$C;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(n+wn)/vd;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,i),n),d=a.pow(c,s),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let p=a.sqr(h);f<l&&!a.eql(p,a.ONE);f++)p=a.sqr(p);const g=a.pow(u,wn<<BigInt(l-f-1));u=a.sqr(g),d=a.mul(d,g),h=a.mul(h,u),l=f}return d}}function Pde(t){if(t%$C===Ade){const e=(t+wn)/$C;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%HB===qB){const e=(t-qB)/HB;return function(r,i){const s=r.mul(i,vd),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,vd),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return $de(t)}const Ode=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Tde(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Ode.reduce((r,i)=>(r[i]="function",r),e);return j1(t,n)}function Nde(t,e,n){if(n<Vn)throw new Error("invalid exponent, negatives unsupported");if(n===Vn)return t.ONE;if(n===wn)return e;let r=t.ONE,i=e;for(;n>Vn;)n&wn&&(r=t.mul(r,i)),i=t.sqr(i),n>>=wn;return r}function kde(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function WB(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function KB(t,e,n=!1,r={}){if(t<=Vn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=WB(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:xC(i),ZERO:Vn,ONE:wn,create:c=>yi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Vn<=c&&c<t},is0:c=>c===Vn,isOdd:c=>(c&wn)===wn,neg:c=>yi(-c,t),eql:(c,l)=>c===l,sqr:c=>yi(c*c,t),add:(c,l)=>yi(c+l,t),sub:(c,l)=>yi(c-l,t),mul:(c,l)=>yi(c*l,t),pow:(c,l)=>Nde(a,c,l),div:(c,l)=>yi(c*PC(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>PC(c,t),sqrt:r.sqrt||(c=>(o||(o=Pde(t)),o(a,c))),invertBatch:c=>kde(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?_C(c,s):Vf(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?CC(c):wd(c)}});return Object.freeze(a)}function VB(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function GB(t){const e=VB(t);return e+Math.ceil(e/2)}function Rde(t,e,n=!1){const r=t.length,i=VB(e),s=GB(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?CC(t):wd(t),a=yi(o,e-wn)+wn;return n?_C(a,i):Vf(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ZB=BigInt(0),Fv=BigInt(1);function OC(t,e){const n=e.negate();return t?n:e}function YB(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function TC(t,e){YB(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Mde(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Bde(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const NC=new WeakMap,JB=new WeakMap;function kC(t){return JB.get(t)||1}function Dde(t,e){return{constTimeNegate:OC,hasPrecomputes(n){return kC(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>ZB;)r&Fv&&(i=i.add(s)),s=s.double(),r>>=Fv;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=TC(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=TC(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<s;h++){const f=h*o;let g=Number(i&l);i>>=d,g>o&&(g-=u,i+=Fv);const p=f,m=f+Math.abs(g)-1,y=h%2!==0,w=g<0;g===0?c=c.add(OC(y,r[p])):a=a.add(OC(w,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=TC(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(i===ZB)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=Fv),f===0)continue;let g=r[h+Math.abs(f)-1];f<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(n,r,i){let s=NC.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&NC.set(r,i(s))),s},wNAFCached(n,r,i){const s=kC(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=kC(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){YB(r,e),JB.set(n,r),NC.delete(n)}}}function Lde(t,e,n,r){if(Mde(n,t),Bde(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=LB(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<r.length;f++){const g=r[f],p=Number(g>>BigInt(d)&BigInt(a));c[p]=c[p].add(n[f])}let h=i;for(let f=c.length-1,g=i;f>0;f--)g=g.add(c[f]),h=h.add(g);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function QB(t){return Tde(t.Fp),j1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...WB(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function XB(t){t.lowS!==void 0&&qf("lowS",t.lowS),t.prehash!==void 0&&qf("prehash",t.prehash)}function jde(t){const e=QB(t);j1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Ude,hexToBytes:Fde}=xde,cc={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(t,e)=>{const{Err:n}=cc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=Wf(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Wf(i.length/2|128):"";return Wf(t)+s+i+e},decode(t,e){const{Err:n}=cc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=cc;if(t<lc)throw new e("integer: negative integers are not allowed");let n=Wf(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=cc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ude(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=cc,i=typeof t=="string"?Fde(t):t;D1(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=cc,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},lc=BigInt(0),Gn=BigInt(1);BigInt(2);const eD=BigInt(3);BigInt(4);function zde(t){const e=jde(t),{Fp:n}=e,r=KB(e.n,e.nBitLength),i=e.toBytes||((p,m,y)=>{const w=m.toAffine();return L1(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),s=e.fromBytes||(p=>{const m=p.subarray(1),y=n.fromBytes(m.subarray(0,n.BYTES)),w=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:y,y:w}});function o(p){const{a:m,b:y}=e,w=n.sqr(p),b=n.mul(w,p);return n.add(n.add(b,n.mul(p,m)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(p){return Uv(p,Gn,e.n)}function c(p){const{allowedPrivateKeyLengths:m,nByteLength:y,wrapPrivateKey:w,n:b}=e;if(m&&typeof p!="bigint"){if(yd(p)&&(p=Hf(p)),typeof p!="string"||!m.includes(p.length))throw new Error("invalid private key");p=p.padStart(y*2,"0")}let v;try{v=typeof p=="bigint"?p:wd(go("private key",p,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof p)}return w&&(v=yi(v,b)),bd("private key",v,Gn,b),v}function l(p){if(!(p instanceof h))throw new Error("ProjectivePoint expected")}const u=IC((p,m)=>{const{px:y,py:w,pz:b}=p;if(n.eql(b,n.ONE))return{x:y,y:w};const v=p.is0();m==null&&(m=v?n.ONE:n.inv(b));const C=n.mul(y,m),A=n.mul(w,m),$=n.mul(b,m);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql($,n.ONE))throw new Error("invZ was invalid");return{x:C,y:A}}),d=IC(p=>{if(p.is0()){if(e.allowInfinityPoint&&!n.is0(p.py))return;throw new Error("bad point: ZERO")}const{x:m,y}=p.toAffine();if(!n.isValid(m)||!n.isValid(y))throw new Error("bad point: x or y not FE");const w=n.sqr(y),b=o(m);if(!n.eql(w,b))throw new Error("bad point: equation left != right");if(!p.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,y,w){if(this.px=m,this.py=y,this.pz=w,m==null||!n.isValid(m))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:y,y:w}=m||{};if(!m||!n.isValid(y)||!n.isValid(w))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(y)&&b(w)?h.ZERO:new h(y,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const y=n.invertBatch(m.map(w=>w.pz));return m.map((w,b)=>w.toAffine(y[b])).map(h.fromAffine)}static fromHex(m){const y=h.fromAffine(s(go("pointHex",m)));return y.assertValidity(),y}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,y){return Lde(h,r,m,y)}_setWindowSize(m){g.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:y,py:w,pz:b}=this,{px:v,py:C,pz:A}=m,$=n.eql(n.mul(y,A),n.mul(v,b)),R=n.eql(n.mul(w,A),n.mul(C,b));return $&&R}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:y}=e,w=n.mul(y,eD),{px:b,py:v,pz:C}=this;let A=n.ZERO,$=n.ZERO,R=n.ZERO,P=n.mul(b,b),L=n.mul(v,v),U=n.mul(C,C),D=n.mul(b,v);return D=n.add(D,D),R=n.mul(b,C),R=n.add(R,R),A=n.mul(m,R),$=n.mul(w,U),$=n.add(A,$),A=n.sub(L,$),$=n.add(L,$),$=n.mul(A,$),A=n.mul(D,A),R=n.mul(w,R),U=n.mul(m,U),D=n.sub(P,U),D=n.mul(m,D),D=n.add(D,R),R=n.add(P,P),P=n.add(R,P),P=n.add(P,U),P=n.mul(P,D),$=n.add($,P),U=n.mul(v,C),U=n.add(U,U),P=n.mul(U,D),A=n.sub(A,P),R=n.mul(U,L),R=n.add(R,R),R=n.add(R,R),new h(A,$,R)}add(m){l(m);const{px:y,py:w,pz:b}=this,{px:v,py:C,pz:A}=m;let $=n.ZERO,R=n.ZERO,P=n.ZERO;const L=e.a,U=n.mul(e.b,eD);let D=n.mul(y,v),j=n.mul(w,C),I=n.mul(b,A),E=n.add(y,w),S=n.add(v,C);E=n.mul(E,S),S=n.add(D,j),E=n.sub(E,S),S=n.add(y,b);let k=n.add(v,A);return S=n.mul(S,k),k=n.add(D,I),S=n.sub(S,k),k=n.add(w,b),$=n.add(C,A),k=n.mul(k,$),$=n.add(j,I),k=n.sub(k,$),P=n.mul(L,S),$=n.mul(U,I),P=n.add($,P),$=n.sub(j,P),P=n.add(j,P),R=n.mul($,P),j=n.add(D,D),j=n.add(j,D),I=n.mul(L,I),S=n.mul(U,S),j=n.add(j,I),I=n.sub(D,I),I=n.mul(L,I),S=n.add(S,I),D=n.mul(j,S),R=n.add(R,D),D=n.mul(k,S),$=n.mul(E,$),$=n.sub($,D),D=n.mul(E,j),P=n.mul(k,P),P=n.add(P,D),new h($,R,P)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return g.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:y,n:w}=e;bd("scalar",m,lc,w);const b=h.ZERO;if(m===lc)return b;if(this.is0()||m===Gn)return this;if(!y||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:v,k1:C,k2neg:A,k2:$}=y.splitScalar(m),R=b,P=b,L=this;for(;C>lc||$>lc;)C&Gn&&(R=R.add(L)),$&Gn&&(P=P.add(L)),L=L.double(),C>>=Gn,$>>=Gn;return v&&(R=R.negate()),A&&(P=P.negate()),P=new h(n.mul(P.px,y.beta),P.py,P.pz),R.add(P)}multiply(m){const{endo:y,n:w}=e;bd("scalar",m,Gn,w);let b,v;if(y){const{k1neg:C,k1:A,k2neg:$,k2:R}=y.splitScalar(m);let{p:P,f:L}=this.wNAF(A),{p:U,f:D}=this.wNAF(R);P=g.constTimeNegate(C,P),U=g.constTimeNegate($,U),U=new h(n.mul(U.px,y.beta),U.py,U.pz),b=P.add(U),v=L.add(D)}else{const{p:C,f:A}=this.wNAF(m);b=C,v=A}return h.normalizeZ([b,v])[0]}multiplyAndAddUnsafe(m,y,w){const b=h.BASE,v=(A,$)=>$===lc||$===Gn||!A.equals(b)?A.multiplyUnsafe($):A.multiply($),C=v(this,y).add(v(m,w));return C.is0()?void 0:C}toAffine(m){return u(this,m)}isTorsionFree(){const{h:m,isTorsionFree:y}=e;if(m===Gn)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:y}=e;return m===Gn?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return qf("isCompressed",m),this.assertValidity(),i(h,this,m)}toHex(m=!0){return qf("isCompressed",m),Hf(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,g=Dde(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function qde(t){const e=QB(t);return j1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Hde(t){const e=qde(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(I){return yi(I,r)}function a(I){return PC(I,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=zde({...e,toBytes(I,E,S){const k=E.toAffine(),_=n.toBytes(k.x),x=L1;return qf("isCompressed",S),S?x(Uint8Array.from([E.hasEvenY()?2:3]),_):x(Uint8Array.from([4]),_,n.toBytes(k.y))},fromBytes(I){const E=I.length,S=I[0],k=I.subarray(1);if(E===i&&(S===2||S===3)){const _=wd(k);if(!Uv(_,Gn,n.ORDER))throw new Error("Point is not on curve");const x=u(_);let T;try{T=n.sqrt(x)}catch(N){const B=N instanceof Error?": "+N.message:"";throw new Error("Point is not on curve"+B)}const M=(T&Gn)===Gn;return(S&1)===1!==M&&(T=n.neg(T)),{x:_,y:T}}else if(E===s&&S===4){const _=n.fromBytes(k.subarray(0,n.BYTES)),x=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:_,y:x}}else{const _=i,x=s;throw new Error("invalid Point, expected length of "+_+", or uncompressed "+x+", got "+E)}}}),h=I=>Hf(Vf(I,e.nByteLength));function f(I){const E=r>>Gn;return I>E}function g(I){return f(I)?o(-I):I}const p=(I,E,S)=>wd(I.slice(E,S));class m{constructor(E,S,k){this.r=E,this.s=S,this.recovery=k,this.assertValidity()}static fromCompact(E){const S=e.nByteLength;return E=go("compactSignature",E,S*2),new m(p(E,0,S),p(E,S,2*S))}static fromDER(E){const{r:S,s:k}=cc.toSig(go("DER",E));return new m(S,k)}assertValidity(){bd("r",this.r,Gn,r),bd("s",this.s,Gn,r)}addRecoveryBit(E){return new m(this.r,this.s,E)}recoverPublicKey(E){const{r:S,s:k,recovery:_}=this,x=A(go("msgHash",E));if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");const T=_===2||_===3?S+e.n:S;if(T>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=_&1?"03":"02",O=c.fromHex(M+h(T)),N=a(T),B=o(-x*N),F=o(k*N),z=c.BASE.multiplyAndAddUnsafe(O,B,F);if(!z)throw new Error("point at infinify");return z.assertValidity(),z}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Kf(this.toDERHex())}toDERHex(){return cc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Kf(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(I){try{return l(I),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const I=GB(e.n);return Rde(e.randomBytes(I),e.n)},precompute(I=8,E=c.BASE){return E._setWindowSize(I),E.multiply(BigInt(3)),E}};function w(I,E=!0){return c.fromPrivateKey(I).toRawBytes(E)}function b(I){const E=yd(I),S=typeof I=="string",k=(E||S)&&I.length;return E?k===i||k===s:S?k===2*i||k===2*s:I instanceof c}function v(I,E,S=!0){if(b(I))throw new Error("first arg must be private key");if(!b(E))throw new Error("second arg must be public key");return c.fromHex(E).multiply(l(I)).toRawBytes(S)}const C=e.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");const E=wd(I),S=I.length*8-e.nBitLength;return S>0?E>>BigInt(S):E},A=e.bits2int_modN||function(I){return o(C(I))},$=xC(e.nBitLength);function R(I){return bd("num < 2^"+e.nBitLength,I,lc,$),Vf(I,e.nByteLength)}function P(I,E,S=L){if(["recovered","canonical"].some(H=>H in S))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:_}=e;let{lowS:x,prehash:T,extraEntropy:M}=S;x==null&&(x=!0),I=go("msgHash",I),XB(S),T&&(I=go("prehashed msgHash",k(I)));const O=A(I),N=l(E),B=[R(N),R(O)];if(M!=null&&M!==!1){const H=M===!0?_(n.BYTES):M;B.push(go("extraEntropy",H))}const F=L1(...B),z=O;function q(H){const K=C(H);if(!d(K))return;const Y=a(K),J=c.BASE.multiply(K).toAffine(),G=o(J.x);if(G===lc)return;const te=o(Y*o(z+G*N));if(te===lc)return;let se=(J.x===G?0:2)|Number(J.y&Gn),he=te;return x&&f(te)&&(he=g(te),se^=1),new m(G,he,se)}return{seed:F,k2sig:q}}const L={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function D(I,E,S=L){const{seed:k,k2sig:_}=P(I,E,S),x=e;return UB(x.hash.outputLen,x.nByteLength,x.hmac)(k,_)}c.BASE._setWindowSize(8);function j(I,E,S,k=U){var se;const _=I;E=go("msgHash",E),S=go("publicKey",S);const{lowS:x,prehash:T,format:M}=k;if(XB(k),"strict"in k)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&M!=="compact"&&M!=="der")throw new Error("format must be compact or der");const O=typeof _=="string"||yd(_),N=!O&&!M&&typeof _=="object"&&_!==null&&typeof _.r=="bigint"&&typeof _.s=="bigint";if(!O&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let B,F;try{if(N&&(B=new m(_.r,_.s)),O){try{M!=="compact"&&(B=m.fromDER(_))}catch(he){if(!(he instanceof cc.Err))throw he}!B&&M!=="der"&&(B=m.fromCompact(_))}F=c.fromHex(S)}catch{return!1}if(!B||x&&B.hasHighS())return!1;T&&(E=e.hash(E));const{r:z,s:q}=B,H=A(E),K=a(q),Y=o(H*K),J=o(z*K),G=(se=c.BASE.multiplyAndAddUnsafe(F,Y,J))==null?void 0:se.toAffine();return G?o(G.x)===z:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:v,sign:D,verify:j,ProjectivePoint:c,Signature:m,utils:y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Wde(t){return{hash:t,hmac:(e,...n)=>zB(t,e,Kue(...n)),randomBytes:Vue}}function Kde(t,e){const n=r=>Hde({...t,...Wde(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tD=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),nD=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Vde=BigInt(1),RC=BigInt(2),rD=(t,e)=>(t+e/RC)/e;function Gde(t){const e=tD,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Ds(u,n,e)*u%e,h=Ds(d,n,e)*u%e,f=Ds(h,RC,e)*l%e,g=Ds(f,i,e)*f%e,p=Ds(g,s,e)*g%e,m=Ds(p,a,e)*p%e,y=Ds(m,c,e)*m%e,w=Ds(y,a,e)*p%e,b=Ds(w,n,e)*u%e,v=Ds(b,o,e)*g%e,C=Ds(v,r,e)*l%e,A=Ds(C,RC,e);if(!MC.eql(MC.sqr(A),t))throw new Error("Cannot find square root");return A}const MC=KB(tD,void 0,void 0,{sqrt:Gde}),iD=Kde({a:BigInt(0),b:BigInt(7),Fp:MC,n:nD,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=nD,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Vde*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=rD(s*t,e),c=rD(-r*t,e);let l=yi(t-a*n-c*i,e),u=yi(-a*r-c*s,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},gde);BigInt(0),iD.ProjectivePoint;const Zde=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:iD},Symbol.toStringTag,{value:"Module"}));function Yde(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),i=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const g=(f-h)*s+1>>>0,p=new Uint8Array(g);for(;h!==f;){let w=l[h],b=0;for(let v=g-1;(w!==0||b<d)&&v!==-1;v--,b++)w+=256*p[v]>>>0,p[v]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");d=b,h++}let m=g-d;for(;m!==g&&p[m]===0;)m++;let y=r.repeat(u);for(;m<g;++m)y+=t.charAt(p[m]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*i+1>>>0,g=new Uint8Array(f);for(;u<l.length;){const w=l.charCodeAt(u);if(w>255)return;let b=e[w];if(b===255)return;let v=0;for(let C=f-1;(b!==0||v<h)&&C!==-1;C--,v++)b+=n*g[C]>>>0,g[C]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");h=v,u++}let p=f-h;for(;p!==f&&g[p]===0;)p++;const m=new Uint8Array(d+(f-p));let y=d;for(;p!==f;)m[y++]=g[p++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Jde="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Qde=Yde(Jde),Xde=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),ehe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function uc(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return ehe(t)}catch{return t}}function ia(t){return typeof t=="string"?t:Xde(t)||""}function the(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sD(t,...e){if(!the(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function oD(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function nhe(t,e){sD(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Gf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const BC=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function rhe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function aD(t){return typeof t=="string"&&(t=rhe(t)),sD(t),t}let ihe=class{clone(){return this._cloneInto()}};function she(t){const e=r=>t().update(aD(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function cD(t=32){if(Gf&&typeof Gf.getRandomValues=="function")return Gf.getRandomValues(new Uint8Array(t));if(Gf&&typeof Gf.randomBytes=="function")return Gf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function ohe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let ahe=class extends ihe{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=BC(this.buffer)}update(e){oD(this);const{view:n,buffer:r,blockLen:i}=this;e=aD(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=BC(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){oD(this),nhe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;ohe(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=BC(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const zv=BigInt(2**32-1),DC=BigInt(32);function lD(t,e=!1){return e?{h:Number(t&zv),l:Number(t>>DC&zv)}:{h:Number(t>>DC&zv)|0,l:Number(t&zv)|0}}function che(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=lD(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const lhe=(t,e)=>BigInt(t>>>0)<<DC|BigInt(e>>>0),uhe=(t,e,n)=>t>>>n,dhe=(t,e,n)=>t<<32-n|e>>>n,hhe=(t,e,n)=>t>>>n|e<<32-n,fhe=(t,e,n)=>t<<32-n|e>>>n,phe=(t,e,n)=>t<<64-n|e>>>n-32,ghe=(t,e,n)=>t>>>n-32|e<<64-n,mhe=(t,e)=>e,yhe=(t,e)=>t,whe=(t,e,n)=>t<<n|e>>>32-n,bhe=(t,e,n)=>e<<n|t>>>32-n,vhe=(t,e,n)=>e<<n-32|t>>>64-n,Ehe=(t,e,n)=>t<<n-32|e>>>64-n;function Che(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const _he=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),She=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,xhe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Ahe=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Ihe=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),$he=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,Qe={fromBig:lD,split:che,toBig:lhe,shrSH:uhe,shrSL:dhe,rotrSH:hhe,rotrSL:fhe,rotrBH:phe,rotrBL:ghe,rotr32H:mhe,rotr32L:yhe,rotlSH:whe,rotlSL:bhe,rotlBH:vhe,rotlBL:Ehe,add:Che,add3L:_he,add3H:She,add4L:xhe,add4H:Ahe,add5H:$he,add5L:Ihe},[Phe,Ohe]=(()=>Qe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),kl=new Uint32Array(80),Rl=new Uint32Array(80);let The=class extends ahe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:g,Hh:p,Hl:m}=this;return[e,n,r,i,s,o,a,c,l,u,d,h,f,g,p,m]}set(e,n,r,i,s,o,a,c,l,u,d,h,f,g,p,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=g|0,this.Hh=p|0,this.Hl=m|0}process(e,n){for(let b=0;b<16;b++,n+=4)kl[b]=e.getUint32(n),Rl[b]=e.getUint32(n+=4);for(let b=16;b<80;b++){const v=kl[b-15]|0,C=Rl[b-15]|0,A=Qe.rotrSH(v,C,1)^Qe.rotrSH(v,C,8)^Qe.shrSH(v,C,7),$=Qe.rotrSL(v,C,1)^Qe.rotrSL(v,C,8)^Qe.shrSL(v,C,7),R=kl[b-2]|0,P=Rl[b-2]|0,L=Qe.rotrSH(R,P,19)^Qe.rotrBH(R,P,61)^Qe.shrSH(R,P,6),U=Qe.rotrSL(R,P,19)^Qe.rotrBL(R,P,61)^Qe.shrSL(R,P,6),D=Qe.add4L($,U,Rl[b-7],Rl[b-16]),j=Qe.add4H(D,A,L,kl[b-7],kl[b-16]);kl[b]=j|0,Rl[b]=D|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:g,Gh:p,Gl:m,Hh:y,Hl:w}=this;for(let b=0;b<80;b++){const v=Qe.rotrSH(d,h,14)^Qe.rotrSH(d,h,18)^Qe.rotrBH(d,h,41),C=Qe.rotrSL(d,h,14)^Qe.rotrSL(d,h,18)^Qe.rotrBL(d,h,41),A=d&f^~d&p,$=h&g^~h&m,R=Qe.add5L(w,C,$,Ohe[b],Rl[b]),P=Qe.add5H(R,y,v,A,Phe[b],kl[b]),L=R|0,U=Qe.rotrSH(r,i,28)^Qe.rotrBH(r,i,34)^Qe.rotrBH(r,i,39),D=Qe.rotrSL(r,i,28)^Qe.rotrBL(r,i,34)^Qe.rotrBL(r,i,39),j=r&s^r&a^s&a,I=i&o^i&c^o&c;y=p|0,w=m|0,p=f|0,m=g|0,f=d|0,g=h|0,{h:d,l:h}=Qe.add(l|0,u|0,P|0,L|0),l=a|0,u=c|0,a=s|0,c=o|0,s=r|0,o=i|0;const E=Qe.add3L(L,D,I);r=Qe.add3H(E,P,U,j),i=E|0}({h:r,l:i}=Qe.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Qe.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Qe.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Qe.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Qe.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:g}=Qe.add(this.Fh|0,this.Fl|0,f|0,g|0),{h:p,l:m}=Qe.add(this.Gh|0,this.Gl|0,p|0,m|0),{h:y,l:w}=Qe.add(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,i,s,o,a,c,l,u,d,h,f,g,p,m,y,w)}roundClean(){kl.fill(0),Rl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Nhe=she(()=>new The);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const LC=BigInt(0),uD=BigInt(1),khe=BigInt(2);function jC(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function UC(t){if(!jC(t))throw new Error("Uint8Array expected")}function FC(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Rhe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function zC(t){UC(t);let e="";for(let n=0;n<t.length;n++)e+=Rhe[t[n]];return e}function dD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?LC:BigInt("0x"+t)}const dc={_0:48,_9:57,A:65,F:70,a:97,f:102};function hD(t){if(t>=dc._0&&t<=dc._9)return t-dc._0;if(t>=dc.A&&t<=dc.F)return t-(dc.A-10);if(t>=dc.a&&t<=dc.f)return t-(dc.a-10)}function fD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=hD(t.charCodeAt(s)),a=hD(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Mhe(t){return dD(zC(t))}function qv(t){return UC(t),dD(zC(Uint8Array.from(t).reverse()))}function pD(t,e){return fD(t.toString(16).padStart(e*2,"0"))}function qC(t,e){return pD(t,e).reverse()}function hc(t,e,n){let r;if(typeof e=="string")try{r=fD(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(jC(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function gD(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];UC(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const HC=t=>typeof t=="bigint"&&LC<=t;function Bhe(t,e,n){return HC(t)&&HC(e)&&HC(n)&&e<=t&&t<n}function U1(t,e,n,r){if(!Bhe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Dhe(t){let e;for(e=0;t>LC;t>>=uD,e+=1);return e}const Lhe=t=>(khe<<BigInt(t-1))-uD,jhe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||jC(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function WC(t,e,n={}){const r=(i,s,o)=>{const a=jhe[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}function mD(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const Zn=BigInt(0),bn=BigInt(1),Ed=BigInt(2),Uhe=BigInt(3),KC=BigInt(4),yD=BigInt(5),wD=BigInt(8);function Rn(t,e){const n=t%e;return n>=Zn?n:e+n}function Fhe(t,e,n){if(e<Zn)throw new Error("invalid exponent, negatives unsupported");if(n<=Zn)throw new Error("invalid modulus");if(n===bn)return Zn;let r=bn;for(;e>Zn;)e&bn&&(r=r*t%n),t=t*t%n,e>>=bn;return r}function sa(t,e,n){let r=t;for(;e-- >Zn;)r*=r,r%=n;return r}function bD(t,e){if(t===Zn)throw new Error("invert: expected non-zero number");if(e<=Zn)throw new Error("invert: expected positive modulus, got "+e);let n=Rn(t,e),r=e,i=Zn,s=bn;for(;n!==Zn;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==bn)throw new Error("invert: does not exist");return Rn(i,e)}function zhe(t){const e=(t-bn)/Ed;let n,r,i;for(n=t-bn,r=0;n%Ed===Zn;n/=Ed,r++);for(i=Ed;i<t&&Fhe(i,e,t)!==t-bn;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+bn)/KC;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+bn)/Ed;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let g=o.sqr(d);h<c&&!o.eql(g,o.ONE);h++)g=o.sqr(g);const f=o.pow(l,bn<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function qhe(t){if(t%KC===Uhe){const e=(t+bn)/KC;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%wD===yD){const e=(t-yD)/wD;return function(n,r){const i=n.mul(r,Ed),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,Ed),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return zhe(t)}const Hhe=(t,e)=>(Rn(t,e)&bn)===bn,Whe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Khe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Whe.reduce((r,i)=>(r[i]="function",r),e);return WC(t,n)}function Vhe(t,e,n){if(n<Zn)throw new Error("invalid exponent, negatives unsupported");if(n===Zn)return t.ONE;if(n===bn)return e;let r=t.ONE,i=e;for(;n>Zn;)n&bn&&(r=t.mul(r,i)),i=t.sqr(i),n>>=bn;return r}function Ghe(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function vD(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ED(t,e,n=!1,r={}){if(t<=Zn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=vD(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:Lhe(i),ZERO:Zn,ONE:bn,create:c=>Rn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Zn<=c&&c<t},is0:c=>c===Zn,isOdd:c=>(c&bn)===bn,neg:c=>Rn(-c,t),eql:(c,l)=>c===l,sqr:c=>Rn(c*c,t),add:(c,l)=>Rn(c+l,t),sub:(c,l)=>Rn(c-l,t),mul:(c,l)=>Rn(c*l,t),pow:(c,l)=>Vhe(a,c,l),div:(c,l)=>Rn(c*bD(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>bD(c,t),sqrt:r.sqrt||(c=>(o||(o=qhe(t)),o(a,c))),invertBatch:c=>Ghe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?qC(c,s):pD(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?qv(c):Mhe(c)}});return Object.freeze(a)}const CD=BigInt(0),Hv=BigInt(1);function VC(t,e){const n=e.negate();return t?n:e}function _D(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function GC(t,e){_D(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Zhe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Yhe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const ZC=new WeakMap,SD=new WeakMap;function YC(t){return SD.get(t)||1}function Jhe(t,e){return{constTimeNegate:VC,hasPrecomputes(n){return YC(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>CD;)r&Hv&&(i=i.add(s)),s=s.double(),r>>=Hv;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=GC(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=GC(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<s;h++){const f=h*o;let g=Number(i&l);i>>=d,g>o&&(g-=u,i+=Hv);const p=f,m=f+Math.abs(g)-1,y=h%2!==0,w=g<0;g===0?c=c.add(VC(y,r[p])):a=a.add(VC(w,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=GC(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(i===CD)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=Hv),f===0)continue;let g=r[h+Math.abs(f)-1];f<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(n,r,i){let s=ZC.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&ZC.set(r,i(s))),s},wNAFCached(n,r,i){const s=YC(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=YC(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){_D(r,e),SD.set(n,r),ZC.delete(n)}}}function Qhe(t,e,n,r){if(Zhe(n,t),Yhe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Dhe(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<r.length;f++){const g=r[f],p=Number(g>>BigInt(d)&BigInt(a));c[p]=c[p].add(n[f])}let h=i;for(let f=c.length-1,g=i;f>0;f--)g=g.add(c[f]),h=h.add(g);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Xhe(t){return Khe(t.Fp),WC(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...vD(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const mo=BigInt(0),wi=BigInt(1),Wv=BigInt(2),efe=BigInt(8),tfe={zip215:!0};function nfe(t){const e=Xhe(t);return WC(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function rfe(t){const e=nfe(t),{Fp:n,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=Wv<<BigInt(a*8)-wi,u=n.create,d=ED(e.n,e.nBitLength),h=e.uvRatio||((E,S)=>{try{return{isValid:!0,value:n.sqrt(E*n.inv(S))}}catch{return{isValid:!1,value:mo}}}),f=e.adjustScalarBytes||(E=>E),g=e.domain||((E,S,k)=>{if(FC("phflag",k),S.length||k)throw new Error("Contexts/pre-hash are not supported");return E});function p(E,S){U1("coordinate "+E,S,mo,l)}function m(E){if(!(E instanceof b))throw new Error("ExtendedPoint expected")}const y=mD((E,S)=>{const{ex:k,ey:_,ez:x}=E,T=E.is0();S==null&&(S=T?efe:n.inv(x));const M=u(k*S),O=u(_*S),N=u(x*S);if(T)return{x:mo,y:wi};if(N!==wi)throw new Error("invZ was invalid");return{x:M,y:O}}),w=mD(E=>{const{a:S,d:k}=e;if(E.is0())throw new Error("bad point: ZERO");const{ex:_,ey:x,ez:T,et:M}=E,O=u(_*_),N=u(x*x),B=u(T*T),F=u(B*B),z=u(O*S),q=u(B*u(z+N)),H=u(F+u(k*u(O*N)));if(q!==H)throw new Error("bad point: equation left != right (1)");const K=u(_*x),Y=u(T*M);if(K!==Y)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(S,k,_,x){this.ex=S,this.ey=k,this.ez=_,this.et=x,p("x",S),p("y",k),p("z",_),p("t",x),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(S){if(S instanceof b)throw new Error("extended point not allowed");const{x:k,y:_}=S||{};return p("x",k),p("y",_),new b(k,_,wi,u(k*_))}static normalizeZ(S){const k=n.invertBatch(S.map(_=>_.ez));return S.map((_,x)=>_.toAffine(k[x])).map(b.fromAffine)}static msm(S,k){return Qhe(b,d,S,k)}_setWindowSize(S){A.setWindowSize(this,S)}assertValidity(){w(this)}equals(S){m(S);const{ex:k,ey:_,ez:x}=this,{ex:T,ey:M,ez:O}=S,N=u(k*O),B=u(T*x),F=u(_*O),z=u(M*x);return N===B&&F===z}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:S}=e,{ex:k,ey:_,ez:x}=this,T=u(k*k),M=u(_*_),O=u(Wv*u(x*x)),N=u(S*T),B=k+_,F=u(u(B*B)-T-M),z=N+M,q=z-O,H=N-M,K=u(F*q),Y=u(z*H),J=u(F*H),G=u(q*z);return new b(K,Y,G,J)}add(S){m(S);const{a:k,d:_}=e,{ex:x,ey:T,ez:M,et:O}=this,{ex:N,ey:B,ez:F,et:z}=S;if(k===BigInt(-1)){const De=u((T-x)*(B+N)),tt=u((T+x)*(B-N)),st=u(tt-De);if(st===mo)return this.double();const ze=u(M*Wv*z),Ye=u(O*Wv*F),nt=Ye+ze,xn=tt+De,oi=Ye-ze,Jy=u(nt*st),Qy=u(xn*oi),c3=u(nt*oi),tA=u(st*xn);return new b(Jy,Qy,tA,c3)}const q=u(x*N),H=u(T*B),K=u(O*_*z),Y=u(M*F),J=u((x+T)*(N+B)-q-H),G=Y-K,te=Y+K,se=u(H-k*q),he=u(J*G),fe=u(te*se),_e=u(J*se),Pe=u(G*te);return new b(he,fe,Pe,_e)}subtract(S){return this.add(S.negate())}wNAF(S){return A.wNAFCached(this,S,b.normalizeZ)}multiply(S){const k=S;U1("scalar",k,wi,r);const{p:_,f:x}=this.wNAF(k);return b.normalizeZ([_,x])[0]}multiplyUnsafe(S,k=b.ZERO){const _=S;return U1("scalar",_,mo,r),_===mo?C:this.is0()||_===wi?this:A.wNAFCachedUnsafe(this,_,b.normalizeZ,k)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return A.unsafeLadder(this,r).is0()}toAffine(S){return y(this,S)}clearCofactor(){const{h:S}=e;return S===wi?this:this.multiplyUnsafe(S)}static fromHex(S,k=!1){const{d:_,a:x}=e,T=n.BYTES;S=hc("pointHex",S,T),FC("zip215",k);const M=S.slice(),O=S[T-1];M[T-1]=O&-129;const N=qv(M),B=k?l:n.ORDER;U1("pointHex.y",N,mo,B);const F=u(N*N),z=u(F-wi),q=u(_*F-x);let{isValid:H,value:K}=h(z,q);if(!H)throw new Error("Point.fromHex: invalid y coordinate");const Y=(K&wi)===wi,J=(O&128)!==0;if(!k&&K===mo&&J)throw new Error("Point.fromHex: x=0 and x_0=1");return J!==Y&&(K=u(-K)),b.fromAffine({x:K,y:N})}static fromPrivateKey(S){return P(S).point}toRawBytes(){const{x:S,y:k}=this.toAffine(),_=qC(k,n.BYTES);return _[_.length-1]|=S&wi?128:0,_}toHex(){return zC(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,wi,u(e.Gx*e.Gy)),b.ZERO=new b(mo,wi,wi,mo);const{BASE:v,ZERO:C}=b,A=Jhe(b,a*8);function $(E){return Rn(E,r)}function R(E){return $(qv(E))}function P(E){const S=n.BYTES;E=hc("private key",E,S);const k=hc("hashed private key",s(E),2*S),_=f(k.slice(0,S)),x=k.slice(S,2*S),T=R(_),M=v.multiply(T),O=M.toRawBytes();return{head:_,prefix:x,scalar:T,point:M,pointBytes:O}}function L(E){return P(E).pointBytes}function U(E=new Uint8Array,...S){const k=gD(...S);return R(s(g(k,hc("context",E),!!i)))}function D(E,S,k={}){E=hc("message",E),i&&(E=i(E));const{prefix:_,scalar:x,pointBytes:T}=P(S),M=U(k.context,_,E),O=v.multiply(M).toRawBytes(),N=U(k.context,O,T,E),B=$(M+N*x);U1("signature.s",B,mo,r);const F=gD(O,qC(B,n.BYTES));return hc("result",F,n.BYTES*2)}const j=tfe;function I(E,S,k,_=j){const{context:x,zip215:T}=_,M=n.BYTES;E=hc("signature",E,2*M),S=hc("message",S),k=hc("publicKey",k,M),T!==void 0&&FC("zip215",T),i&&(S=i(S));const O=qv(E.slice(M,2*M));let N,B,F;try{N=b.fromHex(k,T),B=b.fromHex(E.slice(0,M),T),F=v.multiplyUnsafe(O)}catch{return!1}if(!T&&N.isSmallOrder())return!1;const z=U(x,B.toRawBytes(),N.toRawBytes(),S);return B.add(N.multiplyUnsafe(z)).subtract(F).clearCofactor().equals(b.ZERO)}return v._setWindowSize(8),{CURVE:e,getPublicKey:L,sign:D,verify:I,ExtendedPoint:b,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>o(n.BYTES),precompute(E=8,S=b.BASE){return S._setWindowSize(E),S.multiply(BigInt(3)),S}}}}BigInt(0),BigInt(1);const JC=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),xD=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const ife=BigInt(1),AD=BigInt(2);BigInt(3);const sfe=BigInt(5),ofe=BigInt(8);function afe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=JC,o=t*t%s*t%s,a=sa(o,AD,s)*o%s,c=sa(a,ife,s)*t%s,l=sa(c,sfe,s)*c%s,u=sa(l,e,s)*l%s,d=sa(u,n,s)*u%s,h=sa(d,r,s)*d%s,f=sa(h,i,s)*h%s,g=sa(f,i,s)*h%s,p=sa(g,e,s)*l%s;return{pow_p_5_8:sa(p,AD,s)*t%s,b2:o}}function cfe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function lfe(t,e){const n=JC,r=Rn(e*e*e,n),i=Rn(r*r*e,n),s=afe(t*i).pow_p_5_8;let o=Rn(t*r*s,n);const a=Rn(e*o*o,n),c=o,l=Rn(o*xD,n),u=a===t,d=a===Rn(-t,n),h=a===Rn(-t*xD,n);return u&&(o=c),(d||h)&&(o=l),Hhe(o,n)&&(o=Rn(-o,n)),{isValid:u||d,value:o}}const ufe=(()=>ED(JC,void 0,!0))(),dfe=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ufe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:ofe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Nhe,randomBytes:cD,adjustScalarBytes:cfe,uvRatio:lfe}))(),ID=(()=>rfe(dfe))(),hfe="EdDSA",ffe="JWT",Kv=".",Vv="base64url",$D="utf8",PD="utf8",pfe=":",gfe="did",mfe="key",OD="base58btc",yfe="z",wfe="K36",bfe=32;function QC(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function TD(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?QC(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ND(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const n=TD(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return QC(n)}function vfe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,y=0,w=g.length;y!==w&&g[y]===0;)y++,p++;for(var b=(w-y)*u+1>>>0,v=new Uint8Array(b);y!==w;){for(var C=g[y],A=0,$=b-1;(C!==0||A<m)&&$!==-1;$--,A++)C+=256*v[$]>>>0,v[$]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");m=A,y++}for(var R=b-m;R!==b&&v[R]===0;)R++;for(var P=c.repeat(p);R<b;++R)P+=t.charAt(v[R]);return P}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,y=0;g[p]===c;)m++,p++;for(var w=(g.length-p)*l+1>>>0,b=new Uint8Array(w);g[p];){var v=n[g.charCodeAt(p)];if(v===255)return;for(var C=0,A=w-1;(v!==0||C<y)&&A!==-1;A--,C++)v+=a*b[A]>>>0,b[A]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");y=C,p++}if(g[p]!==" "){for(var $=w-y;$!==w&&b[$]===0;)$++;for(var R=new Uint8Array(m+(w-$)),P=m;$!==w;)R[P++]=b[$++];return R}}}function f(g){var p=h(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Efe=vfe,Cfe=Efe;const kD=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},_fe=t=>new TextEncoder().encode(t),Sfe=t=>new TextDecoder().decode(t);let xfe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Afe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return RD(this,e)}},Ife=class{constructor(e){this.decoders=e}or(e){return RD(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const RD=(t,e)=>new Ife({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let $fe=class{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new xfe(e,n,r),this.decoder=new Afe(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Gv=({name:t,prefix:e,encode:n,decode:r})=>new $fe(t,e,n,r),F1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=Cfe(n,e);return Gv({prefix:t,name:e,encode:r,decode:s=>kD(i(s))})},Pfe=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ofe=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},yr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Gv({prefix:e,name:t,encode(i){return Ofe(i,r,n)},decode(i){return Pfe(i,r,n,t)}}),Tfe=Gv({prefix:"\0",name:"identity",encode:t=>Sfe(t),decode:t=>_fe(t)});var Nfe=Object.freeze({__proto__:null,identity:Tfe});const kfe=yr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Rfe=Object.freeze({__proto__:null,base2:kfe});const Mfe=yr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Bfe=Object.freeze({__proto__:null,base8:Mfe});const Dfe=F1({prefix:"9",name:"base10",alphabet:"0123456789"});var Lfe=Object.freeze({__proto__:null,base10:Dfe});const jfe=yr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ufe=yr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ffe=Object.freeze({__proto__:null,base16:jfe,base16upper:Ufe});const zfe=yr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qfe=yr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Hfe=yr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Wfe=yr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Kfe=yr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Vfe=yr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Gfe=yr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zfe=yr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Yfe=yr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Jfe=Object.freeze({__proto__:null,base32:zfe,base32upper:qfe,base32pad:Hfe,base32padupper:Wfe,base32hex:Kfe,base32hexupper:Vfe,base32hexpad:Gfe,base32hexpadupper:Zfe,base32z:Yfe});const Qfe=F1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Xfe=F1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var epe=Object.freeze({__proto__:null,base36:Qfe,base36upper:Xfe});const tpe=F1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),npe=F1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var rpe=Object.freeze({__proto__:null,base58btc:tpe,base58flickr:npe});const ipe=yr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),spe=yr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ope=yr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ape=yr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var cpe=Object.freeze({__proto__:null,base64:ipe,base64pad:spe,base64url:ope,base64urlpad:ape});const MD=Array.from(""),lpe=MD.reduce((t,e,n)=>(t[n]=e,t),[]),upe=MD.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function dpe(t){return t.reduce((e,n)=>(e+=lpe[n],e),"")}function hpe(t){const e=[];for(const n of t){const r=upe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const fpe=Gv({prefix:"",name:"base256emoji",encode:dpe,decode:hpe});var ppe=Object.freeze({__proto__:null,base256emoji:fpe}),gpe=DD,BD=128,mpe=127,ype=~mpe,wpe=Math.pow(2,31);function DD(t,e,n){e=e||[],n=n||0;for(var r=n;t>=wpe;)e[n++]=t&255|BD,t/=128;for(;t&ype;)e[n++]=t&255|BD,t>>>=7;return e[n]=t|0,DD.bytes=n-r+1,e}var bpe=XC,vpe=128,LD=127;function XC(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw XC.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&LD)<<i:(o&LD)*Math.pow(2,i),i+=7}while(o>=vpe);return XC.bytes=s-r,n}var Epe=Math.pow(2,7),Cpe=Math.pow(2,14),_pe=Math.pow(2,21),Spe=Math.pow(2,28),xpe=Math.pow(2,35),Ape=Math.pow(2,42),Ipe=Math.pow(2,49),$pe=Math.pow(2,56),Ppe=Math.pow(2,63),Ope=function(t){return t<Epe?1:t<Cpe?2:t<_pe?3:t<Spe?4:t<xpe?5:t<Ape?6:t<Ipe?7:t<$pe?8:t<Ppe?9:10},Tpe={encode:gpe,decode:bpe,encodingLength:Ope},jD=Tpe;const UD=(t,e,n=0)=>(jD.encode(t,e,n),e),FD=t=>jD.encodingLength(t),e_=(t,e)=>{const n=e.byteLength,r=FD(t),i=r+FD(n),s=new Uint8Array(i+n);return UD(t,s,0),UD(n,s,r),s.set(e,i),new Npe(t,n,e,s)};let Npe=class{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}};const zD=({name:t,code:e,encode:n})=>new kpe(t,e,n);let kpe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?e_(this.code,n):n.then(r=>e_(this.code,r))}else throw Error("Unknown type, must be binary type")}};const qD=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Rpe=zD({name:"sha2-256",code:18,encode:qD("SHA-256")}),Mpe=zD({name:"sha2-512",code:19,encode:qD("SHA-512")});var Bpe=Object.freeze({__proto__:null,sha256:Rpe,sha512:Mpe});const HD=0,Dpe="identity",WD=kD;var Lpe=Object.freeze({__proto__:null,identity:{code:HD,name:Dpe,encode:WD,digest:t=>e_(HD,WD(t))}});new TextEncoder,new TextDecoder;const KD={...Nfe,...Rfe,...Bfe,...Lfe,...Ffe,...Jfe,...epe,...rpe,...cpe,...ppe};({...Bpe,...Lpe});function VD(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const GD=VD("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),t_=VD("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=TD(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),ZD={utf8:GD,"utf-8":GD,hex:KD.base16,latin1:t_,ascii:t_,binary:t_,...KD};function Zv(t,e="utf8"){const n=ZD[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Zf(t,e="utf8"){const n=ZD[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?QC(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function YD(t){return uc(Zv(Zf(t,Vv),$D))}function Yv(t){return Zv(Zf(ia(t),$D),Vv)}function n_(t){const e=Zf(wfe,OD),n=yfe+Zv(ND([e,t]),OD);return[gfe,mfe,n].join(pfe)}function jpe(t){return Zv(t,Vv)}function Upe(t){return Zf(t,Vv)}function Fpe(t){return Zf([Yv(t.header),Yv(t.payload)].join(Kv),PD)}function zpe(t){return[Yv(t.header),Yv(t.payload),jpe(t.signature)].join(Kv)}function Yf(t){const e=t.split(Kv),n=YD(e[0]),r=YD(e[1]),i=Upe(e[2]),s=Zf(e.slice(0,2).join(Kv),PD);return{header:n,payload:r,signature:i,data:s}}function Jv(t=cD(bfe)){const e=ID.getPublicKey(t);return{secretKey:ND([t,e]),publicKey:e}}async function JD(t,e,n,r,i=X.fromMiliseconds(Date.now())){const s={alg:hfe,typ:ffe},o=n_(r.publicKey),a=i+n,c={iss:o,sub:t,aud:e,iat:i,exp:a},l=Fpe({header:s,payload:c}),u=ID.sign(l,r.secretKey.slice(0,32));return zpe({header:s,payload:c,signature:u})}function QD(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function oa(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const n=QD(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function qpe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,y=0,w=g.length;y!==w&&g[y]===0;)y++,p++;for(var b=(w-y)*u+1>>>0,v=new Uint8Array(b);y!==w;){for(var C=g[y],A=0,$=b-1;(C!==0||A<m)&&$!==-1;$--,A++)C+=256*v[$]>>>0,v[$]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");m=A,y++}for(var R=b-m;R!==b&&v[R]===0;)R++;for(var P=c.repeat(p);R<b;++R)P+=t.charAt(v[R]);return P}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,y=0;g[p]===c;)m++,p++;for(var w=(g.length-p)*l+1>>>0,b=new Uint8Array(w);g[p];){var v=n[g.charCodeAt(p)];if(v===255)return;for(var C=0,A=w-1;(v!==0||C<y)&&A!==-1;A--,C++)v+=a*b[A]>>>0,b[A]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");y=C,p++}if(g[p]!==" "){for(var $=w-y;$!==w&&b[$]===0;)$++;for(var R=new Uint8Array(m+(w-$)),P=m;$!==w;)R[P++]=b[$++];return R}}}function f(g){var p=h(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Hpe=qpe,Wpe=Hpe;const Kpe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Vpe=t=>new TextEncoder().encode(t),Gpe=t=>new TextDecoder().decode(t);class Zpe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ype{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return XD(this,e)}}class Jpe{constructor(e){this.decoders=e}or(e){return XD(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const XD=(t,e)=>new Jpe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Qpe{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new Zpe(e,n,r),this.decoder=new Ype(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Qv=({name:t,prefix:e,encode:n,decode:r})=>new Qpe(t,e,n,r),z1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=Wpe(n,e);return Qv({prefix:t,name:e,encode:r,decode:s=>Kpe(i(s))})},Xpe=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},e0e=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},wr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Qv({prefix:e,name:t,encode(i){return e0e(i,r,n)},decode(i){return Xpe(i,r,n,t)}}),t0e=Qv({prefix:"\0",name:"identity",encode:t=>Gpe(t),decode:t=>Vpe(t)}),n0e=Object.freeze(Object.defineProperty({__proto__:null,identity:t0e},Symbol.toStringTag,{value:"Module"})),r0e=wr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),i0e=Object.freeze(Object.defineProperty({__proto__:null,base2:r0e},Symbol.toStringTag,{value:"Module"})),s0e=wr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),o0e=Object.freeze(Object.defineProperty({__proto__:null,base8:s0e},Symbol.toStringTag,{value:"Module"})),a0e=z1({prefix:"9",name:"base10",alphabet:"0123456789"}),c0e=Object.freeze(Object.defineProperty({__proto__:null,base10:a0e},Symbol.toStringTag,{value:"Module"})),l0e=wr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),u0e=wr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),d0e=Object.freeze(Object.defineProperty({__proto__:null,base16:l0e,base16upper:u0e},Symbol.toStringTag,{value:"Module"})),h0e=wr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),f0e=wr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),p0e=wr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),g0e=wr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),m0e=wr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),y0e=wr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),w0e=wr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),b0e=wr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),v0e=wr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),E0e=Object.freeze(Object.defineProperty({__proto__:null,base32:h0e,base32hex:m0e,base32hexpad:w0e,base32hexpadupper:b0e,base32hexupper:y0e,base32pad:p0e,base32padupper:g0e,base32upper:f0e,base32z:v0e},Symbol.toStringTag,{value:"Module"})),C0e=z1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_0e=z1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),S0e=Object.freeze(Object.defineProperty({__proto__:null,base36:C0e,base36upper:_0e},Symbol.toStringTag,{value:"Module"})),x0e=z1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),A0e=z1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),I0e=Object.freeze(Object.defineProperty({__proto__:null,base58btc:x0e,base58flickr:A0e},Symbol.toStringTag,{value:"Module"})),$0e=wr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),P0e=wr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),O0e=wr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),T0e=wr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),N0e=Object.freeze(Object.defineProperty({__proto__:null,base64:$0e,base64pad:P0e,base64url:O0e,base64urlpad:T0e},Symbol.toStringTag,{value:"Module"})),eL=Array.from(""),k0e=eL.reduce((t,e,n)=>(t[n]=e,t),[]),R0e=eL.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function M0e(t){return t.reduce((e,n)=>(e+=k0e[n],e),"")}function B0e(t){const e=[];for(const n of t){const r=R0e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const D0e=Qv({prefix:"",name:"base256emoji",encode:M0e,decode:B0e}),L0e=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:D0e},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const tL={...n0e,...i0e,...o0e,...c0e,...d0e,...E0e,...S0e,...I0e,...N0e,...L0e};function nL(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const rL=nL("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),r_=nL("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=QD(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),iL={utf8:rL,"utf-8":rL,hex:tL.base16,latin1:r_,ascii:r_,binary:r_,...tL};function nn(t,e="utf8"){const n=iL[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function Dt(t,e="utf8"){const n=iL[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const sL={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},j0e=":";function Jf(t){const[e,n]=t.split(j0e);return{namespace:e,reference:n}}function oL(t,e=[]){const n=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const i=t[r];n.push(...i.accounts)}),n}function aL(t,e){return t.includes(":")?[t]:e.chains||[]}var U0e=Object.defineProperty,F0e=Object.defineProperties,z0e=Object.getOwnPropertyDescriptors,cL=Object.getOwnPropertySymbols,q0e=Object.prototype.hasOwnProperty,H0e=Object.prototype.propertyIsEnumerable,lL=(t,e,n)=>e in t?U0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uL=(t,e)=>{for(var n in e||(e={}))q0e.call(e,n)&&lL(t,n,e[n]);if(cL)for(var n of cL(e))H0e.call(e,n)&&lL(t,n,e[n]);return t},W0e=(t,e)=>F0e(t,z0e(e));const K0e="ReactNative",es={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},V0e="js";function Xv(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ml(){return!Xi()&&!!N1()&&navigator.product===K0e}function G0e(){return Ml()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Z0e(){return Ml()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Qf(){return!Xv()&&!!N1()&&!!Xi()}function q1(){return Ml()?es.reactNative:Xv()?es.node:Qf()?es.browser:es.unknown}function dL(){var t;try{return Ml()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Y0e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const i=e[r];i!==void 0&&n.set(r,i)}return n.toString()}function J0e(t){var e,n;const r=hL();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),W0e(uL(uL({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),t||r}}function hL(){return gC()||{name:"",description:"",url:"",icons:[""]}}function Q0e(){if(q1()===es.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=nB();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function X0e(){var t;const e=q1();return e===es.browser?[e,((t=fC())==null?void 0:t.host)||"unknown"].join(":"):e}function fL(t,e,n){const r=Q0e(),i=X0e();return[[t,e].join("-"),[V0e,n].join("-"),r,i].join("/")}function ege({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=fL(t,e,r),d={auth:i,ua:u,projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},h=Y0e(l[1]||"",d);return l[0]+"?"+h}function Cd(t,e){return t.filter(n=>e.includes(n)).length===t.length}function i_(t){return Object.fromEntries(t.entries())}function s_(t){return new Map(Object.entries(t))}function _d(t=X.FIVE_MINUTES,e){const n=X.toMiliseconds(t||X.FIVE_MINUTES);let r,i,s,o;return{resolve:a=>{s&&r&&(clearTimeout(s),r(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,i=c})}}function Bl(t,e,n){return new Promise(async(r,i)=>{const s=setTimeout(()=>i(new Error(n)),e);try{const o=await t;r(o)}catch(o){i(o)}clearTimeout(s)})}function pL(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function tge(t){return pL("topic",t)}function nge(t){return pL("id",t)}function gL(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Mn(t,e){return X.fromMiliseconds((e||Date.now())+X.toMiliseconds(t))}function Dl(t){return Date.now()>=X.toMiliseconds(t)}function $t(t,e){return`${t}${e?`:${e}`:""}`}function aa(t=[],e=[]){return[...new Set([...t,...e])]}async function rge({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=ige(s,t,e),a=q1();if(a===es.browser){if(!((r=Xi())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}sge(o)}else a===es.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function ige(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${lge(r,!0)}`}else i=`${i}/wc?${r}`;return i}function sge(t){let e="_self";cge()?e="_top":(age()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function oge(t,e){let n="";try{if(Qf()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function mL(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function yL(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function o_(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function age(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function cge(){try{return window.self!==window.top}catch{return!1}}function lge(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function wL(t){return Buffer.from(t,"base64").toString("utf-8")}function uge(t){return new Promise(e=>setTimeout(e,t))}function H1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function dge(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function W1(t,...e){if(!dge(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function a_(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");H1(t.outputLen),H1(t.blockLen)}function Xf(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function bL(t,e){W1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const e2=BigInt(2**32-1),vL=BigInt(32);function hge(t,e=!1){return e?{h:Number(t&e2),l:Number(t>>vL&e2)}:{h:Number(t>>vL&e2)|0,l:Number(t&e2)|0}}function fge(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=hge(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const pge=(t,e,n)=>t<<n|e>>>32-n,gge=(t,e,n)=>e<<n|t>>>32-n,mge=(t,e,n)=>e<<n-32|t>>>64-n,yge=(t,e,n)=>t<<n-32|e>>>64-n,ep=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function wge(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function c_(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ca(t,e){return t<<32-e|t>>>e}const EL=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function bge(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function CL(t){for(let e=0;e<t.length;e++)t[e]=bge(t[e])}function vge(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function tp(t){return typeof t=="string"&&(t=vge(t)),W1(t),t}function Ege(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];W1(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}let l_=class{clone(){return this._cloneInto()}};function _L(t){const e=r=>t().update(tp(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function np(t=32){if(ep&&typeof ep.getRandomValues=="function")return ep.getRandomValues(new Uint8Array(t));if(ep&&typeof ep.randomBytes=="function")return ep.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const SL=[],xL=[],AL=[],Cge=BigInt(0),K1=BigInt(1),_ge=BigInt(2),Sge=BigInt(7),xge=BigInt(256),Age=BigInt(113);for(let t=0,e=K1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],SL.push(2*(5*r+n)),xL.push((t+1)*(t+2)/2%64);let i=Cge;for(let s=0;s<7;s++)e=(e<<K1^(e>>Sge)*Age)%xge,e&_ge&&(i^=K1<<(K1<<BigInt(s))-K1);AL.push(i)}const[Ige,$ge]=fge(AL,!0),IL=(t,e,n)=>n>32?mge(t,e,n):pge(t,e,n),$L=(t,e,n)=>n>32?yge(t,e,n):gge(t,e,n);function Pge(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=IL(l,u,1)^n[a],h=$L(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=xL[o],c=IL(i,s,a),l=$L(i,s,a),u=SL[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Ige[r],t[1]^=$ge[r]}n.fill(0)}let Oge=class bV extends l_{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,H1(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=wge(this.state)}keccak(){EL||CL(this.state32),Pge(this.state32,this.rounds),EL||CL(this.state32),this.posOut=0,this.pos=0}update(e){Xf(this);const{blockLen:n,state:r}=this;e=tp(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Xf(this,!1),W1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return H1(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(bL(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new bV(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Tge=(t,e,n)=>_L(()=>new Oge(e,t,n)),Nge=Tge(1,136,256/8),kge="https://rpc.walletconnect.org/v1";function PL(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Nge(n)).toString("hex")}async function Rge(t,e,n,r,i,s){switch(n.t){case"eip191":return await Mge(t,e,n.s);case"eip1271":return await Bge(t,e,n.s,r,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Mge(t,e,n){return(await cde({hash:PL(e),signature:n})).toLowerCase()===t.toLowerCase()}async function Bge(t,e,n,r,i,s){const o=Jf(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=PL(e).substring(2),h=a+d+c+l+u,f=await fetch(`${s||kge}/?chainId=${r}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:Dge(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:g}=await f.json();return g?g.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Dge(){return Date.now()+Math.floor(Math.random()*1e3)}function Lge(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return Qde.encode(s)}var jge=Object.defineProperty,Uge=Object.defineProperties,Fge=Object.getOwnPropertyDescriptors,OL=Object.getOwnPropertySymbols,zge=Object.prototype.hasOwnProperty,qge=Object.prototype.propertyIsEnumerable,TL=(t,e,n)=>e in t?jge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hge=(t,e)=>{for(var n in e||(e={}))zge.call(e,n)&&TL(t,n,e[n]);if(OL)for(var n of OL(e))qge.call(e,n)&&TL(t,n,e[n]);return t},Wge=(t,e)=>Uge(t,Fge(e));const Kge="did:pkh:",u_=t=>t==null?void 0:t.split(":"),Vge=t=>{const e=t&&u_(t);if(e)return t.includes(Kge)?e[3]:e[1]},d_=t=>{const e=t&&u_(t);if(e)return e[2]+":"+e[3]},t2=t=>{const e=t&&u_(t);if(e)return e.pop()};async function NL(t){const{cacao:e,projectId:n}=t,{s:r,p:i}=e,s=kL(i,i.iss),o=t2(i.iss);return await Rge(o,s,r,d_(i.iss),n)}const kL=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=t2(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Vge(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(p=>`
- ${p}`).join("")}`:void 0,g=n2(t.resources);if(g){const p=V1(g);i=n1e(i,p)}return[n,r,"",i,"",s,o,a,c,l,u,d,h,f].filter(p=>p!=null).join(`
`)};function Gge(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Zge(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Sd(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const s=r[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function Yge(t,e,n,r={}){return n==null||n.sort((i,s)=>i.localeCompare(s)),{att:{[t]:Jge(e,n,r)}}}function Jge(t,e,n={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const r=e.map(i=>({[`${t}/${i}`]:[n]}));return Object.assign({},...r)}function RL(t){return Sd(t),`urn:recap:${Gge(t).replace(/=/g,"")}`}function V1(t){const e=Zge(t.replace("urn:recap:",""));return Sd(e),e}function Qge(t,e,n){const r=Yge(t,e,n);return RL(r)}function Xge(t){return t&&t.includes("urn:recap:")}function e1e(t,e){const n=V1(t),r=V1(e),i=t1e(n,r);return RL(i)}function t1e(t,e){Sd(t),Sd(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),r={att:{}};return n.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[i]=Wge(Hge({},r.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),r}function n1e(t="",e){Sd(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(i++,`(${i}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const s=r.join(" "),o=`${n}${s}`;return`${t?t+" ":""}${o}`}function ML(t){var e;const n=V1(t);Sd(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function BL(t){const e=V1(t);Sd(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function n2(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Xge(e)?e:void 0}function h_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function DL(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ts(t,...e){if(!DL(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function LL(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function r1e(t,e){ts(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function jL(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Ll=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),i1e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");function s1e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function f_(t){if(typeof t=="string")t=s1e(t);else if(DL(t))t=p_(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function o1e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function a1e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const c1e=(t,e)=>{function n(r,...i){if(ts(r),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?ts(l):ts(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&ts(i[1]);const o=e(r,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");ts(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ts(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(ts(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function UL(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!l1e(e))throw new Error("invalid output, must be aligned");return e}function FL(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function l1e(t){return t.byteOffset%4===0}function p_(t){return Uint8Array.from(t)}function rp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const zL=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),u1e=zL("expand 16-byte k"),d1e=zL("expand 32-byte k"),h1e=Ll(u1e),f1e=Ll(d1e);function gt(t,e){return t<<e|t>>>32-e}function g_(t){return t.byteOffset%4===0}const r2=64,p1e=16,qL=2**32-1,HL=new Uint32Array;function g1e(t,e,n,r,i,s,o,a){const c=i.length,l=new Uint8Array(r2),u=Ll(l),d=g_(i)&&g_(s),h=d?Ll(i):HL,f=d?Ll(s):HL;for(let g=0;g<c;o++){if(t(e,n,r,u,o,a),o>=qL)throw new Error("arx: counter overflow");const p=Math.min(r2,c-g);if(d&&p===r2){const m=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let y=0,w;y<p1e;y++)w=m+y,f[w]=h[w]^u[y];g+=r2;continue}for(let m=0,y;m<p;m++)y=g+m,s[y]=i[y]^l[m];g+=p}}function m1e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=o1e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return h_(i),h_(o),jL(s),jL(n),(a,c,l,u,d=0)=>{ts(a),ts(c),ts(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),ts(u),h_(d),d<0||d>=qL)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let g=a.length,p,m;if(g===32)f.push(p=p_(a)),m=f1e;else if(g===16&&n)p=new Uint8Array(32),p.set(a),p.set(a,16),m=h1e,f.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);g_(c)||f.push(c=p_(c));const y=Ll(p);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,y,Ll(c.subarray(0,16)),y),c=c.subarray(16)}const w=16-i;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const v=new Uint8Array(12);v.set(c,s?0:12-c.length),c=v,f.push(c)}const b=Ll(c);return g1e(t,m,y,b,l,u,d,o),rp(...f),u}}const br=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let y1e=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=f_(e),ts(e,32);const n=br(e,0),r=br(e,2),i=br(e,4),s=br(e,6),o=br(e,8),a=br(e,10),c=br(e,12),l=br(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=br(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],g=o[7],p=o[8],m=o[9],y=br(e,n+0),w=br(e,n+2),b=br(e,n+4),v=br(e,n+6),C=br(e,n+8),A=br(e,n+10),$=br(e,n+12),R=br(e,n+14);let P=s[0]+(y&8191),L=s[1]+((y>>>13|w<<3)&8191),U=s[2]+((w>>>10|b<<6)&8191),D=s[3]+((b>>>7|v<<9)&8191),j=s[4]+((v>>>4|C<<12)&8191),I=s[5]+(C>>>1&8191),E=s[6]+((C>>>14|A<<2)&8191),S=s[7]+((A>>>11|$<<5)&8191),k=s[8]+(($>>>8|R<<8)&8191),_=s[9]+(R>>>5|i),x=0,T=x+P*a+L*(5*m)+U*(5*p)+D*(5*g)+j*(5*f);x=T>>>13,T&=8191,T+=I*(5*h)+E*(5*d)+S*(5*u)+k*(5*l)+_*(5*c),x+=T>>>13,T&=8191;let M=x+P*c+L*a+U*(5*m)+D*(5*p)+j*(5*g);x=M>>>13,M&=8191,M+=I*(5*f)+E*(5*h)+S*(5*d)+k*(5*u)+_*(5*l),x+=M>>>13,M&=8191;let O=x+P*l+L*c+U*a+D*(5*m)+j*(5*p);x=O>>>13,O&=8191,O+=I*(5*g)+E*(5*f)+S*(5*h)+k*(5*d)+_*(5*u),x+=O>>>13,O&=8191;let N=x+P*u+L*l+U*c+D*a+j*(5*m);x=N>>>13,N&=8191,N+=I*(5*p)+E*(5*g)+S*(5*f)+k*(5*h)+_*(5*d),x+=N>>>13,N&=8191;let B=x+P*d+L*u+U*l+D*c+j*a;x=B>>>13,B&=8191,B+=I*(5*m)+E*(5*p)+S*(5*g)+k*(5*f)+_*(5*h),x+=B>>>13,B&=8191;let F=x+P*h+L*d+U*u+D*l+j*c;x=F>>>13,F&=8191,F+=I*a+E*(5*m)+S*(5*p)+k*(5*g)+_*(5*f),x+=F>>>13,F&=8191;let z=x+P*f+L*h+U*d+D*u+j*l;x=z>>>13,z&=8191,z+=I*c+E*a+S*(5*m)+k*(5*p)+_*(5*g),x+=z>>>13,z&=8191;let q=x+P*g+L*f+U*h+D*d+j*u;x=q>>>13,q&=8191,q+=I*l+E*c+S*a+k*(5*m)+_*(5*p),x+=q>>>13,q&=8191;let H=x+P*p+L*g+U*f+D*h+j*d;x=H>>>13,H&=8191,H+=I*u+E*l+S*c+k*a+_*(5*m),x+=H>>>13,H&=8191;let K=x+P*m+L*p+U*g+D*f+j*h;x=K>>>13,K&=8191,K+=I*d+E*u+S*l+k*c+_*a,x+=K>>>13,K&=8191,x=(x<<2)+x|0,x=x+T|0,T=x&8191,x=x>>>13,M+=x,s[0]=T,s[1]=M,s[2]=O,s[3]=N,s[4]=B,s[5]=F,s[6]=z,s[7]=q,s[8]=H,s[9]=K}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;rp(r)}update(e){LL(this);const{buffer:n,blockLen:r}=this;e=f_(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){rp(this.h,this.r,this.buffer,this.pad)}digestInto(e){LL(this),r1e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}};function w1e(t){const e=(r,i)=>t(i).update(f_(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const b1e=w1e(t=>new y1e(t));function v1e(t,e,n,r,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],g=e[4],p=e[5],m=e[6],y=e[7],w=i,b=n[0],v=n[1],C=n[2],A=o,$=a,R=c,P=l,L=u,U=d,D=h,j=f,I=g,E=p,S=m,k=y,_=w,x=b,T=v,M=C;for(let N=0;N<s;N+=2)A=A+L|0,_=gt(_^A,16),I=I+_|0,L=gt(L^I,12),A=A+L|0,_=gt(_^A,8),I=I+_|0,L=gt(L^I,7),$=$+U|0,x=gt(x^$,16),E=E+x|0,U=gt(U^E,12),$=$+U|0,x=gt(x^$,8),E=E+x|0,U=gt(U^E,7),R=R+D|0,T=gt(T^R,16),S=S+T|0,D=gt(D^S,12),R=R+D|0,T=gt(T^R,8),S=S+T|0,D=gt(D^S,7),P=P+j|0,M=gt(M^P,16),k=k+M|0,j=gt(j^k,12),P=P+j|0,M=gt(M^P,8),k=k+M|0,j=gt(j^k,7),A=A+U|0,M=gt(M^A,16),S=S+M|0,U=gt(U^S,12),A=A+U|0,M=gt(M^A,8),S=S+M|0,U=gt(U^S,7),$=$+D|0,_=gt(_^$,16),k=k+_|0,D=gt(D^k,12),$=$+D|0,_=gt(_^$,8),k=k+_|0,D=gt(D^k,7),R=R+j|0,x=gt(x^R,16),I=I+x|0,j=gt(j^I,12),R=R+j|0,x=gt(x^R,8),I=I+x|0,j=gt(j^I,7),P=P+L|0,T=gt(T^P,16),E=E+T|0,L=gt(L^E,12),P=P+L|0,T=gt(T^P,8),E=E+T|0,L=gt(L^E,7);let O=0;r[O++]=o+A|0,r[O++]=a+$|0,r[O++]=c+R|0,r[O++]=l+P|0,r[O++]=u+L|0,r[O++]=d+U|0,r[O++]=h+D|0,r[O++]=f+j|0,r[O++]=g+I|0,r[O++]=p+E|0,r[O++]=m+S|0,r[O++]=y+k|0,r[O++]=w+_|0,r[O++]=b+x|0,r[O++]=v+T|0,r[O++]=C+M|0}const E1e=m1e(v1e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),C1e=new Uint8Array(16),WL=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(C1e.subarray(n))},_1e=new Uint8Array(32);function KL(t,e,n,r,i){const s=t(e,n,_1e),o=b1e.create(s);i&&WL(o,i),WL(o,r);const a=new Uint8Array(16),c=i1e(a);FL(c,0,BigInt(i?i.length:0),!0),FL(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return rp(s,a),l}const S1e=t=>(e,n,r)=>({encrypt(i,s){const o=i.length;s=UL(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,n,a,a,1);const c=KL(t,e,n,a,r);return s.set(c,o),rp(c),s},decrypt(i,s){s=UL(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=KL(t,e,n,o,r);if(!a1e(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,n,s,s,1),rp(c),s}}),VL=c1e({blockSize:64,nonceLength:12,tagLength:16},S1e(E1e));let GL=class extends l_{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,a_(e);const r=tp(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Xf(this),this.iHash.update(e),this}digestInto(e){Xf(this),W1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const i2=(t,e,n)=>new GL(t,e).update(n).digest();i2.create=(t,e)=>new GL(t,e);function x1e(t,e,n){return a_(t),n===void 0&&(n=new Uint8Array(t.outputLen)),i2(t,tp(n),tp(e))}const m_=new Uint8Array([0]),ZL=new Uint8Array;function A1e(t,e,n,r=32){if(a_(t),H1(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=ZL);const s=new Uint8Array(i*t.outputLen),o=i2.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)m_[0]=l+1,a.update(l===0?ZL:c).update(n).update(m_).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),m_.fill(0),s.slice(0,r)}const I1e=(t,e,n,r,i)=>A1e(t,x1e(t,e,n),r,i);function $1e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function P1e(t,e,n){return t&e^~t&n}function O1e(t,e,n){return t&e^t&n^e&n}let T1e=class extends l_{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=c_(this.buffer)}update(e){Xf(this);const{view:n,buffer:r,blockLen:i}=this;e=tp(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=c_(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Xf(this),bL(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;$1e(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=c_(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const N1e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ul=new Uint32Array(64);let k1e=class extends T1e{constructor(){super(64,32,8,!1),this.A=jl[0]|0,this.B=jl[1]|0,this.C=jl[2]|0,this.D=jl[3]|0,this.E=jl[4]|0,this.F=jl[5]|0,this.G=jl[6]|0,this.H=jl[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ul[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ul[d-15],f=Ul[d-2],g=ca(h,7)^ca(h,18)^h>>>3,p=ca(f,17)^ca(f,19)^f>>>10;Ul[d]=p+Ul[d-7]+g+Ul[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ca(a,6)^ca(a,11)^ca(a,25),f=u+h+P1e(a,c,l)+N1e[d]+Ul[d]|0,g=(ca(r,2)^ca(r,13)^ca(r,22))+O1e(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Ul.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const G1=_L(()=>new k1e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const s2=BigInt(0),o2=BigInt(1),R1e=BigInt(2);function xd(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Z1(t){if(!xd(t))throw new Error("Uint8Array expected")}function ip(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const M1e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function sp(t){Z1(t);let e="";for(let n=0;n<t.length;n++)e+=M1e[t[n]];return e}function op(t){const e=t.toString(16);return e.length&1?"0"+e:e}function y_(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?s2:BigInt("0x"+t)}const fc={_0:48,_9:57,A:65,F:70,a:97,f:102};function YL(t){if(t>=fc._0&&t<=fc._9)return t-fc._0;if(t>=fc.A&&t<=fc.F)return t-(fc.A-10);if(t>=fc.a&&t<=fc.f)return t-(fc.a-10)}function ap(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=YL(t.charCodeAt(s)),a=YL(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Ad(t){return y_(sp(t))}function Y1(t){return Z1(t),y_(sp(Uint8Array.from(t).reverse()))}function cp(t,e){return ap(t.toString(16).padStart(e*2,"0"))}function a2(t,e){return cp(t,e).reverse()}function B1e(t){return ap(op(t))}function ns(t,e,n){let r;if(typeof e=="string")try{r=ap(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(xd(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function J1(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Z1(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function D1e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function L1e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const w_=t=>typeof t=="bigint"&&s2<=t;function c2(t,e,n){return w_(t)&&w_(e)&&w_(n)&&e<=t&&t<n}function pc(t,e,n,r){if(!c2(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function JL(t){let e;for(e=0;t>s2;t>>=o2,e+=1);return e}function j1e(t,e){return t>>BigInt(e)&o2}function U1e(t,e,n){return t|(n?o2:s2)<<BigInt(e)}const b_=t=>(R1e<<BigInt(t-1))-o2,v_=t=>new Uint8Array(t),QL=t=>Uint8Array.from(t);function XL(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=v_(t),i=v_(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),c=(u=v_())=>{i=a(QL([0]),u),r=a(),u.length!==0&&(i=a(QL([1]),u),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return J1(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const F1e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||xd(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function lp(t,e,n={}){const r=(i,s,o)=>{const a=F1e[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const z1e=()=>{throw new Error("not implemented")};function E_(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}var q1e=Object.freeze({__proto__:null,isBytes:xd,abytes:Z1,abool:ip,bytesToHex:sp,numberToHexUnpadded:op,hexToNumber:y_,hexToBytes:ap,bytesToNumberBE:Ad,bytesToNumberLE:Y1,numberToBytesBE:cp,numberToBytesLE:a2,numberToVarBytesBE:B1e,ensureBytes:ns,concatBytes:J1,equalBytes:D1e,utf8ToBytes:L1e,inRange:c2,aInRange:pc,bitLen:JL,bitGet:j1e,bitSet:U1e,bitMask:b_,createHmacDrbg:XL,validateObject:lp,notImplemented:z1e,memoized:E_});const Yn=BigInt(0),vn=BigInt(1),Id=BigInt(2),H1e=BigInt(3),C_=BigInt(4),ej=BigInt(5),tj=BigInt(8);function bi(t,e){const n=t%e;return n>=Yn?n:e+n}function nj(t,e,n){if(e<Yn)throw new Error("invalid exponent, negatives unsupported");if(n<=Yn)throw new Error("invalid modulus");if(n===vn)return Yn;let r=vn;for(;e>Yn;)e&vn&&(r=r*t%n),t=t*t%n,e>>=vn;return r}function yo(t,e,n){let r=t;for(;e-- >Yn;)r*=r,r%=n;return r}function __(t,e){if(t===Yn)throw new Error("invert: expected non-zero number");if(e<=Yn)throw new Error("invert: expected positive modulus, got "+e);let n=bi(t,e),r=e,i=Yn,s=vn;for(;n!==Yn;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==vn)throw new Error("invert: does not exist");return bi(i,e)}function W1e(t){const e=(t-vn)/Id;let n,r,i;for(n=t-vn,r=0;n%Id===Yn;n/=Id,r++);for(i=Id;i<t&&nj(i,e,t)!==t-vn;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+vn)/C_;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+vn)/Id;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let g=o.sqr(d);h<c&&!o.eql(g,o.ONE);h++)g=o.sqr(g);const f=o.pow(l,vn<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function K1e(t){if(t%C_===H1e){const e=(t+vn)/C_;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%tj===ej){const e=(t-ej)/tj;return function(n,r){const i=n.mul(r,Id),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,Id),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return W1e(t)}const V1e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function G1e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=V1e.reduce((r,i)=>(r[i]="function",r),e);return lp(t,n)}function Z1e(t,e,n){if(n<Yn)throw new Error("invalid exponent, negatives unsupported");if(n===Yn)return t.ONE;if(n===vn)return e;let r=t.ONE,i=e;for(;n>Yn;)n&vn&&(r=t.mul(r,i)),i=t.sqr(i),n>>=vn;return r}function Y1e(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function rj(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ij(t,e,n=!1,r={}){if(t<=Yn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=rj(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:b_(i),ZERO:Yn,ONE:vn,create:c=>bi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Yn<=c&&c<t},is0:c=>c===Yn,isOdd:c=>(c&vn)===vn,neg:c=>bi(-c,t),eql:(c,l)=>c===l,sqr:c=>bi(c*c,t),add:(c,l)=>bi(c+l,t),sub:(c,l)=>bi(c-l,t),mul:(c,l)=>bi(c*l,t),pow:(c,l)=>Z1e(a,c,l),div:(c,l)=>bi(c*__(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>__(c,t),sqrt:r.sqrt||(c=>(o||(o=K1e(t)),o(a,c))),invertBatch:c=>Y1e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?a2(c,s):cp(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?Y1(c):Ad(c)}});return Object.freeze(a)}function sj(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function oj(t){const e=sj(t);return e+Math.ceil(e/2)}function J1e(t,e,n=!1){const r=t.length,i=sj(e),s=oj(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?Y1(t):Ad(t),a=bi(o,e-vn)+vn;return n?a2(a,i):cp(a,i)}const aj=BigInt(0),l2=BigInt(1);function S_(t,e){const n=e.negate();return t?n:e}function cj(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function x_(t,e){cj(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Q1e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function X1e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const A_=new WeakMap,lj=new WeakMap;function I_(t){return lj.get(t)||1}function eme(t,e){return{constTimeNegate:S_,hasPrecomputes(n){return I_(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>aj;)r&l2&&(i=i.add(s)),s=s.double(),r>>=l2;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=x_(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=x_(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<s;h++){const f=h*o;let g=Number(i&l);i>>=d,g>o&&(g-=u,i+=l2);const p=f,m=f+Math.abs(g)-1,y=h%2!==0,w=g<0;g===0?c=c.add(S_(y,r[p])):a=a.add(S_(w,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=x_(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(i===aj)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=l2),f===0)continue;let g=r[h+Math.abs(f)-1];f<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(n,r,i){let s=A_.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&A_.set(r,i(s))),s},wNAFCached(n,r,i){const s=I_(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=I_(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){cj(r,e),lj.set(n,r),A_.delete(n)}}}function tme(t,e,n,r){if(Q1e(n,t),X1e(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=JL(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<r.length;f++){const g=r[f],p=Number(g>>BigInt(d)&BigInt(a));c[p]=c[p].add(n[f])}let h=i;for(let f=c.length-1,g=i;f>0;f--)g=g.add(c[f]),h=h.add(g);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function uj(t){return G1e(t.Fp),lp(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rj(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const up=BigInt(0),$_=BigInt(1);function nme(t){return lp(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function rme(t){const e=nme(t),{P:n}=e,r=w=>bi(w,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(w=>w),c=e.powPminus2||(w=>nj(w,n-BigInt(2),n));function l(w,b,v){const C=r(w*(b-v));return b=r(b-C),v=r(v+C),[b,v]}const u=(e.a-BigInt(2))/BigInt(4);function d(w,b){pc("u",w,up,n),pc("scalar",b,up,n);const v=b,C=w;let A=$_,$=up,R=w,P=$_,L=up,U;for(let j=BigInt(i-1);j>=up;j--){const I=v>>j&$_;L^=I,U=l(L,A,R),A=U[0],R=U[1],U=l(L,$,P),$=U[0],P=U[1],L=I;const E=A+$,S=r(E*E),k=A-$,_=r(k*k),x=S-_,T=R+P,M=R-P,O=r(M*E),N=r(T*k),B=O+N,F=O-N;R=r(B*B),P=r(C*r(F*F)),A=r(S*_),$=r(x*(S+r(u*x)))}U=l(L,A,R),A=U[0],R=U[1],U=l(L,$,P),$=U[0],P=U[1];const D=c($);return r(A*D)}function h(w){return a2(r(w),s)}function f(w){const b=ns("u coordinate",w,s);return o===32&&(b[31]&=127),Y1(b)}function g(w){const b=ns("scalar",w),v=b.length;if(v!==s&&v!==o){let C=""+s+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+v)}return Y1(a(b))}function p(w,b){const v=f(b),C=g(w),A=d(v,C);if(A===up)throw new Error("invalid private or public key received");return h(A)}const m=h(e.Gu);function y(w){return p(w,m)}return{scalarMult:p,scalarMultBase:y,getSharedSecret:(w,b)=>p(w,b),getPublicKey:w=>y(w),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:m}}const P_=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const ime=BigInt(1),dj=BigInt(2),sme=BigInt(3),ome=BigInt(5);BigInt(8);function ame(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=P_,o=t*t%s*t%s,a=yo(o,dj,s)*o%s,c=yo(a,ime,s)*t%s,l=yo(c,ome,s)*c%s,u=yo(l,e,s)*l%s,d=yo(u,n,s)*u%s,h=yo(d,r,s)*d%s,f=yo(h,i,s)*h%s,g=yo(f,i,s)*h%s,p=yo(g,e,s)*l%s;return{pow_p_5_8:yo(p,dj,s)*t%s,b2:o}}function cme(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const O_=rme({P:P_,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=P_,{pow_p_5_8:n,b2:r}=ame(t);return bi(yo(n,sme,e)*r,e)},adjustScalarBytes:cme,randomBytes:np});function hj(t){t.lowS!==void 0&&ip("lowS",t.lowS),t.prehash!==void 0&&ip("prehash",t.prehash)}function lme(t){const e=uj(t);lp(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:ume,hexToBytes:dme}=q1e,gc={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(t,e)=>{const{Err:n}=gc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=op(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?op(i.length/2|128):"";return op(t)+s+i+e},decode(t,e){const{Err:n}=gc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=gc;if(t<mc)throw new e("integer: negative integers are not allowed");let n=op(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=gc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return ume(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=gc,i=typeof t=="string"?dme(t):t;Z1(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=gc,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},mc=BigInt(0),Jn=BigInt(1);BigInt(2);const fj=BigInt(3);BigInt(4);function hme(t){const e=lme(t),{Fp:n}=e,r=ij(e.n,e.nBitLength),i=e.toBytes||((p,m,y)=>{const w=m.toAffine();return J1(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),s=e.fromBytes||(p=>{const m=p.subarray(1),y=n.fromBytes(m.subarray(0,n.BYTES)),w=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:y,y:w}});function o(p){const{a:m,b:y}=e,w=n.sqr(p),b=n.mul(w,p);return n.add(n.add(b,n.mul(p,m)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(p){return c2(p,Jn,e.n)}function c(p){const{allowedPrivateKeyLengths:m,nByteLength:y,wrapPrivateKey:w,n:b}=e;if(m&&typeof p!="bigint"){if(xd(p)&&(p=sp(p)),typeof p!="string"||!m.includes(p.length))throw new Error("invalid private key");p=p.padStart(y*2,"0")}let v;try{v=typeof p=="bigint"?p:Ad(ns("private key",p,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof p)}return w&&(v=bi(v,b)),pc("private key",v,Jn,b),v}function l(p){if(!(p instanceof h))throw new Error("ProjectivePoint expected")}const u=E_((p,m)=>{const{px:y,py:w,pz:b}=p;if(n.eql(b,n.ONE))return{x:y,y:w};const v=p.is0();m==null&&(m=v?n.ONE:n.inv(b));const C=n.mul(y,m),A=n.mul(w,m),$=n.mul(b,m);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql($,n.ONE))throw new Error("invZ was invalid");return{x:C,y:A}}),d=E_(p=>{if(p.is0()){if(e.allowInfinityPoint&&!n.is0(p.py))return;throw new Error("bad point: ZERO")}const{x:m,y}=p.toAffine();if(!n.isValid(m)||!n.isValid(y))throw new Error("bad point: x or y not FE");const w=n.sqr(y),b=o(m);if(!n.eql(w,b))throw new Error("bad point: equation left != right");if(!p.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,y,w){if(this.px=m,this.py=y,this.pz=w,m==null||!n.isValid(m))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:y,y:w}=m||{};if(!m||!n.isValid(y)||!n.isValid(w))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(y)&&b(w)?h.ZERO:new h(y,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const y=n.invertBatch(m.map(w=>w.pz));return m.map((w,b)=>w.toAffine(y[b])).map(h.fromAffine)}static fromHex(m){const y=h.fromAffine(s(ns("pointHex",m)));return y.assertValidity(),y}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,y){return tme(h,r,m,y)}_setWindowSize(m){g.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:y,py:w,pz:b}=this,{px:v,py:C,pz:A}=m,$=n.eql(n.mul(y,A),n.mul(v,b)),R=n.eql(n.mul(w,A),n.mul(C,b));return $&&R}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:y}=e,w=n.mul(y,fj),{px:b,py:v,pz:C}=this;let A=n.ZERO,$=n.ZERO,R=n.ZERO,P=n.mul(b,b),L=n.mul(v,v),U=n.mul(C,C),D=n.mul(b,v);return D=n.add(D,D),R=n.mul(b,C),R=n.add(R,R),A=n.mul(m,R),$=n.mul(w,U),$=n.add(A,$),A=n.sub(L,$),$=n.add(L,$),$=n.mul(A,$),A=n.mul(D,A),R=n.mul(w,R),U=n.mul(m,U),D=n.sub(P,U),D=n.mul(m,D),D=n.add(D,R),R=n.add(P,P),P=n.add(R,P),P=n.add(P,U),P=n.mul(P,D),$=n.add($,P),U=n.mul(v,C),U=n.add(U,U),P=n.mul(U,D),A=n.sub(A,P),R=n.mul(U,L),R=n.add(R,R),R=n.add(R,R),new h(A,$,R)}add(m){l(m);const{px:y,py:w,pz:b}=this,{px:v,py:C,pz:A}=m;let $=n.ZERO,R=n.ZERO,P=n.ZERO;const L=e.a,U=n.mul(e.b,fj);let D=n.mul(y,v),j=n.mul(w,C),I=n.mul(b,A),E=n.add(y,w),S=n.add(v,C);E=n.mul(E,S),S=n.add(D,j),E=n.sub(E,S),S=n.add(y,b);let k=n.add(v,A);return S=n.mul(S,k),k=n.add(D,I),S=n.sub(S,k),k=n.add(w,b),$=n.add(C,A),k=n.mul(k,$),$=n.add(j,I),k=n.sub(k,$),P=n.mul(L,S),$=n.mul(U,I),P=n.add($,P),$=n.sub(j,P),P=n.add(j,P),R=n.mul($,P),j=n.add(D,D),j=n.add(j,D),I=n.mul(L,I),S=n.mul(U,S),j=n.add(j,I),I=n.sub(D,I),I=n.mul(L,I),S=n.add(S,I),D=n.mul(j,S),R=n.add(R,D),D=n.mul(k,S),$=n.mul(E,$),$=n.sub($,D),D=n.mul(E,j),P=n.mul(k,P),P=n.add(P,D),new h($,R,P)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return g.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:y,n:w}=e;pc("scalar",m,mc,w);const b=h.ZERO;if(m===mc)return b;if(this.is0()||m===Jn)return this;if(!y||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:v,k1:C,k2neg:A,k2:$}=y.splitScalar(m),R=b,P=b,L=this;for(;C>mc||$>mc;)C&Jn&&(R=R.add(L)),$&Jn&&(P=P.add(L)),L=L.double(),C>>=Jn,$>>=Jn;return v&&(R=R.negate()),A&&(P=P.negate()),P=new h(n.mul(P.px,y.beta),P.py,P.pz),R.add(P)}multiply(m){const{endo:y,n:w}=e;pc("scalar",m,Jn,w);let b,v;if(y){const{k1neg:C,k1:A,k2neg:$,k2:R}=y.splitScalar(m);let{p:P,f:L}=this.wNAF(A),{p:U,f:D}=this.wNAF(R);P=g.constTimeNegate(C,P),U=g.constTimeNegate($,U),U=new h(n.mul(U.px,y.beta),U.py,U.pz),b=P.add(U),v=L.add(D)}else{const{p:C,f:A}=this.wNAF(m);b=C,v=A}return h.normalizeZ([b,v])[0]}multiplyAndAddUnsafe(m,y,w){const b=h.BASE,v=(A,$)=>$===mc||$===Jn||!A.equals(b)?A.multiplyUnsafe($):A.multiply($),C=v(this,y).add(v(m,w));return C.is0()?void 0:C}toAffine(m){return u(this,m)}isTorsionFree(){const{h:m,isTorsionFree:y}=e;if(m===Jn)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:y}=e;return m===Jn?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return ip("isCompressed",m),this.assertValidity(),i(h,this,m)}toHex(m=!0){return ip("isCompressed",m),sp(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,g=eme(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function fme(t){const e=uj(t);return lp(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function pme(t){const e=fme(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(I){return bi(I,r)}function a(I){return __(I,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=hme({...e,toBytes(I,E,S){const k=E.toAffine(),_=n.toBytes(k.x),x=J1;return ip("isCompressed",S),S?x(Uint8Array.from([E.hasEvenY()?2:3]),_):x(Uint8Array.from([4]),_,n.toBytes(k.y))},fromBytes(I){const E=I.length,S=I[0],k=I.subarray(1);if(E===i&&(S===2||S===3)){const _=Ad(k);if(!c2(_,Jn,n.ORDER))throw new Error("Point is not on curve");const x=u(_);let T;try{T=n.sqrt(x)}catch(O){const N=O instanceof Error?": "+O.message:"";throw new Error("Point is not on curve"+N)}const M=(T&Jn)===Jn;return(S&1)===1!==M&&(T=n.neg(T)),{x:_,y:T}}else if(E===s&&S===4){const _=n.fromBytes(k.subarray(0,n.BYTES)),x=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:_,y:x}}else{const _=i,x=s;throw new Error("invalid Point, expected length of "+_+", or uncompressed "+x+", got "+E)}}}),h=I=>sp(cp(I,e.nByteLength));function f(I){const E=r>>Jn;return I>E}function g(I){return f(I)?o(-I):I}const p=(I,E,S)=>Ad(I.slice(E,S));class m{constructor(E,S,k){this.r=E,this.s=S,this.recovery=k,this.assertValidity()}static fromCompact(E){const S=e.nByteLength;return E=ns("compactSignature",E,S*2),new m(p(E,0,S),p(E,S,2*S))}static fromDER(E){const{r:S,s:k}=gc.toSig(ns("DER",E));return new m(S,k)}assertValidity(){pc("r",this.r,Jn,r),pc("s",this.s,Jn,r)}addRecoveryBit(E){return new m(this.r,this.s,E)}recoverPublicKey(E){const{r:S,s:k,recovery:_}=this,x=A(ns("msgHash",E));if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");const T=_===2||_===3?S+e.n:S;if(T>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=_&1?"03":"02",O=c.fromHex(M+h(T)),N=a(T),B=o(-x*N),F=o(k*N),z=c.BASE.multiplyAndAddUnsafe(O,B,F);if(!z)throw new Error("point at infinify");return z.assertValidity(),z}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ap(this.toDERHex())}toDERHex(){return gc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ap(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(I){try{return l(I),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const I=oj(e.n);return J1e(e.randomBytes(I),e.n)},precompute(I=8,E=c.BASE){return E._setWindowSize(I),E.multiply(BigInt(3)),E}};function w(I,E=!0){return c.fromPrivateKey(I).toRawBytes(E)}function b(I){const E=xd(I),S=typeof I=="string",k=(E||S)&&I.length;return E?k===i||k===s:S?k===2*i||k===2*s:I instanceof c}function v(I,E,S=!0){if(b(I))throw new Error("first arg must be private key");if(!b(E))throw new Error("second arg must be public key");return c.fromHex(E).multiply(l(I)).toRawBytes(S)}const C=e.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");const E=Ad(I),S=I.length*8-e.nBitLength;return S>0?E>>BigInt(S):E},A=e.bits2int_modN||function(I){return o(C(I))},$=b_(e.nBitLength);function R(I){return pc("num < 2^"+e.nBitLength,I,mc,$),cp(I,e.nByteLength)}function P(I,E,S=L){if(["recovered","canonical"].some(H=>H in S))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:_}=e;let{lowS:x,prehash:T,extraEntropy:M}=S;x==null&&(x=!0),I=ns("msgHash",I),hj(S),T&&(I=ns("prehashed msgHash",k(I)));const O=A(I),N=l(E),B=[R(N),R(O)];if(M!=null&&M!==!1){const H=M===!0?_(n.BYTES):M;B.push(ns("extraEntropy",H))}const F=J1(...B),z=O;function q(H){const K=C(H);if(!d(K))return;const Y=a(K),J=c.BASE.multiply(K).toAffine(),G=o(J.x);if(G===mc)return;const te=o(Y*o(z+G*N));if(te===mc)return;let se=(J.x===G?0:2)|Number(J.y&Jn),he=te;return x&&f(te)&&(he=g(te),se^=1),new m(G,he,se)}return{seed:F,k2sig:q}}const L={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function D(I,E,S=L){const{seed:k,k2sig:_}=P(I,E,S),x=e;return XL(x.hash.outputLen,x.nByteLength,x.hmac)(k,_)}c.BASE._setWindowSize(8);function j(I,E,S,k=U){var te;const _=I;E=ns("msgHash",E),S=ns("publicKey",S);const{lowS:x,prehash:T,format:M}=k;if(hj(k),"strict"in k)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&M!=="compact"&&M!=="der")throw new Error("format must be compact or der");const O=typeof _=="string"||xd(_),N=!O&&!M&&typeof _=="object"&&_!==null&&typeof _.r=="bigint"&&typeof _.s=="bigint";if(!O&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let B,F;try{if(N&&(B=new m(_.r,_.s)),O){try{M!=="compact"&&(B=m.fromDER(_))}catch(se){if(!(se instanceof gc.Err))throw se}!B&&M!=="der"&&(B=m.fromCompact(_))}F=c.fromHex(S)}catch{return!1}if(!B||x&&B.hasHighS())return!1;T&&(E=e.hash(E));const{r:z,s:q}=B,H=A(E),K=a(q),Y=o(H*K),J=o(z*K),G=(te=c.BASE.multiplyAndAddUnsafe(F,Y,J))==null?void 0:te.toAffine();return G?o(G.x)===z:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:v,sign:D,verify:j,ProjectivePoint:c,Signature:m,utils:y}}function gme(t){return{hash:t,hmac:(e,...n)=>i2(t,e,Ege(...n)),randomBytes:np}}function mme(t,e){const n=r=>pme({...t,...gme(r)});return{...n(e),create:n}}const pj=ij(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),yme=pj.create(BigInt("-3")),wme=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),bme=mme({a:yme,b:wme,Fp:pj,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},G1),gj="base10",Qr="base16",wo="base64pad",Fl="base64url",Q1="utf8",mj=0,yc=1,X1=2,vme=0,yj=1,em=12,T_=32;function Eme(){const t=O_.utils.randomPrivateKey(),e=O_.getPublicKey(t);return{privateKey:Dt(t,Qr),publicKey:Dt(e,Qr)}}function N_(){const t=np(T_);return Dt(t,Qr)}function Cme(t,e){const n=O_.getSharedSecret(nn(t,Qr),nn(e,Qr)),r=I1e(G1,n,void 0,void 0,T_);return Dt(r,Qr)}function u2(t){const e=G1(nn(t,Qr));return Dt(e,Qr)}function la(t){const e=G1(nn(t,Q1));return Dt(e,Qr)}function wj(t){return nn(`${t}`,gj)}function $d(t){return Number(Dt(t,gj))}function bj(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function vj(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function _me(t){const e=wj(typeof t.type<"u"?t.type:mj);if($d(e)===yc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?nn(t.senderPublicKey,Qr):void 0,r=typeof t.iv<"u"?nn(t.iv,Qr):np(em),i=nn(t.symKey,Qr),s=VL(i,r).encrypt(nn(t.message,Q1)),o=Ej({type:e,sealed:s,iv:r,senderPublicKey:n});return t.encoding===Fl?bj(o):o}function Sme(t){const e=nn(t.symKey,Qr),{sealed:n,iv:r}=tm({encoded:t.encoded,encoding:t.encoding}),i=VL(e,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return Dt(i,Q1)}function xme(t,e){const n=wj(X1),r=np(em),i=nn(t,Q1),s=Ej({type:n,sealed:i,iv:r});return e===Fl?bj(s):s}function Ame(t,e){const{sealed:n}=tm({encoded:t,encoding:e});return Dt(n,Q1)}function Ej(t){if($d(t.type)===X1)return Dt(oa([t.type,t.sealed]),wo);if($d(t.type)===yc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Dt(oa([t.type,t.senderPublicKey,t.iv,t.sealed]),wo)}return Dt(oa([t.type,t.iv,t.sealed]),wo)}function tm(t){const e=(t.encoding||wo)===Fl?vj(t.encoded):t.encoded,n=nn(e,wo),r=n.slice(vme,yj),i=yj;if($d(r)===yc){const c=i+T_,l=c+em,u=n.slice(i,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if($d(r)===X1){const c=n.slice(i),l=np(em);return{type:r,sealed:c,iv:l}}const s=i+em,o=n.slice(i,s),a=n.slice(s);return{type:r,sealed:a,iv:o}}function Ime(t,e){const n=tm({encoded:t,encoding:e==null?void 0:e.encoding});return Cj({type:$d(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Dt(n.senderPublicKey,Qr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Cj(t){const e=(t==null?void 0:t.type)||mj;if(e===yc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function _j(t){return t.type===yc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Sj(t){return t.type===X1}function $me(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return oa([new Uint8Array([4]),e,n])}function Pme(t,e){const[n,r,i]=t.split("."),s=Buffer.from(vj(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${n}.${r}`,l=G1(c),u=$me(e);if(!bme.verify(oa([o,a]),l,u))throw new Error("Invalid signature");return Yf(t).payload}const Ome="irn";function d2(t){return(t==null?void 0:t.relay)||{protocol:Ome}}function nm(t){const e=sL[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function Tme(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(r)){const s=i.replace(r,""),o=t[i];n[s]=o}}),n}function xj(t){if(!t.includes("wc:")){const l=wL(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),i=t.substring(e+1,n).split("@"),s=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:Nme(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:Tme(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Nme(t){return t.startsWith("//")?t.substring(2):t}function kme(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(i=>{const s=i,o=n+e+s;t[s]&&(r[o]=t[s])}),r}function Aj(t){const e=new URLSearchParams,n=kme(t.relay);Object.keys(n).sort().forEach(i=>{e.set(i,n[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function h2(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var Rme=Object.defineProperty,Mme=Object.defineProperties,Bme=Object.getOwnPropertyDescriptors,Ij=Object.getOwnPropertySymbols,Dme=Object.prototype.hasOwnProperty,Lme=Object.prototype.propertyIsEnumerable,$j=(t,e,n)=>e in t?Rme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jme=(t,e)=>{for(var n in e||(e={}))Dme.call(e,n)&&$j(t,n,e[n]);if(Ij)for(var n of Ij(e))Lme.call(e,n)&&$j(t,n,e[n]);return t},Ume=(t,e)=>Mme(t,Bme(e));function dp(t){const e=[];return t.forEach(n=>{const[r,i]=n.split(":");e.push(`${r}:${i}`)}),e}function Fme(t){const e=[];return Object.values(t).forEach(n=>{e.push(...dp(n.accounts))}),e}function zme(t,e){const n=[];return Object.values(t).forEach(r=>{dp(r.accounts).includes(e)&&n.push(...r.methods)}),n}function qme(t,e){const n=[];return Object.values(t).forEach(r=>{dp(r.accounts).includes(e)&&n.push(...r.events)}),n}function f2(t){return t.includes(":")}function hp(t){return f2(t)?t.split(":")[0]:t}function Pj(t){var e,n,r;const i={};if(!zl(t))return i;for(const[s,o]of Object.entries(t)){const a=f2(s)?[s]:o.chains,c=o.methods||[],l=o.events||[],u=hp(s);i[u]=Ume(jme({},i[u]),{chains:aa(a,(e=i[u])==null?void 0:e.chains),methods:aa(c,(n=i[u])==null?void 0:n.methods),events:aa(l,(r=i[u])==null?void 0:r.events)})}return i}function Hme(t){const e={};return t==null||t.forEach(n=>{var r;const[i,s]=n.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(n),(r=e[i].chains)==null||r.push(`${i}:${s}`)}),e}function Oj(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=Hme(e);for(const[r,i]of Object.entries(n))i.methods?i.methods=aa(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return n}function Wme(t,e){var n,r,i,s,o,a;const c=Pj(t),l=Pj(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:aa((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:aa((i=c[h])==null?void 0:i.methods,(s=l[h])==null?void 0:s.methods),events:aa((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const Kme={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Vme={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ee(t,e){const{message:n,code:r}=Vme[t];return{message:e?`${n} ${e}`:n,code:r}}function Nt(t,e){const{message:n,code:r}=Kme[t];return{message:e?`${n} ${e}`:n,code:r}}function bo(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function zl(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function vr(t){return typeof t>"u"}function $n(t,e){return e&&vr(t)?!0:typeof t=="string"&&!!t.trim().length}function k_(t,e){return e&&vr(t)?!0:typeof t=="number"&&!isNaN(t)}function Gme(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),i=Object.keys(n);let s=!0;return Cd(i,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=dp(a),d=n[o];(!Cd(aL(o,d),u)||!Cd(d.methods,c)||!Cd(d.events,l))&&(s=!1)}),s):!1}function p2(t){return $n(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Zme(t){if($n(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&p2(n)}}return!1}function Yme(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if($n(t,!1)){if(e(t))return!0;const n=wL(t);return e(n)}}catch{}return!1}function Jme(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Qme(t){return t==null?void 0:t.topic}function Xme(t,e){let n=null;return $n(t==null?void 0:t.publicKey,!1)||(n=Ee("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function Tj(t){let e=!0;return bo(t)?t.length&&(e=t.every(n=>$n(n,!1))):e=!1,e}function eye(t,e,n){let r=null;return bo(e)&&e.length?e.forEach(i=>{r||p2(i)||(r=Nt("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):p2(t)||(r=Nt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function tye(t,e,n){let r=null;return Object.entries(t).forEach(([i,s])=>{if(r)return;const o=eye(i,aL(i,s),`${e} ${n}`);o&&(r=o)}),r}function nye(t,e){let n=null;return bo(t)?t.forEach(r=>{n||Zme(r)||(n=Nt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Nt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function rye(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const i=nye(r==null?void 0:r.accounts,`${e} namespace`);i&&(n=i)}),n}function iye(t,e){let n=null;return Tj(t==null?void 0:t.methods)?Tj(t==null?void 0:t.events)||(n=Nt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Nt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function Nj(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const i=iye(r,`${e}, namespace`);i&&(n=i)}),n}function sye(t,e,n){let r=null;if(t&&zl(t)){const i=Nj(t,e);i&&(r=i);const s=tye(t,e,n);s&&(r=s)}else r=Ee("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function R_(t,e){let n=null;if(t&&zl(t)){const r=Nj(t,e);r&&(n=r);const i=rye(t,e);i&&(n=i)}else n=Ee("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function kj(t){return $n(t.protocol,!0)}function oye(t,e){let n=!1;return e&&!t?n=!0:t&&bo(t)&&t.length&&t.forEach(r=>{n=kj(r)}),n}function aye(t){return typeof t=="number"}function vi(t){return typeof t<"u"&&typeof t!==null}function cye(t){return!(!t||typeof t!="object"||!t.code||!k_(t.code,!1)||!t.message||!$n(t.message,!1))}function lye(t){return!(vr(t)||!$n(t.method,!1))}function uye(t){return!(vr(t)||vr(t.result)&&vr(t.error)||!k_(t.id,!1)||!$n(t.jsonrpc,!1))}function dye(t){return!(vr(t)||!$n(t.name,!1))}function Rj(t,e){return!(!p2(e)||!Fme(t).includes(e))}function hye(t,e,n){return $n(n,!1)?zme(t,e).includes(n):!1}function fye(t,e,n){return $n(n,!1)?qme(t,e).includes(n):!1}function Mj(t,e,n){let r=null;const i=pye(t),s=gye(e),o=Object.keys(i),a=Object.keys(s),c=Bj(Object.keys(t)),l=Bj(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Cd(o,a)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=dp(e[d].accounts);h.includes(d)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Cd(i[d].methods,s[d].methods)?Cd(i[d].events,s[d].events)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function pye(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(i=>{e[i]={methods:t[n].methods,events:t[n].events}})}),e}function Bj(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function gye(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=dp(t[n].accounts);r==null||r.forEach(i=>{e[i]={accounts:t[n].accounts.filter(s=>s.includes(`${i}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function mye(t,e){return k_(t,!1)&&t<=e.max&&t>=e.min}function Dj(){const t=q1();return new Promise(e=>{switch(t){case es.browser:e(yye());break;case es.reactNative:e(wye());break;case es.node:e(bye());break;default:e(!0)}})}function yye(){return Qf()&&(navigator==null?void 0:navigator.onLine)}async function wye(){if(Ml()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function bye(){return!0}function vye(t){switch(q1()){case es.browser:Eye(t);break;case es.reactNative:Cye(t);break}}function Eye(t){!Ml()&&Qf()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Cye(t){Ml()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function _ye(){var t;return Qf()&&Xi()?((t=Xi())==null?void 0:t.visibilityState)==="visible":!0}const M_={};let rm=class{static get(e){return M_[e]}static set(e,n){M_[e]=n}static delete(e){delete M_[e]}};class rs{}let Sye=class extends rs{constructor(e){super()}};const Lj=X.FIVE_SECONDS,is={pulse:"heartbeat_pulse"};let jj=class vV extends Sye{constructor(e){super(e),this.events=new An.EventEmitter,this.interval=Lj,this.interval=(e==null?void 0:e.interval)||Lj}static async init(e){const n=new vV(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),X.toMiliseconds(this.interval))}pulse(){this.events.emit(is.pulse)}};const xye=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Aye=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Iye=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function $ye(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Pye(t);return}return e}function Pye(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function g2(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Iye.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(xye.test(t)||Aye.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,$ye)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Oye(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Qn(t,...e){try{return Oye(t(...e))}catch(n){return Promise.reject(n)}}function Tye(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Nye(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function m2(t){if(Tye(t))return String(t);if(Nye(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return m2(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const B_="base64:";function kye(t){return typeof t=="string"?t:B_+Bye(t)}function Rye(t){return typeof t!="string"||!t.startsWith(B_)?t:Mye(t.slice(B_.length))}function Mye(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Bye(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ei(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function Dye(...t){return Ei(t.join(":"))}function y2(t){return t=Ei(t),t?t+":":""}function Lye(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function jye(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}function VMe(t){return t}const Uye="memory",Fye=()=>{const t=new Map;return{name:Uye,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function zye(t={}){const e={mounts:{"":t.driver||Fye()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),i=(l,u)=>{if(e.watching){u=Ei(u);for(const d of e.watchListeners)d(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await Uj(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=g=>{let p=h.get(g.base);return p||(p={driver:g.driver,base:g.base,items:[]},h.set(g.base,p)),p};for(const g of l){const p=typeof g=="string",m=Ei(p?g:g.key),y=p?void 0:g.value,w=p||!g.options?u:{...u,...g.options},b=n(m);f(b).items.push({key:m,value:y,relativeKey:b.relativeKey,options:w})}return Promise.all([...h.values()].map(g=>d(g))).then(g=>g.flat())},c={hasItem(l,u={}){l=Ei(l);const{relativeKey:d,driver:h}=n(l);return Qn(h.hasItem,d,u)},getItem(l,u={}){l=Ei(l);const{relativeKey:d,driver:h}=n(l);return Qn(h.getItem,d,u).then(f=>g2(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Qn(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:Dye(d.base,f.key),value:g2(f.value)}))):Promise.all(d.items.map(h=>Qn(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:g2(f)})))))},getItemRaw(l,u={}){l=Ei(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Qn(h.getItemRaw,d,u):Qn(h.getItem,d,u).then(f=>Rye(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ei(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Qn(f.setItem,h,m2(u),d),f.watch||i("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Qn(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:m2(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Qn(d.driver.setItem,h.relativeKey,m2(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ei(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Qn(f.setItemRaw,h,u,d);else if(f.setItem)await Qn(f.setItem,h,kye(u),d);else return;f.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ei(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Qn(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Qn(h.removeItem,d+"$",u),h.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ei(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Qn(h.getMeta,d,u)),!u.nativeOnly){const g=await Qn(h.getItem,d+"$",u).then(p=>g2(p));g&&typeof g=="object"&&(typeof g.atime=="string"&&(g.atime=new Date(g.atime)),typeof g.mtime=="string"&&(g.mtime=new Date(g.mtime)),Object.assign(f,g))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var m;l=y2(l);const d=r(l,!0);let h=[];const f=[];let g=!0;for(const y of d){(m=y.driver.flags)!=null&&m.maxDepth||(g=!1);const w=await Qn(y.driver.getKeys,y.relativeBase,u);for(const b of w){const v=y.mountpoint+Ei(b);h.some(C=>v.startsWith(C))||f.push(v)}h=[y.mountpoint,...h.filter(b=>!b.startsWith(y.mountpoint))]}const p=u.maxDepth!==void 0&&!g;return f.filter(y=>(!p||Lye(y,u.maxDepth))&&jye(y,l))},async clear(l,u={}){l=y2(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Qn(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>Fj(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=y2(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(Uj(u,i,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=y2(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await Fj(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ei(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ei(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function Uj(t,e,n){return t.watch?t.watch((r,i)=>e(r,n+i)):()=>{}}async function Fj(t){typeof t.dispose=="function"&&await Qn(t.dispose)}const qye="idb-keyval";var Hye=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=i=>e+i;let r;return t.dbName&&t.storeName&&(r=JP(t.dbName,t.storeName)),{name:qye,options:t,async hasItem(i){return!(typeof await QP(n(i),r)>"u")},async getItem(i){return await QP(n(i),r)??null},setItem(i,s){return bre(n(i),s,r)},removeItem(i){return vre(n(i),r)},getKeys(){return _re(r)},clear(){return Ere(r)}}};const Wye="WALLET_CONNECT_V2_INDEXED_DB",Kye="keyvaluestorage";let Vye=class{constructor(){this.indexedDb=zye({driver:Hye({dbName:Wye,storeName:Kye})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,ia(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var D_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},w2={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof D_<"u"&&D_.localStorage?w2.exports=D_.localStorage:typeof window<"u"&&window.localStorage?w2.exports=window.localStorage:w2.exports=new e})();function Gye(t){var e;return[t[0],uc((e=t[1])!=null?e:"")]}let Zye=class{constructor(){this.localStorage=w2.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Gye)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return uc(n)}async setItem(e,n){this.localStorage.setItem(e,ia(n))}async removeItem(e){this.localStorage.removeItem(e)}};const Yye="wc_storage_version",zj=1,Jye=async(t,e,n)=>{const r=Yye,i=await e.getItem(r);if(i&&i>=zj){n(e);return}const s=await t.getKeys();if(!s.length){n(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,zj),n(e),Qye(t,o)},Qye=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let qj=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new Zye;this.storage=e;try{const n=new Vye;Jye(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function Xye(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var ewe=twe;function twe(t,e,n){var r=n&&n.stringify||Xye,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=r(t);for(var a=1;a<s;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-i,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var g=typeof e[u];if(g==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(g==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const Hj=ewe;var fp=ua;const im=dwe().console||{},nwe={mapHttpRequest:v2,mapHttpResponse:v2,wrapRequestSerializer:j_,wrapResponseSerializer:j_,wrapErrorSerializer:j_,req:v2,res:v2,err:awe};function rwe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function ua(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||im;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},i=rwe(t.browser.serialize,r);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=sm),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:cwe(t)};c.levels=ua.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=sm,c.serializers=r,c._serialize=i,c._stdErrSerialize=s,c.child=f,e&&(c._logEvent=L_());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,pp(l,c,"error","log"),pp(l,c,"fatal","error"),pp(l,c,"warn","error"),pp(l,c,"info","log"),pp(l,c,"debug","log"),pp(l,c,"trace","log")}function f(g,p){if(!g)throw new Error("missing bindings for child Pino");p=p||{},i&&g.serializers&&(p.serializers=g.serializers);const m=p.serializers;if(i&&m){var y=Object.assign({},r,m),w=t.browser.serialize===!0?Object.keys(y):i;delete g.serializers,b2([g],w,y,this._stdErrSerialize)}function b(v){this._childLevel=(v._childLevel|0)+1,this.error=gp(v,g,"error"),this.fatal=gp(v,g,"fatal"),this.warn=gp(v,g,"warn"),this.info=gp(v,g,"info"),this.debug=gp(v,g,"debug"),this.trace=gp(v,g,"trace"),y&&(this.serializers=y,this._serialize=w),e&&(this._logEvent=L_([].concat(v._logEvent.bindings,g)))}return b.prototype=this,new b(this)}return c}ua.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},ua.stdSerializers=nwe,ua.stdTimeFunctions=Object.assign({},{nullTime:Wj,epochTime:Kj,unixTime:lwe,isoTime:uwe});function pp(t,e,n,r){const i=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?sm:i[n]?i[n]:im[n]||im[r]||sm,iwe(t,e,n)}function iwe(t,e,n){!t.transmit&&e[n]===sm||(e[n]=function(r){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===im?im:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&b2(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,swe(this,n,o,s)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=ua.levels.values[l],d=ua.levels.values[n];if(d<u)return;owe(this,{ts:s,methodLevel:n,methodValue:d,transmitLevel:l,transmitValue:ua.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function swe(t,e,n,r){t._serialize&&b2(n,t._serialize,t.serializers,t._stdErrSerialize);const i=n.slice();let s=i[0];const o={};r&&(o.time=r),o.level=ua.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?Hj(i.shift(),i):void 0}else typeof s=="string"&&(s=Hj(i.shift(),i));return s!==void 0&&(o.msg=s),o}function b2(t,e,n,r){for(const i in t)if(r&&t[i]instanceof Error)t[i]=ua.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in n&&(t[i][s]=n[s](t[i][s]))}function gp(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var i=1;i<r.length;i++)r[i]=arguments[i-1];return t[n].apply(this,r)}}function owe(t,e,n){const r=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;b2(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,r(s,t._logEvent,a),t._logEvent=L_(c)}function L_(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function awe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function cwe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Wj:Kj}function v2(){return{}}function j_(t){return t}function sm(){}function Wj(){return!1}function Kj(){return Date.now()}function lwe(){return Math.round(Date.now()/1e3)}function uwe(){return new Date(Date.now()).toISOString()}function dwe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const ql=$u(fp),hwe={level:"info"},om="custom_context",U_=1e3*1024;let fwe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Vj=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new fwe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},Gj=class{constructor(e,n=U_){this.level=e??"error",this.levelValue=fp.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Vj(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===fp.levels.values.error?console.error(e):n===fp.levels.values.warn?console.warn(e):n===fp.levels.values.debug?console.debug(e):n===fp.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ia({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Vj(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(ia({extraMetadata:e})),new Blob(n,{type:"application/json"})}},pwe=class{constructor(e,n=U_){this.baseChunkLogger=new Gj(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},gwe=class{constructor(e,n=U_){this.baseChunkLogger=new Gj(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var mwe=Object.defineProperty,ywe=Object.defineProperties,wwe=Object.getOwnPropertyDescriptors,Zj=Object.getOwnPropertySymbols,bwe=Object.prototype.hasOwnProperty,vwe=Object.prototype.propertyIsEnumerable,Yj=(t,e,n)=>e in t?mwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E2=(t,e)=>{for(var n in e||(e={}))bwe.call(e,n)&&Yj(t,n,e[n]);if(Zj)for(var n of Zj(e))vwe.call(e,n)&&Yj(t,n,e[n]);return t},C2=(t,e)=>ywe(t,wwe(e));function wc(t){return C2(E2({},t),{level:(t==null?void 0:t.level)||hwe.level})}function Ewe(t,e=om){return t[e]||""}function Cwe(t,e,n=om){return t[n]=e,t}function Ft(t,e=om){let n="";return typeof t.bindings>"u"?n=Ewe(t,e):n=t.bindings().context||"",n}function _we(t,e,n=om){const r=Ft(t,n);return r.trim()?`${r}/${e}`:e}function Pt(t,e,n=om){const r=_we(t,e,n),i=t.child({context:r});return Cwe(i,r,n)}function Swe(t){var e,n;const r=new pwe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:ql(C2(E2({},t.opts),{level:"trace",browser:C2(E2({},(n=t.opts)==null?void 0:n.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function xwe(t){var e;const n=new gwe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:ql(C2(E2({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function F_(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Swe(t):xwe(t)}var Awe=Object.defineProperty,Iwe=(t,e,n)=>e in t?Awe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jj=(t,e,n)=>Iwe(t,typeof e!="symbol"?e+"":e,n);let $we=class extends rs{constructor(e){super(),this.opts=e,Jj(this,"protocol","wc"),Jj(this,"version",2)}};var Pwe=Object.defineProperty,Owe=(t,e,n)=>e in t?Pwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Twe=(t,e,n)=>Owe(t,typeof e!="symbol"?e+"":e,n);let Nwe=class extends rs{constructor(e,n){super(),this.core=e,this.logger=n,Twe(this,"records",new Map)}},kwe=class{constructor(e,n){this.logger=e,this.core=n}},Rwe=class extends rs{constructor(e,n){super(),this.relayer=e,this.logger=n}},Mwe=class extends rs{constructor(e){super()}},Bwe=class{constructor(e,n,r,i){this.core=e,this.logger=n,this.name=r}},Dwe=class extends rs{constructor(e,n){super(),this.relayer=e,this.logger=n}},Lwe=class extends rs{constructor(e,n){super(),this.core=e,this.logger=n}},jwe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},Uwe=class{constructor(e,n){this.projectId=e,this.logger=n}},Fwe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var zwe=Object.defineProperty,qwe=(t,e,n)=>e in t?zwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qj=(t,e,n)=>qwe(t,typeof e!="symbol"?e+"":e,n);let Hwe=class{constructor(e){this.opts=e,Qj(this,"protocol","wc"),Qj(this,"version",2)}},Wwe=class{constructor(e){this.client=e}};const Kwe="PARSE_ERROR",Vwe="INVALID_REQUEST",Gwe="METHOD_NOT_FOUND",Zwe="INVALID_PARAMS",Xj="INTERNAL_ERROR",z_="SERVER_ERROR",Ywe=[-32700,-32600,-32601,-32602,-32603],am={[Kwe]:{code:-32700,message:"Parse error"},[Vwe]:{code:-32600,message:"Invalid Request"},[Gwe]:{code:-32601,message:"Method not found"},[Zwe]:{code:-32602,message:"Invalid params"},[Xj]:{code:-32603,message:"Internal error"},[z_]:{code:-32e3,message:"Server error"}},eU=z_;function Jwe(t){return Ywe.includes(t)}function tU(t){return Object.keys(am).includes(t)?am[t]:am[eU]}function Qwe(t){const e=Object.values(am).find(n=>n.code===t);return e||am[eU]}function nU(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var rU={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var q_=function(t,e){return q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},q_(t,e)};function Xwe(t,e){q_(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var H_=function(){return H_=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},H_.apply(this,arguments)};function ebe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function tbe(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function nbe(t,e){return function(n,r){e(n,r,t)}}function rbe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ibe(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function sbe(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function obe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function abe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function W_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function iU(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function cbe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(iU(arguments[e]));return t}function lbe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function cm(t){return this instanceof cm?(this.v=t,this):new cm(t)}function ube(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(g,p){s.push([h,f,g,p])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(g){d(s[0][3],g)}}function c(h){h.value instanceof cm?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function dbe(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:cm(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function hbe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof W_=="function"?W_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function fbe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function pbe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function gbe(t){return t&&t.__esModule?t:{default:t}}function mbe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function ybe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const wbe=yA(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return H_},__asyncDelegator:dbe,__asyncGenerator:ube,__asyncValues:hbe,__await:cm,__awaiter:ibe,__classPrivateFieldGet:mbe,__classPrivateFieldSet:ybe,__createBinding:obe,__decorate:tbe,__exportStar:abe,__extends:Xwe,__generator:sbe,__importDefault:gbe,__importStar:pbe,__makeTemplateObject:fbe,__metadata:rbe,__param:nbe,__read:iU,__rest:ebe,__spread:cbe,__spreadArrays:lbe,__values:W_},Symbol.toStringTag,{value:"Module"})));var bc={},sU;function bbe(){if(sU)return bc;sU=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.isBrowserCryptoAvailable=bc.getSubtleCrypto=bc.getBrowerCrypto=void 0;function t(){return(kr==null?void 0:kr.crypto)||(kr==null?void 0:kr.msCrypto)||{}}bc.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}bc.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return bc.isBrowserCryptoAvailable=n,bc}var vc={},oU;function vbe(){if(oU)return vc;oU=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.isBrowser=vc.isNode=vc.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}vc.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}vc.isNode=e;function n(){return!t()&&!e()}return vc.isBrowser=n,vc}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=wbe;e.__exportStar(bbe(),t),e.__exportStar(vbe(),t)})(rU);function Xn(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function ss(t=6){return BigInt(Xn(t))}function Xr(t,e,n){return{id:n||Xn(),jsonrpc:"2.0",method:t,params:e}}function Hl(t,e){return{id:t,jsonrpc:"2.0",result:e}}function mp(t,e,n){return{id:t,jsonrpc:"2.0",error:Ebe(e,n)}}function Ebe(t,e){return typeof t>"u"?tU(Xj):(typeof t=="string"&&(t=Object.assign(Object.assign({},tU(z_)),{message:t})),typeof e<"u"&&(t.data=e),Jwe(t.code)&&(t=Qwe(t.code)),t)}let Cbe=class{},_be=class extends Cbe{constructor(){super()}},Sbe=class extends _be{constructor(e){super()}};const xbe="^https?:",Abe="^wss?:";function Ibe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function aU(t,e){const n=Ibe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function cU(t){return aU(t,xbe)}function lU(t){return aU(t,Abe)}function $be(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function uU(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function yp(t){return uU(t)&&"method"in t}function Pd(t){return uU(t)&&(Bn(t)||hn(t))}function Bn(t){return"result"in t}function hn(t){return"error"in t}let rn=class extends Sbe{constructor(e){super(e),this.events=new An.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Xr(e.method,e.params||[],e.id||ss().toString()),n)}async requestStrict(e,n){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{hn(s)?i(s.error):r(s.result)});try{await this.connection.send(e,n)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Pd(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Pbe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Obe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",dU=t=>t.split("?")[0],hU=10,Tbe=Pbe();let fU=class{constructor(e){if(this.url=e,this.events=new An.EventEmitter,this.registering=!1,!lU(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ia(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!lU(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const i=rU.isReactNative()?void 0:{rejectUnauthorized:!$be(e)},s=new Tbe(e,[],i);Obe()?s.onerror=o=>{const a=o;r(this.emitError(a.error))}:s.on("error",o=>{r(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),n(s)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?uc(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),i=r.message||r.toString(),s=mp(e,i);this.events.emit("payload",s)}parseError(e,n=this.url){return nU(e,dU(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>hU&&this.events.setMaxListeners(hU)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${dU(this.url)}`));return this.events.emit("register_error",n),n}};const pU="wc",gU=2,_2="core",da=`${pU}@2:${_2}:`,Nbe={name:_2,logger:"error"},kbe={database:":memory:"},Rbe="crypto",mU="client_ed25519_seed",Mbe=X.ONE_DAY,Bbe="keychain",Dbe="0.3",Lbe="messages",jbe="0.3",yU=X.SIX_HOURS,Ube="publisher",wU="irn",Fbe="error",bU="wss://relay.walletconnect.org",zbe="relayer",er={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},qbe="_subscription",Ls={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Hbe=.1,K_="2.21.1",Xt={link_mode:"link_mode",relay:"relay"},S2={inbound:"inbound",outbound:"outbound"},Wbe="0.3",Kbe="WALLETCONNECT_CLIENT_ID",vU="WALLETCONNECT_LINK_MODE_APPS",os={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Vbe="subscription",Gbe="0.3",Zbe="pairing",Ybe="0.3",lm={wc_pairingDelete:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:X.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:X.ONE_DAY,prompt:!1,tag:0},res:{ttl:X.ONE_DAY,prompt:!1,tag:0}}},Od={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},vo={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Jbe="history",Qbe="0.3",Xbe="expirer",js={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},eve="0.3",tve="verify-api",nve="https://verify.walletconnect.com",EU="https://verify.walletconnect.org",um=EU,rve=`${um}/v3`,ive=[nve,EU],sve="echo",ove="https://echo.walletconnect.com",ha={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Ec={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Eo={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Td={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Nd={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},dm={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},ave=.1,cve="event-client",lve=86400,uve="https://pulse.walletconnect.org/batch";function dve(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,y=0,w=g.length;y!==w&&g[y]===0;)y++,p++;for(var b=(w-y)*u+1>>>0,v=new Uint8Array(b);y!==w;){for(var C=g[y],A=0,$=b-1;(C!==0||A<m)&&$!==-1;$--,A++)C+=256*v[$]>>>0,v[$]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");m=A,y++}for(var R=b-m;R!==b&&v[R]===0;)R++;for(var P=c.repeat(p);R<b;++R)P+=t.charAt(v[R]);return P}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,y=0;g[p]===c;)m++,p++;for(var w=(g.length-p)*l+1>>>0,b=new Uint8Array(w);g[p];){var v=n[g.charCodeAt(p)];if(v===255)return;for(var C=0,A=w-1;(v!==0||C<y)&&A!==-1;A--,C++)v+=a*b[A]>>>0,b[A]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");y=C,p++}if(g[p]!==" "){for(var $=w-y;$!==w&&b[$]===0;)$++;for(var R=new Uint8Array(m+(w-$)),P=m;$!==w;)R[P++]=b[$++];return R}}}function f(g){var p=h(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var hve=dve,fve=hve;const CU=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},pve=t=>new TextEncoder().encode(t),gve=t=>new TextDecoder().decode(t);let mve=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},yve=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _U(this,e)}},wve=class{constructor(e){this.decoders=e}or(e){return _U(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const _U=(t,e)=>new wve({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let bve=class{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new mve(e,n,r),this.decoder=new yve(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const x2=({name:t,prefix:e,encode:n,decode:r})=>new bve(t,e,n,r),hm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=fve(n,e);return x2({prefix:t,name:e,encode:r,decode:s=>CU(i(s))})},vve=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Eve=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},Er=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>x2({prefix:e,name:t,encode(i){return Eve(i,r,n)},decode(i){return vve(i,r,n,t)}}),Cve=x2({prefix:"\0",name:"identity",encode:t=>gve(t),decode:t=>pve(t)});var _ve=Object.freeze({__proto__:null,identity:Cve});const Sve=Er({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var xve=Object.freeze({__proto__:null,base2:Sve});const Ave=Er({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ive=Object.freeze({__proto__:null,base8:Ave});const $ve=hm({prefix:"9",name:"base10",alphabet:"0123456789"});var Pve=Object.freeze({__proto__:null,base10:$ve});const Ove=Er({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Tve=Er({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Nve=Object.freeze({__proto__:null,base16:Ove,base16upper:Tve});const kve=Er({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Rve=Er({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Mve=Er({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Bve=Er({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Dve=Er({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Lve=Er({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),jve=Er({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Uve=Er({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Fve=Er({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var zve=Object.freeze({__proto__:null,base32:kve,base32upper:Rve,base32pad:Mve,base32padupper:Bve,base32hex:Dve,base32hexupper:Lve,base32hexpad:jve,base32hexpadupper:Uve,base32z:Fve});const qve=hm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Hve=hm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Wve=Object.freeze({__proto__:null,base36:qve,base36upper:Hve});const Kve=hm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Vve=hm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Gve=Object.freeze({__proto__:null,base58btc:Kve,base58flickr:Vve});const Zve=Er({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Yve=Er({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Jve=Er({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Qve=Er({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Xve=Object.freeze({__proto__:null,base64:Zve,base64pad:Yve,base64url:Jve,base64urlpad:Qve});const SU=Array.from(""),e2e=SU.reduce((t,e,n)=>(t[n]=e,t),[]),t2e=SU.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function n2e(t){return t.reduce((e,n)=>(e+=e2e[n],e),"")}function r2e(t){const e=[];for(const n of t){const r=t2e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const i2e=x2({prefix:"",name:"base256emoji",encode:n2e,decode:r2e});var s2e=Object.freeze({__proto__:null,base256emoji:i2e}),o2e=AU,xU=128,a2e=127,c2e=~a2e,l2e=Math.pow(2,31);function AU(t,e,n){e=e||[],n=n||0;for(var r=n;t>=l2e;)e[n++]=t&255|xU,t/=128;for(;t&c2e;)e[n++]=t&255|xU,t>>>=7;return e[n]=t|0,AU.bytes=n-r+1,e}var u2e=V_,d2e=128,IU=127;function V_(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw V_.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&IU)<<i:(o&IU)*Math.pow(2,i),i+=7}while(o>=d2e);return V_.bytes=s-r,n}var h2e=Math.pow(2,7),f2e=Math.pow(2,14),p2e=Math.pow(2,21),g2e=Math.pow(2,28),m2e=Math.pow(2,35),y2e=Math.pow(2,42),w2e=Math.pow(2,49),b2e=Math.pow(2,56),v2e=Math.pow(2,63),E2e=function(t){return t<h2e?1:t<f2e?2:t<p2e?3:t<g2e?4:t<m2e?5:t<y2e?6:t<w2e?7:t<b2e?8:t<v2e?9:10},C2e={encode:o2e,decode:u2e,encodingLength:E2e},$U=C2e;const PU=(t,e,n=0)=>($U.encode(t,e,n),e),OU=t=>$U.encodingLength(t),G_=(t,e)=>{const n=e.byteLength,r=OU(t),i=r+OU(n),s=new Uint8Array(i+n);return PU(t,s,0),PU(n,s,r),s.set(e,i),new _2e(t,n,e,s)};let _2e=class{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}};const TU=({name:t,code:e,encode:n})=>new S2e(t,e,n);let S2e=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?G_(this.code,n):n.then(r=>G_(this.code,r))}else throw Error("Unknown type, must be binary type")}};const NU=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),x2e=TU({name:"sha2-256",code:18,encode:NU("SHA-256")}),A2e=TU({name:"sha2-512",code:19,encode:NU("SHA-512")});var I2e=Object.freeze({__proto__:null,sha256:x2e,sha512:A2e});const kU=0,$2e="identity",RU=CU;var P2e=Object.freeze({__proto__:null,identity:{code:kU,name:$2e,encode:RU,digest:t=>G_(kU,RU(t))}});new TextEncoder,new TextDecoder;const MU={..._ve,...xve,...Ive,...Pve,...Nve,...zve,...Wve,...Gve,...Xve,...s2e};({...I2e,...P2e});function O2e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function BU(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const DU=BU("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Z_=BU("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=O2e(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),T2e={utf8:DU,"utf-8":DU,hex:MU.base16,latin1:Z_,ascii:Z_,binary:Z_,...MU};function N2e(t,e="utf8"){const n=T2e[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var k2e=Object.defineProperty,R2e=(t,e,n)=>e in t?k2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fa=(t,e,n)=>R2e(t,typeof e!="symbol"?e+"":e,n);let M2e=class{constructor(e,n){this.core=e,this.logger=n,fa(this,"keychain",new Map),fa(this,"name",Bbe),fa(this,"version",Dbe),fa(this,"initialized",!1),fa(this,"storagePrefix",da),fa(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),fa(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),fa(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),fa(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:s}=Ee("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(s)}return i}),fa(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Pt(n,this.name)}get context(){return Ft(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,i_(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?s_(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}};var B2e=Object.defineProperty,D2e=(t,e,n)=>e in t?B2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cr=(t,e,n)=>D2e(t,typeof e!="symbol"?e+"":e,n);let L2e=class{constructor(e,n,r){this.core=e,this.logger=n,Cr(this,"name",Rbe),Cr(this,"keychain"),Cr(this,"randomSessionIdentifier",N_()),Cr(this,"initialized",!1),Cr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Cr(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Cr(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Jv(i);return n_(s.publicKey)}),Cr(this,"generateKeyPair",()=>{this.isInitialized();const i=Eme();return this.setPrivateKey(i.publicKey,i.privateKey)}),Cr(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Jv(s),a=this.randomSessionIdentifier;return await JD(a,i,Mbe,o)}),Cr(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=Cme(a,s);return this.setSymKey(c,o)}),Cr(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||u2(i);return await this.keychain.set(o,i),o}),Cr(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Cr(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Cr(this,"encode",async(i,s,o)=>{this.isInitialized();const a=Cj(o),c=ia(s);if(Sj(a))return xme(c,o==null?void 0:o.encoding);if(_j(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;i=await this.generateSharedKey(h,f)}const l=this.getSymKey(i),{type:u,senderPublicKey:d}=a;return _me({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Cr(this,"decode",async(i,s,o)=>{this.isInitialized();const a=Ime(s,o);if(Sj(a)){const c=Ame(s,o==null?void 0:o.encoding);return uc(c)}if(_j(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=Sme({symKey:c,encoded:s,encoding:o==null?void 0:o.encoding});return uc(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Cr(this,"getPayloadType",(i,s=wo)=>{const o=tm({encoded:i,encoding:s});return $d(o.type)}),Cr(this,"getPayloadSenderPublicKey",(i,s=wo)=>{const o=tm({encoded:i,encoding:s});return o.senderPublicKey?Dt(o.senderPublicKey,Qr):void 0}),this.core=e,this.logger=Pt(n,this.name),this.keychain=r||new M2e(this.core,this.logger)}get context(){return Ft(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(mU)}catch{e=N_(),await this.keychain.set(mU,e)}return N2e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}};var j2e=Object.defineProperty,U2e=Object.defineProperties,F2e=Object.getOwnPropertyDescriptors,LU=Object.getOwnPropertySymbols,z2e=Object.prototype.hasOwnProperty,q2e=Object.prototype.propertyIsEnumerable,Y_=(t,e,n)=>e in t?j2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H2e=(t,e)=>{for(var n in e||(e={}))z2e.call(e,n)&&Y_(t,n,e[n]);if(LU)for(var n of LU(e))q2e.call(e,n)&&Y_(t,n,e[n]);return t},W2e=(t,e)=>U2e(t,F2e(e)),as=(t,e,n)=>Y_(t,typeof e!="symbol"?e+"":e,n);let K2e=class extends kwe{constructor(e,n){super(e,n),this.logger=e,this.core=n,as(this,"messages",new Map),as(this,"messagesWithoutClientAck",new Map),as(this,"name",Lbe),as(this,"version",jbe),as(this,"initialized",!1),as(this,"storagePrefix",da),as(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),as(this,"set",async(r,i,s)=>{this.isInitialized();const o=la(i);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(r,a),s===S2.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,W2e(H2e({},c),{[o]:i}))}return await this.persist(),o}),as(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),as(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const s of r){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),as(this,"has",(r,i)=>{this.isInitialized();const s=this.get(r),o=la(i);return typeof s[o]<"u"}),as(this,"ack",async(r,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(r);if(typeof s>"u")return;const o=la(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,s),await this.persist()}),as(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Pt(e,this.name),this.core=n}get context(){return Ft(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,i_(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,i_(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?s_(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?s_(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}};var V2e=Object.defineProperty,G2e=Object.defineProperties,Z2e=Object.getOwnPropertyDescriptors,jU=Object.getOwnPropertySymbols,Y2e=Object.prototype.hasOwnProperty,J2e=Object.prototype.propertyIsEnumerable,J_=(t,e,n)=>e in t?V2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A2=(t,e)=>{for(var n in e||(e={}))Y2e.call(e,n)&&J_(t,n,e[n]);if(jU)for(var n of jU(e))J2e.call(e,n)&&J_(t,n,e[n]);return t},Q_=(t,e)=>G2e(t,Z2e(e)),Co=(t,e,n)=>J_(t,typeof e!="symbol"?e+"":e,n);let Q2e=class extends Rwe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Co(this,"events",new An.EventEmitter),Co(this,"name",Ube),Co(this,"queue",new Map),Co(this,"publishTimeout",X.toMiliseconds(X.ONE_MINUTE)),Co(this,"initialPublishTimeout",X.toMiliseconds(X.ONE_SECOND*15)),Co(this,"needsTransportRestart",!1),Co(this,"publish",async(r,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}});const a=(s==null?void 0:s.ttl)||yU,c=d2(s),l=(s==null?void 0:s.prompt)||!1,u=(s==null?void 0:s.tag)||0,d=(s==null?void 0:s.id)||ss().toString(),h={topic:r,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const g=new Promise(async p=>{const m=({id:w})=>{h.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(er.publish,m),p(h))};this.relayer.events.on(er.publish,m);const y=Bl(new Promise((w,b)=>{this.rpcPublish({topic:r,message:i,ttl:a,prompt:l,tag:u,id:d,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}).then(w).catch(v=>{this.logger.warn(v,v==null?void 0:v.message),b(v)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(er.publish,m)}catch(w){this.queue.set(d,Q_(A2({},h),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:i,opts:s}}),await Bl(g,this.publishTimeout,f)}catch(g){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(g),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw g}finally{this.queue.delete(d)}}),Co(this,"on",(r,i)=>{this.events.on(r,i)}),Co(this,"once",(r,i)=>{this.events.once(r,i)}),Co(this,"off",(r,i)=>{this.events.off(r,i)}),Co(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=e,this.logger=Pt(n,this.name),this.registerEventListeners()}get context(){return Ft(this.logger)}async rpcPublish(e){var n,r,i,s;const{topic:o,message:a,ttl:c=yU,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,g={method:nm(d2().protocol).publish,params:A2({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};vr((n=g.params)==null?void 0:n.prompt)&&((r=g.params)==null||delete r.prompt),vr((i=g.params)==null?void 0:i.tag)&&((s=g.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:g});const p=await this.relayer.request(g);return this.relayer.events.emit(er.publish,e),this.logger.debug("Successfully Published Payload"),p}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,Q_(A2({},e),{attempt:r}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Q_(A2({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(is.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(er.connection_stalled);return}this.checkQueue()}),this.relayer.on(er.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}};var X2e=Object.defineProperty,e5e=(t,e,n)=>e in t?X2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wp=(t,e,n)=>e5e(t,typeof e!="symbol"?e+"":e,n);let t5e=class{constructor(){wp(this,"map",new Map),wp(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),wp(this,"get",e=>this.map.get(e)||[]),wp(this,"exists",(e,n)=>this.get(e).includes(n)),wp(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const i=r.filter(s=>s!==n);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),wp(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}};var n5e=Object.defineProperty,r5e=Object.defineProperties,i5e=Object.getOwnPropertyDescriptors,UU=Object.getOwnPropertySymbols,s5e=Object.prototype.hasOwnProperty,o5e=Object.prototype.propertyIsEnumerable,X_=(t,e,n)=>e in t?n5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fm=(t,e)=>{for(var n in e||(e={}))s5e.call(e,n)&&X_(t,n,e[n]);if(UU)for(var n of UU(e))o5e.call(e,n)&&X_(t,n,e[n]);return t},eS=(t,e)=>r5e(t,i5e(e)),zt=(t,e,n)=>X_(t,typeof e!="symbol"?e+"":e,n);let a5e=class extends Dwe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,zt(this,"subscriptions",new Map),zt(this,"topicMap",new t5e),zt(this,"events",new An.EventEmitter),zt(this,"name",Vbe),zt(this,"version",Gbe),zt(this,"pending",new Map),zt(this,"cached",[]),zt(this,"initialized",!1),zt(this,"storagePrefix",da),zt(this,"subscribeTimeout",X.toMiliseconds(X.ONE_MINUTE)),zt(this,"initialSubscribeTimeout",X.toMiliseconds(X.ONE_SECOND*15)),zt(this,"clientId"),zt(this,"batchSubscribeTopicsLimit",500),zt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),zt(this,"subscribe",async(r,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const s=d2(i),o={topic:r,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),zt(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),zt(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),zt(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(s=>s.topic===r))})),zt(this,"on",(r,i)=>{this.events.on(r,i)}),zt(this,"once",(r,i)=>{this.events.once(r,i)}),zt(this,"off",(r,i)=>{this.events.off(r,i)}),zt(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),zt(this,"start",async()=>{await this.onConnect()}),zt(this,"stop",async()=>{await this.onDisconnect()}),zt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),zt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),zt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(is.pulse,async()=>{await this.checkPending()}),this.events.on(os.created,async r=>{const i=os.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(os.deleted,async r=>{const i=os.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=e,this.logger=Pt(n,this.name),this.clientId=""}get context(){return Ft(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async i=>await this.unsubscribeById(e,i,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const i=d2(r);await this.restartToComplete({topic:e,id:n,relay:i}),await this.rpcUnsubscribe(e,n,i);const s=Nt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,n,r){var i;(!r||(r==null?void 0:r.transportType)===Xt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const s={method:nm(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Xt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},X.toMiliseconds(X.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(os.created,d),u(h.id))};this.events.on(os.created,d);try{const h=await Bl(new Promise((f,g)=>{this.relayer.request(s).catch(p=>{this.logger.warn(p,p==null?void 0:p.message),g(p)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(os.created,d),u(h)}catch{}}),l=await Bl(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(er.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:nm(n.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Bl(new Promise(i=>{this.relayer.request(r).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(er.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:nm(n.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await Bl(new Promise((s,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(er.connection_stalled)}return i}rpcUnsubscribe(e,n,r){const i={method:nm(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,n){this.setSubscription(e,eS(fm({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,fm({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,fm({},n)),this.topicMap.set(n.topic,e),this.events.emit(os.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(os.deleted,eS(fm({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(os.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(os.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>eS(fm({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await uge(X.toMiliseconds(X.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return la(e+await this.getClientId())}};var c5e=Object.defineProperty,FU=Object.getOwnPropertySymbols,l5e=Object.prototype.hasOwnProperty,u5e=Object.prototype.propertyIsEnumerable,tS=(t,e,n)=>e in t?c5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zU=(t,e)=>{for(var n in e||(e={}))l5e.call(e,n)&&tS(t,n,e[n]);if(FU)for(var n of FU(e))u5e.call(e,n)&&tS(t,n,e[n]);return t},mt=(t,e,n)=>tS(t,typeof e!="symbol"?e+"":e,n);let d5e=class extends Mwe{constructor(e){super(e),mt(this,"protocol","wc"),mt(this,"version",2),mt(this,"core"),mt(this,"logger"),mt(this,"events",new An.EventEmitter),mt(this,"provider"),mt(this,"messages"),mt(this,"subscriber"),mt(this,"publisher"),mt(this,"name",zbe),mt(this,"transportExplicitlyClosed",!1),mt(this,"initialized",!1),mt(this,"connectionAttemptInProgress",!1),mt(this,"relayUrl"),mt(this,"projectId"),mt(this,"packageName"),mt(this,"bundleId"),mt(this,"hasExperiencedNetworkDisruption",!1),mt(this,"pingTimeout"),mt(this,"heartBeatTimeout",X.toMiliseconds(X.THIRTY_SECONDS+X.FIVE_SECONDS)),mt(this,"reconnectTimeout"),mt(this,"connectPromise"),mt(this,"reconnectInProgress",!1),mt(this,"requestsInFlight",[]),mt(this,"connectTimeout",X.toMiliseconds(X.ONE_SECOND*15)),mt(this,"request",async n=>{var r,i;this.logger.debug("Publishing Request Payload");const s=n.id||ss().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${s}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),mt(this,"resetPingTimeout",()=>{Xv()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),mt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),mt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(er.connect)}),mt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),mt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(er.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),mt(this,"registerProviderListeners",()=>{this.provider.on(Ls.payload,this.onPayloadHandler),this.provider.on(Ls.connect,this.onConnectHandler),this.provider.on(Ls.disconnect,this.onDisconnectHandler),this.provider.on(Ls.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Pt(e.logger,this.name):ql(wc({level:e.logger||Fbe})),this.messages=new K2e(this.logger,e.core),this.subscriber=new a5e(this,this.logger),this.publisher=new Q2e(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||bU,this.projectId=e.projectId,G0e()?this.packageName=dL():Z0e()&&(this.bundleId=dL()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return Ft(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Xt.relay},S2.outbound)}async subscribe(e,n){var r,i,s;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(os.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(os.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,zU({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Bl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Dj())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const i=Mn(X.FIVE_MINUTES),s={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,s)}this.events.emit(er.message,e),await this.recordMessageEvent(e,S2.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ls.disconnect,s),await Bl(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(Ls.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ls.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ls.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,X.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,i,s;if(Xv())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new rn(new fU(ege({sdkVersion:K_,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:i}=e;await this.messages.set(r,i,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const i=this.messages.has(n,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),yp(e)){if(!e.method.endsWith(qbe))return;const n=e.params,{topic:r,message:i,publishedAt:s,attestation:o}=n.data,a={topic:r,message:i,publishedAt:s,transportType:Xt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(zU({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Pd(e)&&this.events.emit(er.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,S2.inbound),this.events.emit(er.message,e))}async acknowledgePayload(e){const n=Hl(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ls.payload,this.onPayloadHandler),this.provider.off(Ls.connect,this.onConnectHandler),this.provider.off(Ls.disconnect,this.onDisconnectHandler),this.provider.off(Ls.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Dj();vye(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(is.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&_ye())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(er.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},X.toMiliseconds(Hbe)))))}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}};function h5e(){}function qU(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function HU(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function WU(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const f5e="[object RegExp]",p5e="[object String]",g5e="[object Number]",m5e="[object Boolean]",KU="[object Arguments]",y5e="[object Symbol]",w5e="[object Date]",b5e="[object Map]",v5e="[object Set]",E5e="[object Array]",C5e="[object Function]",_5e="[object ArrayBuffer]",nS="[object Object]",S5e="[object Error]",x5e="[object DataView]",A5e="[object Uint8Array]",I5e="[object Uint8ClampedArray]",$5e="[object Uint16Array]",P5e="[object Uint32Array]",O5e="[object BigUint64Array]",T5e="[object Int8Array]",N5e="[object Int16Array]",k5e="[object Int32Array]",R5e="[object BigInt64Array]",M5e="[object Float32Array]",B5e="[object Float64Array]";function D5e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function L5e(t,e,n){return pm(t,e,void 0,void 0,void 0,void 0,n)}function pm(t,e,n,r,i,s,o){const a=o(t,e,n,r,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return gm(t,e,s,o)}return gm(t,e,s,o)}function gm(t,e,n,r){if(Object.is(t,e))return!0;let i=WU(t),s=WU(e);if(i===KU&&(i=nS),s===KU&&(s=nS),i!==s)return!1;switch(i){case p5e:return t.toString()===e.toString();case g5e:{const c=t.valueOf(),l=e.valueOf();return D5e(c,l)}case m5e:case w5e:case y5e:return Object.is(t.valueOf(),e.valueOf());case f5e:return t.source===e.source&&t.flags===e.flags;case C5e:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(i){case b5e:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!pm(l,e.get(c),c,t,e,n,r))return!1;return!0}case v5e:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>pm(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case E5e:case A5e:case I5e:case $5e:case P5e:case O5e:case T5e:case N5e:case k5e:case R5e:case M5e:case B5e:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!pm(t[c],e[c],c,t,e,n,r))return!1;return!0}case _5e:return t.byteLength!==e.byteLength?!1:gm(new Uint8Array(t),new Uint8Array(e),n,r);case x5e:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:gm(new Uint8Array(t),new Uint8Array(e),n,r);case S5e:return t.name===e.name&&t.message===e.message;case nS:{if(!(gm(t.constructor,e.constructor,n,r)||qU(t)&&qU(e)))return!1;const c=[...Object.keys(t),...HU(t)],l=[...Object.keys(e),...HU(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!pm(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function j5e(t,e){return L5e(t,e,h5e)}var U5e=Object.defineProperty,VU=Object.getOwnPropertySymbols,F5e=Object.prototype.hasOwnProperty,z5e=Object.prototype.propertyIsEnumerable,rS=(t,e,n)=>e in t?U5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,GU=(t,e)=>{for(var n in e||(e={}))F5e.call(e,n)&&rS(t,n,e[n]);if(VU)for(var n of VU(e))z5e.call(e,n)&&rS(t,n,e[n]);return t},Ci=(t,e,n)=>rS(t,typeof e!="symbol"?e+"":e,n);let kd=class extends Bwe{constructor(e,n,r,i=da,s=void 0){super(e,n,r,i),this.core=e,this.logger=n,this.name=r,Ci(this,"map",new Map),Ci(this,"version",Wbe),Ci(this,"cached",[]),Ci(this,"initialized",!1),Ci(this,"getKey"),Ci(this,"storagePrefix",da),Ci(this,"recentlyDeleted",[]),Ci(this,"recentlyDeletedLimit",200),Ci(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!vr(o)?this.map.set(this.getKey(o),o):Jme(o)?this.map.set(o.id,o):Qme(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ci(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ci(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ci(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>j5e(a[c],o[c]))):this.values)),Ci(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=GU(GU({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ci(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Pt(n,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Ft(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:i}=Ee("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}};var q5e=Object.defineProperty,H5e=(t,e,n)=>e in t?q5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,at=(t,e,n)=>H5e(t,typeof e!="symbol"?e+"":e,n);let W5e=class{constructor(e,n){this.core=e,this.logger=n,at(this,"name",Zbe),at(this,"version",Ybe),at(this,"events",new hf),at(this,"pairings"),at(this,"initialized",!1),at(this,"storagePrefix",da),at(this,"ignoredPayloadTypes",[yc]),at(this,"registeredMethods",[]),at(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),at(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),at(this,"create",async r=>{this.isInitialized();const i=N_(),s=await this.core.crypto.setSymKey(i),o=Mn(X.FIVE_MINUTES),a={protocol:wU},c={topic:s,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=Aj({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Od.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:r==null?void 0:r.transportType}),{topic:s,uri:l}}),at(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[ha.pairing_started]}});this.isValidPair(r,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=xj(r.uri);i.props.properties.topic=s,i.addTrace(ha.pairing_uri_validation_success),i.addTrace(ha.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(ha.existing_pairing),u.active)throw i.setError(Ec.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(ha.pairing_not_expired)}const d=c||Mn(X.FIVE_MINUTES),h={topic:s,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(s,d),await this.pairings.set(s,h),i.addTrace(ha.store_new_pairing),r.activatePairing&&await this.activate({topic:s}),this.events.emit(Od.create,h),i.addTrace(ha.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(ha.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Ec.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(f){throw i.setError(Ec.subscribe_pairing_topic_failure),f}return i.addTrace(ha.subscribe_pairing_topic_success),h}),at(this,"activate",async({topic:r})=>{this.isInitialized();const i=Mn(X.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),at(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=_d();this.events.once($t("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),at(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),at(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),at(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),at(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Nt("USER_DISCONNECTED")),await this.deletePairing(i))}),at(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(i);return Aj({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),at(this,"sendRequest",async(r,i,s)=>{const o=Xr(i,s),a=await this.core.crypto.encode(r,o),c=lm[i].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),at(this,"sendResult",async(r,i,s)=>{const o=Hl(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=lm[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),at(this,"sendError",async(r,i,s)=>{const o=mp(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=lm[c]?lm[c].res:lm.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),at(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Nt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),at(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>Dl(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),at(this,"onRelayEventRequest",async r=>{const{topic:i,payload:s}=r;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),at(this,"onRelayEventResponse",async r=>{const{topic:i,payload:s}=r,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),at(this,"onPairingPingRequest",async(r,i)=>{const{id:s}=i;try{this.isValidPing({topic:r}),await this.sendResult(s,r,!0),this.events.emit(Od.ping,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),at(this,"onPairingPingResponse",(r,i)=>{const{id:s}=i;setTimeout(()=>{Bn(i)?this.events.emit($t("pairing_ping",s),{}):hn(i)&&this.events.emit($t("pairing_ping",s),{error:i.error})},500)}),at(this,"onPairingDeleteRequest",async(r,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Od.delete,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),at(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Nt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,r,a),this.logger.error(a)}catch(a){await this.sendError(s,r,a),this.logger.error(a)}}),at(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Nt("WC_METHOD_UNSUPPORTED",r))}),at(this,"isValidPair",(r,i)=>{var s;if(!vi(r)){const{message:a}=Ee("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(Ec.malformed_pairing_uri),new Error(a)}if(!Yme(r.uri)){const{message:a}=Ee("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(Ec.malformed_pairing_uri),new Error(a)}const o=xj(r==null?void 0:r.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=Ee("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Ec.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Ee("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Ec.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&X.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(Ec.pairing_expired);const{message:a}=Ee("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),at(this,"isValidPing",async r=>{if(!vi(r)){const{message:s}=Ee("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),at(this,"isValidDisconnect",async r=>{if(!vi(r)){const{message:s}=Ee("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),at(this,"isValidPairingTopic",async r=>{if(!$n(r,!1)){const{message:i}=Ee("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=Ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(Dl(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=Ee("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=e,this.logger=Pt(n,this.name),this.pairings=new kd(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ft(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(er.message,async e=>{const{topic:n,message:r,transportType:i}=e;if(this.pairings.keys.includes(n)&&i!==Xt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const s=await this.core.crypto.decode(n,r);yp(s)?(this.core.history.set(n,s),await this.onRelayEventRequest({topic:n,payload:s})):Pd(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:n,payload:s}),this.core.history.delete(n,s.id)),await this.core.relayer.messages.ack(n,r)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(js.expired,async e=>{const{topic:n}=gL(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Od.expire,{topic:n}))})}};var K5e=Object.defineProperty,V5e=(t,e,n)=>e in t?K5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_r=(t,e,n)=>V5e(t,typeof e!="symbol"?e+"":e,n);let G5e=class extends Nwe{constructor(e,n){super(e,n),this.core=e,this.logger=n,_r(this,"records",new Map),_r(this,"events",new An.EventEmitter),_r(this,"name",Jbe),_r(this,"version",Qbe),_r(this,"cached",[]),_r(this,"initialized",!1),_r(this,"storagePrefix",da),_r(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),_r(this,"set",(r,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:s,expiry:Mn(X.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(vo.created,o)}),_r(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=hn(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit(vo.updated,i))}),_r(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),_r(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===r){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(vo.deleted,s)}}),this.persist()}),_r(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),_r(this,"on",(r,i)=>{this.events.on(r,i)}),_r(this,"once",(r,i)=>{this.events.once(r,i)}),_r(this,"off",(r,i)=>{this.events.off(r,i)}),_r(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Pt(n,this.name)}get context(){return Ft(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Xr(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(vo.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(vo.created,e=>{const n=vo.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(vo.updated,e=>{const n=vo.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(vo.deleted,e=>{const n=vo.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(is.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{X.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(vo.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Z5e=Object.defineProperty,Y5e=(t,e,n)=>e in t?Z5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jr=(t,e,n)=>Y5e(t,typeof e!="symbol"?e+"":e,n);let J5e=class extends Lwe{constructor(e,n){super(e,n),this.core=e,this.logger=n,jr(this,"expirations",new Map),jr(this,"events",new An.EventEmitter),jr(this,"name",Xbe),jr(this,"version",eve),jr(this,"cached",[]),jr(this,"initialized",!1),jr(this,"storagePrefix",da),jr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),jr(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),jr(this,"set",(r,i)=>{this.isInitialized();const s=this.formatTarget(r),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(js.created,{target:s,expiration:o})}),jr(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),jr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(js.deleted,{target:i,expiration:s})}}),jr(this,"on",(r,i)=>{this.events.on(r,i)}),jr(this,"once",(r,i)=>{this.events.once(r,i)}),jr(this,"off",(r,i)=>{this.events.off(r,i)}),jr(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Pt(n,this.name)}get context(){return Ft(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return tge(e);if(typeof e=="number")return nge(e);const{message:n}=Ee("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(js.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;X.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(js.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(is.pulse,()=>this.checkExpirations()),this.events.on(js.created,e=>{const n=js.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(js.expired,e=>{const n=js.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(js.deleted,e=>{const n=js.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Q5e=Object.defineProperty,X5e=(t,e,n)=>e in t?Q5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pn=(t,e,n)=>X5e(t,typeof e!="symbol"?e+"":e,n);let e3e=class extends jwe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Pn(this,"name",tve),Pn(this,"abortController"),Pn(this,"isDevEnv"),Pn(this,"verifyUrlV3",rve),Pn(this,"storagePrefix",da),Pn(this,"version",gU),Pn(this,"publicKey"),Pn(this,"fetchPromise"),Pn(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&X.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Pn(this,"register",async i=>{if(!Qf()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=Xi(),u=this.startAbortTimer(X.ONE_SECOND*5),d=await new Promise((h,f)=>{const g=()=>{window.removeEventListener("message",m),l.body.removeChild(p),f("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const p=l.createElement("iframe");p.src=c,p.style.display="none",p.addEventListener("error",g,{signal:this.abortController.signal});const m=y=>{if(y.data&&typeof y.data=="string")try{const w=JSON.parse(y.data);if(w.type==="verify_attestation"){if(Yf(w.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(p),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",m),h(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(p),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Pn(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(Yf(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,c)}),Pn(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(X.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Pn(this,"getVerifyUrl",i=>{let s=i||um;return ive.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${um}`),s=um),s}),Pn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(X.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),Pn(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),Pn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Pn(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Pn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Pn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),Pn(this,"validateAttestation",(i,s)=>{const o=Pme(i,s.publicKey),a={hasExpired:X.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Pt(n,this.name),this.abortController=new AbortController,this.isDevEnv=o_(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Ft(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),X.toMiliseconds(e))}};var t3e=Object.defineProperty,n3e=(t,e,n)=>e in t?t3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ZU=(t,e,n)=>n3e(t,typeof e!="symbol"?e+"":e,n);let r3e=class extends Uwe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,ZU(this,"context",sve),ZU(this,"registerDeviceToken",async r=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=r,c=`${ove}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=Pt(n,this.context)}};var i3e=Object.defineProperty,YU=Object.getOwnPropertySymbols,s3e=Object.prototype.hasOwnProperty,o3e=Object.prototype.propertyIsEnumerable,iS=(t,e,n)=>e in t?i3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mm=(t,e)=>{for(var n in e||(e={}))s3e.call(e,n)&&iS(t,n,e[n]);if(YU)for(var n of YU(e))o3e.call(e,n)&&iS(t,n,e[n]);return t},tr=(t,e,n)=>iS(t,typeof e!="symbol"?e+"":e,n);let a3e=class extends Fwe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,tr(this,"context",cve),tr(this,"storagePrefix",da),tr(this,"storageVersion",ave),tr(this,"events",new Map),tr(this,"shouldPersist",!1),tr(this,"init",async()=>{if(!o_())try{const i={eventId:yL(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:fL(this.core.relayer.protocol,this.core.relayer.version,K_)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),tr(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=yL(),u=this.core.projectId||"",d=Date.now(),h=mm({eventId:l,timestamp:d,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),tr(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return mm(mm({},a),this.setMethods(a.eventId))}),tr(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),tr(this,"setEventListeners",()=>{this.core.heartbeat.on(is.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{X.fromMiliseconds(Date.now())-X.fromMiliseconds(i.timestamp)>lve&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),tr(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),tr(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),tr(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),tr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),tr(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,mm(mm({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),tr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),tr(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${uve}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${K_}${s}`,{method:"POST",body:JSON.stringify(i)})}),tr(this,"getAppDomain",()=>hL().url),this.logger=Pt(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var c3e=Object.defineProperty,JU=Object.getOwnPropertySymbols,l3e=Object.prototype.hasOwnProperty,u3e=Object.prototype.propertyIsEnumerable,sS=(t,e,n)=>e in t?c3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,QU=(t,e)=>{for(var n in e||(e={}))l3e.call(e,n)&&sS(t,n,e[n]);if(JU)for(var n of JU(e))u3e.call(e,n)&&sS(t,n,e[n]);return t},Zt=(t,e,n)=>sS(t,typeof e!="symbol"?e+"":e,n);const d3e=class EV extends $we{constructor(e){var n;super(e),Zt(this,"protocol",pU),Zt(this,"version",gU),Zt(this,"name",_2),Zt(this,"relayUrl"),Zt(this,"projectId"),Zt(this,"customStoragePrefix"),Zt(this,"events",new An.EventEmitter),Zt(this,"logger"),Zt(this,"heartbeat"),Zt(this,"relayer"),Zt(this,"crypto"),Zt(this,"storage"),Zt(this,"history"),Zt(this,"expirer"),Zt(this,"pairing"),Zt(this,"verify"),Zt(this,"echoClient"),Zt(this,"linkModeSupportedApps"),Zt(this,"eventClient"),Zt(this,"initialized",!1),Zt(this,"logChunkController"),Zt(this,"on",(a,c)=>this.events.on(a,c)),Zt(this,"once",(a,c)=>this.events.once(a,c)),Zt(this,"off",(a,c)=>this.events.off(a,c)),Zt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Zt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Xt.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||bU,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=wc({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:Nbe.logger,name:_2}),{logger:s,chunkLoggerController:o}=F_({opts:i,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Pt(s,this.name),this.heartbeat=new jj,this.crypto=new L2e(this,this.logger,e==null?void 0:e.keychain),this.history=new G5e(this,this.logger),this.expirer=new J5e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new qj(QU(QU({},kbe),e==null?void 0:e.storageOptions)),this.relayer=new d5e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new W5e(this,this.logger),this.verify=new e3e(this,this.logger,this.storage),this.echoClient=new r3e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new a3e(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new EV(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(Kbe,r),n}get context(){return Ft(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(vU,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(vU)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&process.env.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}},XU="wc",eF=2,tF="client",oS=`${XU}@${eF}:${tF}:`,aS={name:tF,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},nF="WALLETCONNECT_DEEPLINK_CHOICE",h3e="proposal",rF="Proposal expired",f3e="session",bp=X.SEVEN_DAYS,p3e="engine",nr={wc_sessionPropose:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1104},res:{ttl:X.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1106},res:{ttl:X.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1112},res:{ttl:X.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1114},res:{ttl:X.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:X.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:X.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1119}}},cS={min:X.FIVE_MINUTES,max:X.SEVEN_DAYS},pa={idle:"IDLE",active:"ACTIVE"},iF={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},g3e="request",m3e=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],y3e="wc",w3e="auth",b3e="authKeys",v3e="pairingTopics",E3e="requests",I2=`${y3e}@${1.5}:${w3e}:`,$2=`${I2}:PUB_KEY`;var C3e=Object.defineProperty,_3e=Object.defineProperties,S3e=Object.getOwnPropertyDescriptors,sF=Object.getOwnPropertySymbols,x3e=Object.prototype.hasOwnProperty,A3e=Object.prototype.propertyIsEnumerable,lS=(t,e,n)=>e in t?C3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qt=(t,e)=>{for(var n in e||(e={}))x3e.call(e,n)&&lS(t,n,e[n]);if(sF)for(var n of sF(e))A3e.call(e,n)&&lS(t,n,e[n]);return t},ei=(t,e)=>_3e(t,S3e(e)),pe=(t,e,n)=>lS(t,typeof e!="symbol"?e+"":e,n);let I3e=class extends Wwe{constructor(e){super(e),pe(this,"name",p3e),pe(this,"events",new hf),pe(this,"initialized",!1),pe(this,"requestQueue",{state:pa.idle,queue:[]}),pe(this,"sessionRequestQueue",{state:pa.idle,queue:[]}),pe(this,"requestQueueDelay",X.ONE_SECOND),pe(this,"expectedPairingMethodMap",new Map),pe(this,"recentlyDeletedMap",new Map),pe(this,"recentlyDeletedLimit",200),pe(this,"relayMessageCache",[]),pe(this,"pendingSessions",new Map),pe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(nr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},X.toMiliseconds(this.requestQueueDelay)))}),pe(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ei(qt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=Wme(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=i,d,h=!1;try{if(u){const A=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=A.active}}catch(A){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),A}if(!u||!h){const{topic:A,uri:$}=await this.client.core.pairing.create();u=A,d=$}if(!u){const{message:A}=Ee("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(A)}const f=await this.client.core.crypto.generateKeyPair(),g=nr.wc_sessionPropose.req.ttl||X.FIVE_MINUTES,p=Mn(g),m=ei(qt(qt({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:wU}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:p,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Xn()}),y=$t("session_connect",m.id),{reject:w,resolve:b,done:v}=_d(g,rF),C=({id:A})=>{A===m.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(m.id),this.events.emit(y,{error:{message:rF,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(y,({error:A,session:$})=>{this.client.events.off("proposal_expire",C),A?w(A):$&&b($)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:d,approval:v}}),pe(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),pe(this,"approve",async n=>{var r,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Eo.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(P){throw o.setError(Td.no_internet_connection),P}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(P){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Td.proposal_not_found),P}try{await this.isValidApprove(n)}catch(P){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Td.session_approve_namespace_validation_failure),P}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:p,requiredNamespaces:m,optionalNamespaces:y}=f;let w=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:g});w||(w=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Eo.session_approve_started,properties:{topic:g,trace:[Eo.session_approve_started,Eo.session_namespaces_validation_success]}}));const b=await this.client.core.crypto.generateKeyPair(),v=p.publicKey,C=await this.client.core.crypto.generateSharedKey(b,v),A=qt(qt(qt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:b,metadata:this.client.metadata},expiry:Mn(bp)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),$=Xt.relay;w.addTrace(Eo.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:$})}catch(P){throw w.setError(Td.subscribe_session_topic_failure),P}w.addTrace(Eo.subscribe_session_topic_success);const R=ei(qt({},A),{topic:C,requiredNamespaces:m,optionalNamespaces:y,pairingTopic:g,acknowledged:!1,self:A.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:b,transportType:Xt.relay});await this.client.session.set(C,R),w.addTrace(Eo.store_session);try{w.addTrace(Eo.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:A,throwOnFailedPublish:!0}).catch(P=>{throw w==null||w.setError(Td.session_settle_publish_failure),P}),w.addTrace(Eo.session_settle_publish_success),w.addTrace(Eo.publishing_session_approve),await this.sendResult({id:a,topic:g,result:{relay:{protocol:c??"irn"},responderPublicKey:b},throwOnFailedPublish:!0}).catch(P=>{throw w==null||w.setError(Td.session_approve_publish_failure),P}),w.addTrace(Eo.session_approve_publish_success)}catch(P){throw this.client.logger.error(P),this.client.session.delete(C,Nt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),P}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:p.metadata}),await this.client.proposal.delete(a,Nt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(C,Mn(bp)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),pe(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:i}=n;let s;try{s=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}s&&(await this.sendError({id:r,topic:s,error:i,rpcOpts:nr.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Nt("USER_DISCONNECTED")))}),pe(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:i}=n,{done:s,resolve:o,reject:a}=_d(),c=Xn(),l=ss().toString(),u=this.client.session.get(r).namespaces;return this.events.once($t("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:s}}),pe(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,i=Xn(),{done:s,resolve:o,reject:a}=_d();return this.events.once($t("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Mn(bp)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),pe(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:i,topic:s,expiry:o=nr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(s);(a==null?void 0:a.transportType)===Xt.relay&&await this.confirmOnlineStateOrThrow();const c=Xn(),l=ss().toString(),{done:u,resolve:d,reject:h}=_d(o,"Request expired. Please try again.");this.events.once($t("session_request",c),({error:y,result:w})=>{y?h(y):d(w)});const f="wc_sessionRequest",g=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(g)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:{request:ei(qt({},i),{expiryTimestamp:Mn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:g}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),await u();const p={request:ei(qt({},i),{expiryTimestamp:Mn(o)}),chainId:r},m=this.shouldSetTVF(f,p);return await Promise.all([new Promise(async y=>{await this.sendRequest(qt({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:p,expiry:o,throwOnFailedPublish:!0},m&&{tvf:this.getTVFParams(c,p)})).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),y()}),new Promise(async y=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const b=await oge(this.client.core.storage,nF);await rge({id:c,topic:s,wcDeepLink:b})}y()}),u()]).then(y=>y[2])}),pe(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:i}=n,{id:s}=i,o=this.client.session.get(r);o.transportType===Xt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Bn(i)?await this.sendResult({id:s,topic:r,result:i.result,throwOnFailedPublish:!0,appLink:a}):hn(i)&&await this.sendError({id:s,topic:r,error:i.error,appLink:a}),this.cleanupAfterResponse(n)}),pe(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=n;if(this.client.session.keys.includes(r)){const i=Xn(),s=ss().toString(),{done:o,resolve:a,reject:c}=_d();this.events.once($t("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),pe(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:i,chainId:s}=n,o=ss().toString(),a=Xn();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),pe(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Nt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=Ee("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),pe(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>Gme(r,n)))),pe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),pe(this,"authenticate",async(n,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(n);const s=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?Xt.link_mode:Xt.relay;o===Xt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:g,methods:p=[],expiry:m}=n,y=[...n.resources||[]],{topic:w,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:b}});const v=await this.client.core.crypto.generateKeyPair(),C=u2(v);if(await Promise.all([this.client.auth.authKeys.set($2,{responseTopic:C,publicKey:v}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:w})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),p.length>0){const{namespace:x}=Jf(a[0]);let T=Qge(x,"request",p);n2(y)&&(T=e1e(T,y.pop())),y.push(T)}const A=m&&m>nr.wc_sessionAuthenticate.req.ttl?m:nr.wc_sessionAuthenticate.req.ttl,$={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:g,resources:y},requester:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:Mn(A)},R={eip155:{chains:a,methods:[...new Set(["personal_sign",...p])],events:["chainChanged","accountsChanged"]}},P={requiredNamespaces:{},optionalNamespaces:R,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:Mn(nr.wc_sessionPropose.req.ttl),id:Xn()},{done:L,resolve:U,reject:D}=_d(A,"Request expired"),j=Xn(),I=$t("session_connect",P.id),E=$t("session_request",j),S=async({error:x,session:T})=>{this.events.off(E,k),x?D(x):T&&U({session:T})},k=async x=>{var T,M,O;if(await this.deletePendingAuthRequest(j,{message:"fulfilled",code:0}),x.error){const K=Nt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return x.error.code===K.code?void 0:(this.events.off(I,S),D(x.error.message))}await this.deleteProposal(P.id),this.events.off(I,S);const{cacaos:N,responder:B}=x.result,F=[],z=[];for(const K of N){await NL({cacao:K,projectId:this.client.core.projectId})||(this.client.logger.error(K,"Signature verification failed"),D(Nt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Y}=K,J=n2(Y.resources),G=[d_(Y.iss)],te=t2(Y.iss);if(J){const se=ML(J),he=BL(J);F.push(...se),G.push(...he)}for(const se of G)z.push(`${se}:${te}`)}const q=await this.client.core.crypto.generateSharedKey(v,B.publicKey);let H;F.length>0&&(H={topic:q,acknowledged:!0,self:{publicKey:v,metadata:this.client.metadata},peer:B,controller:B.publicKey,expiry:Mn(bp),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:Oj([...new Set(F)],[...new Set(z)]),transportType:o},await this.client.core.relayer.subscribe(q,{transportType:o}),await this.client.session.set(q,H),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:B.metadata}),H=this.client.session.get(q)),(T=this.client.metadata.redirect)!=null&&T.linkMode&&(M=B.metadata.redirect)!=null&&M.linkMode&&(O=B.metadata.redirect)!=null&&O.universal&&r&&(this.client.core.addLinkModeSupportedApp(B.metadata.redirect.universal),this.client.session.update(q,{transportType:Xt.link_mode})),U({auths:N,session:H})};this.events.once(I,S),this.events.once(E,k);let _;try{if(s){const x=Xr("wc_sessionAuthenticate",$,j);this.client.core.history.set(w,x);const T=await this.client.core.crypto.encode("",x,{type:X1,encoding:Fl});_=h2(r,w,T)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:$,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:j}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:P,expiry:nr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:P.id})])}catch(x){throw this.events.off(I,S),this.events.off(E,k),x}return await this.setProposal(P.id,P),await this.setAuthRequest(j,{request:ei(qt({},$),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:_??b,response:L}}),pe(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:i}=n,s=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Nd.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw s.setError(dm.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw s.setError(dm.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Xt.relay;a===Xt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=u2(c),d={type:yc,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const m of i){if(!await NL({cacao:m,projectId:this.client.core.projectId})){s.setError(dm.invalid_cacao);const C=Nt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}s.addTrace(Nd.cacaos_verified);const{p:y}=m,w=n2(y.resources),b=[d_(y.iss)],v=t2(y.iss);if(w){const C=ML(w),A=BL(w);h.push(...C),b.push(...A)}for(const C of b)f.push(`${C}:${v}`)}const g=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(Nd.create_authenticated_session_topic);let p;if((h==null?void 0:h.length)>0){p={topic:g,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Mn(bp),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Oj([...new Set(h)],[...new Set(f)]),transportType:a},s.addTrace(Nd.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:a})}catch(m){throw s.setError(dm.subscribe_authenticated_session_topic_failure),m}s.addTrace(Nd.subscribe_authenticated_session_topic_success),await this.client.session.set(g,p),s.addTrace(Nd.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(Nd.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw s.setError(dm.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:p}}),pe(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:i}=n,s=this.getPendingAuthRequest(r);if(!s)throw new Error(`Could not find pending auth request with id ${r}`);s.transportType===Xt.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=u2(o),l={type:yc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:i,encodeOpts:l,rpcOpts:nr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Nt("USER_DISCONNECTED"))}),pe(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:i}=n;return kL(r,i)}),pe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),pe(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&s.topic&&s.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),pe(this,"deleteSession",async n=>{var r;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,Nt("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(nF).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,Nt("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=pa.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),pe(this,"deleteProposal",async(n,r)=>{if(r)try{const i=this.client.proposal.get(n),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(Td.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Nt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),pe(this,"deletePendingSessionRequest",async(n,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==n),i&&(this.sessionRequestQueue.state=pa.idle,this.client.events.emit("session_request_expire",{id:n}))}),pe(this,"deletePendingAuthRequest",async(n,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)])}),pe(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),pe(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Mn(nr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),pe(this,"setAuthRequest",async(n,r)=>{const{request:i,pairingTopic:s,transportType:o=Xt.relay}=r;this.client.core.expirer.set(n,i.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:n,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),pe(this,"setPendingSessionRequest",async n=>{const{id:r,topic:i,params:s,verifyContext:o}=n,a=s.request.expiryTimestamp||Mn(nr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:i,params:s,verifyContext:o})}),pe(this,"sendRequest",async n=>{const{topic:r,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Xr(i,s,c);let f;const g=!!u;try{const y=g?Fl:wo;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let p;if(m3e.includes(i)){const y=la(JSON.stringify(h)),w=la(f);p=await this.client.core.verify.register({id:w,decryptedId:y})}const m=nr[i].req;if(m.attestation=p,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(r,h),g){const y=h2(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=nr[i].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=ei(qt({},d),{correlationId:h.id}),l?(y.internal=ei(qt({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(w=>this.client.logger.error(w))}return h.id}),pe(this,"sendResult",async n=>{const{id:r,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=Hl(r,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?Fl:wo;u=await this.client.core.crypto.encode(i,l,ei(qt({},a||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),g}let h,f;try{h=await this.client.core.history.get(i,r);const g=h.request;try{this.shouldSetTVF(g.method,g.params)&&(f=this.getTVFParams(r,g.params,s))}catch(p){this.client.logger.warn("sendResult() -> getTVFParams() failed",p)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),g}if(d){const g=h2(c,i,u);await global.Linking.openURL(g,this.client.name)}else{const g=h.request.method,p=nr[g].res;p.tvf=ei(qt({},f),{correlationId:r}),o?(p.internal=ei(qt({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,p)):this.client.core.relayer.publish(i,u,p).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),pe(this,"sendError",async n=>{const{id:r,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=mp(r,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Fl:wo;u=await this.client.core.crypto.encode(i,l,ei(qt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),f}let h;try{h=await this.client.core.history.get(i,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),f}if(d){const f=h2(c,i,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,g=a||nr[f].res;this.client.core.relayer.publish(i,u,g)}await this.client.core.history.resolve(l)}),pe(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(i=>{let s=!1;Dl(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&n.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Dl(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...n.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),pe(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),pe(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),pe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===pa.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=pa.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=pa.idle}),pe(this,"processRequest",async n=>{const{topic:r,payload:i,attestation:s,transportType:o,encryptedId:a}=n,c=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),pe(this,"onRelayEventResponse",async n=>{const{topic:r,payload:i,transportType:s}=n,o=(await this.client.core.history.get(r,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),pe(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:i}=Ee("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),pe(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:i}=n,s=this.expectedPairingMethodMap.get(r);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),pe(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:i,attestation:s,encryptedId:o}=n,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Ec.proposal_listener_not_found)),this.isValidConnect(qt({},i.params));const u=a.expiryTimestamp||Mn(nr.wc_sessionPropose.req.ttl),d=qt({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:s,hash:la(JSON.stringify(i)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(ha.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:nr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),pe(this,"onSessionProposeResponse",async(n,r,i)=>{const{id:s}=r;if(Bn(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:n,proposalId:s,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(hn(r)){await this.client.proposal.delete(s,Nt("USER_DISCONNECTED"));const o=$t("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),pe(this,"onSessionSettleRequest",async(n,r)=>{const{id:i,params:s}=r;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(m=>m.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const g=this.client.proposal.get(f.proposalId),p=ei(qt(qt(qt({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Xt.relay});await this.client.session.set(p.topic,p),await this.setExpiry(p.topic,p.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:p.peer.metadata}),this.client.events.emit("session_connect",{session:p}),this.events.emit($t("session_connect",f.proposalId),{session:p}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(p),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),pe(this,"onSessionSettleResponse",async(n,r)=>{const{id:i}=r;Bn(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit($t("session_approve",i),{})):hn(r)&&(await this.client.session.delete(n,Nt("USER_DISCONNECTED")),this.events.emit($t("session_approve",i),{error:r.error}))}),pe(this,"onSessionUpdateRequest",async(n,r)=>{const{params:i,id:s}=r;try{const o=`${n}_session_update`,a=rm.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:n,error:Nt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(qt({topic:n},i));try{rm.set(o,s),await this.client.session.update(n,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw rm.delete(o),c}this.client.events.emit("session_update",{id:s,topic:n,params:i})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),pe(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),pe(this,"onSessionUpdateResponse",(n,r)=>{const{id:i}=r,s=$t("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Bn(r)?this.events.emit($t("session_update",i),{}):hn(r)&&this.events.emit($t("session_update",i),{error:r.error})}),pe(this,"onSessionExtendRequest",async(n,r)=>{const{id:i}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Mn(bp)),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),pe(this,"onSessionExtendResponse",(n,r)=>{const{id:i}=r,s=$t("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Bn(r)?this.events.emit($t("session_extend",i),{}):hn(r)&&this.events.emit($t("session_extend",i),{error:r.error})}),pe(this,"onSessionPingRequest",async(n,r)=>{const{id:i}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),pe(this,"onSessionPingResponse",(n,r)=>{const{id:i}=r,s=$t("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Bn(r)?this.events.emit($t("session_ping",i),{}):hn(r)&&this.events.emit($t("session_ping",i),{error:r.error})},500)}),pe(this,"onSessionDeleteRequest",async(n,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(er.publish,async()=>{s(await this.deleteSession({topic:n,id:i}))})}),this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Nt("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),pe(this,"onSessionRequest",async n=>{var r,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(qt({topic:o},h));const f=this.client.session.get(o),g=await this.getVerifyContext({attestationId:c,hash:la(JSON.stringify(Xr("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),p={id:d,topic:o,params:h,verifyContext:g};await this.setPendingSessionRequest(p),u===Xt.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=f.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(p):(this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),pe(this,"onSessionRequestResponse",(n,r)=>{const{id:i}=r,s=$t("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Bn(r)?this.events.emit($t("session_request",i),{result:r.result}):hn(r)&&this.events.emit($t("session_request",i),{error:r.error})}),pe(this,"onSessionEventRequest",async(n,r)=>{const{id:i,params:s}=r;try{const o=`${n}_session_event_${s.event.name}`,a=rm.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(qt({topic:n},s)),this.client.events.emit("session_event",{id:i,topic:n,params:s}),rm.set(o,i)}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),pe(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Bn(r)?this.events.emit($t("session_request",i),{result:r.result}):hn(r)&&this.events.emit($t("session_request",i),{error:r.error})}),pe(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=s.params,h=await this.getVerifyContext({attestationId:o,hash:la(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(s.id,{request:f,pairingTopic:i,transportType:c}),c===Xt.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(s.params.requester.metadata,c),f={type:yc,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:f,rpcOpts:nr.wc_sessionAuthenticate.autoReject,appLink:h})}}),pe(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),pe(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=pa.idle,this.processSessionRequestQueue()},X.toMiliseconds(this.requestQueueDelay))}),pe(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===n&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=$t("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit($t("session_request",s.request.id),{error:r})})}),pe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===pa.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=pa.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),pe(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),pe(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Xr("wc_sessionPropose",ei(qt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),pe(this,"isValidConnect",async n=>{if(!vi(n)){const{message:l}=Ee("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=n;if(vr(r)||await this.isValidPairingTopic(r),!oye(c,!0)){const{message:l}=Ee("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!vr(i)&&zl(i)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(i,"requiredNamespaces")}if(!vr(s)&&zl(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),vr(o)||this.validateSessionProps(o,"sessionProperties"),!vr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),pe(this,"validateNamespaces",(n,r)=>{const i=sye(n,"connect()",r);if(i)throw new Error(i.message)}),pe(this,"isValidApprove",async n=>{if(!vi(n))throw new Error(Ee("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=R_(i,"approve()");if(l)throw new Error(l.message);const u=Mj(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!$n(s,!0)){const{message:d}=Ee("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}if(vr(o)||this.validateSessionProps(o,"sessionProperties"),!vr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(i));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),pe(this,"isValidReject",async n=>{if(!vi(n)){const{message:s}=Ee("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(s)}const{id:r,reason:i}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!cye(i)){const{message:s}=Ee("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),pe(this,"isValidSessionSettleRequest",n=>{if(!vi(n)){const{message:l}=Ee("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:i,namespaces:s,expiry:o}=n;if(!kj(r)){const{message:l}=Ee("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Xme(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=R_(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Dl(o)){const{message:l}=Ee("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),pe(this,"isValidUpdate",async n=>{if(!vi(n)){const{message:c}=Ee("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:i}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const s=this.client.session.get(r),o=R_(i,"update()");if(o)throw new Error(o.message);const a=Mj(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),pe(this,"isValidExtend",async n=>{if(!vi(n)){const{message:i}=Ee("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(i)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),pe(this,"isValidRequest",async n=>{if(!vi(n)){const{message:c}=Ee("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:i,chainId:s,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!Rj(a,s)){const{message:c}=Ee("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!lye(i)){const{message:c}=Ee("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!hye(a,s,i.method)){const{message:c}=Ee("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!mye(o,cS)){const{message:c}=Ee("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${cS.min} and ${cS.max}`);throw new Error(c)}}),pe(this,"isValidRespond",async n=>{var r;if(!vi(n)){const{message:o}=Ee("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:i,response:s}=n;try{await this.isValidSessionTopic(i)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!uye(s)){const{message:o}=Ee("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),pe(this,"isValidPing",async n=>{if(!vi(n)){const{message:i}=Ee("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),pe(this,"isValidEmit",async n=>{if(!vi(n)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:i,chainId:s}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!Rj(o,s)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!dye(i)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!fye(o,s,i.name)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),pe(this,"isValidDisconnect",async n=>{if(!vi(n)){const{message:i}=Ee("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),pe(this,"isValidAuthenticate",n=>{const{chains:r,uri:i,domain:s,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!$n(i,!1))throw new Error("uri is required parameter");if(!$n(s,!1))throw new Error("domain is required parameter");if(!$n(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Jf(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Jf(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),pe(this,"getVerifyContext",async n=>{const{attestationId:r,hash:i,encryptedId:s,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||um,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Xt.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),pe(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((i,s)=>{if(i==null){const{message:o}=Ee("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(n)[s]}`);throw new Error(o)}})}),pe(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),pe(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),pe(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:i}=Ee("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(i)}}),pe(this,"isLinkModeEnabled",(n,r)=>{var i,s,o,a,c,l,u,d,h;return!n||r!==Xt.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),pe(this,"getAppLinkIfEnabled",(n,r)=>{var i;return this.isLinkModeEnabled(n,r)?(i=n==null?void 0:n.redirect)==null?void 0:i.universal:void 0}),pe(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=mL(n,"topic")||"",i=decodeURIComponent(mL(n,"wc_ev")||""),s=this.client.session.keys.includes(r);s&&this.client.session.update(r,{transportType:Xt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:s})}),pe(this,"registerLinkModeListeners",async()=>{var n;if(o_()||Ml()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),pe(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:i}=r;return Object.keys(iF).includes(i.method)}),pe(this,"getTVFParams",(n,r,i)=>{var s,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,i);return ei(qt({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(s=r.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),pe(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const i=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),pe(this,"extractTxHashesFromResult",(n,r)=>{try{const i=iF[n];if(typeof r=="string")return[r];const s=r[i.key];if(bo(s))return n==="solana_signAllTransactions"?s.map(o=>Lge(o)):s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,i]of Object.entries(n))for(const s of i)try{await this.onProviderMessageEvent({topic:r,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(er.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes($2)?this.client.auth.authKeys.get($2):{responseTopic:void 0,publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:s===Xt.link_mode?Fl:wo});yp(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:i,transportType:s,encryptedId:la(r)})):Pd(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:s}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(js.expired,async e=>{const{topic:n,id:r}=gL(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ee("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ee("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Od.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Od.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!$n(e,!1)){const{message:n}=Ee("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Dl(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Ee("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!$n(e,!1)){const{message:n}=Ee("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Ee("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Dl(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Ee("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Ee("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if($n(e,!1)){const{message:n}=Ee("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Ee("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!aye(e)){const{message:n}=Ee("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Ee("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Dl(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Ee("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}},$3e=class extends kd{constructor(e,n){super(e,n,h3e,oS),this.core=e,this.logger=n}},P3e=class extends kd{constructor(e,n){super(e,n,f3e,oS),this.core=e,this.logger=n}},O3e=class extends kd{constructor(e,n){super(e,n,g3e,oS,r=>r.id),this.core=e,this.logger=n}},T3e=class extends kd{constructor(e,n){super(e,n,b3e,I2,()=>$2),this.core=e,this.logger=n}},N3e=class extends kd{constructor(e,n){super(e,n,v3e,I2),this.core=e,this.logger=n}},k3e=class extends kd{constructor(e,n){super(e,n,E3e,I2,r=>r.id),this.core=e,this.logger=n}};var R3e=Object.defineProperty,M3e=(t,e,n)=>e in t?R3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uS=(t,e,n)=>M3e(t,typeof e!="symbol"?e+"":e,n);let B3e=class{constructor(e,n){this.core=e,this.logger=n,uS(this,"authKeys"),uS(this,"pairingTopics"),uS(this,"requests"),this.authKeys=new T3e(this.core,this.logger),this.pairingTopics=new N3e(this.core,this.logger),this.requests=new k3e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}};var D3e=Object.defineProperty,L3e=(t,e,n)=>e in t?D3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ct=(t,e,n)=>L3e(t,typeof e!="symbol"?e+"":e,n);let j3e=class CV extends Hwe{constructor(e){super(e),ct(this,"protocol",XU),ct(this,"version",eF),ct(this,"name",aS.name),ct(this,"metadata"),ct(this,"core"),ct(this,"logger"),ct(this,"events",new An.EventEmitter),ct(this,"engine"),ct(this,"session"),ct(this,"proposal"),ct(this,"pendingRequest"),ct(this,"auth"),ct(this,"signConfig"),ct(this,"on",(r,i)=>this.events.on(r,i)),ct(this,"once",(r,i)=>this.events.once(r,i)),ct(this,"off",(r,i)=>this.events.off(r,i)),ct(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),ct(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),ct(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),ct(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||aS.name,this.metadata=J0e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ql(wc({level:(e==null?void 0:e.logger)||aS.logger}));this.core=(e==null?void 0:e.core)||new d3e(e),this.logger=Pt(n,this.name),this.session=new P3e(this.core,this.logger),this.proposal=new $3e(this.core,this.logger),this.pendingRequest=new O3e(this.core,this.logger),this.engine=new I3e(this),this.auth=new B3e(this.core,this.logger)}static async init(e){const n=new CV(e);return await n.initialize(),n}get context(){return Ft(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},X.toMiliseconds(X.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var dS={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof kr<"u"&&kr,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof kr<"u"&&kr||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(E){return E&&DataView.prototype.isPrototypeOf(E)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(E){return E&&u.indexOf(Object.prototype.toString.call(E))>-1};function h(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(E)||E==="")throw new TypeError('Invalid character in header field name: "'+E+'"');return E.toLowerCase()}function f(E){return typeof E!="string"&&(E=String(E)),E}function g(E){var S={next:function(){var k=E.shift();return{done:k===void 0,value:k}}};return c.iterable&&(S[Symbol.iterator]=function(){return S}),S}function p(E){this.map={},E instanceof p?E.forEach(function(S,k){this.append(k,S)},this):Array.isArray(E)?E.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(S){this.append(S,E[S])},this)}p.prototype.append=function(E,S){E=h(E),S=f(S);var k=this.map[E];this.map[E]=k?k+", "+S:S},p.prototype.delete=function(E){delete this.map[h(E)]},p.prototype.get=function(E){return E=h(E),this.has(E)?this.map[E]:null},p.prototype.has=function(E){return this.map.hasOwnProperty(h(E))},p.prototype.set=function(E,S){this.map[h(E)]=f(S)},p.prototype.forEach=function(E,S){for(var k in this.map)this.map.hasOwnProperty(k)&&E.call(S,this.map[k],k,this)},p.prototype.keys=function(){var E=[];return this.forEach(function(S,k){E.push(k)}),g(E)},p.prototype.values=function(){var E=[];return this.forEach(function(S){E.push(S)}),g(E)},p.prototype.entries=function(){var E=[];return this.forEach(function(S,k){E.push([k,S])}),g(E)},c.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function m(E){if(!E._noBody){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}}function y(E){return new Promise(function(S,k){E.onload=function(){S(E.result)},E.onerror=function(){k(E.error)}})}function w(E){var S=new FileReader,k=y(S);return S.readAsArrayBuffer(E),k}function b(E){var S=new FileReader,k=y(S),_=/charset=([A-Za-z0-9_-]+)/.exec(E.type),x=_?_[1]:"utf-8";return S.readAsText(E,x),k}function v(E){for(var S=new Uint8Array(E),k=new Array(S.length),_=0;_<S.length;_++)k[_]=String.fromCharCode(S[_]);return k.join("")}function C(E){if(E.slice)return E.slice(0);var S=new Uint8Array(E.byteLength);return S.set(new Uint8Array(E)),S.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(E){this.bodyUsed=this.bodyUsed,this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:c.blob&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:c.formData&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():c.arrayBuffer&&c.blob&&l(E)?(this._bodyArrayBuffer=C(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(E)||d(E))?this._bodyArrayBuffer=C(E):this._bodyText=E=Object.prototype.toString.call(E):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var E=m(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var E=m(this);return E||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var E=m(this);if(E)return E;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(v(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function R(E){var S=E.toUpperCase();return $.indexOf(S)>-1?S:E}function P(E,S){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var k=S.body;if(E instanceof P){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,S.headers||(this.headers=new p(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,!k&&E._bodyInit!=null&&(k=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new p(S.headers)),this.method=R(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||function(){if("AbortController"in a){var T=new AbortController;return T.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&k)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(k),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var _=/([?&])_=[^&]*/;if(_.test(this.url))this.url=this.url.replace(_,"$1_="+new Date().getTime());else{var x=/\?/;this.url+=(x.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function L(E){var S=new FormData;return E.trim().split("&").forEach(function(k){if(k){var _=k.split("="),x=_.shift().replace(/\+/g," "),T=_.join("=").replace(/\+/g," ");S.append(decodeURIComponent(x),decodeURIComponent(T))}}),S}function U(E){var S=new p,k=E.replace(/\r?\n[\t ]+/g," ");return k.split("\r").map(function(_){return _.indexOf(`
`)===0?_.substr(1,_.length):_}).forEach(function(_){var x=_.split(":"),T=x.shift().trim();if(T){var M=x.join(":").trim();try{S.append(T,M)}catch(O){console.warn("Response "+O.message)}}}),S}A.call(P.prototype);function D(E,S){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new p(S.headers),this.url=S.url||"",this._initBody(E)}A.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},D.error=function(){var E=new D(null,{status:200,statusText:""});return E.ok=!1,E.status=0,E.type="error",E};var j=[301,302,303,307,308];D.redirect=function(E,S){if(j.indexOf(S)===-1)throw new RangeError("Invalid status code");return new D(null,{status:S,headers:{location:E}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(S,k){this.message=S,this.name=k;var _=Error(S);this.stack=_.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function I(E,S){return new Promise(function(k,_){var x=new P(E,S);if(x.signal&&x.signal.aborted)return _(new o.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function M(){T.abort()}T.onload=function(){var B={statusText:T.statusText,headers:U(T.getAllResponseHeaders()||"")};x.url.indexOf("file://")===0&&(T.status<200||T.status>599)?B.status=200:B.status=T.status,B.url="responseURL"in T?T.responseURL:B.headers.get("X-Request-URL");var F="response"in T?T.response:T.responseText;setTimeout(function(){k(new D(F,B))},0)},T.onerror=function(){setTimeout(function(){_(new TypeError("Network request failed"))},0)},T.ontimeout=function(){setTimeout(function(){_(new TypeError("Network request timed out"))},0)},T.onabort=function(){setTimeout(function(){_(new o.DOMException("Aborted","AbortError"))},0)};function O(B){try{return B===""&&a.location.href?a.location.href:B}catch{return B}}if(T.open(x.method,O(x.url),!0),x.credentials==="include"?T.withCredentials=!0:x.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&(c.blob?T.responseType="blob":c.arrayBuffer&&(T.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof p||a.Headers&&S.headers instanceof a.Headers)){var N=[];Object.getOwnPropertyNames(S.headers).forEach(function(B){N.push(h(B)),T.setRequestHeader(B,f(S.headers[B]))}),x.headers.forEach(function(B,F){N.indexOf(F)===-1&&T.setRequestHeader(F,B)})}else x.headers.forEach(function(B,F){T.setRequestHeader(F,B)});x.signal&&(x.signal.addEventListener("abort",M),T.onreadystatechange=function(){T.readyState===4&&x.signal.removeEventListener("abort",M)}),T.send(typeof x._bodyInit>"u"?null:x._bodyInit)})}return I.polyfill=!0,a.fetch||(a.fetch=I,a.Headers=p,a.Request=P,a.Response=D),o.Headers=p,o.Request=P,o.Response=D,o.fetch=I,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(dS,dS.exports);var U3e=dS.exports;const oF=$u(U3e);var F3e=Object.defineProperty,z3e=Object.defineProperties,q3e=Object.getOwnPropertyDescriptors,aF=Object.getOwnPropertySymbols,H3e=Object.prototype.hasOwnProperty,W3e=Object.prototype.propertyIsEnumerable,cF=(t,e,n)=>e in t?F3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lF=(t,e)=>{for(var n in e||(e={}))H3e.call(e,n)&&cF(t,n,e[n]);if(aF)for(var n of aF(e))W3e.call(e,n)&&cF(t,n,e[n]);return t},uF=(t,e)=>z3e(t,q3e(e));const K3e={Accept:"application/json","Content-Type":"application/json"},V3e="POST",dF={headers:K3e,method:V3e},hF=10;let fn=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new An.EventEmitter,this.isAvailable=!1,this.registering=!1,!cU(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=ia(e),r=await(await oF(this.url,uF(lF({},dF),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!cU(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=ia({id:1,jsonrpc:"2.0",method:"test",params:[]});await oF(e,uF(lF({},dF),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?uc(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),i=r.message||r.toString(),s=mp(e,i);this.events.emit("payload",s)}parseError(e,n=this.url){return nU(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>hF&&this.events.setMaxListeners(hF)}};const fF="error",G3e="wss://relay.walletconnect.org",Z3e="wc",Y3e="universal_provider",P2=`${Z3e}@2:${Y3e}:`,pF="https://rpc.walletconnect.org/v1/",vp="generic",J3e=`${pF}bundler`,Us={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function Q3e(){}function hS(t){return t==null||typeof t!="object"&&typeof t!="function"}function fS(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function X3e(t){if(hS(t))return t;if(Array.isArray(t)||fS(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function gF(t){return typeof t=="object"&&t!==null}function mF(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function yF(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const e6e="[object RegExp]",wF="[object String]",bF="[object Number]",vF="[object Boolean]",EF="[object Arguments]",t6e="[object Symbol]",n6e="[object Date]",r6e="[object Map]",i6e="[object Set]",s6e="[object Array]",o6e="[object ArrayBuffer]",a6e="[object Object]",c6e="[object DataView]",l6e="[object Uint8Array]",u6e="[object Uint8ClampedArray]",d6e="[object Uint16Array]",h6e="[object Uint32Array]",f6e="[object Int8Array]",p6e="[object Int16Array]",g6e="[object Int32Array]",m6e="[object Float32Array]",y6e="[object Float64Array]";function w6e(t,e){return Ep(t,void 0,t,new Map,e)}function Ep(t,e,n,r=new Map,i=void 0){const s=i==null?void 0:i(t,e,n,r);if(s!=null)return s;if(hS(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ep(t[a],a,n,r,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Ep(c,a,n,r,i));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Ep(a,void 0,n,r,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(fS(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ep(t[a],a,n,r,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Rd(o,t,n,r,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Rd(o,t,n,r,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Rd(o,t,n,r,i),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Rd(o,t,n,r,i),o}if(typeof t=="object"&&b6e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Rd(o,t,n,r,i),o}return t}function Rd(t,e,n=t,r,i){const s=[...Object.keys(e),...mF(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Ep(e[a],a,n,r,i))}}function b6e(t){switch(yF(t)){case EF:case s6e:case o6e:case c6e:case vF:case n6e:case m6e:case y6e:case f6e:case p6e:case g6e:case r6e:case bF:case a6e:case e6e:case i6e:case wF:case t6e:case l6e:case u6e:case d6e:case h6e:return!0;default:return!1}}function v6e(t,e){return w6e(t,(n,r,i,s)=>{const o=e==null?void 0:e(n,r,i,s);if(o!=null)return o;if(typeof t=="object")switch(Object.prototype.toString.call(t)){case bF:case wF:case vF:{const a=new t.constructor(t==null?void 0:t.valueOf());return Rd(a,t),a}case EF:{const a={};return Rd(a,t),a.length=t.length,a[Symbol.iterator]=t[Symbol.iterator],a}default:return}})}function CF(t){return v6e(t)}function _F(t){return t!==null&&typeof t=="object"&&yF(t)==="[object Arguments]"}function E6e(t){return fS(t)}function C6e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function _6e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let i=t;for(let s=0;s<n.length;s++){const o=n[s];i=pS(i,o,r,new Map)}return i}function pS(t,e,n,r){if(hS(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return X3e(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...mF(e)];for(let s=0;s<i.length;s++){const o=i[s];let a=e[o],c=t[o];if(_F(a)&&(a={...a}),_F(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=CF(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||gF(c)&&gF(a)?t[o]=pS(c,a,n,r):c==null&&C6e(a)?t[o]=pS({},a,n,r):c==null&&E6e(a)?t[o]=CF(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function S6e(t,...e){return _6e(t,...e,Q3e)}var x6e=Object.defineProperty,A6e=Object.defineProperties,I6e=Object.getOwnPropertyDescriptors,SF=Object.getOwnPropertySymbols,$6e=Object.prototype.hasOwnProperty,P6e=Object.prototype.propertyIsEnumerable,xF=(t,e,n)=>e in t?x6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O2=(t,e)=>{for(var n in e||(e={}))$6e.call(e,n)&&xF(t,n,e[n]);if(SF)for(var n of SF(e))P6e.call(e,n)&&xF(t,n,e[n]);return t},O6e=(t,e)=>A6e(t,I6e(e));function cs(t,e,n){var r;const i=Jf(t);return((r=e.rpcMap)==null?void 0:r[i.reference])||`${pF}?chainId=${i.namespace}:${i.reference}&projectId=${n}`}function Md(t){return t.includes(":")?t.split(":")[1]:t}function AF(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function T6e(t,e){const n=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!n.length)return[];const r=[];return n.forEach(i=>{const s=e.namespaces[i].accounts;r.push(...s)}),r}function T2(t={},e={}){const n=IF(t),r=IF(e);return S6e(n,r)}function IF(t){var e,n,r,i,s;const o={};if(!zl(t))return o;for(const[a,c]of Object.entries(t)){const l=f2(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=hp(a);o[f]=O6e(O2(O2({},o[f]),c),{chains:aa(l,(e=o[f])==null?void 0:e.chains),methods:aa(u,(n=o[f])==null?void 0:n.methods),events:aa(d,(r=o[f])==null?void 0:r.events)}),(zl(h)||zl(((i=o[f])==null?void 0:i.rpcMap)||{}))&&(o[f].rpcMap=O2(O2({},h),(s=o[f])==null?void 0:s.rpcMap))}return o}function $F(t){return t.includes(":")?t.split(":")[2]:t}function PF(t){const e={};for(const[n,r]of Object.entries(t)){const i=r.methods||[],s=r.events||[],o=r.accounts||[],a=f2(n)?[n]:r.chains?r.chains:AF(r.accounts);e[n]={chains:a,methods:i,events:s,accounts:o}}return e}function gS(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const OF={},yt=t=>OF[t],mS=(t,e)=>{OF[t]=e};var N6e=Object.defineProperty,k6e=(t,e,n)=>e in t?N6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cp=(t,e,n)=>k6e(t,typeof e!="symbol"?e+"":e,n);let R6e=class{constructor(e){Cp(this,"name","polkadot"),Cp(this,"client"),Cp(this,"httpProviders"),Cp(this,"events"),Cp(this,"namespace"),Cp(this,"chainId"),this.namespace=e.namespace,this.events=yt("events"),this.client=yt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Us.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Md(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||cs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,yt("disableProviderPing")))}};var M6e=Object.defineProperty,B6e=Object.defineProperties,D6e=Object.getOwnPropertyDescriptors,TF=Object.getOwnPropertySymbols,L6e=Object.prototype.hasOwnProperty,j6e=Object.prototype.propertyIsEnumerable,yS=(t,e,n)=>e in t?M6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NF=(t,e)=>{for(var n in e||(e={}))L6e.call(e,n)&&yS(t,n,e[n]);if(TF)for(var n of TF(e))j6e.call(e,n)&&yS(t,n,e[n]);return t},kF=(t,e)=>B6e(t,D6e(e)),_p=(t,e,n)=>yS(t,typeof e!="symbol"?e+"":e,n);let U6e=class{constructor(e){_p(this,"name","eip155"),_p(this,"client"),_p(this,"chainId"),_p(this,"namespace"),_p(this,"httpProviders"),_p(this,"events"),this.namespace=e.namespace,this.events=yt("events"),this.client=yt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Us.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||cs(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,yt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=parseInt(Md(n));e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let i=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,i,s,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((s=(i=e.request)==null?void 0:i.params)==null?void 0:s[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:kF(NF({},u.sessionProperties||{}),{capabilities:kF(NF({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const i=this.client.session.get(e.topic),s=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xr("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,n){return`${J3e}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}};var F6e=Object.defineProperty,z6e=(t,e,n)=>e in t?F6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sp=(t,e,n)=>z6e(t,typeof e!="symbol"?e+"":e,n);let q6e=class{constructor(e){Sp(this,"name","solana"),Sp(this,"client"),Sp(this,"httpProviders"),Sp(this,"events"),Sp(this,"namespace"),Sp(this,"chainId"),this.namespace=e.namespace,this.events=yt("events"),this.client=yt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Us.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Md(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||cs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,yt("disableProviderPing")))}};var H6e=Object.defineProperty,W6e=(t,e,n)=>e in t?H6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xp=(t,e,n)=>W6e(t,typeof e!="symbol"?e+"":e,n);let K6e=class{constructor(e){xp(this,"name","cosmos"),xp(this,"client"),xp(this,"httpProviders"),xp(this,"events"),xp(this,"namespace"),xp(this,"chainId"),this.namespace=e.namespace,this.events=yt("events"),this.client=yt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Us.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Md(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||cs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,yt("disableProviderPing")))}};var V6e=Object.defineProperty,G6e=(t,e,n)=>e in t?V6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ap=(t,e,n)=>G6e(t,typeof e!="symbol"?e+"":e,n);let Z6e=class{constructor(e){Ap(this,"name","algorand"),Ap(this,"client"),Ap(this,"httpProviders"),Ap(this,"events"),Ap(this,"namespace"),Ap(this,"chainId"),this.namespace=e.namespace,this.events=yt("events"),this.client=yt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||cs(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Us.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||cs(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new rn(new fn(r,yt("disableProviderPing")))}};var Y6e=Object.defineProperty,J6e=(t,e,n)=>e in t?Y6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ip=(t,e,n)=>J6e(t,typeof e!="symbol"?e+"":e,n);let Q6e=class{constructor(e){Ip(this,"name","cip34"),Ip(this,"client"),Ip(this,"httpProviders"),Ip(this,"events"),Ip(this,"namespace"),Ip(this,"chainId"),this.namespace=e.namespace,this.events=yt("events"),this.client=yt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Us.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),i=Md(n);e[i]=this.createHttpProvider(i,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,yt("disableProviderPing")))}};var X6e=Object.defineProperty,eEe=(t,e,n)=>e in t?X6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$p=(t,e,n)=>eEe(t,typeof e!="symbol"?e+"":e,n);let tEe=class{constructor(e){$p(this,"name","elrond"),$p(this,"client"),$p(this,"httpProviders"),$p(this,"events"),$p(this,"namespace"),$p(this,"chainId"),this.namespace=e.namespace,this.events=yt("events"),this.client=yt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Us.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Md(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||cs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,yt("disableProviderPing")))}};var nEe=Object.defineProperty,rEe=(t,e,n)=>e in t?nEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pp=(t,e,n)=>rEe(t,typeof e!="symbol"?e+"":e,n);let iEe=class{constructor(e){Pp(this,"name","multiversx"),Pp(this,"client"),Pp(this,"httpProviders"),Pp(this,"events"),Pp(this,"namespace"),Pp(this,"chainId"),this.namespace=e.namespace,this.events=yt("events"),this.client=yt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Us.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=Md(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||cs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,yt("disableProviderPing")))}};var sEe=Object.defineProperty,oEe=(t,e,n)=>e in t?sEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Op=(t,e,n)=>oEe(t,typeof e!="symbol"?e+"":e,n);let aEe=class{constructor(e){Op(this,"name","near"),Op(this,"client"),Op(this,"httpProviders"),Op(this,"events"),Op(this,"namespace"),Op(this,"chainId"),this.namespace=e.namespace,this.events=yt("events"),this.client=yt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||cs(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Us.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||cs(e,this.namespace);return typeof r>"u"?void 0:new rn(new fn(r,yt("disableProviderPing")))}};var cEe=Object.defineProperty,lEe=(t,e,n)=>e in t?cEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tp=(t,e,n)=>lEe(t,typeof e!="symbol"?e+"":e,n);let uEe=class{constructor(e){Tp(this,"name","tezos"),Tp(this,"client"),Tp(this,"httpProviders"),Tp(this,"events"),Tp(this,"namespace"),Tp(this,"chainId"),this.namespace=e.namespace,this.events=yt("events"),this.client=yt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||cs(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Us.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||cs(e,this.namespace);return typeof r>"u"?void 0:new rn(new fn(r))}};var dEe=Object.defineProperty,hEe=(t,e,n)=>e in t?dEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Np=(t,e,n)=>hEe(t,typeof e!="symbol"?e+"":e,n);let fEe=class{constructor(e){Np(this,"name",vp),Np(this,"client"),Np(this,"httpProviders"),Np(this,"events"),Np(this,"namespace"),Np(this,"chainId"),this.namespace=e.namespace,this.events=yt("events"),this.client=yt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Us.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(i=>{const s=Jf(i);r[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||cs(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,yt("disableProviderPing")))}};var pEe=Object.defineProperty,gEe=Object.defineProperties,mEe=Object.getOwnPropertyDescriptors,RF=Object.getOwnPropertySymbols,yEe=Object.prototype.hasOwnProperty,wEe=Object.prototype.propertyIsEnumerable,wS=(t,e,n)=>e in t?pEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N2=(t,e)=>{for(var n in e||(e={}))yEe.call(e,n)&&wS(t,n,e[n]);if(RF)for(var n of RF(e))wEe.call(e,n)&&wS(t,n,e[n]);return t},bS=(t,e)=>gEe(t,mEe(e)),Fs=(t,e,n)=>wS(t,typeof e!="symbol"?e+"":e,n);const bEe=class _V{constructor(e){Fs(this,"client"),Fs(this,"namespaces"),Fs(this,"optionalNamespaces"),Fs(this,"sessionProperties"),Fs(this,"scopedProperties"),Fs(this,"events",new hf),Fs(this,"rpcProviders",{}),Fs(this,"session"),Fs(this,"providerOpts"),Fs(this,"logger"),Fs(this,"uri"),Fs(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ql(wc({level:(e==null?void 0:e.logger)||fF})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new _V(e);return await n.initialize(),n}async request(e,n,r){const[i,s]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:N2({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,i){const s=new Date().getTime();this.request(e,r,i).then(o=>n(null,Hl(s,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Nt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const s=await i();if(this.session=s.session,this.session){const o=PF(this.session.namespaces);this.namespaces=T2(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const i=await r();this.session=i;const s=PF(i.namespaces);return this.namespaces=T2(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,i]=this.validateChain(e),s=this.getProvider(r);s.name===vp?s.setDefaultChain(`${r}:${i}`,n):s.setDefaultChain(i,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(bo(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await j3e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||fF,relayUrl:this.providerOpts.relayUrl||G3e,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>hp(n)))];mS("client",this.client),mS("events",this.events),mS("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=T6e(n,this.session),i=AF(r),s=T2(this.namespaces,this.optionalNamespaces),o=bS(N2({},s[n]),{accounts:r,chains:i});switch(n){case"eip155":this.rpcProviders[n]=new U6e({namespace:o});break;case"algorand":this.rpcProviders[n]=new Z6e({namespace:o});break;case"solana":this.rpcProviders[n]=new q6e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new K6e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new R6e({namespace:o});break;case"cip34":this.rpcProviders[n]=new Q6e({namespace:o});break;case"elrond":this.rpcProviders[n]=new tEe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new iEe({namespace:o});break;case"near":this.rpcProviders[n]=new aEe({namespace:o});break;case"tezos":this.rpcProviders[n]=new uEe({namespace:o});break;default:this.rpcProviders[vp]?this.rpcProviders[vp].updateNamespace(o):this.rpcProviders[vp]=new fEe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:i}=e;if(i!==((n=this.session)==null?void 0:n.topic))return;const{event:s}=r;if(s.name==="accountsChanged"){const o=s.data;o&&bo(o)&&this.events.emit("accountsChanged",o.map($F))}else if(s.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=hp(o),l=gS(o)!==gS(a)?`${c}:${gS(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,i;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:s}=n,o=(i=this.client)==null?void 0:i.session.get(e);this.session=bS(N2({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",bS(N2({},Nt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Us.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[vp]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:s}=e;this.optionalNamespaces=T2(n,r),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>hp(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const i=hp(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(r,i),this.events.emit("chainChanged",i);const s=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:s,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var i,s;try{if(n===r)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map($F);if(!bo(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,i={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${P2}/${e}${i}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${P2}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${P2}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(P2)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}},vEe="wc",EEe="ethereum_provider",CEe=`${vEe}@2:${EEe}:`,_Ee="https://rpc.walletconnect.org/v1/",k2=["eth_sendTransaction","personal_sign"],MF=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],R2=["chainChanged","accountsChanged"],BF=["chainChanged","accountsChanged","message","disconnect","connect"],SEe=async()=>{const{createAppKit:t}=await Promise.resolve().then(()=>_Oe);return t};var xEe=Object.defineProperty,AEe=Object.defineProperties,IEe=Object.getOwnPropertyDescriptors,DF=Object.getOwnPropertySymbols,$Ee=Object.prototype.hasOwnProperty,PEe=Object.prototype.propertyIsEnumerable,vS=(t,e,n)=>e in t?xEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bd=(t,e)=>{for(var n in e||(e={}))$Ee.call(e,n)&&vS(t,n,e[n]);if(DF)for(var n of DF(e))PEe.call(e,n)&&vS(t,n,e[n]);return t},ym=(t,e)=>AEe(t,IEe(e)),ls=(t,e,n)=>vS(t,typeof e!="symbol"?e+"":e,n);function M2(t){return Number(t[0].split(":")[1])}function B2(t){return`0x${t.toString(16)}`}function OEe(t){const{chains:e,optionalChains:n,methods:r,optionalMethods:i,events:s,optionalEvents:o,rpcMap:a}=t;if(!bo(e))throw new Error("Invalid chains");const c={chains:e,methods:r||k2,events:s||R2,rpcMap:Bd({},e.length?{[M2(e)]:a[M2(e)]}:{})},l=s==null?void 0:s.filter(f=>!R2.includes(f)),u=r==null?void 0:r.filter(f=>!k2.includes(f));if(!n&&!o&&!i&&!(l!=null&&l.length)&&!(u!=null&&u.length))return{required:e.length?c:void 0};const d=(l==null?void 0:l.length)&&(u==null?void 0:u.length)||!n,h={chains:[...new Set(d?c.chains.concat(n||[]):n)],methods:[...new Set(c.methods.concat(i!=null&&i.length?i:MF))],events:[...new Set(c.events.concat(o!=null&&o.length?o:BF))],rpcMap:a};return{required:e.length?c:void 0,optional:n.length?h:void 0}}let LF=class SV{constructor(){ls(this,"events",new An.EventEmitter),ls(this,"namespace","eip155"),ls(this,"accounts",[]),ls(this,"signer"),ls(this,"chainId",1),ls(this,"modal"),ls(this,"rpc"),ls(this,"STORAGE_KEY",CEe),ls(this,"on",(e,n)=>(this.events.on(e,n),this)),ls(this,"once",(e,n)=>(this.events.once(e,n),this)),ls(this,"removeListener",(e,n)=>(this.events.removeListener(e,n),this)),ls(this,"off",(e,n)=>(this.events.off(e,n),this)),ls(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){const n=new SV;return await n.initialize(e),n}async request(e,n){return await this.signer.request(e,this.formatChainId(this.chainId),n)}sendAsync(e,n,r){this.signer.sendAsync(e,n,this.formatChainId(this.chainId),r)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){var n;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:i}=OEe(this.rpc);try{const s=await new Promise(async(a,c)=>{var l,u;this.rpc.showQrModal&&((l=this.modal)==null||l.open(),(u=this.modal)==null||u.subscribeState(h=>{!h.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))}));const d=e!=null&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(ym(Bd({namespaces:Bd({},r&&{[this.namespace]:r})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e==null?void 0:e.pairingTopic,scopedProperties:d})).then(h=>{a(h)}).catch(h=>{var f;(f=this.modal)==null||f.showErrorMessage("Unable to connect"),c(new Error(h.message))})});if(!s)return;const o=oL(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:B2(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{(n=this.modal)==null||n.close()}}async authenticate(e,n){var r;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e==null?void 0:e.chains});try{const i=await new Promise(async(o,a)=>{var c,l;this.rpc.showQrModal&&((c=this.modal)==null||c.open(),(l=this.modal)==null||l.subscribeState(u=>{!u.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),a(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(ym(Bd({},e),{chains:this.rpc.chains}),n).then(u=>{o(u)}).catch(u=>{var d;(d=this.modal)==null||d.showErrorMessage("Unable to connect"),a(new Error(u.message))})}),s=i.session;if(s){const o=oL(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:B2(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{(r=this.modal)==null||r.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:n}=e,{event:r}=n;r.name==="accountsChanged"?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):r.name==="chainChanged"?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("accountsChanged",e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",e=>{const n=parseInt(e);this.chainId=n,this.events.emit("chainChanged",B2(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",ym(Bd({},Nt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const n=e.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));n.length&&(this.chainId=n[0],this.events.emit("chainChanged",B2(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const n=this.parseChainId(e);this.chainId=n,this.switchEthereumChain(n)}}parseAccountId(e){const[n,r,i]=e.split(":");return{chainId:`${n}:${r}`,address:i}}setAccounts(e){this.accounts=e.filter(n=>this.parseChainId(this.parseAccountId(n).chainId)===this.chainId).map(n=>this.parseAccountId(n).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var n,r;const i=(n=e==null?void 0:e.chains)!=null?n:[],s=(r=e==null?void 0:e.optionalChains)!=null?r:[],o=i.concat(s);if(!o.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const a=i.length?(e==null?void 0:e.methods)||k2:[],c=i.length?(e==null?void 0:e.events)||R2:[],l=(e==null?void 0:e.optionalMethods)||[],u=(e==null?void 0:e.optionalEvents)||[],d=(e==null?void 0:e.rpcMap)||this.buildRpcMap(o,e.projectId),h=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:i==null?void 0:i.map(f=>this.formatChainId(f)),optionalChains:s.map(f=>this.formatChainId(f)),methods:a,events:c,optionalMethods:l,optionalEvents:u,rpcMap:d,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:h,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,n){const r={};return e.forEach(i=>{r[i]=this.getRpcUrl(i,n)}),r}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?M2(this.rpc.chains):M2(this.rpc.optionalChains),this.signer=await bEe.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let n;try{const r=await SEe(),{convertWCMToAppKitOptions:i}=await Promise.resolve().then(function(){return FEe}),s=i(ym(Bd({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!s.networks.length)throw new Error("No networks found for WalletConnect");n=r(ym(Bd({},s),{universalProvider:this.signer,manualWCControl:!0}))}catch(r){throw console.warn(r),new Error("To use QR modal, please install @reown/appkit package")}if(n)try{this.modal=n}catch(r){throw this.signer.logger.error(r),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:n,optionalChains:r,rpcMap:i}=e;n&&bo(n)&&(this.rpc.chains=n.map(s=>this.formatChainId(s)),n.forEach(s=>{this.rpc.rpcMap[s]=(i==null?void 0:i[s])||this.getRpcUrl(s)})),r&&bo(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r==null?void 0:r.map(s=>this.formatChainId(s)),r.forEach(s=>{this.rpc.rpcMap[s]=(i==null?void 0:i[s])||this.getRpcUrl(s)}))}getRpcUrl(e,n){var r;return((r=this.rpc.rpcMap)==null?void 0:r[e])||`${_Ee}?chainId=eip155:${e}&projectId=${n||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),n=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:n==null?void 0:n.accounts),this.setAccounts(n==null?void 0:n.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(n=>this.signer.logger.warn(n))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(n=>this.parseAccount(n))}};const TEe=LF;var NEe=Object.defineProperty,kEe=Object.defineProperties,REe=Object.getOwnPropertyDescriptors,jF=Object.getOwnPropertySymbols,MEe=Object.prototype.hasOwnProperty,BEe=Object.prototype.propertyIsEnumerable,UF=(t,e,n)=>e in t?NEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,FF=(t,e)=>{for(var n in e||(e={}))MEe.call(e,n)&&UF(t,n,e[n]);if(jF)for(var n of jF(e))BEe.call(e,n)&&UF(t,n,e[n]);return t},DEe=(t,e)=>kEe(t,REe(e));function LEe(t){if(t)return{"--w3m-font-family":t["--wcm-font-family"],"--w3m-accent":t["--wcm-accent-color"],"--w3m-color-mix":t["--wcm-background-color"],"--w3m-z-index":t["--wcm-z-index"]?Number(t["--wcm-z-index"]):void 0,"--w3m-qr-color":t["--wcm-accent-color"],"--w3m-font-size-master":t["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":t["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}const jEe=t=>{const[e,n]=t.split(":");return zF({id:n,caipNetworkId:t,chainNamespace:e,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function UEe(t){var e,n,r,i,s,o,a;const c=(e=t.chains)==null?void 0:e.map(jEe).filter(Boolean);if(c.length===0)throw new Error("At least one chain must be specified");const l=c.find(d=>{var h;return d.id===((h=t.defaultChain)==null?void 0:h.id)}),u={projectId:t.projectId,networks:c,themeMode:t.themeMode,themeVariables:LEe(t.themeVariables),chainImages:t.chainImages,connectorImages:t.walletImages,defaultNetwork:l,metadata:DEe(FF({},t.metadata),{name:((n=t.metadata)==null?void 0:n.name)||"WalletConnect",description:((r=t.metadata)==null?void 0:r.description)||"Connect to WalletConnect-compatible wallets",url:((i=t.metadata)==null?void 0:i.url)||"https://walletconnect.org",icons:((s=t.metadata)==null?void 0:s.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:t.explorerRecommendedWalletIds==="NONE"?[]:Array.isArray(t.explorerRecommendedWalletIds)?t.explorerRecommendedWalletIds:[],excludeWalletIds:t.explorerExcludedWalletIds==="ALL"?[]:Array.isArray(t.explorerExcludedWalletIds)?t.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if((o=t.mobileWallets)!=null&&o.length||(a=t.desktopWallets)!=null&&a.length){const d=[...(t.mobileWallets||[]).map(g=>({id:g.id,name:g.name,links:g.links})),...(t.desktopWallets||[]).map(g=>({id:g.id,name:g.name,links:{native:g.links.native,universal:g.links.universal}}))],h=[...u.featuredWalletIds||[],...u.excludeWalletIds||[]],f=d.filter(g=>!h.includes(g.id));f.length&&(u.customWallets=f)}return u}function zF(t){return FF({formatters:void 0,fees:void 0,serializers:void 0},t)}var FEe=Object.freeze({__proto__:null,convertWCMToAppKitOptions:UEe,defineChain:zF});const zEe=Object.freeze(Object.defineProperty({__proto__:null,EthereumProvider:TEe,OPTIONAL_EVENTS:BF,OPTIONAL_METHODS:MF,REQUIRED_EVENTS:R2,REQUIRED_METHODS:k2,default:LF},Symbol.toStringTag,{value:"Module"})),Te={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},qF={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var i;if(!e)return;const n=t.find(s=>s.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((i=Te.CHAIN_NAME_MAP)==null?void 0:i[r])||void 0}};var qEe=20,HEe=1,Dd=1e6,HF=1e6,WEe=-7,KEe=21,VEe=!1,wm="[big.js] ",Ld=wm+"Invalid ",D2=Ld+"decimal places",GEe=Ld+"rounding mode",WF=wm+"Division by zero",kt={},ga=void 0,ZEe=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function KF(){function t(e){var n=this;if(!(n instanceof t))return e===ga?KF():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Ld+"value");e=e===0&&1/e<0?"-0":String(e)}YEe(n,e)}n.constructor=t}return t.prototype=kt,t.DP=qEe,t.RM=HEe,t.NE=WEe,t.PE=KEe,t.strict=VEe,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function YEe(t,e){var n,r,i;if(!ZEe.test(e))throw Error(Ld+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),i=e.length,r=0;r<i&&e.charAt(r)=="0";)++r;if(r==i)t.c=[t.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=i;)t.c[n++]=+e.charAt(r++)}return t}function jd(t,e,n,r){var i=t.c;if(n===ga&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(GEe);if(e<1)r=n===3&&(r||!!i[0])||e===0&&(n===1&&i[0]>=5||n===2&&(i[0]>5||i[0]===5&&(r||i[1]!==ga))),i.length=1,r?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(r=n===1&&i[e]>=5||n===2&&(i[e]>5||i[e]===5&&(r||i[e+1]!==ga||i[e-1]&1))||n===3&&(r||!!i[0]),i.length=e,r){for(;++i[--e]>9;)if(i[e]=0,e===0){++t.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return t}function Ud(t,e,n){var r=t.e,i=t.c.join(""),s=i.length;if(e)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)i="0"+i;i="0."+i}else if(r>0)if(++r>s)for(r-=s;r--;)i+="0";else r<s&&(i=i.slice(0,r)+"."+i.slice(r));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&n?"-"+i:i}kt.abs=function(){var t=new this.constructor(this);return t.s=1,t},kt.cmp=function(t){var e,n=this,r=n.c,i=(t=new n.constructor(t)).c,s=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!i[0])return r[0]?s:i[0]?-o:0;if(s!=o)return s;if(e=s<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=i.length)?a:c,s=-1;++s<o;)if(r[s]!=i[s])return r[s]>i[s]^e?1:-1;return a==c?0:a>c^e?1:-1},kt.div=function(t){var e=this,n=e.constructor,r=e.c,i=(t=new n(t)).c,s=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Dd)throw Error(D2);if(!i[0])throw Error(WF);if(!r[0])return t.s=s,t.c=[t.e=0],t;var a,c,l,u,d,h=i.slice(),f=a=i.length,g=r.length,p=r.slice(0,a),m=p.length,y=t,w=y.c=[],b=0,v=o+(y.e=e.e-t.e)+1;for(y.s=s,s=v<0?0:v,h.unshift(0);m++<a;)p.push(0);do{for(l=0;l<10;l++){if(a!=(m=p.length))u=a>m?1:-1;else for(d=-1,u=0;++d<a;)if(i[d]!=p[d]){u=i[d]>p[d]?1:-1;break}if(u<0){for(c=m==a?i:h;m;){if(p[--m]<c[m]){for(d=m;d&&!p[--d];)p[d]=9;--p[d],p[m]+=10}p[m]-=c[m]}for(;!p[0];)p.shift()}else break}w[b++]=u?l:++l,p[0]&&u?p[m]=r[f]||0:p=[r[f]]}while((f++<g||p[0]!==ga)&&s--);return!w[0]&&b!=1&&(w.shift(),y.e--,v--),b>v&&jd(y,v,n.RM,p[0]!==ga),y},kt.eq=function(t){return this.cmp(t)===0},kt.gt=function(t){return this.cmp(t)>0},kt.gte=function(t){return this.cmp(t)>-1},kt.lt=function(t){return this.cmp(t)<0},kt.lte=function(t){return this.cmp(t)<1},kt.minus=kt.sub=function(t){var e,n,r,i,s=this,o=s.constructor,a=s.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,s.plus(t);var l=s.c.slice(),u=s.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(s):t.s=1,t;if(a=u-h){for((i=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((i=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){i=l[c]<d[c];break}if(i&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t},kt.mod=function(t){var e,n=this,r=n.constructor,i=n.s,s=(t=new r(t)).s;if(!t.c[0])throw Error(WF);return n.s=t.s=1,e=t.cmp(n)==1,n.s=i,t.s=s,e?new r(n):(i=r.DP,s=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=i,r.RM=s,this.minus(n.times(t)))},kt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t},kt.plus=kt.add=function(t){var e,n,r,i=this,s=i.constructor;if(t=new s(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var o=i.e,a=i.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new s(i):t.s=i.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t},kt.pow=function(t){var e=this,n=new e.constructor("1"),r=n,i=t<0;if(t!==~~t||t<-HF||t>HF)throw Error(Ld+"exponent");for(i&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return i?n.div(r):r},kt.prec=function(t,e){if(t!==~~t||t<1||t>Dd)throw Error(Ld+"precision");return jd(new this.constructor(this),t,e)},kt.round=function(t,e){if(t===ga)t=0;else if(t!==~~t||t<-Dd||t>Dd)throw Error(D2);return jd(new this.constructor(this),t+this.e+1,e)},kt.sqrt=function(){var t,e,n,r=this,i=r.constructor,s=r.s,o=r.e,a=new i("0.5");if(!r.c[0])return new i(r);if(s<0)throw Error(wm+"No square root");s=Math.sqrt(+Ud(r,!0,!0)),s===0||s===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),s=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):t=new i(s+""),o=t.e+(i.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return jd(t,(i.DP-=4)+t.e+1,i.RM)},kt.times=kt.mul=function(t){var e,n=this,r=n.constructor,i=n.c,s=(t=new r(t)).c,o=i.length,a=s.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!i[0]||!s[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=i,i=s,s=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+s[c]*i[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},kt.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==ga){if(t!==~~t||t<0||t>Dd)throw Error(D2);for(n=jd(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Ud(n,!0,!!r)},kt.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==ga){if(t!==~~t||t<0||t>Dd)throw Error(D2);for(n=jd(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Ud(n,!1,!!r)},kt[Symbol.for("nodejs.util.inspect.custom")]=kt.toJSON=kt.toString=function(){var t=this,e=t.constructor;return Ud(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},kt.toNumber=function(){var t=+Ud(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(wm+"Imprecise conversion");return t},kt.toPrecision=function(t,e){var n=this,r=n.constructor,i=n.c[0];if(t!==ga){if(t!==~~t||t<1||t>Dd)throw Error(Ld+"precision");for(n=jd(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Ud(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!i)},kt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(wm+"valueOf disallowed");return Ud(t,t.e<=e.NE||t.e>=e.PE,!0)};var bm=KF();const JEe={bigNumber(t){return t?new bm(t):new bm(0)},multiply(t,e){if(t===void 0||e===void 0)return new bm(0);const n=new bm(t),r=new bm(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},QEe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],XEe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],e8e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],t8e={getERC20Abi:t=>Te.USDT_CONTRACT_ADDRESSES.includes(t)?e8e:QEe,getSwapAbi:()=>XEe},Wl={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,i]=e;if(!n||!r||!i)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:i}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Ge={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function ES(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Ke={setItem(t,e){vm()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(vm())return localStorage.getItem(t)||void 0},removeItem(t){vm()&&localStorage.removeItem(t)},clear(){vm()&&localStorage.clear()}};function vm(){return typeof window<"u"&&typeof localStorage<"u"}function Kl(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const n8e=Symbol(),VF=Object.getPrototypeOf,CS=new WeakMap,r8e=t=>t&&(CS.has(t)?CS.get(t):VF(t)===Object.prototype||VF(t)===Array.prototype),i8e=t=>r8e(t)&&t[n8e]||null,GF=(t,e=!0)=>{CS.set(t,e)},_S=t=>typeof t=="object"&&t!==null,Vl=new WeakMap,Em=new WeakSet,s8e=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>_S(l)&&!Em.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},i=new WeakMap,s=(l,u,d=r)=>{const h=i.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return GF(f,!0),i.set(l,[u,f]),Reflect.ownKeys(l).forEach(g=>{if(Object.getOwnPropertyDescriptor(f,g))return;const p=Reflect.get(l,g),{enumerable:m}=Reflect.getOwnPropertyDescriptor(l,g),y={value:p,enumerable:m,configurable:!0};if(Em.has(p))GF(p,!1);else if(p instanceof Promise)delete y.value,y.get=()=>d(p);else if(Vl.has(p)){const[w,b]=Vl.get(p);y.value=s(w,b(),d)}Object.defineProperty(f,g,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!_S(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(P,L=++a[0])=>{d!==L&&(d=L,h.forEach(U=>U(P,L)))};let g=a[1];const p=(P=++a[1])=>(g!==P&&!h.size&&(g=P,y.forEach(([L])=>{const U=L[1](P);U>d&&(d=U)})),d),m=P=>(L,U)=>{const D=[...L];D[1]=[P,...D[1]],f(D,U)},y=new Map,w=(P,L)=>{if(h.size){const U=L[3](m(P));y.set(P,[L,U])}else y.set(P,[L])},b=P=>{var L;const U=y.get(P);U&&(y.delete(P),(L=U[1])==null||L.call(U))},v=P=>(h.add(P),h.size===1&&y.forEach(([U,D],j)=>{const I=U[3](m(j));y.set(j,[U,I])}),()=>{h.delete(P),h.size===0&&y.forEach(([U,D],j)=>{D&&(D(),y.set(j,[U]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),$=e(C,{deleteProperty(P,L){const U=Reflect.get(P,L);b(L);const D=Reflect.deleteProperty(P,L);return D&&f(["delete",[L],U]),D},set(P,L,U,D){const j=Reflect.has(P,L),I=Reflect.get(P,L,D);if(j&&(t(I,U)||o.has(U)&&t(I,o.get(U))))return!0;b(L),_S(U)&&(U=i8e(U)||U);let E=U;if(U instanceof Promise)U.then(S=>{U.status="fulfilled",U.value=S,f(["resolve",[L],S])}).catch(S=>{U.status="rejected",U.reason=S,f(["reject",[L],S])});else{!Vl.has(U)&&n(U)&&(E=c(U));const S=!Em.has(E)&&Vl.get(E);S&&w(L,S)}return Reflect.set(P,L,E,D),f(["set",[L],U,I]),!0}});o.set(l,$);const R=[C,p,s,v];return Vl.set($,R),Reflect.ownKeys(l).forEach(P=>{const L=Object.getOwnPropertyDescriptor(l,P);"value"in L&&($[P]=l[P],delete L.value,delete L.writable),Object.defineProperty(C,P,L)}),$})=>[c,Vl,Em,t,e,n,r,i,s,o,a],[o8e]=s8e();function Yt(t={}){return o8e(t)}function Sr(t,e,n){const r=Vl.get(t);let i;const s=[],o=r[3];let a=!1;const l=o(u=>{if(s.push(u),n){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Cm(t,e){const n=Vl.get(t),[r,i,s]=n;return s(r,i(),e)}function Fd(t){return Em.add(t),t}function xr(t,e,n,r){let i=t[e];return Sr(t,()=>{const s=t[e];Object.is(i,s)||n(i=s)},r)}function a8e(t){const e=Yt({data:Array.from(t||[]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const i=this.data.find(s=>s[0]===n);return i?i[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(i=>i[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(i=>i[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}const SS=(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",ZF=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],c8e="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Rt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:SS,SECURE_SITE_DASHBOARD:`${SS}/dashboard`,SECURE_SITE_FAVICON:`${SS}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Re={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Re.getActiveNamespace(),e=Re.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Ke.setItem(Ge.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Ke.getItem(Ge.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Ke.removeItem(Ge.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Ke.setItem(Ge.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Ke.setItem(Ge.ACTIVE_CAIP_NETWORK_ID,t),Re.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Ke.getItem(Ge.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Ke.removeItem(Ge.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=ES(t);Ke.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Re.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Ke.setItem(Ge.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Ke.getItem(Ge.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=ES(t);Ke.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Ke.getItem(Ge.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=ES(t);return Ke.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{Ke.setItem(Ge.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Ke.getItem(Ge.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Ke.removeItem(Ge.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Ke.getItem(Ge.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Ke.getItem(Ge.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Ke.setItem(Ge.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Ke.getItem(Ge.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Ke.getItem(Ge.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Ke.setItem(Ge.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Re.getConnectedNamespaces();e.includes(t)||(e.push(t),Re.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Re.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Re.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Ke.getItem(Ge.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Ke.setItem(Ge.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Ke.removeItem(Ge.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Ke.getItem(Ge.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Re.getBalanceCache();Ke.setItem(Ge.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Re.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Re.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Re.getBalanceCache();e[t.caipAddress]=t,Ke.setItem(Ge.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Ke.getItem(Ge.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Re.getBalanceCache();Ke.setItem(Ge.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Re.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Re.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Re.getNativeBalanceCache();e[t.caipAddress]=t,Ke.setItem(Ge.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Ke.getItem(Ge.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Re.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Re.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Re.getEnsCache();e[t.address]=t,Ke.setItem(Ge.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Re.getEnsCache();Ke.setItem(Ge.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Ke.getItem(Ge.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Re.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Re.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Re.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Ke.setItem(Ge.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Re.getIdentityCache();Ke.setItem(Ge.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Ke.removeItem(Ge.PORTFOLIO_CACHE),Ke.removeItem(Ge.NATIVE_BALANCE_CACHE),Ke.removeItem(Ge.ENS_CACHE),Ke.removeItem(Ge.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Ke.setItem(Ge.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Ke.getItem(Ge.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Re.getConnections(),[e]:t};Ke.setItem(Ge.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Ke.getItem(Ge.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},ye={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ye.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Rt.TEN_SEC_MS:!0},isAllowedRetry(t,e=Rt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ye.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const i=new URL(n),s=new URL(r);return i.hostname===s.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Rt.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function i(){t(...r)}n&&clearTimeout(n),n=setTimeout(i,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ye.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,i=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),i&&!(i!=null&&i.endsWith("/"))&&(i=`${i}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const s=encodeURIComponent(e);return{redirect:`${r}wc?uri=${s}`,redirectUniversalLink:i?`${i}wc?uri=${s}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ye.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Re.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,i;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(i=window==null?void 0:window.navigator)==null?void 0:i.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const i=new Image;i.onload=n,i.onerror=r,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,ye.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const i=Math.floor(r*1e3)/1e3;i&&(n=i.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const i=Number(t);i&&(n=(r=i.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Te.W3M_API_URL},getBlockchainApiUrl(){return Te.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Te.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,i)=>{n[r]=i}),e.sort((r,i)=>{const s=n[r.id],o=n[i.id];return s!==void 0&&o!==void 0?s-o:s!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const i=r[e];return n.has(i)?!1:(n.add(i),!0)})},generateSdkVersion(t,e,n){const i=t.length===0?Rt.ADAPTER_TYPES.UNIVERSAL:t.map(s=>s.adapterType).join(",");return`${e}-${i}-${n}`},createAccount(t,e,n,r,i){return{namespace:t,address:e,type:n,publicKey:r,path:i}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Te.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const i="provider_authorization_url=",s=t.substring(t.indexOf(i)+i.length),o=this.injectIntoUrl(decodeURIComponent(s),n,e);return t.replace(s,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const i=t.indexOf("&",r),s=e.length,o=i!==-1?i:t.length,a=t.substring(0,r+s),c=t.substring(r+s,o),l=t.substring(i),u=c+n;return a+u+l}};async function _m(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Sm{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...i}){const s=this.createUrl(i);return(await _m(s,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const i=this.createUrl(r);return(await _m(i,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...i}){const s=this.createUrl(i);return(await _m(s,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...i}){const s=this.createUrl(i);return(await _m(s,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...i}){const s=this.createUrl(i);return(await _m(s,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([i,s])=>{s&&r.searchParams.append(i,s)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const l8e={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Rt.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ye.isTelegram()){if(ye.isIos())return t.filter(e=>e!=="google");if(ye.isMac())return t.filter(e=>e!=="x");if(ye.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Fe=Yt({features:Rt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Rt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),le={state:Fe,subscribeKey(t,e){return xr(Fe,t,e)},setOptions(t){Object.assign(Fe,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Fe.remoteFeatures,...t};Fe.remoteFeatures=e,(n=Fe.remoteFeatures)!=null&&n.socials&&(Fe.remoteFeatures.socials=l8e.filterSocialsByPlatform(Fe.remoteFeatures.socials))},setFeatures(t){if(!t)return;Fe.features||(Fe.features=Rt.DEFAULT_FEATURES);const e={...Fe.features,...t};Fe.features=e},setProjectId(t){Fe.projectId=t},setCustomRpcUrls(t){Fe.customRpcUrls=t},setAllWallets(t){Fe.allWallets=t},setIncludeWalletIds(t){Fe.includeWalletIds=t},setExcludeWalletIds(t){Fe.excludeWalletIds=t},setFeaturedWalletIds(t){Fe.featuredWalletIds=t},setTokens(t){Fe.tokens=t},setTermsConditionsUrl(t){Fe.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Fe.privacyPolicyUrl=t},setCustomWallets(t){Fe.customWallets=t},setIsSiweEnabled(t){Fe.isSiweEnabled=t},setIsUniversalProvider(t){Fe.isUniversalProvider=t},setSdkVersion(t){Fe.sdkVersion=t},setMetadata(t){Fe.metadata=t},setDisableAppend(t){Fe.disableAppend=t},setEIP6963Enabled(t){Fe.enableEIP6963=t},setDebug(t){Fe.debug=t},setEnableWalletConnect(t){Fe.enableWalletConnect=t},setEnableWalletGuide(t){Fe.enableWalletGuide=t},setEnableAuthLogger(t){Fe.enableAuthLogger=t},setEnableWallets(t){Fe.enableWallets=t},setPreferUniversalLinks(t){Fe.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){Fe.hasMultipleAddresses=t},setSIWX(t){Fe.siwx=t},setConnectMethodsOrder(t){Fe.features={...Fe.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Fe.features={...Fe.features,walletFeaturesOrder:t}},setSocialsOrder(t){Fe.remoteFeatures={...Fe.remoteFeatures,socials:t}},setCollapseWallets(t){Fe.features={...Fe.features,collapseWallets:t}},setEnableEmbedded(t){Fe.enableEmbedded=t},setAllowUnsupportedChain(t){Fe.allowUnsupportedChain=t},setManualWCControl(t){Fe.manualWCControl=t},setEnableNetworkSwitch(t){Fe.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Fe.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Fe.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Fe.universalProviderConfigOverride},getSnapshot(){return Cm(Fe)}},u8e=Object.freeze({enabled:!0,events:[]}),d8e=new Sm({baseUrl:ye.getAnalyticsUrl(),clientId:null}),h8e=5,f8e=60*1e3,Gl=Yt({...u8e}),p8e={state:Gl,subscribeKey(t,e){return xr(Gl,t,e)},async sendError(t,e){if(!Gl.enabled)return;const n=Date.now();if(Gl.events.filter(s=>{const o=new Date(s.properties.timestamp||"").getTime();return n-o<f8e}).length>=h8e)return;const i={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Gl.events.push(i);try{if(typeof window>"u")return;const{projectId:s,sdkType:o,sdkVersion:a}=le.state;await d8e.post({path:"/e",params:{projectId:s,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ye.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Gl.enabled=!0},disable(){Gl.enabled=!1},clearEvents(){Gl.events=[]}};class kp extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,kp.prototype);let i=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const s=r.stack,o=s.indexOf(`
`);if(o>-1){const a=s.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,i=!0}}i||(Error.captureStackTrace?Error.captureStackTrace(this,kp):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function YF(t,e){const n=t instanceof kp?t:new kp(t instanceof Error?t.message:String(t),e,t);throw p8e.sendError(n,n.category),n}function _i(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const i=t[r];if(typeof i=="function"){let s=i;i.constructor.name==="AsyncFunction"?s=async(...o)=>{try{return await i(...o)}catch(a){return YF(a,e)}}:s=(...o)=>{try{return i(...o)}catch(a){return YF(a,e)}},n[r]=s}else n[r]=i}),n}const ma={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},g8e={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===ma.PHANTOM.id&&!("phantom"in window)){const i=n.startsWith("https")?"https":"http",s=n.split("/")[2],o=encodeURIComponent(`${i}://${s}`);window.location.href=`${ma.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===ma.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${ma.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Te.CHAIN.SOLANA&&t===ma.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${ma.COINBASE.url}/dapp?cb_url=${r}`)}},us=Yt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Si=_i({state:us,subscribeNetworkImages(t){return Sr(us.networkImages,()=>t(us.networkImages))},subscribeKey(t,e){return xr(us,t,e)},subscribe(t){return Sr(us,()=>t(us))},setWalletImage(t,e){us.walletImages[t]=e},setNetworkImage(t,e){us.networkImages[t]=e},setChainImage(t,e){us.chainImages[t]=e},setConnectorImage(t,e){us.connectorImages={...us.connectorImages,[t]:e}},setTokenImage(t,e){us.tokenImages[t]=e},setCurrencyImage(t,e){us.currencyImages[t]=e}}),m8e={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},xS=Yt({networkImagePromises:{}}),Dn={async fetchWalletImage(t){if(t)return await be._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(xS.networkImagePromises[t]||(xS.networkImagePromises[t]=be._fetchNetworkImage(t)),await xS.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Si.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Si.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Si.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Si.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Si.state.connectorImages[t.imageId]},getChainImage(t){return Si.state.networkImages[m8e[t]]}},Zl=Yt({message:"",variant:"info",open:!1}),_o=_i({state:Zl,subscribeKey(t,e){return xr(Zl,t,e)},open(t,e){const{debug:n}=le.state,{shortMessage:r,longMessage:i}=t;n&&(Zl.message=r,Zl.variant=e,Zl.open=!0),i&&console.error(typeof i=="function"?i():i)},close(){Zl.open=!1,Zl.message="",Zl.variant="info"}}),y8e=ye.getAnalyticsUrl(),w8e=new Sm({baseUrl:y8e,clientId:null}),b8e=["MODAL_CREATED"],Cc=Yt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),it={state:Cc,subscribe(t){return Sr(Cc,()=>t(Cc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=le.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=je.state.address;if(b8e.includes(t.data.event)||typeof window>"u")return;await w8e.post({path:"/e",params:it.getSdkProperties(),body:{eventId:ye.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Cc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Te.HTTP_STATUS_CODES.FORBIDDEN&&!Cc.reportedErrors.FORBIDDEN&&(_o.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${vm()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Cc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Cc.timestamp=Date.now(),Cc.data=t,(e=le.state.features)!=null&&e.analytics&&it._sendAnalyticsEvent(Cc)}},v8e=ye.getApiUrl(),xi=new Sm({baseUrl:v8e,clientId:null}),E8e=40,JF=4,C8e=20,Ze=Yt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),be={state:Ze,subscribeKey(t,e){return xr(Ze,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=le.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return le.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${xi.baseUrl}/getWalletImage/${t}`,n=await xi.getBlob({path:e,params:be._getSdkProperties()});Si.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${xi.baseUrl}/public/getAssetImage/${t}`,n=await xi.getBlob({path:e,params:be._getSdkProperties()});Si.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${xi.baseUrl}/public/getAssetImage/${t}`,n=await xi.getBlob({path:e,params:be._getSdkProperties()});Si.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${xi.baseUrl}/public/getCurrencyImage/${t}`,n=await xi.getBlob({path:e,params:be._getSdkProperties()});Si.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${xi.baseUrl}/public/getTokenImage/${t}`,n=await xi.getBlob({path:e,params:be._getSdkProperties()});Si.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ye.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===ma.COINBASE.id?!0:W.state.activeChain==="solana"&&(n.id===ma.SOLFLARE.id||n.id===ma.PHANTOM.id)):t},async fetchProjectConfig(){return(await xi.get({path:"/appkit/v1/config",params:be._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await xi.get({path:"/projects/v1/origins",params:be._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=W.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!Dn.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>be._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=me.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>be._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>be._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>be._fetchTokenImage(e)))},async fetchWallets(t){var s;const e=t.exclude??[];be._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(ma).map(o=>o.id));const r=await xi.get({path:"/getWallets",params:{...be._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(s=t.include)==null?void 0:s.join(","),exclude:e.join(",")}});return{data:be._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=le.state;if(t!=null&&t.length){const e={...be._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??JF,include:t},{data:n}=await be.fetchWallets(e),r=[...n].sort((s,o)=>t.indexOf(s.id)-t.indexOf(o.id)),i=r.map(s=>s.image_id).filter(Boolean);await Promise.allSettled(i.map(s=>be._fetchWalletImage(s))),Ze.featured=r,Ze.allFeatured=r}},async fetchRecommendedWallets(){try{Ze.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=le.state,r=[...e??[],...n??[]].filter(Boolean),i=W.getRequestedCaipNetworkIds().join(","),s={page:1,entries:JF,include:t,exclude:r,chains:i},{data:o,count:a}=await be.fetchWallets(s),c=Re.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>be._fetchWalletImage(d))),Ze.recommended=o,Ze.allRecommended=o,Ze.count=a??0}catch{}finally{Ze.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=le.state,i=W.getRequestedCaipNetworkIds().join(","),s=[...Ze.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:E8e,include:e,exclude:s,chains:i},{data:a,count:c}=await be.fetchWallets(o),l=a.slice(0,C8e).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>be._fetchWalletImage(u))),Ze.wallets=ye.uniqueBy([...Ze.wallets,...be._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>i.includes(h))}),Ze.count=c>Ze.count?c:Ze.count,Ze.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await be.fetchWallets(e);n&&n.forEach(r=>{Ze.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=le.state,i=W.getRequestedCaipNetworkIds().join(",");Ze.search=[];const s={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:i},{data:o}=await be.fetchWallets(s);it.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>be._fetchWalletImage(c)),ye.wait(300)]),Ze.search=be._filterOutExtensions(o)},initPromise(t,e){const n=Ze.promises[t];return n||(Ze.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const i=[t&&be.initPromise("connectorImages",be.fetchConnectorImages),e&&be.initPromise("featuredWallets",be.fetchFeaturedWallets),n&&be.initPromise("recommendedWallets",be.fetchRecommendedWallets),r&&be.initPromise("networkImages",be.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){var t;(t=le.state.features)!=null&&t.analytics&&be.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await xi.get({path:"/getAnalyticsConfig",params:be._getSdkProperties()});le.setFeatures({analytics:t})}catch{le.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Ze.featured=Ze.allFeatured,Ze.recommended=Ze.allRecommended;return}const e=W.getRequestedCaipNetworkIds().join(",");Ze.featured=Ze.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(i=>e.includes(i))}),Ze.recommended=Ze.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(i=>e.includes(i))}),Ze.filteredWallets=Ze.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(i=>e.includes(i))})},clearFilterByNamespaces(){Ze.filteredWallets=[]},setFilterByNamespace(t){if(!t){Ze.featured=Ze.allFeatured,Ze.recommended=Ze.allRecommended;return}const e=W.getRequestedCaipNetworkIds().join(",");Ze.featured=Ze.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(i=>e.includes(i))}),Ze.recommended=Ze.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(i=>e.includes(i))}),Ze.filteredWallets=Ze.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(i=>e.includes(i))})}},Lt=Yt({view:"Connect",history:["Connect"],transactionStack:[]}),we=_i({state:Lt,subscribeKey(t,e){return xr(Lt,t,e)},pushTransactionStack(t){Lt.transactionStack.push(t)},popTransactionStack(t){const e=Lt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:i}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),we.goBack();break;case"cancel":i==null||i(),we.goBack();break}},push(t,e){t!==Lt.view&&(Lt.view=t,Lt.history.push(t),Lt.data=e)},reset(t,e){Lt.view=t,Lt.history=[t],Lt.data=e},replace(t,e){Lt.history.at(-1)===t||(Lt.view=t,Lt.history[Lt.history.length-1]=t,Lt.data=e)},goBack(){var r;const t=W.state.activeCaipAddress,e=we.state.view==="ConnectingFarcaster",n=!t&&e;if(Lt.history.length>1){Lt.history.pop();const[i]=Lt.history.slice(-1);i&&(t&&i==="Connect"?Lt.view="Account":Lt.view=i)}else Ot.close();(r=Lt.data)!=null&&r.wallet&&(Lt.data.wallet=void 0),setTimeout(()=>{var i,s,o;if(n){je.setFarcasterUrl(void 0,W.state.activeChain);const a=me.getAuthConnector();(i=a==null?void 0:a.provider)==null||i.reload();const c=Cm(le.state);(o=(s=a==null?void 0:a.provider)==null?void 0:s.syncDappData)==null||o.call(s,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Lt.history.length>1){Lt.history=Lt.history.slice(0,t+1);const[e]=Lt.history.slice(-1);e&&(Lt.view=e)}},goBackOrCloseModal(){we.state.history.length>1?we.goBack():Ot.close()}}),_c=Yt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),AS={state:_c,subscribe(t){return Sr(_c,()=>t(_c))},setThemeMode(t){_c.themeMode=t;try{const e=me.getAuthConnector();if(e){const n=AS.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Kl(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){_c.themeVariables={..._c.themeVariables,...t};try{const e=me.getAuthConnector();if(e){const n=AS.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Kl(_c.themeVariables,_c.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Cm(_c)}},Ar=_i(AS),QF={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},wt=Yt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...QF},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),me=_i({state:wt,subscribe(t){return Sr(wt,()=>{t(wt)})},subscribeKey(t,e){return xr(wt,t,e)},initialize(t){t.forEach(e=>{const n=Re.getConnectedConnectorId(e);n&&me.setConnectorId(n,e)})},setActiveConnector(t){t&&(wt.activeConnector=Fd(t))},setConnectors(t){t.filter(i=>!wt.allConnectors.some(s=>s.id===i.id&&me.getConnectorName(s.name)===me.getConnectorName(i.name)&&s.chain===i.chain)).forEach(i=>{i.type!=="MULTI_CHAIN"&&wt.allConnectors.push(Fd(i))});const n=me.getEnabledNamespaces(),r=me.getEnabledConnectors(n);wt.connectors=me.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(wt.filterByNamespaceMap).forEach(e=>{wt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{wt.filterByNamespaceMap[e]=!0}),me.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){wt.filterByNamespaceMap[t]=e,me.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=me.getEnabledNamespaces(),e=me.getEnabledConnectors(t),n=me.areAllNamespacesEnabled();wt.connectors=me.mergeMultiChainConnectors(e),n?be.clearFilterByNamespaces():be.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(wt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return wt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(wt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=me.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const i=r[0],s=(i==null?void 0:i.id)===Te.CONNECTOR_ID.AUTH;r.length>1&&i?n.push({name:i.name,imageUrl:i.imageUrl,imageId:i.imageId,connectors:[...r],type:s?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(i==null?void 0:i.id)||""}):i&&n.push(i)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,i=me.getConnectorName(r);if(!i)return;const s=e.get(i)||[];s.find(a=>a.chain===n.chain)||s.push(n),e.set(i,s)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Te.CONNECTOR_ID.AUTH){const i=t,s=Cm(le.state),o=Ar.getSnapshot().themeMode,a=Ar.getSnapshot().themeVariables;(n=(e=i==null?void 0:i.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType}),(r=i==null?void 0:i.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Kl(a,o)}),me.setConnectors([t])}else me.setConnectors([t])},getAuthConnector(t){var r;const e=t||W.state.activeChain,n=wt.connectors.find(i=>i.id===Te.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(s=>s.chain===e):n},getAnnouncedConnectorRdns(){return wt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return wt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return wt.allConnectors.filter(r=>r.chain===W.state.activeChain).find(r=>{var i;return r.explorerId===t||((i=r.info)==null?void 0:i.rdns)===e})},syncIfAuthConnector(t){var s,o;if(t.id!=="ID_AUTH")return;const e=t,n=Cm(le.state),r=Ar.getSnapshot().themeMode,i=Ar.getSnapshot().themeVariables;(o=(s=e==null?void 0:e.provider)==null?void 0:s.syncDappData)==null||o.call(s,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:i,w3mThemeVariables:Kl(i,r)})},getConnectorsByNamespace(t){const e=wt.allConnectors.filter(n=>n.chain===t);return me.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=me.getConnector(t.id,t.rdns),n=W.state.activeChain;g8e.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?we.push("ConnectingExternal",{connector:e}):we.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?me.getConnectorsByNamespace(t):me.mergeMultiChainConnectors(wt.allConnectors)},setFilterByNamespace(t){wt.filterByNamespace=t,wt.connectors=me.getConnectors(t),be.setFilterByNamespace(t)},setConnectorId(t,e){t&&(wt.activeConnectorIds={...wt.activeConnectorIds,[e]:t},Re.setConnectedConnectorId(e,t))},removeConnectorId(t){wt.activeConnectorIds={...wt.activeConnectorIds,[t]:void 0},Re.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return wt.activeConnectorIds[t]},isConnected(t){return t?!!wt.activeConnectorIds[t]:Object.values(wt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){wt.activeConnectorIds={...QF}}}),_8e="https://secure.walletconnect.org/sdk";typeof process<"u"&&typeof process.env<"u"&&process.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL,typeof process<"u"&&typeof process.env<"u"&&process.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL,typeof process<"u"&&typeof process.env<"u"&&process.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION;const xm={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},zd=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Ln=Yt({...zd}),En={state:Ln,subscribeKey(t,e){return xr(Ln,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ye.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Ln.message=zd.message,Ln.variant=zd.variant,Ln.svg=zd.svg,Ln.open=zd.open,Ln.autoClose=zd.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=zd.autoClose}){Ln.open?(Ln.open=!1,setTimeout(()=>{Ln.message=t,Ln.variant=n,Ln.svg=e,Ln.open=!0,Ln.autoClose=r},150)):(Ln.message=t,Ln.variant=n,Ln.svg=e,Ln.open=!0,Ln.autoClose=r)}},Jt=Yt({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Am=_i({state:Jt,subscribe(t){return Sr(Jt,()=>t(Jt))},setLastNetworkInView(t){Jt.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Jt.loading=!0;try{const i=await We.fetchTransactions({account:t,cursor:Jt.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=W.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=Am.filterSpamTransactions(i.data),o=Am.filterByConnectedChain(s),a=[...Jt.transactions,...o];Jt.loading=!1,e==="coinbase"?Jt.coinbaseTransactions=Am.groupTransactionsByYearAndMonth(Jt.coinbaseTransactions,i.data):(Jt.transactions=a,Jt.transactionsByYear=Am.groupTransactionsByYearAndMonth(Jt.transactionsByYear,o)),Jt.empty=a.length===0,Jt.next=i.next?i.next:void 0}catch{const s=W.state.activeChain;it.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:le.state.projectId,cursor:Jt.next,isSmartAccount:((r=je.state.preferredAccountTypes)==null?void 0:r[s])===xm.ACCOUNT_TYPES.SMART_ACCOUNT}}),En.showError("Failed to fetch transactions"),Jt.loading=!1,Jt.empty=!0,Jt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const i=new Date(r.metadata.minedAt).getFullYear(),s=new Date(r.metadata.minedAt).getMonth(),o=n[i]??{},c=(o[s]??[]).filter(l=>l.id!==r.id);n[i]={...o,[s]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var i;return((i=r.nft_info)==null?void 0:i.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=W.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(i=>i.metadata.chain===e)},clearCursor(){Jt.next=void 0},resetTransactions(){Jt.transactions=[],Jt.transactionsByYear={},Jt.lastNetworkInView=void 0,Jt.loading=!1,Jt.empty=!1,Jt.next=void 0}},"API_ERROR"),Ht=Yt({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let qd;const xe=_i({state:Ht,subscribeKey(t,e){return xr(Ht,t,e)},_getClient(){return Ht._client},setClient(t){Ht._client=Fd(t)},async connectWalletConnect(){var t,e,n,r;if(ye.isTelegram()||ye.isSafari()&&ye.isIos()){if(qd){await qd,qd=void 0;return}if(!ye.isPairingExpired(Ht==null?void 0:Ht.wcPairingExpiry)){const i=Ht.wcUri;Ht.wcUri=i;return}qd=(e=(t=xe._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),xe.state.status="connecting",await qd,qd=void 0,Ht.wcPairingExpiry=void 0,xe.state.status="connected"}else await((r=(n=xe._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,i;await((i=(r=xe._getClient())==null?void 0:r.connectExternal)==null?void 0:i.call(r,t)),n&&W.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=xe._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||W.state.activeChain;e&&me.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Ot.setLoading(!0,W.state.activeChain);const n=me.getAuthConnector();n&&(je.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Re.setPreferredAccountTypes(je.state.preferredAccountTypes??{[e]:t}),await xe.reconnectExternal(n),Ot.setLoading(!1,W.state.activeChain),it.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=W.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=xe._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=xe._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=xe._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=xe._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=xe._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=xe._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=xe._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=xe._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=xe._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=xe._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=xe._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=xe._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Ht.wcUri=void 0,Ht.wcPairingExpiry=void 0,Ht.wcLinking=void 0,Ht.recentWallet=void 0,Ht.status="disconnected",Am.resetTransactions(),Re.deleteWalletConnectDeepLink()},resetUri(){Ht.wcUri=void 0,Ht.wcPairingExpiry=void 0,qd=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=xe.state;t&&Re.setWalletConnectDeepLink(t),e&&Re.setAppKitRecent(e),it.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=we.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Ht.wcBasic=t},setUri(t){Ht.wcUri=t,Ht.wcPairingExpiry=ye.getPairingExpiry()},setWcLinking(t){Ht.wcLinking=t},setWcError(t){Ht.wcError=t,Ht.buffering=!1},setRecentWallet(t){Ht.recentWallet=t},setBuffering(t){Ht.buffering=t},setStatus(t){Ht.status=t},async disconnect(t){var e;try{await((e=xe._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new kp("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Ht.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(me.state.activeConnectorIds[n]===t.connectorId){const s=W.state.activeCaipNetwork;if(s){const o=`${n}:${s.id}:${e}`;je.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const s=me.getConnector(t.connectorId);s?xe.connectExternal(s,n):console.warn(`No connector found for namespace "${n}"`)}}}),Rp=Yt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Yl={state:Rp,subscribe(t){return Sr(Rp,()=>t(Rp))},subscribeOpen(t){return xr(Rp,"open",t)},set(t){Object.assign(Rp,{...Rp,...t})}},IS={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Fi(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},XF={async getMyTokensWithBalance(t){const e=je.state.address,n=W.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const i=await this.getEIP155Balances(e,n);if(i)return this.filterLowQualityTokens(i)}const r=await We.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const i=IS.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),s=await xe.getCapabilities(t);if(!((r=(n=s==null?void 0:s[i])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await xe.walletGetAssets({account:t,chainFilter:[i]});return IS.isWalletGetAssetsResponse(o)?(o[i]||[]).map(c=>IS.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:W.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Mt=Yt({tokenBalances:[],loading:!1}),_t=_i({state:Mt,subscribe(t){return Sr(Mt,()=>t(Mt))},subscribeKey(t,e){return xr(Mt,t,e)},setToken(t){t&&(Mt.token=Fd(t))},setTokenAmount(t){Mt.sendTokenAmount=t},setReceiverAddress(t){Mt.receiverAddress=t},setReceiverProfileImageUrl(t){Mt.receiverProfileImageUrl=t},setReceiverProfileName(t){Mt.receiverProfileName=t},setNetworkBalanceInUsd(t){Mt.networkBalanceInUSD=t},setLoading(t){Mt.loading=t},async sendToken(){var t;try{switch(_t.setLoading(!0),(t=W.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await _t.sendEvmToken();return;case"solana":await _t.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{_t.setLoading(!1)}},async sendEvmToken(){var n,r,i,s;const t=W.state.activeChain,e=(n=je.state.preferredAccountTypes)==null?void 0:n[t];if(!_t.state.sendTokenAmount||!_t.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!_t.state.token)throw new Error("A token is required");(r=_t.state.token)!=null&&r.address?(it.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===xm.ACCOUNT_TYPES.SMART_ACCOUNT,token:_t.state.token.address,amount:_t.state.sendTokenAmount,network:((i=W.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await _t.sendERC20Token({receiverAddress:_t.state.receiverAddress,tokenAddress:_t.state.token.address,sendTokenAmount:_t.state.sendTokenAmount,decimals:_t.state.token.quantity.decimals})):(it.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===xm.ACCOUNT_TYPES.SMART_ACCOUNT,token:_t.state.token.symbol||"",amount:_t.state.sendTokenAmount,network:((s=W.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await _t.sendNativeToken({receiverAddress:_t.state.receiverAddress,sendTokenAmount:_t.state.sendTokenAmount,decimals:_t.state.token.quantity.decimals}))},async fetchTokenBalance(t){var s,o;Mt.loading=!0;const e=(s=W.state.activeCaipNetwork)==null?void 0:s.caipNetworkId,n=(o=W.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=W.state.activeCaipAddress,i=r?ye.getPlainAddress(r):void 0;if(Mt.lastRetry&&!ye.isAllowedRetry(Mt.lastRetry,30*Rt.ONE_SEC_MS))return Mt.loading=!1,[];try{if(i&&e&&n){const a=await XF.getMyTokensWithBalance();return Mt.tokenBalances=a,Mt.lastRetry=void 0,a}}catch(a){Mt.lastRetry=Date.now(),t==null||t(a),En.showError("Token Balance Unavailable")}finally{Mt.loading=!1}return[]},fetchNetworkBalance(){if(Mt.tokenBalances.length===0)return;const t=XF.mapBalancesToSwapTokens(Mt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===W.getActiveNetworkTokenAddress());e&&(Mt.networkBalanceInUSD=e?JEe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var s,o,a,c;we.pushTransactionStack({});const e=t.receiverAddress,n=je.state.address,r=xe.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i="0x";await xe.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:i,value:r??BigInt(0)}),it.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((s=je.state.preferredAccountTypes)==null?void 0:s.eip155)===xm.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=_t.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=W.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=xe._getClient())==null||c.updateBalance("eip155"),_t.resetSend()},async sendERC20Token(t){we.pushTransactionStack({onSuccess(){we.replace("Account")}});const e=xe.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(je.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ye.getPlainAddress(t.tokenAddress);await xe.writeContract({fromAddress:je.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:t8e.getERC20Abi(n),chainNamespace:"eip155"}),_t.resetSend()}},async sendSolanaToken(){var t;if(!_t.state.sendTokenAmount||!_t.state.receiverAddress)throw new Error("An amount and receiver address are required");we.pushTransactionStack({onSuccess(){we.replace("Account")}}),await xe.sendTransaction({chainNamespace:"solana",to:_t.state.receiverAddress,value:_t.state.sendTokenAmount}),(t=xe._getClient())==null||t.updateBalance("solana"),_t.resetSend()},resetSend(){Mt.token=void 0,Mt.sendTokenAmount=void 0,Mt.receiverAddress=void 0,Mt.receiverProfileImageUrl=void 0,Mt.receiverProfileName=void 0,Mt.loading=!1,Mt.tokenBalances=[]}}),$S={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},L2={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ae=Yt({chains:a8e(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),W=_i({state:Ae,subscribe(t){return Sr(Ae,()=>{t(Ae)})},subscribeKey(t,e){return xr(Ae,t,e)},subscribeChainProp(t,e,n){let r;return Sr(Ae.chains,()=>{var s;const i=n||Ae.activeChain;if(i){const o=(s=Ae.chains.get(i))==null?void 0:s[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:i}=Re.getActiveNetworkProps(),s=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===i)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=le.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Ae.noAdapters=!0),Ae.noAdapters||(Ae.activeChain=a==null?void 0:a.namespace,Ae.activeCaipNetwork=s,W.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:s}),Ae.activeChain&&Yl.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);W.state.chains.set(u,{namespace:u,networkState:Yt({...L2,caipNetwork:d==null?void 0:d[0]}),accountState:Yt($S),caipNetworks:d??[],...n}),W.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Ae.activeChain===t){const r=Array.from(Ae.chains.entries()).find(([i])=>i!==t);if(r){const i=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];i&&W.setActiveCaipNetwork(i)}}Ae.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Ae.chains.set(t.namespace,{namespace:t.namespace,networkState:{...L2,caipNetwork:r[0]},accountState:$S,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),W.setRequestedCaipNetworks((r==null?void 0:r.filter(i=>i.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Ae.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(i=>i.id===t.id)||r.push(t),Ae.chains.set(t.chainNamespace,{...e,caipNetworks:r}),W.setRequestedCaipNetworks(r,t.chainNamespace),me.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,i,s;const n=Ae.chains.get(t);if(n){const o=((r=Ae.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((i=n.caipNetworks)==null?void 0:i.filter(c=>c.id!==e))||[]];o&&((s=n==null?void 0:n.caipNetworks)!=null&&s[0])&&W.setActiveCaipNetwork(n.caipNetworks[0]),Ae.chains.set(t,{...n,caipNetworks:a}),W.setRequestedCaipNetworks(a||[],t),a.length===0&&me.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Ae.chains.get(t);n&&(n.networkState={...n.networkState||L2,...e},Ae.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Ae.chains.get(t);if(r){const i={...r.accountState||$S,...e};Ae.chains.set(t,{...r,accountState:i}),(Ae.chains.size===1||Ae.activeChain===t)&&(e.caipAddress&&(Ae.activeCaipAddress=e.caipAddress),je.replaceState(i))}},setChainNetworkData(t,e){if(!t)return;const n=Ae.chains.get(t);if(n){const r={...n.networkState||L2,...e};Ae.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){W.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&me.removeConnectorId(n)},setActiveNamespace(t){var r,i;Ae.activeChain=t;const e=t?Ae.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Ae.activeCaipAddress=(i=e==null?void 0:e.accountState)==null?void 0:i.caipAddress,Ae.activeCaipNetwork=n,W.setChainNetworkData(t,{caipNetwork:n}),Re.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Yl.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,i,s;if(!t)return;Ae.activeChain!==t.chainNamespace&&W.setIsSwitchingNamespace(!0);const e=Ae.chains.get(t.chainNamespace);Ae.activeChain=t.chainNamespace,Ae.activeCaipNetwork=t,W.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Ae.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(i=e==null?void 0:e.accountState)==null?void 0:i.address}`:Ae.activeCaipAddress=void 0,W.setAccountProp("caipAddress",Ae.activeCaipAddress,t.chainNamespace),e&&je.replaceState(e.accountState),_t.resetSend(),Yl.set({activeChain:Ae.activeChain,selectedNetworkId:(s=Ae.activeCaipNetwork)==null?void 0:s.caipNetworkId}),Re.setActiveCaipNetworkId(t.caipNetworkId),!W.checkIfSupportedNetwork(t.chainNamespace)&&le.state.enableNetworkSwitch&&!le.state.allowUnsupportedChain&&!xe.state.wcBasic&&W.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Ae.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var i;if(!t)return;const e=t!==W.state.activeChain,n=(i=W.getNetworkData(t))==null?void 0:i.caipNetwork,r=W.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await W.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=W.state.chains.get(W.state.activeChain),n=!((i=e==null?void 0:e.caipNetworks)!=null&&i.some(s=>{var o;return s.id===((o=Ae.activeCaipNetwork)==null?void 0:o.id)})),r=W.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Ot.close()}catch{we.goBack()}it.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Ae.activeChain,n=Ae.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Ae.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Ae.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var i;let n=Ae.activeChain;if(e&&(n=e),!n)return;const r=(i=Ae.chains.get(n))==null?void 0:i.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Ae.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Ae.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ye.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Ae.chains.forEach(e=>{const n=W.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){W.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=W.getAllRequestedCaipNetworks().map(s=>s.chainNamespace),i=Array.from(new Set(r));me.filterByNamespaces(i)},getAllApprovedCaipNetworkIds(){const t=[];return Ae.chains.forEach(e=>{const n=W.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Ae.activeCaipNetwork},getActiveCaipAddress(){return Ae.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Ae.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=W.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());W.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Ae.activeCaipNetwork,r=W.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(i=>i.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Ae.activeChain)return!0;const e=W.getRequestedCaipNetworks(Ae.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){W.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=qF.caipNetworkIdToNumber((r=Ae.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Ae.activeChain;if(!e||!t)return!1;const n=W.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,i;const t=((r=Ae.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((i=Ae.activeCaipNetwork)==null?void 0:i.id)||1,n=Rt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){Ot.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ae.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Rt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){W.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Ae.activeCaipAddress=void 0,W.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),me.removeConnectorId(e)},setIsSwitchingNamespace(t){Ae.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Ae.chains.forEach(i=>{Te.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(s=>s===i.namespace)&&i.namespace&&t.push(i.namespace)}),t.length>0){const i=t[0];return e=i?(r=(n=Ae.chains.get(i))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=W.state.chains.get(t))==null?void 0:e.accountState:je.state},getNetworkData(t){var n;const e=t||Ae.activeChain;if(e)return(n=W.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var i,s,o;if(!t)return;const n=W.state.chains.get(t),r=(i=n==null?void 0:n.caipNetworks)==null?void 0:i.find(a=>a.id===e);return r||((s=n==null?void 0:n.networkState)==null?void 0:s.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=me.state.filterByNamespace;return(t?[Ae.chains.get(t)]:Array.from(Ae.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?W.getRequestedCaipNetworks(t):W.getAllRequestedCaipNetworks()}}),S8e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},ez=ye.getBlockchainApiUrl(),Ai=Yt({clientId:null,api:new Sm({baseUrl:ez,clientId:null}),supportedChains:{http:[],ws:[]}}),We={state:Ai,async get(t){const{st:e,sv:n}=We.getSdkProperties(),r=le.state.projectId,i={...t.params||{},st:e,sv:n,projectId:r};return Ai.api.get({...t,params:i})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=le.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ai.supportedChains.http.length||await We.getSupportedNetworks()}catch{return!1}return Ai.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await We.get({path:"v1/supported-chains"});return Ai.supportedChains=t,t}catch{return Ai.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await We.isNetworkSupported(e))return{avatar:"",name:""};const r=Re.getIdentityFromCacheForAddress(t);if(r)return r;const i=await We.get({path:`/v1/identity/${t}`,params:{sender:W.state.activeCaipAddress?ye.getPlainAddress(W.state.activeCaipAddress):void 0}});return Re.updateIdentityCache({address:t,identity:i,timestamp:Date.now()}),i},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:i,chainId:s}){var a;return await We.isNetworkSupported((a=W.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?We.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:s},signal:r,cache:i}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:i}){var o;return await We.isNetworkSupported((o=W.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?We.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:i}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await We.isNetworkSupported((n=W.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?We.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await We.isNetworkSupported((n=W.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ai.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:le.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await We.isNetworkSupported((r=W.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?We.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var i;const{st:e,sv:n}=We.getSdkProperties();if(!await We.isNetworkSupported((i=W.state.activeCaipNetwork)==null?void 0:i.caipNetworkId))throw new Error("Network not supported for Gas Price");return We.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:i}){var o;if(!await We.isNetworkSupported((o=W.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ai.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Rt.CONVERT_SLIPPAGE_TOLERANCE},projectId:le.state.projectId,from:e,to:n,userAddress:r,disableEstimate:i}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:i}=We.getSdkProperties();if(!await We.isNetworkSupported((o=W.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return We.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:i}})},async getBalance(t,e,n){var l;const{st:r,sv:i}=We.getSdkProperties();if(!await We.isNetworkSupported((l=W.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return En.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Re.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await We.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:i}});return Re.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await We.isNetworkSupported((n=W.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?We.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await We.isNetworkSupported((n=W.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?We.get({path:`/v1/profile/reverse/${t}`,params:{sender:je.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await We.isNetworkSupported((n=W.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?We.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var s;return await We.isNetworkSupported((s=W.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ai.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:i}){var a;return await We.isNetworkSupported((a=W.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ai.api.post({path:"/v1/generators/onrampurl",params:{projectId:le.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:i}})).url:""},async getOnrampOptions(){var e;if(!await We.isNetworkSupported((e=W.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await We.get({path:"/v1/onramp/options"})}catch{return S8e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var i;try{return await We.isNetworkSupported((i=W.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?await Ai.api.post({path:"/v1/onramp/quote",params:{projectId:le.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await We.isNetworkSupported((n=W.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?We.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var i;return await We.isNetworkSupported((i=W.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ai.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:le.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ai.clientId=t,Ai.api=new Sm({baseUrl:ez,clientId:t})}},zs=Yt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),je=_i({state:zs,replaceState(t){t&&Object.assign(zs,Fd(t))},subscribe(t){return W.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return W.subscribeChainProp("accountState",i=>{if(i){const s=i[t];r!==s&&(r=s,e(s))}},n)},setStatus(t,e){W.setAccountProp("status",t,e)},getCaipAddress(t){return W.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ye.getPlainAddress(t):void 0;e===W.state.activeChain&&(W.state.activeCaipAddress=t),W.setAccountProp("caipAddress",t,e),W.setAccountProp("address",n,e)},setBalance(t,e,n){W.setAccountProp("balance",t,n),W.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){W.setAccountProp("profileName",t,e)},setProfileImage(t,e){W.setAccountProp("profileImage",t,e)},setUser(t,e){W.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){W.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){W.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){W.setAccountProp("currentTab",t,W.state.activeChain)},setTokenBalance(t,e){t&&W.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){W.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){W.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=W.getAccountProp("addressLabels",n)||new Map;r.set(t,e),W.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=W.getAccountProp("addressLabels",e)||new Map;n.delete(t),W.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){W.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){W.setAccountProp("preferredAccountTypes",{...zs.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){zs.preferredAccountTypes=t},setSocialProvider(t,e){t&&W.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){W.setAccountProp("socialWindow",t?Fd(t):void 0,e)},setFarcasterUrl(t,e){W.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var s,o;zs.balanceLoading=!0;const e=(s=W.state.activeCaipNetwork)==null?void 0:s.caipNetworkId,n=(o=W.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=W.state.activeCaipAddress,i=r?ye.getPlainAddress(r):void 0;if(zs.lastRetry&&!ye.isAllowedRetry(zs.lastRetry,30*Rt.ONE_SEC_MS))return zs.balanceLoading=!1,[];try{if(i&&e&&n){const c=(await We.getBalance(i,e)).balances.filter(l=>l.quantity.decimals!=="0");return je.setTokenBalance(c,n),zs.lastRetry=void 0,zs.balanceLoading=!1,c}}catch(a){zs.lastRetry=Date.now(),t==null||t(a),En.showError("Token Balance Unavailable")}finally{zs.balanceLoading=!1}return[]},resetAccount(t){W.resetAccount(t)}}),x8e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=W.state.activeCaipNetwork,r=we.state.data;if(t.id===(n==null?void 0:n.id))return;const s=je.getCaipAddress(W.state.activeChain),o=t.chainNamespace!==W.state.activeChain,a=je.getCaipAddress(t.chainNamespace),l=me.getConnectorId(W.state.activeChain)===Te.CONNECTOR_ID.AUTH,u=Te.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?we.push("SwitchNetwork",{...r,network:t}):s&&o&&!a?we.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):we.push("SwitchNetwork",{...r,network:t})}},Ii=Yt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Ot=_i({state:Ii,subscribe(t){return Sr(Ii,()=>t(Ii))},subscribeKey(t,e){return xr(Ii,t,e)},async open(t){var o,a;const e=je.state.status==="connected",n=t==null?void 0:t.namespace,r=W.state.activeChain,i=n&&n!==r,s=(o=W.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(xe.state.wcBasic?be.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await be.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),me.setFilterByNamespace(t==null?void 0:t.namespace),Ot.setLoading(!0,n),n&&i){const c=((a=W.getNetworkData(n))==null?void 0:a.caipNetwork)||W.getRequestedCaipNetworks(n)[0];c&&x8e.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=W.state.noAdapters;le.state.manualWCControl||c&&!s?ye.isMobile()?we.reset("AllWallets"):we.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?we.reset(t.view,t.data):s?we.reset("Account"):we.reset("Connect")}Ii.open=!0,Yl.set({open:!0}),it.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=le.state.enableEmbedded,e=!!W.state.activeCaipAddress;Ii.open&&it.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ii.open=!1,we.reset("Connect"),Ot.clearLoading(),t?e?we.replace("Account"):we.push("Connect"):Yl.set({open:!1}),xe.resetUri()},setLoading(t,e){e&&Ii.loadingNamespaceMap.set(e,t),Ii.loading=t,Yl.set({loading:t})},clearLoading(){Ii.loadingNamespaceMap.clear(),Ii.loading=!1},shake(){Ii.shake||(Ii.shake=!0,setTimeout(()=>{Ii.shake=!1},500))}}),Im={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},PS={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},pt=Yt({providers:ZF,selectedProvider:null,error:null,purchaseCurrency:Im,paymentCurrency:PS,purchaseCurrencies:[Im],paymentCurrencies:[],quotesLoading:!1}),OS=_i({state:pt,subscribe(t){return Sr(pt,()=>t(pt))},subscribeKey(t,e){return xr(pt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=W.state.activeChain===Te.CHAIN.SOLANA?"SOL":"USDC",n=je.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",c8e),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",le.state.projectId),pt.selectedProvider={...t,url:r.toString()}}else pt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=ZF.filter(r=>e.includes(r.name));pt.providers=n}else pt.providers=[]},setPurchaseCurrency(t){pt.purchaseCurrency=t},setPaymentCurrency(t){pt.paymentCurrency=t},setPurchaseAmount(t){OS.state.purchaseAmount=t},setPaymentAmount(t){OS.state.paymentAmount=t},async getAvailableCurrencies(){const t=await We.getOnrampOptions();pt.purchaseCurrencies=t.purchaseCurrencies,pt.paymentCurrencies=t.paymentCurrencies,pt.paymentCurrency=t.paymentCurrencies[0]||PS,pt.purchaseCurrency=t.purchaseCurrencies[0]||Im,await be.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await be.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;pt.quotesLoading=!0;try{const n=await We.getOnrampQuote({purchaseCurrency:pt.purchaseCurrency,paymentCurrency:pt.paymentCurrency,amount:((t=pt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=pt.purchaseCurrency)==null?void 0:e.symbol});return pt.quotesLoading=!1,pt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return pt.error=n.message,pt.quotesLoading=!1,null}finally{pt.quotesLoading=!1}},resetState(){pt.selectedProvider=null,pt.error=null,pt.purchaseCurrency=Im,pt.paymentCurrency=PS,pt.purchaseCurrencies=[Im],pt.paymentCurrencies=[],pt.paymentAmount=void 0,pt.purchaseAmount=void 0,pt.quotesLoading=!1}}),So=Yt({message:"",open:!1,triggerRect:{width:0,height:0,top:0,left:0},variant:"shade"}),Mp=_i({state:So,subscribe(t){return Sr(So,()=>t(So))},subscribeKey(t,e){return xr(So,t,e)},showTooltip({message:t,triggerRect:e,variant:n}){So.open=!0,So.message=t,So.triggerRect=e,So.variant=n},hide(){So.open=!1,So.message="",So.triggerRect={width:0,height:0,top:0,left:0}}}),tz=2147483648,A8e={convertEVMChainIdToCoinType(t){if(t>=tz)throw new Error("Invalid chainId");return(tz|t)>>>0}},qs=Yt({suggestions:[],loading:!1}),$m=_i({state:qs,subscribe(t){return Sr(qs,()=>t(qs))},subscribeKey(t,e){return xr(qs,t,e)},async resolveName(t){var e,n;try{return await We.lookupEnsName(t)}catch(r){const i=r;throw new Error(((n=(e=i==null?void 0:i.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await We.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{qs.loading=!0,qs.suggestions=[];const e=await We.getEnsNameSuggestions(t);return qs.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],qs.suggestions}catch(e){const n=$m.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{qs.loading=!1}},async getNamesForAddress(t){try{if(!W.state.activeCaipNetwork)return[];const n=Re.getEnsFromCacheForAddress(t);if(n)return n;const r=await We.reverseLookupEnsName({address:t});return Re.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=$m.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=W.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=je.state.address,r=me.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");qs.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});we.pushTransactionStack({onCancel(){we.replace("RegisterAccountName")}});const s=await xe.signMessage(i);qs.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=A8e.convertEVMChainIdToCoinType(Number(o));await We.registerEnsName({coinType:a,address:n,signature:s,message:i}),je.setProfileName(t,e.chainNamespace),we.replace("RegisterAccountNameSuccess")}catch(i){const s=$m.parseEnsApiError(i,`Error registering name ${t}`);throw we.replace("RegisterAccountName"),new Error(s)}finally{qs.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,i;const n=t;return((i=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:i.description)||e}}),Hd={getSIWX(){return le.state.siwx},async initializeIfEnabled(){var s;const t=le.state.siwx,e=W.getActiveCaipAddress();if(!(t&&e))return;const[n,r,i]=e.split(":");if(W.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,i)).length)return;await Ot.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),it.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((s=xe._getClient())==null?void 0:s.disconnect().catch(console.error)),we.reset("Connect"),En.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=le.state.siwx,e=ye.getPlainAddress(W.getActiveCaipAddress()),n=W.getActiveCaipNetwork(),r=xe._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const i=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),s=i.toString();me.getConnectorId(n.chainNamespace)===Te.CONNECTOR_ID.AUTH&&we.pushTransactionStack({});const a=await r.signMessage(s);await t.addSession({data:i,message:s,signature:a}),Ot.close(),it.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(i){const s=this.getSIWXEventProperties();(!Ot.state.open||we.state.view==="ApproveTransaction")&&await Ot.open({view:"SIWXSignMessage"}),s.isSmartAccount?En.showError("This application might not support Smart Accounts"):En.showError("Signature declined"),it.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:s}),console.error("SWIXUtil:requestSignMessage",i)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await xe.disconnect():Ot.close(),we.reset("Connect"),it.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=le.state.siwx,e=ye.getPlainAddress(W.getActiveCaipAddress()),n=W.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=we.state.view==="ApproveTransaction",r=we.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Hd.getSIWX(),i=new Set(e.map(u=>u.split(":")[0]));if(!r||i.size!==1||!i.has("eip155"))return!1;const s=await r.createMessage({chainId:((a=W.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:s.nonce,domain:s.domain,uri:s.uri,exp:s.expirationTime,iat:s.issuedAt,nbf:s.notBefore,requestId:s.requestId,version:s.version,resources:s.resources,statement:s.statement,chainId:s.chainId,methods:n,chains:[s.chainId,...e.filter(u=>u!==s.chainId)]});if(En.showLoading("Authenticating...",{autoClose:!1}),je.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(i)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||s.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),it.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Hd.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),it.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Hd.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{En.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=W.state.activeChain;return{network:((e=W.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=je.state.preferredAccountTypes)==null?void 0:n[t])===xm.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},nz={isUnsupportedChainView(){return we.state.view==="UnsupportedChain"||we.state.view==="SwitchNetwork"&&we.state.history.includes("UnsupportedChain")},async safeClose(){if(this.isUnsupportedChainView()){Ot.shake();return}if(await Hd.isSIWXCloseDisabled()){Ot.shake();return}Ot.close()}};var I8e=Object.defineProperty,$8e=(t,e,n)=>e in t?I8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rz=(t,e,n)=>$8e(t,typeof e!="symbol"?e+"":e,n);let P8e=class extends rs{constructor(e){super(),this.opts=e,rz(this,"protocol","wc"),rz(this,"version",2)}};var O8e=Object.defineProperty,T8e=(t,e,n)=>e in t?O8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N8e=(t,e,n)=>T8e(t,typeof e!="symbol"?e+"":e,n);let k8e=class extends rs{constructor(e,n){super(),this.core=e,this.logger=n,N8e(this,"records",new Map)}},R8e=class{constructor(e,n){this.logger=e,this.core=n}},M8e=class extends rs{constructor(e,n){super(),this.relayer=e,this.logger=n}},B8e=class extends rs{constructor(e){super()}},D8e=class{constructor(e,n,r,i){this.core=e,this.logger=n,this.name=r}},L8e=class extends rs{constructor(e,n){super(),this.relayer=e,this.logger=n}},j8e=class extends rs{constructor(e,n){super(),this.core=e,this.logger=n}},U8e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},F8e=class{constructor(e,n){this.projectId=e,this.logger=n}},z8e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var q8e=Object.defineProperty,H8e=(t,e,n)=>e in t?q8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iz=(t,e,n)=>H8e(t,typeof e!="symbol"?e+"":e,n);let W8e=class{constructor(e){this.opts=e,iz(this,"protocol","wc"),iz(this,"version",2)}},K8e=class{constructor(e){this.client=e}};function Pm(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function sz(t){return Pm(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const oz="2.23.2";let Om={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${oz}`};class Wd extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Wd?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),i=(()=>n.cause instanceof Wd&&n.cause.docsPath||n.docsPath)(),s=(a=Om.getDocsUrl)==null?void 0:a.call(Om,{...n,docsPath:i}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],...Om.version?[`Version: ${Om.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=oz}walk(e){return az(this,e)}}function az(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?az(t.cause,e):e?null:t}class cz extends Wd{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Bp(t,{dir:e,size:n=32}={}){return typeof t=="string"?V8e(t,{dir:e,size:n}):G8e(t,{dir:e,size:n})}function V8e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new cz({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function G8e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new cz({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let i=0;i<n;i++){const s=e==="right";r[s?i:n-i-1]=t[s?i:t.length-i-1]}return r}class Z8e extends Wd{constructor({max:e,min:n,signed:r,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Y8e extends Wd{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Dp(t,{size:e}){if(sz(t)>e)throw new Y8e({givenSize:sz(t),maxSize:e})}function TS(t,e={}){const{signed:n}=e;e.size&&Dp(t,{size:e.size});const r=BigInt(t);if(!n)return r;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return r<=s?r:r-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function J8e(t,e={}){return Number(TS(t,e))}const Q8e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function NS(t,e={}){return typeof t=="number"||typeof t=="bigint"?uz(t,e):typeof t=="string"?t4e(t,e):typeof t=="boolean"?X8e(t,e):lz(t,e)}function X8e(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Dp(n,{size:e.size}),Bp(n,{size:e.size})):n}function lz(t,e={}){let n="";for(let i=0;i<t.length;i++)n+=Q8e[t[i]];const r=`0x${n}`;return typeof e.size=="number"?(Dp(r,{size:e.size}),Bp(r,{dir:"right",size:e.size})):r}function uz(t,e={}){const{signed:n,size:r}=e,i=BigInt(t);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new Z8e({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?Bp(a,{size:r}):a}const e4e=new TextEncoder;function t4e(t,e={}){const n=e4e.encode(t);return lz(n,e)}const n4e=new TextEncoder;function r4e(t,e={}){return typeof t=="number"||typeof t=="bigint"?s4e(t,e):typeof t=="boolean"?i4e(t,e):Pm(t)?hz(t,e):fz(t,e)}function i4e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Dp(n,{size:e.size}),Bp(n,{size:e.size})):n}const Sc={zero:48,nine:57,A:65,F:70,a:97,f:102};function dz(t){if(t>=Sc.zero&&t<=Sc.nine)return t-Sc.zero;if(t>=Sc.A&&t<=Sc.F)return t-(Sc.A-10);if(t>=Sc.a&&t<=Sc.f)return t-(Sc.a-10)}function hz(t,e={}){let n=t;e.size&&(Dp(n,{size:e.size}),n=Bp(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=dz(r.charCodeAt(a++)),l=dz(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Wd(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);s[o]=c*16+l}return s}function s4e(t,e){const n=uz(t,e);return hz(n)}function fz(t,e={}){const n=n4e.encode(t);return typeof e.size=="number"?(Dp(n,{size:e.size}),Bp(n,{dir:"right",size:e.size})):n}function j2(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function o4e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Tm(t,...e){if(!o4e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function a4e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");j2(t.outputLen),j2(t.blockLen)}function Lp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function pz(t,e){Tm(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const U2=BigInt(2**32-1),gz=BigInt(32);function c4e(t,e=!1){return e?{h:Number(t&U2),l:Number(t>>gz&U2)}:{h:Number(t>>gz&U2)|0,l:Number(t&U2)|0}}function l4e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=c4e(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const u4e=(t,e,n)=>t<<n|e>>>32-n,d4e=(t,e,n)=>e<<n|t>>>32-n,h4e=(t,e,n)=>e<<n-32|t>>>64-n,f4e=(t,e,n)=>t<<n-32|e>>>64-n,jp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function p4e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function kS(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ya(t,e){return t<<32-e|t>>>e}const mz=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function g4e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function yz(t){for(let e=0;e<t.length;e++)t[e]=g4e(t[e])}function m4e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function F2(t){return typeof t=="string"&&(t=m4e(t)),Tm(t),t}function y4e(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Tm(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class RS{clone(){return this._cloneInto()}}function wz(t){const e=r=>t().update(F2(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function w4e(t=32){if(jp&&typeof jp.getRandomValues=="function")return jp.getRandomValues(new Uint8Array(t));if(jp&&typeof jp.randomBytes=="function")return jp.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const bz=[],vz=[],Ez=[],b4e=BigInt(0),Nm=BigInt(1),v4e=BigInt(2),E4e=BigInt(7),C4e=BigInt(256),_4e=BigInt(113);for(let t=0,e=Nm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],bz.push(2*(5*r+n)),vz.push((t+1)*(t+2)/2%64);let i=b4e;for(let s=0;s<7;s++)e=(e<<Nm^(e>>E4e)*_4e)%C4e,e&v4e&&(i^=Nm<<(Nm<<BigInt(s))-Nm);Ez.push(i)}const[S4e,x4e]=l4e(Ez,!0),Cz=(t,e,n)=>n>32?h4e(t,e,n):u4e(t,e,n),_z=(t,e,n)=>n>32?f4e(t,e,n):d4e(t,e,n);function A4e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Cz(l,u,1)^n[a],h=_z(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=vz[o],c=Cz(i,s,a),l=_z(i,s,a),u=bz[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=S4e[r],t[1]^=x4e[r]}n.fill(0)}class MS extends RS{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,j2(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=p4e(this.state)}keccak(){mz||yz(this.state32),A4e(this.state32,this.rounds),mz||yz(this.state32),this.posOut=0,this.pos=0}update(e){Lp(this);const{blockLen:n,state:r}=this;e=F2(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Lp(this,!1),Tm(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return j2(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(pz(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new MS(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const I4e=((t,e,n)=>wz(()=>new MS(e,t,n)))(1,136,256/8);function Sz(t,e){const n=e||"hex",r=I4e(Pm(t,{strict:!1})?r4e(t):t);return n==="bytes"?r:NS(r)}class $4e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const BS=new $4e(8192);function P4e(t,e){if(BS.has(`${t}.${e}`))return BS.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Sz(fz(n),"bytes"),i=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(r[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return BS.set(`${t}.${e}`,s),s}function O4e(t){const e=Sz(`0x${t.substring(4)}`).substring(26);return P4e(`0x${e}`)}async function T4e({hash:t,signature:e}){const n=Pm(t)?t:NS(t),{secp256k1:r}=await Promise.resolve().then(()=>vCe);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),g=xz(f);return new r.Signature(TS(l),TS(u)).addRecoveryBit(g)}const o=Pm(e)?e:NS(e),a=J8e(`0x${o.slice(130)}`),c=xz(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function xz(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function N4e({hash:t,signature:e}){return O4e(await T4e({hash:t,signature:e}))}function k4e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function R4e(t,e,n){return t&e^~t&n}function M4e(t,e,n){return t&e^t&n^e&n}class B4e extends RS{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=kS(this.buffer)}update(e){Lp(this);const{view:n,buffer:r,blockLen:i}=this;e=F2(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=kS(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Lp(this),pz(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;k4e(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=kS(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const D4e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Jl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ql=new Uint32Array(64);class L4e extends B4e{constructor(){super(64,32,8,!1),this.A=Jl[0]|0,this.B=Jl[1]|0,this.C=Jl[2]|0,this.D=Jl[3]|0,this.E=Jl[4]|0,this.F=Jl[5]|0,this.G=Jl[6]|0,this.H=Jl[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ql[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ql[d-15],f=Ql[d-2],g=ya(h,7)^ya(h,18)^h>>>3,p=ya(f,17)^ya(f,19)^f>>>10;Ql[d]=p+Ql[d-7]+g+Ql[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ya(a,6)^ya(a,11)^ya(a,25),f=u+h+R4e(a,c,l)+D4e[d]+Ql[d]|0,p=(ya(r,2)^ya(r,13)^ya(r,22))+M4e(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+p|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Ql.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const j4e=wz(()=>new L4e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const z2=BigInt(0),q2=BigInt(1),U4e=BigInt(2);function Kd(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function km(t){if(!Kd(t))throw new Error("Uint8Array expected")}function Up(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const F4e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Fp(t){km(t);let e="";for(let n=0;n<t.length;n++)e+=F4e[t[n]];return e}function zp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function DS(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?z2:BigInt("0x"+t)}const xc={_0:48,_9:57,A:65,F:70,a:97,f:102};function Az(t){if(t>=xc._0&&t<=xc._9)return t-xc._0;if(t>=xc.A&&t<=xc.F)return t-(xc.A-10);if(t>=xc.a&&t<=xc.f)return t-(xc.a-10)}function qp(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=Az(t.charCodeAt(s)),a=Az(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Vd(t){return DS(Fp(t))}function LS(t){return km(t),DS(Fp(Uint8Array.from(t).reverse()))}function Hp(t,e){return qp(t.toString(16).padStart(e*2,"0"))}function jS(t,e){return Hp(t,e).reverse()}function z4e(t){return qp(zp(t))}function xo(t,e,n){let r;if(typeof e=="string")try{r=qp(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Kd(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function Rm(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];km(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function q4e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function H4e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const US=t=>typeof t=="bigint"&&z2<=t;function H2(t,e,n){return US(t)&&US(e)&&US(n)&&e<=t&&t<n}function Gd(t,e,n,r){if(!H2(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Iz(t){let e;for(e=0;t>z2;t>>=q2,e+=1);return e}function W4e(t,e){return t>>BigInt(e)&q2}function K4e(t,e,n){return t|(n?q2:z2)<<BigInt(e)}const FS=t=>(U4e<<BigInt(t-1))-q2,zS=t=>new Uint8Array(t),$z=t=>Uint8Array.from(t);function Pz(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=zS(t),i=zS(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>n(i,r,...d),c=(d=zS())=>{i=a($z([0]),d),r=a(),d.length!==0&&(i=a($z([1]),d),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return Rm(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const V4e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Kd(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Mm(t,e,n={}){const r=(i,s,o)=>{const a=V4e[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const G4e=()=>{throw new Error("not implemented")};function qS(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const Z4e=Object.freeze(Object.defineProperty({__proto__:null,aInRange:Gd,abool:Up,abytes:km,bitGet:W4e,bitLen:Iz,bitMask:FS,bitSet:K4e,bytesToHex:Fp,bytesToNumberBE:Vd,bytesToNumberLE:LS,concatBytes:Rm,createHmacDrbg:Pz,ensureBytes:xo,equalBytes:q4e,hexToBytes:qp,hexToNumber:DS,inRange:H2,isBytes:Kd,memoized:qS,notImplemented:G4e,numberToBytesBE:Hp,numberToBytesLE:jS,numberToHexUnpadded:zp,numberToVarBytesBE:z4e,utf8ToBytes:H4e,validateObject:Mm},Symbol.toStringTag,{value:"Module"}));class Oz extends RS{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,a4e(e);const r=F2(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Lp(this),this.iHash.update(e),this}digestInto(e){Lp(this),Tm(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Tz=(t,e,n)=>new Oz(t,e).update(n).digest();Tz.create=(t,e)=>new Oz(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rr=BigInt(0),Cn=BigInt(1),Zd=BigInt(2),Y4e=BigInt(3),HS=BigInt(4),Nz=BigInt(5),kz=BigInt(8);function $i(t,e){const n=t%e;return n>=rr?n:e+n}function J4e(t,e,n){if(e<rr)throw new Error("invalid exponent, negatives unsupported");if(n<=rr)throw new Error("invalid modulus");if(n===Cn)return rr;let r=Cn;for(;e>rr;)e&Cn&&(r=r*t%n),t=t*t%n,e>>=Cn;return r}function Hs(t,e,n){let r=t;for(;e-- >rr;)r*=r,r%=n;return r}function WS(t,e){if(t===rr)throw new Error("invert: expected non-zero number");if(e<=rr)throw new Error("invert: expected positive modulus, got "+e);let n=$i(t,e),r=e,i=rr,s=Cn;for(;n!==rr;){const a=r/n,c=r%n,l=i-s*a;r=n,n=c,i=s,s=l}if(r!==Cn)throw new Error("invert: does not exist");return $i(i,e)}function Q4e(t){const e=(t-Cn)/Zd;let n,r,i;for(n=t-Cn,r=0;n%Zd===rr;n/=Zd,r++);for(i=Zd;i<t&&J4e(i,e,t)!==t-Cn;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Cn)/HS;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(n+Cn)/Zd;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,i),n),d=a.pow(c,s),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let p=a.sqr(h);f<l&&!a.eql(p,a.ONE);f++)p=a.sqr(p);const g=a.pow(u,Cn<<BigInt(l-f-1));u=a.sqr(g),d=a.mul(d,g),h=a.mul(h,u),l=f}return d}}function X4e(t){if(t%HS===Y4e){const e=(t+Cn)/HS;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%kz===Nz){const e=(t-Nz)/kz;return function(r,i){const s=r.mul(i,Zd),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,Zd),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return Q4e(t)}const eCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function tCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=eCe.reduce((r,i)=>(r[i]="function",r),e);return Mm(t,n)}function nCe(t,e,n){if(n<rr)throw new Error("invalid exponent, negatives unsupported");if(n===rr)return t.ONE;if(n===Cn)return e;let r=t.ONE,i=e;for(;n>rr;)n&Cn&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Cn;return r}function rCe(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function Rz(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Mz(t,e,n=!1,r={}){if(t<=rr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=Rz(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:FS(i),ZERO:rr,ONE:Cn,create:c=>$i(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return rr<=c&&c<t},is0:c=>c===rr,isOdd:c=>(c&Cn)===Cn,neg:c=>$i(-c,t),eql:(c,l)=>c===l,sqr:c=>$i(c*c,t),add:(c,l)=>$i(c+l,t),sub:(c,l)=>$i(c-l,t),mul:(c,l)=>$i(c*l,t),pow:(c,l)=>nCe(a,c,l),div:(c,l)=>$i(c*WS(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>WS(c,t),sqrt:r.sqrt||(c=>(o||(o=X4e(t)),o(a,c))),invertBatch:c=>rCe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?jS(c,s):Hp(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?LS(c):Vd(c)}});return Object.freeze(a)}function Bz(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Dz(t){const e=Bz(t);return e+Math.ceil(e/2)}function iCe(t,e,n=!1){const r=t.length,i=Bz(e),s=Dz(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?LS(t):Vd(t),a=$i(o,e-Cn)+Cn;return n?jS(a,i):Hp(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lz=BigInt(0),W2=BigInt(1);function KS(t,e){const n=e.negate();return t?n:e}function jz(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function VS(t,e){jz(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function sCe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function oCe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const GS=new WeakMap,Uz=new WeakMap;function ZS(t){return Uz.get(t)||1}function aCe(t,e){return{constTimeNegate:KS,hasPrecomputes(n){return ZS(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>Lz;)r&W2&&(i=i.add(s)),s=s.double(),r>>=W2;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=VS(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=VS(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<s;h++){const f=h*o;let g=Number(i&l);i>>=d,g>o&&(g-=u,i+=W2);const p=f,m=f+Math.abs(g)-1,y=h%2!==0,w=g<0;g===0?c=c.add(KS(y,r[p])):a=a.add(KS(w,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=VS(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(i===Lz)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=W2),f===0)continue;let g=r[h+Math.abs(f)-1];f<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(n,r,i){let s=GS.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&GS.set(r,i(s))),s},wNAFCached(n,r,i){const s=ZS(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=ZS(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){jz(r,e),Uz.set(n,r),GS.delete(n)}}}function cCe(t,e,n,r){if(sCe(n,t),oCe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Iz(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<r.length;f++){const g=r[f],p=Number(g>>BigInt(d)&BigInt(a));c[p]=c[p].add(n[f])}let h=i;for(let f=c.length-1,g=i;f>0;f--)g=g.add(c[f]),h=h.add(g);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Fz(t){return tCe(t.Fp),Mm(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Rz(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zz(t){t.lowS!==void 0&&Up("lowS",t.lowS),t.prehash!==void 0&&Up("prehash",t.prehash)}function lCe(t){const e=Fz(t);Mm(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:uCe,hexToBytes:dCe}=Z4e;class hCe extends Error{constructor(e=""){super(e)}}const Ac={Err:hCe,_tlv:{encode:(t,e)=>{const{Err:n}=Ac;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=zp(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?zp(i.length/2|128):"";return zp(t)+s+i+e},decode(t,e){const{Err:n}=Ac;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Ac;if(t<Ic)throw new e("integer: negative integers are not allowed");let n=zp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ac;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return uCe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Ac,i=typeof t=="string"?dCe(t):t;km(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Ac,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Ic=BigInt(0),ir=BigInt(1);BigInt(2);const qz=BigInt(3);BigInt(4);function fCe(t){const e=lCe(t),{Fp:n}=e,r=Mz(e.n,e.nBitLength),i=e.toBytes||((p,m,y)=>{const w=m.toAffine();return Rm(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),s=e.fromBytes||(p=>{const m=p.subarray(1),y=n.fromBytes(m.subarray(0,n.BYTES)),w=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:y,y:w}});function o(p){const{a:m,b:y}=e,w=n.sqr(p),b=n.mul(w,p);return n.add(n.add(b,n.mul(p,m)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(p){return H2(p,ir,e.n)}function c(p){const{allowedPrivateKeyLengths:m,nByteLength:y,wrapPrivateKey:w,n:b}=e;if(m&&typeof p!="bigint"){if(Kd(p)&&(p=Fp(p)),typeof p!="string"||!m.includes(p.length))throw new Error("invalid private key");p=p.padStart(y*2,"0")}let v;try{v=typeof p=="bigint"?p:Vd(xo("private key",p,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof p)}return w&&(v=$i(v,b)),Gd("private key",v,ir,b),v}function l(p){if(!(p instanceof h))throw new Error("ProjectivePoint expected")}const u=qS((p,m)=>{const{px:y,py:w,pz:b}=p;if(n.eql(b,n.ONE))return{x:y,y:w};const v=p.is0();m==null&&(m=v?n.ONE:n.inv(b));const C=n.mul(y,m),A=n.mul(w,m),$=n.mul(b,m);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql($,n.ONE))throw new Error("invZ was invalid");return{x:C,y:A}}),d=qS(p=>{if(p.is0()){if(e.allowInfinityPoint&&!n.is0(p.py))return;throw new Error("bad point: ZERO")}const{x:m,y}=p.toAffine();if(!n.isValid(m)||!n.isValid(y))throw new Error("bad point: x or y not FE");const w=n.sqr(y),b=o(m);if(!n.eql(w,b))throw new Error("bad point: equation left != right");if(!p.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,y,w){if(this.px=m,this.py=y,this.pz=w,m==null||!n.isValid(m))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:y,y:w}=m||{};if(!m||!n.isValid(y)||!n.isValid(w))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(y)&&b(w)?h.ZERO:new h(y,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const y=n.invertBatch(m.map(w=>w.pz));return m.map((w,b)=>w.toAffine(y[b])).map(h.fromAffine)}static fromHex(m){const y=h.fromAffine(s(xo("pointHex",m)));return y.assertValidity(),y}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,y){return cCe(h,r,m,y)}_setWindowSize(m){g.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:y,py:w,pz:b}=this,{px:v,py:C,pz:A}=m,$=n.eql(n.mul(y,A),n.mul(v,b)),R=n.eql(n.mul(w,A),n.mul(C,b));return $&&R}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:y}=e,w=n.mul(y,qz),{px:b,py:v,pz:C}=this;let A=n.ZERO,$=n.ZERO,R=n.ZERO,P=n.mul(b,b),L=n.mul(v,v),U=n.mul(C,C),D=n.mul(b,v);return D=n.add(D,D),R=n.mul(b,C),R=n.add(R,R),A=n.mul(m,R),$=n.mul(w,U),$=n.add(A,$),A=n.sub(L,$),$=n.add(L,$),$=n.mul(A,$),A=n.mul(D,A),R=n.mul(w,R),U=n.mul(m,U),D=n.sub(P,U),D=n.mul(m,D),D=n.add(D,R),R=n.add(P,P),P=n.add(R,P),P=n.add(P,U),P=n.mul(P,D),$=n.add($,P),U=n.mul(v,C),U=n.add(U,U),P=n.mul(U,D),A=n.sub(A,P),R=n.mul(U,L),R=n.add(R,R),R=n.add(R,R),new h(A,$,R)}add(m){l(m);const{px:y,py:w,pz:b}=this,{px:v,py:C,pz:A}=m;let $=n.ZERO,R=n.ZERO,P=n.ZERO;const L=e.a,U=n.mul(e.b,qz);let D=n.mul(y,v),j=n.mul(w,C),I=n.mul(b,A),E=n.add(y,w),S=n.add(v,C);E=n.mul(E,S),S=n.add(D,j),E=n.sub(E,S),S=n.add(y,b);let k=n.add(v,A);return S=n.mul(S,k),k=n.add(D,I),S=n.sub(S,k),k=n.add(w,b),$=n.add(C,A),k=n.mul(k,$),$=n.add(j,I),k=n.sub(k,$),P=n.mul(L,S),$=n.mul(U,I),P=n.add($,P),$=n.sub(j,P),P=n.add(j,P),R=n.mul($,P),j=n.add(D,D),j=n.add(j,D),I=n.mul(L,I),S=n.mul(U,S),j=n.add(j,I),I=n.sub(D,I),I=n.mul(L,I),S=n.add(S,I),D=n.mul(j,S),R=n.add(R,D),D=n.mul(k,S),$=n.mul(E,$),$=n.sub($,D),D=n.mul(E,j),P=n.mul(k,P),P=n.add(P,D),new h($,R,P)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return g.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:y,n:w}=e;Gd("scalar",m,Ic,w);const b=h.ZERO;if(m===Ic)return b;if(this.is0()||m===ir)return this;if(!y||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:v,k1:C,k2neg:A,k2:$}=y.splitScalar(m),R=b,P=b,L=this;for(;C>Ic||$>Ic;)C&ir&&(R=R.add(L)),$&ir&&(P=P.add(L)),L=L.double(),C>>=ir,$>>=ir;return v&&(R=R.negate()),A&&(P=P.negate()),P=new h(n.mul(P.px,y.beta),P.py,P.pz),R.add(P)}multiply(m){const{endo:y,n:w}=e;Gd("scalar",m,ir,w);let b,v;if(y){const{k1neg:C,k1:A,k2neg:$,k2:R}=y.splitScalar(m);let{p:P,f:L}=this.wNAF(A),{p:U,f:D}=this.wNAF(R);P=g.constTimeNegate(C,P),U=g.constTimeNegate($,U),U=new h(n.mul(U.px,y.beta),U.py,U.pz),b=P.add(U),v=L.add(D)}else{const{p:C,f:A}=this.wNAF(m);b=C,v=A}return h.normalizeZ([b,v])[0]}multiplyAndAddUnsafe(m,y,w){const b=h.BASE,v=(A,$)=>$===Ic||$===ir||!A.equals(b)?A.multiplyUnsafe($):A.multiply($),C=v(this,y).add(v(m,w));return C.is0()?void 0:C}toAffine(m){return u(this,m)}isTorsionFree(){const{h:m,isTorsionFree:y}=e;if(m===ir)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:y}=e;return m===ir?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return Up("isCompressed",m),this.assertValidity(),i(h,this,m)}toHex(m=!0){return Up("isCompressed",m),Fp(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,g=aCe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function pCe(t){const e=Fz(t);return Mm(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function gCe(t){const e=pCe(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(I){return $i(I,r)}function a(I){return WS(I,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=fCe({...e,toBytes(I,E,S){const k=E.toAffine(),_=n.toBytes(k.x),x=Rm;return Up("isCompressed",S),S?x(Uint8Array.from([E.hasEvenY()?2:3]),_):x(Uint8Array.from([4]),_,n.toBytes(k.y))},fromBytes(I){const E=I.length,S=I[0],k=I.subarray(1);if(E===i&&(S===2||S===3)){const _=Vd(k);if(!H2(_,ir,n.ORDER))throw new Error("Point is not on curve");const x=u(_);let T;try{T=n.sqrt(x)}catch(N){const B=N instanceof Error?": "+N.message:"";throw new Error("Point is not on curve"+B)}const M=(T&ir)===ir;return(S&1)===1!==M&&(T=n.neg(T)),{x:_,y:T}}else if(E===s&&S===4){const _=n.fromBytes(k.subarray(0,n.BYTES)),x=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:_,y:x}}else{const _=i,x=s;throw new Error("invalid Point, expected length of "+_+", or uncompressed "+x+", got "+E)}}}),h=I=>Fp(Hp(I,e.nByteLength));function f(I){const E=r>>ir;return I>E}function g(I){return f(I)?o(-I):I}const p=(I,E,S)=>Vd(I.slice(E,S));class m{constructor(E,S,k){this.r=E,this.s=S,this.recovery=k,this.assertValidity()}static fromCompact(E){const S=e.nByteLength;return E=xo("compactSignature",E,S*2),new m(p(E,0,S),p(E,S,2*S))}static fromDER(E){const{r:S,s:k}=Ac.toSig(xo("DER",E));return new m(S,k)}assertValidity(){Gd("r",this.r,ir,r),Gd("s",this.s,ir,r)}addRecoveryBit(E){return new m(this.r,this.s,E)}recoverPublicKey(E){const{r:S,s:k,recovery:_}=this,x=A(xo("msgHash",E));if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");const T=_===2||_===3?S+e.n:S;if(T>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=_&1?"03":"02",O=c.fromHex(M+h(T)),N=a(T),B=o(-x*N),F=o(k*N),z=c.BASE.multiplyAndAddUnsafe(O,B,F);if(!z)throw new Error("point at infinify");return z.assertValidity(),z}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return qp(this.toDERHex())}toDERHex(){return Ac.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return qp(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(I){try{return l(I),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const I=Dz(e.n);return iCe(e.randomBytes(I),e.n)},precompute(I=8,E=c.BASE){return E._setWindowSize(I),E.multiply(BigInt(3)),E}};function w(I,E=!0){return c.fromPrivateKey(I).toRawBytes(E)}function b(I){const E=Kd(I),S=typeof I=="string",k=(E||S)&&I.length;return E?k===i||k===s:S?k===2*i||k===2*s:I instanceof c}function v(I,E,S=!0){if(b(I))throw new Error("first arg must be private key");if(!b(E))throw new Error("second arg must be public key");return c.fromHex(E).multiply(l(I)).toRawBytes(S)}const C=e.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");const E=Vd(I),S=I.length*8-e.nBitLength;return S>0?E>>BigInt(S):E},A=e.bits2int_modN||function(I){return o(C(I))},$=FS(e.nBitLength);function R(I){return Gd("num < 2^"+e.nBitLength,I,Ic,$),Hp(I,e.nByteLength)}function P(I,E,S=L){if(["recovered","canonical"].some(H=>H in S))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:_}=e;let{lowS:x,prehash:T,extraEntropy:M}=S;x==null&&(x=!0),I=xo("msgHash",I),zz(S),T&&(I=xo("prehashed msgHash",k(I)));const O=A(I),N=l(E),B=[R(N),R(O)];if(M!=null&&M!==!1){const H=M===!0?_(n.BYTES):M;B.push(xo("extraEntropy",H))}const F=Rm(...B),z=O;function q(H){const K=C(H);if(!d(K))return;const Y=a(K),J=c.BASE.multiply(K).toAffine(),G=o(J.x);if(G===Ic)return;const te=o(Y*o(z+G*N));if(te===Ic)return;let se=(J.x===G?0:2)|Number(J.y&ir),he=te;return x&&f(te)&&(he=g(te),se^=1),new m(G,he,se)}return{seed:F,k2sig:q}}const L={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function D(I,E,S=L){const{seed:k,k2sig:_}=P(I,E,S),x=e;return Pz(x.hash.outputLen,x.nByteLength,x.hmac)(k,_)}c.BASE._setWindowSize(8);function j(I,E,S,k=U){var se;const _=I;E=xo("msgHash",E),S=xo("publicKey",S);const{lowS:x,prehash:T,format:M}=k;if(zz(k),"strict"in k)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&M!=="compact"&&M!=="der")throw new Error("format must be compact or der");const O=typeof _=="string"||Kd(_),N=!O&&!M&&typeof _=="object"&&_!==null&&typeof _.r=="bigint"&&typeof _.s=="bigint";if(!O&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let B,F;try{if(N&&(B=new m(_.r,_.s)),O){try{M!=="compact"&&(B=m.fromDER(_))}catch(he){if(!(he instanceof Ac.Err))throw he}!B&&M!=="der"&&(B=m.fromCompact(_))}F=c.fromHex(S)}catch{return!1}if(!B||x&&B.hasHighS())return!1;T&&(E=e.hash(E));const{r:z,s:q}=B,H=A(E),K=a(q),Y=o(H*K),J=o(z*K),G=(se=c.BASE.multiplyAndAddUnsafe(F,Y,J))==null?void 0:se.toAffine();return G?o(G.x)===z:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:v,sign:D,verify:j,ProjectivePoint:c,Signature:m,utils:y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mCe(t){return{hash:t,hmac:(e,...n)=>Tz(t,e,y4e(...n)),randomBytes:w4e}}function yCe(t,e){const n=r=>gCe({...t,...mCe(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hz=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Wz=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),wCe=BigInt(1),YS=BigInt(2),Kz=(t,e)=>(t+e/YS)/e;function bCe(t){const e=Hz,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Hs(u,n,e)*u%e,h=Hs(d,n,e)*u%e,f=Hs(h,YS,e)*l%e,g=Hs(f,i,e)*f%e,p=Hs(g,s,e)*g%e,m=Hs(p,a,e)*p%e,y=Hs(m,c,e)*m%e,w=Hs(y,a,e)*p%e,b=Hs(w,n,e)*u%e,v=Hs(b,o,e)*g%e,C=Hs(v,r,e)*l%e,A=Hs(C,YS,e);if(!JS.eql(JS.sqr(A),t))throw new Error("Cannot find square root");return A}const JS=Mz(Hz,void 0,void 0,{sqrt:bCe}),Vz=yCe({a:BigInt(0),b:BigInt(7),Fp:JS,n:Wz,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Wz,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-wCe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=Kz(s*t,e),c=Kz(-r*t,e);let l=$i(t-a*n-c*i,e),u=$i(-a*r-c*s,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},j4e);BigInt(0),Vz.ProjectivePoint;const vCe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Vz},Symbol.toStringTag,{value:"Module"}));function ECe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),i=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const g=(f-h)*s+1>>>0,p=new Uint8Array(g);for(;h!==f;){let w=l[h],b=0;for(let v=g-1;(w!==0||b<d)&&v!==-1;v--,b++)w+=256*p[v]>>>0,p[v]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");d=b,h++}let m=g-d;for(;m!==g&&p[m]===0;)m++;let y=r.repeat(u);for(;m<g;++m)y+=t.charAt(p[m]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*i+1>>>0,g=new Uint8Array(f);for(;u<l.length;){const w=l.charCodeAt(u);if(w>255)return;let b=e[w];if(b===255)return;let v=0;for(let C=f-1;(b!==0||v<h)&&C!==-1;C--,v++)b+=n*g[C]>>>0,g[C]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");h=v,u++}let p=f-h;for(;p!==f&&g[p]===0;)p++;const m=new Uint8Array(d+(f-p));let y=d;for(;p!==f;)m[y++]=g[p++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var CCe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Gz=ECe(CCe),_Ce=":";function Wp(t){const[e,n]=t.split(_Ce);return{namespace:e,reference:n}}function Zz(t,e){return t.includes(":")?[t]:e.chains||[]}var SCe=Object.defineProperty,xCe=Object.defineProperties,ACe=Object.getOwnPropertyDescriptors,Yz=Object.getOwnPropertySymbols,ICe=Object.prototype.hasOwnProperty,$Ce=Object.prototype.propertyIsEnumerable,Jz=(t,e,n)=>e in t?SCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qz=(t,e)=>{for(var n in e||(e={}))ICe.call(e,n)&&Jz(t,n,e[n]);if(Yz)for(var n of Yz(e))$Ce.call(e,n)&&Jz(t,n,e[n]);return t},PCe=(t,e)=>xCe(t,ACe(e));const OCe="ReactNative",ds={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},TCe="js";function K2(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Xl(){return!Xi()&&!!N1()&&navigator.product===OCe}function NCe(){return Xl()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function kCe(){return Xl()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Kp(){return!K2()&&!!N1()&&!!Xi()}function Bm(){return Xl()?ds.reactNative:K2()?ds.node:Kp()?ds.browser:ds.unknown}function Xz(){var t;try{return Xl()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function RCe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const i=e[r];i!==void 0&&n.set(r,i)}return n.toString()}function MCe(t){var e,n;const r=eq();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),PCe(Qz(Qz({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),t||r}}function eq(){return gC()||{name:"",description:"",url:"",icons:[""]}}function BCe(){if(Bm()===ds.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=nB();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function DCe(){var t;const e=Bm();return e===ds.browser?[e,((t=fC())==null?void 0:t.host)||"unknown"].join(":"):e}function tq(t,e,n){const r=BCe(),i=DCe();return[[t,e].join("-"),[TCe,n].join("-"),r,i].join("/")}function LCe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=tq(t,e,r),d={auth:i,ua:u,projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},h=RCe(l[1]||"",d);return l[0]+"?"+h}function Yd(t,e){return t.filter(n=>e.includes(n)).length===t.length}function QS(t){return Object.fromEntries(t.entries())}function XS(t){return new Map(Object.entries(t))}function Jd(t=X.FIVE_MINUTES,e){const n=X.toMiliseconds(t||X.FIVE_MINUTES);let r,i,s,o;return{resolve:a=>{s&&r&&(clearTimeout(s),r(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,i=c})}}function eu(t,e,n){return new Promise(async(r,i)=>{const s=setTimeout(()=>i(new Error(n)),e);try{const o=await t;r(o)}catch(o){i(o)}clearTimeout(s)})}function nq(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function jCe(t){return nq("topic",t)}function UCe(t){return nq("id",t)}function rq(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function jn(t,e){return X.fromMiliseconds((e||Date.now())+X.toMiliseconds(t))}function tu(t){return Date.now()>=X.toMiliseconds(t)}function Tt(t,e){return`${t}${e?`:${e}`:""}`}function wa(t=[],e=[]){return[...new Set([...t,...e])]}async function FCe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=zCe(s,t,e),a=Bm();if(a===ds.browser){if(!((r=Xi())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}qCe(o)}else a===ds.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function zCe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${VCe(r,!0)}`}else i=`${i}/wc?${r}`;return i}function qCe(t){let e="_self";KCe()?e="_top":(WCe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function HCe(t,e){let n="";try{if(Kp()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function iq(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function sq(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function ex(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function WCe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function KCe(){try{return window.self!==window.top}catch{return!1}}function VCe(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function oq(t){return Buffer.from(t,"base64").toString("utf-8")}function GCe(t){return new Promise(e=>setTimeout(e,t))}function Dm(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ZCe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Lm(t,...e){if(!ZCe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function tx(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Dm(t.outputLen),Dm(t.blockLen)}function Vp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aq(t,e){Lm(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const V2=BigInt(2**32-1),cq=BigInt(32);function YCe(t,e=!1){return e?{h:Number(t&V2),l:Number(t>>cq&V2)}:{h:Number(t>>cq&V2)|0,l:Number(t&V2)|0}}function JCe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=YCe(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const QCe=(t,e,n)=>t<<n|e>>>32-n,XCe=(t,e,n)=>e<<n|t>>>32-n,e_e=(t,e,n)=>e<<n-32|t>>>64-n,t_e=(t,e,n)=>t<<n-32|e>>>64-n,Gp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function n_e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function nx(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ba(t,e){return t<<32-e|t>>>e}const lq=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function r_e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function uq(t){for(let e=0;e<t.length;e++)t[e]=r_e(t[e])}function i_e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Zp(t){return typeof t=="string"&&(t=i_e(t)),Lm(t),t}function s_e(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Lm(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}let rx=class{clone(){return this._cloneInto()}};function dq(t){const e=r=>t().update(Zp(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Yp(t=32){if(Gp&&typeof Gp.getRandomValues=="function")return Gp.getRandomValues(new Uint8Array(t));if(Gp&&typeof Gp.randomBytes=="function")return Gp.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const hq=[],fq=[],pq=[],o_e=BigInt(0),jm=BigInt(1),a_e=BigInt(2),c_e=BigInt(7),l_e=BigInt(256),u_e=BigInt(113);for(let t=0,e=jm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],hq.push(2*(5*r+n)),fq.push((t+1)*(t+2)/2%64);let i=o_e;for(let s=0;s<7;s++)e=(e<<jm^(e>>c_e)*u_e)%l_e,e&a_e&&(i^=jm<<(jm<<BigInt(s))-jm);pq.push(i)}const[d_e,h_e]=JCe(pq,!0),gq=(t,e,n)=>n>32?e_e(t,e,n):QCe(t,e,n),mq=(t,e,n)=>n>32?t_e(t,e,n):XCe(t,e,n);function f_e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=gq(l,u,1)^n[a],h=mq(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=fq[o],c=gq(i,s,a),l=mq(i,s,a),u=hq[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=d_e[r],t[1]^=h_e[r]}n.fill(0)}let p_e=class xV extends rx{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Dm(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=n_e(this.state)}keccak(){lq||uq(this.state32),f_e(this.state32,this.rounds),lq||uq(this.state32),this.posOut=0,this.pos=0}update(e){Vp(this);const{blockLen:n,state:r}=this;e=Zp(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Vp(this,!1),Lm(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Dm(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(aq(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new xV(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const g_e=(t,e,n)=>dq(()=>new p_e(e,t,n)),m_e=g_e(1,136,256/8),y_e="https://rpc.walletconnect.org/v1";function yq(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(m_e(n)).toString("hex")}async function w_e(t,e,n,r,i,s){switch(n.t){case"eip191":return await b_e(t,e,n.s);case"eip1271":return await v_e(t,e,n.s,r,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function b_e(t,e,n){return(await N4e({hash:yq(e),signature:n})).toLowerCase()===t.toLowerCase()}async function v_e(t,e,n,r,i,s){const o=Wp(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=yq(e).substring(2),h=a+d+c+l+u,f=await fetch(`${s||y_e}/?chainId=${r}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:E_e(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:g}=await f.json();return g?g.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function E_e(){return Date.now()+Math.floor(Math.random()*1e3)}function C_e(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return Gz.encode(s)}var __e=Object.defineProperty,S_e=Object.defineProperties,x_e=Object.getOwnPropertyDescriptors,wq=Object.getOwnPropertySymbols,A_e=Object.prototype.hasOwnProperty,I_e=Object.prototype.propertyIsEnumerable,bq=(t,e,n)=>e in t?__e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$_e=(t,e)=>{for(var n in e||(e={}))A_e.call(e,n)&&bq(t,n,e[n]);if(wq)for(var n of wq(e))I_e.call(e,n)&&bq(t,n,e[n]);return t},P_e=(t,e)=>S_e(t,x_e(e));const O_e="did:pkh:",ix=t=>t==null?void 0:t.split(":"),T_e=t=>{const e=t&&ix(t);if(e)return t.includes(O_e)?e[3]:e[1]},sx=t=>{const e=t&&ix(t);if(e)return e[2]+":"+e[3]},G2=t=>{const e=t&&ix(t);if(e)return e.pop()};async function vq(t){const{cacao:e,projectId:n}=t,{s:r,p:i}=e,s=Eq(i,i.iss),o=G2(i.iss);return await w_e(o,s,r,sx(i.iss),n)}const Eq=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=G2(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${T_e(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(p=>`
- ${p}`).join("")}`:void 0,g=Z2(t.resources);if(g){const p=Um(g);i=U_e(i,p)}return[n,r,"",i,"",s,o,a,c,l,u,d,h,f].filter(p=>p!=null).join(`
`)};function N_e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function k_e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Qd(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const s=r[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function R_e(t,e,n,r={}){return n==null||n.sort((i,s)=>i.localeCompare(s)),{att:{[t]:M_e(e,n,r)}}}function M_e(t,e,n={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const r=e.map(i=>({[`${t}/${i}`]:[n]}));return Object.assign({},...r)}function Cq(t){return Qd(t),`urn:recap:${N_e(t).replace(/=/g,"")}`}function Um(t){const e=k_e(t.replace("urn:recap:",""));return Qd(e),e}function B_e(t,e,n){const r=R_e(t,e,n);return Cq(r)}function D_e(t){return t&&t.includes("urn:recap:")}function L_e(t,e){const n=Um(t),r=Um(e),i=j_e(n,r);return Cq(i)}function j_e(t,e){Qd(t),Qd(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),r={att:{}};return n.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[i]=P_e($_e({},r.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),r}function U_e(t="",e){Qd(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(i++,`(${i}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const s=r.join(" "),o=`${n}${s}`;return`${t?t+" ":""}${o}`}function _q(t){var e;const n=Um(t);Qd(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function Sq(t){const e=Um(t);Qd(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function Z2(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return D_e(e)?e:void 0}function ox(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function xq(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function hs(t,...e){if(!xq(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Aq(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function F_e(t,e){hs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Iq(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const nu=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),z_e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");function q_e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ax(t){if(typeof t=="string")t=q_e(t);else if(xq(t))t=cx(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function H_e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function W_e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const K_e=(t,e)=>{function n(r,...i){if(hs(r),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?hs(l):hs(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&hs(i[1]);const o=e(r,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");hs(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,hs(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(hs(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function $q(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!V_e(e))throw new Error("invalid output, must be aligned");return e}function Pq(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function V_e(t){return t.byteOffset%4===0}function cx(t){return Uint8Array.from(t)}function Jp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const Oq=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),G_e=Oq("expand 16-byte k"),Z_e=Oq("expand 32-byte k"),Y_e=nu(G_e),J_e=nu(Z_e);function bt(t,e){return t<<e|t>>>32-e}function lx(t){return t.byteOffset%4===0}const Y2=64,Q_e=16,Tq=2**32-1,Nq=new Uint32Array;function X_e(t,e,n,r,i,s,o,a){const c=i.length,l=new Uint8Array(Y2),u=nu(l),d=lx(i)&&lx(s),h=d?nu(i):Nq,f=d?nu(s):Nq;for(let g=0;g<c;o++){if(t(e,n,r,u,o,a),o>=Tq)throw new Error("arx: counter overflow");const p=Math.min(Y2,c-g);if(d&&p===Y2){const m=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let y=0,w;y<Q_e;y++)w=m+y,f[w]=h[w]^u[y];g+=Y2;continue}for(let m=0,y;m<p;m++)y=g+m,s[y]=i[y]^l[m];g+=p}}function eSe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=H_e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return ox(i),ox(o),Iq(s),Iq(n),(a,c,l,u,d=0)=>{hs(a),hs(c),hs(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),hs(u),ox(d),d<0||d>=Tq)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let g=a.length,p,m;if(g===32)f.push(p=cx(a)),m=J_e;else if(g===16&&n)p=new Uint8Array(32),p.set(a),p.set(a,16),m=Y_e,f.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);lx(c)||f.push(c=cx(c));const y=nu(p);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,y,nu(c.subarray(0,16)),y),c=c.subarray(16)}const w=16-i;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const v=new Uint8Array(12);v.set(c,s?0:12-c.length),c=v,f.push(c)}const b=nu(c);return X_e(t,m,y,b,l,u,d,o),Jp(...f),u}}const Ir=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class tSe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=ax(e),hs(e,32);const n=Ir(e,0),r=Ir(e,2),i=Ir(e,4),s=Ir(e,6),o=Ir(e,8),a=Ir(e,10),c=Ir(e,12),l=Ir(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ir(e,16+2*u)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],g=o[7],p=o[8],m=o[9],y=Ir(e,n+0),w=Ir(e,n+2),b=Ir(e,n+4),v=Ir(e,n+6),C=Ir(e,n+8),A=Ir(e,n+10),$=Ir(e,n+12),R=Ir(e,n+14);let P=s[0]+(y&8191),L=s[1]+((y>>>13|w<<3)&8191),U=s[2]+((w>>>10|b<<6)&8191),D=s[3]+((b>>>7|v<<9)&8191),j=s[4]+((v>>>4|C<<12)&8191),I=s[5]+(C>>>1&8191),E=s[6]+((C>>>14|A<<2)&8191),S=s[7]+((A>>>11|$<<5)&8191),k=s[8]+(($>>>8|R<<8)&8191),_=s[9]+(R>>>5|i),x=0,T=x+P*a+L*(5*m)+U*(5*p)+D*(5*g)+j*(5*f);x=T>>>13,T&=8191,T+=I*(5*h)+E*(5*d)+S*(5*u)+k*(5*l)+_*(5*c),x+=T>>>13,T&=8191;let M=x+P*c+L*a+U*(5*m)+D*(5*p)+j*(5*g);x=M>>>13,M&=8191,M+=I*(5*f)+E*(5*h)+S*(5*d)+k*(5*u)+_*(5*l),x+=M>>>13,M&=8191;let O=x+P*l+L*c+U*a+D*(5*m)+j*(5*p);x=O>>>13,O&=8191,O+=I*(5*g)+E*(5*f)+S*(5*h)+k*(5*d)+_*(5*u),x+=O>>>13,O&=8191;let N=x+P*u+L*l+U*c+D*a+j*(5*m);x=N>>>13,N&=8191,N+=I*(5*p)+E*(5*g)+S*(5*f)+k*(5*h)+_*(5*d),x+=N>>>13,N&=8191;let B=x+P*d+L*u+U*l+D*c+j*a;x=B>>>13,B&=8191,B+=I*(5*m)+E*(5*p)+S*(5*g)+k*(5*f)+_*(5*h),x+=B>>>13,B&=8191;let F=x+P*h+L*d+U*u+D*l+j*c;x=F>>>13,F&=8191,F+=I*a+E*(5*m)+S*(5*p)+k*(5*g)+_*(5*f),x+=F>>>13,F&=8191;let z=x+P*f+L*h+U*d+D*u+j*l;x=z>>>13,z&=8191,z+=I*c+E*a+S*(5*m)+k*(5*p)+_*(5*g),x+=z>>>13,z&=8191;let q=x+P*g+L*f+U*h+D*d+j*u;x=q>>>13,q&=8191,q+=I*l+E*c+S*a+k*(5*m)+_*(5*p),x+=q>>>13,q&=8191;let H=x+P*p+L*g+U*f+D*h+j*d;x=H>>>13,H&=8191,H+=I*u+E*l+S*c+k*a+_*(5*m),x+=H>>>13,H&=8191;let K=x+P*m+L*p+U*g+D*f+j*h;x=K>>>13,K&=8191,K+=I*d+E*u+S*l+k*c+_*a,x+=K>>>13,K&=8191,x=(x<<2)+x|0,x=x+T|0,T=x&8191,x=x>>>13,M+=x,s[0]=T,s[1]=M,s[2]=O,s[3]=N,s[4]=B,s[5]=F,s[6]=z,s[7]=q,s[8]=H,s[9]=K}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Jp(r)}update(e){Aq(this);const{buffer:n,blockLen:r}=this;e=ax(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Jp(this.h,this.r,this.buffer,this.pad)}digestInto(e){Aq(this),F_e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function nSe(t){const e=(r,i)=>t(i).update(ax(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const rSe=nSe(t=>new tSe(t));function iSe(t,e,n,r,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],g=e[4],p=e[5],m=e[6],y=e[7],w=i,b=n[0],v=n[1],C=n[2],A=o,$=a,R=c,P=l,L=u,U=d,D=h,j=f,I=g,E=p,S=m,k=y,_=w,x=b,T=v,M=C;for(let N=0;N<s;N+=2)A=A+L|0,_=bt(_^A,16),I=I+_|0,L=bt(L^I,12),A=A+L|0,_=bt(_^A,8),I=I+_|0,L=bt(L^I,7),$=$+U|0,x=bt(x^$,16),E=E+x|0,U=bt(U^E,12),$=$+U|0,x=bt(x^$,8),E=E+x|0,U=bt(U^E,7),R=R+D|0,T=bt(T^R,16),S=S+T|0,D=bt(D^S,12),R=R+D|0,T=bt(T^R,8),S=S+T|0,D=bt(D^S,7),P=P+j|0,M=bt(M^P,16),k=k+M|0,j=bt(j^k,12),P=P+j|0,M=bt(M^P,8),k=k+M|0,j=bt(j^k,7),A=A+U|0,M=bt(M^A,16),S=S+M|0,U=bt(U^S,12),A=A+U|0,M=bt(M^A,8),S=S+M|0,U=bt(U^S,7),$=$+D|0,_=bt(_^$,16),k=k+_|0,D=bt(D^k,12),$=$+D|0,_=bt(_^$,8),k=k+_|0,D=bt(D^k,7),R=R+j|0,x=bt(x^R,16),I=I+x|0,j=bt(j^I,12),R=R+j|0,x=bt(x^R,8),I=I+x|0,j=bt(j^I,7),P=P+L|0,T=bt(T^P,16),E=E+T|0,L=bt(L^E,12),P=P+L|0,T=bt(T^P,8),E=E+T|0,L=bt(L^E,7);let O=0;r[O++]=o+A|0,r[O++]=a+$|0,r[O++]=c+R|0,r[O++]=l+P|0,r[O++]=u+L|0,r[O++]=d+U|0,r[O++]=h+D|0,r[O++]=f+j|0,r[O++]=g+I|0,r[O++]=p+E|0,r[O++]=m+S|0,r[O++]=y+k|0,r[O++]=w+_|0,r[O++]=b+x|0,r[O++]=v+T|0,r[O++]=C+M|0}const sSe=eSe(iSe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),oSe=new Uint8Array(16),kq=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(oSe.subarray(n))},aSe=new Uint8Array(32);function Rq(t,e,n,r,i){const s=t(e,n,aSe),o=rSe.create(s);i&&kq(o,i),kq(o,r);const a=new Uint8Array(16),c=z_e(a);Pq(c,0,BigInt(i?i.length:0),!0),Pq(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return Jp(s,a),l}const cSe=t=>(e,n,r)=>({encrypt(i,s){const o=i.length;s=$q(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,n,a,a,1);const c=Rq(t,e,n,a,r);return s.set(c,o),Jp(c),s},decrypt(i,s){s=$q(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=Rq(t,e,n,o,r);if(!W_e(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,n,s,s,1),Jp(c),s}}),Mq=K_e({blockSize:64,nonceLength:12,tagLength:16},cSe(sSe));let Bq=class extends rx{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,tx(e);const r=Zp(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Vp(this),this.iHash.update(e),this}digestInto(e){Vp(this),Lm(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const J2=(t,e,n)=>new Bq(t,e).update(n).digest();J2.create=(t,e)=>new Bq(t,e);function lSe(t,e,n){return tx(t),n===void 0&&(n=new Uint8Array(t.outputLen)),J2(t,Zp(n),Zp(e))}const ux=new Uint8Array([0]),Dq=new Uint8Array;function uSe(t,e,n,r=32){if(tx(t),Dm(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/t.outputLen);n===void 0&&(n=Dq);const s=new Uint8Array(i*t.outputLen),o=J2.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)ux[0]=l+1,a.update(l===0?Dq:c).update(n).update(ux).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),ux.fill(0),s.slice(0,r)}const dSe=(t,e,n,r,i)=>uSe(t,lSe(t,e,n),r,i);function hSe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function fSe(t,e,n){return t&e^~t&n}function pSe(t,e,n){return t&e^t&n^e&n}let gSe=class extends rx{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=nx(this.buffer)}update(e){Vp(this);const{view:n,buffer:r,blockLen:i}=this;e=Zp(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=nx(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Vp(this),aq(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)n[d]=0;hSe(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=nx(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const mSe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ru=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),iu=new Uint32Array(64);class ySe extends gSe{constructor(){super(64,32,8,!1),this.A=ru[0]|0,this.B=ru[1]|0,this.C=ru[2]|0,this.D=ru[3]|0,this.E=ru[4]|0,this.F=ru[5]|0,this.G=ru[6]|0,this.H=ru[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)iu[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=iu[d-15],f=iu[d-2],g=ba(h,7)^ba(h,18)^h>>>3,p=ba(f,17)^ba(f,19)^f>>>10;iu[d]=p+iu[d-7]+g+iu[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ba(a,6)^ba(a,11)^ba(a,25),f=u+h+fSe(a,c,l)+mSe[d]+iu[d]|0,g=(ba(r,2)^ba(r,13)^ba(r,22))+pSe(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){iu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Fm=dq(()=>new ySe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Q2=BigInt(0),X2=BigInt(1),wSe=BigInt(2);function Xd(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function zm(t){if(!Xd(t))throw new Error("Uint8Array expected")}function Qp(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const bSe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Xp(t){zm(t);let e="";for(let n=0;n<t.length;n++)e+=bSe[t[n]];return e}function e0(t){const e=t.toString(16);return e.length&1?"0"+e:e}function dx(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Q2:BigInt("0x"+t)}const $c={_0:48,_9:57,A:65,F:70,a:97,f:102};function Lq(t){if(t>=$c._0&&t<=$c._9)return t-$c._0;if(t>=$c.A&&t<=$c.F)return t-($c.A-10);if(t>=$c.a&&t<=$c.f)return t-($c.a-10)}function t0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=Lq(t.charCodeAt(s)),a=Lq(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function eh(t){return dx(Xp(t))}function qm(t){return zm(t),dx(Xp(Uint8Array.from(t).reverse()))}function n0(t,e){return t0(t.toString(16).padStart(e*2,"0"))}function e5(t,e){return n0(t,e).reverse()}function vSe(t){return t0(e0(t))}function fs(t,e,n){let r;if(typeof e=="string")try{r=t0(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Xd(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function Hm(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];zm(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function ESe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function CSe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const hx=t=>typeof t=="bigint"&&Q2<=t;function t5(t,e,n){return hx(t)&&hx(e)&&hx(n)&&e<=t&&t<n}function Pc(t,e,n,r){if(!t5(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function jq(t){let e;for(e=0;t>Q2;t>>=X2,e+=1);return e}function _Se(t,e){return t>>BigInt(e)&X2}function SSe(t,e,n){return t|(n?X2:Q2)<<BigInt(e)}const fx=t=>(wSe<<BigInt(t-1))-X2,px=t=>new Uint8Array(t),Uq=t=>Uint8Array.from(t);function Fq(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=px(t),i=px(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...u)=>n(i,r,...u),c=(u=px())=>{i=a(Uq([0]),u),r=a(),u.length!==0&&(i=a(Uq([1]),u),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return Hm(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const xSe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Xd(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function r0(t,e,n={}){const r=(i,s,o)=>{const a=xSe[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const ASe=()=>{throw new Error("not implemented")};function gx(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}var ISe=Object.freeze({__proto__:null,isBytes:Xd,abytes:zm,abool:Qp,bytesToHex:Xp,numberToHexUnpadded:e0,hexToNumber:dx,hexToBytes:t0,bytesToNumberBE:eh,bytesToNumberLE:qm,numberToBytesBE:n0,numberToBytesLE:e5,numberToVarBytesBE:vSe,ensureBytes:fs,concatBytes:Hm,equalBytes:ESe,utf8ToBytes:CSe,inRange:t5,aInRange:Pc,bitLen:jq,bitGet:_Se,bitSet:SSe,bitMask:fx,createHmacDrbg:Fq,validateObject:r0,notImplemented:ASe,memoized:gx});const sr=BigInt(0),_n=BigInt(1),th=BigInt(2),$Se=BigInt(3),mx=BigInt(4),zq=BigInt(5),qq=BigInt(8);function Pi(t,e){const n=t%e;return n>=sr?n:e+n}function Hq(t,e,n){if(e<sr)throw new Error("invalid exponent, negatives unsupported");if(n<=sr)throw new Error("invalid modulus");if(n===_n)return sr;let r=_n;for(;e>sr;)e&_n&&(r=r*t%n),t=t*t%n,e>>=_n;return r}function Ao(t,e,n){let r=t;for(;e-- >sr;)r*=r,r%=n;return r}function yx(t,e){if(t===sr)throw new Error("invert: expected non-zero number");if(e<=sr)throw new Error("invert: expected positive modulus, got "+e);let n=Pi(t,e),r=e,i=sr,s=_n;for(;n!==sr;){const o=r/n,a=r%n,c=i-s*o;r=n,n=a,i=s,s=c}if(r!==_n)throw new Error("invert: does not exist");return Pi(i,e)}function PSe(t){const e=(t-_n)/th;let n,r,i;for(n=t-_n,r=0;n%th===sr;n/=th,r++);for(i=th;i<t&&Hq(i,e,t)!==t-_n;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+_n)/mx;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(n+_n)/th;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,i),n),u=o.pow(a,s),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let g=o.sqr(d);h<c&&!o.eql(g,o.ONE);h++)g=o.sqr(g);const f=o.pow(l,_n<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function OSe(t){if(t%mx===$Se){const e=(t+_n)/mx;return function(n,r){const i=n.pow(r,e);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%qq===zq){const e=(t-zq)/qq;return function(n,r){const i=n.mul(r,th),s=n.pow(i,e),o=n.mul(r,s),a=n.mul(n.mul(o,th),s),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return PSe(t)}const TSe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function NSe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=TSe.reduce((r,i)=>(r[i]="function",r),e);return r0(t,n)}function kSe(t,e,n){if(n<sr)throw new Error("invalid exponent, negatives unsupported");if(n===sr)return t.ONE;if(n===_n)return e;let r=t.ONE,i=e;for(;n>sr;)n&_n&&(r=t.mul(r,i)),i=t.sqr(i),n>>=_n;return r}function RSe(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function Wq(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Kq(t,e,n=!1,r={}){if(t<=sr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=Wq(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:s,MASK:fx(i),ZERO:sr,ONE:_n,create:c=>Pi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return sr<=c&&c<t},is0:c=>c===sr,isOdd:c=>(c&_n)===_n,neg:c=>Pi(-c,t),eql:(c,l)=>c===l,sqr:c=>Pi(c*c,t),add:(c,l)=>Pi(c+l,t),sub:(c,l)=>Pi(c-l,t),mul:(c,l)=>Pi(c*l,t),pow:(c,l)=>kSe(a,c,l),div:(c,l)=>Pi(c*yx(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>yx(c,t),sqrt:r.sqrt||(c=>(o||(o=OSe(t)),o(a,c))),invertBatch:c=>RSe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?e5(c,s):n0(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?qm(c):eh(c)}});return Object.freeze(a)}function Vq(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Gq(t){const e=Vq(t);return e+Math.ceil(e/2)}function MSe(t,e,n=!1){const r=t.length,i=Vq(e),s=Gq(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?qm(t):eh(t),a=Pi(o,e-_n)+_n;return n?e5(a,i):n0(a,i)}const Zq=BigInt(0),n5=BigInt(1);function wx(t,e){const n=e.negate();return t?n:e}function Yq(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function bx(t,e){Yq(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function BSe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function DSe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const vx=new WeakMap,Jq=new WeakMap;function Ex(t){return Jq.get(t)||1}function LSe(t,e){return{constTimeNegate:wx,hasPrecomputes(n){return Ex(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>Zq;)r&n5&&(i=i.add(s)),s=s.double(),r>>=n5;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=bx(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=bx(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<s;h++){const f=h*o;let g=Number(i&l);i>>=d,g>o&&(g-=u,i+=n5);const p=f,m=f+Math.abs(g)-1,y=h%2!==0,w=g<0;g===0?c=c.add(wx(y,r[p])):a=a.add(wx(w,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=bx(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(i===Zq)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=n5),f===0)continue;let g=r[h+Math.abs(f)-1];f<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(n,r,i){let s=vx.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&vx.set(r,i(s))),s},wNAFCached(n,r,i){const s=Ex(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=Ex(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){Yq(r,e),Jq.set(n,r),vx.delete(n)}}}function jSe(t,e,n,r){if(BSe(n,t),DSe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=jq(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<r.length;f++){const g=r[f],p=Number(g>>BigInt(d)&BigInt(a));c[p]=c[p].add(n[f])}let h=i;for(let f=c.length-1,g=i;f>0;f--)g=g.add(c[f]),h=h.add(g);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Qq(t){return NSe(t.Fp),r0(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Wq(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const i0=BigInt(0),Cx=BigInt(1);function USe(t){return r0(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function FSe(t){const e=USe(t),{P:n}=e,r=w=>Pi(w,n),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(w=>w),c=e.powPminus2||(w=>Hq(w,n-BigInt(2),n));function l(w,b,v){const C=r(w*(b-v));return b=r(b-C),v=r(v+C),[b,v]}const u=(e.a-BigInt(2))/BigInt(4);function d(w,b){Pc("u",w,i0,n),Pc("scalar",b,i0,n);const v=b,C=w;let A=Cx,$=i0,R=w,P=Cx,L=i0,U;for(let j=BigInt(i-1);j>=i0;j--){const I=v>>j&Cx;L^=I,U=l(L,A,R),A=U[0],R=U[1],U=l(L,$,P),$=U[0],P=U[1],L=I;const E=A+$,S=r(E*E),k=A-$,_=r(k*k),x=S-_,T=R+P,M=R-P,O=r(M*E),N=r(T*k),B=O+N,F=O-N;R=r(B*B),P=r(C*r(F*F)),A=r(S*_),$=r(x*(S+r(u*x)))}U=l(L,A,R),A=U[0],R=U[1],U=l(L,$,P),$=U[0],P=U[1];const D=c($);return r(A*D)}function h(w){return e5(r(w),s)}function f(w){const b=fs("u coordinate",w,s);return o===32&&(b[31]&=127),qm(b)}function g(w){const b=fs("scalar",w),v=b.length;if(v!==s&&v!==o){let C=""+s+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+v)}return qm(a(b))}function p(w,b){const v=f(b),C=g(w),A=d(v,C);if(A===i0)throw new Error("invalid private or public key received");return h(A)}const m=h(e.Gu);function y(w){return p(w,m)}return{scalarMult:p,scalarMultBase:y,getSharedSecret:(w,b)=>p(w,b),getPublicKey:w=>y(w),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:m}}const _x=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const zSe=BigInt(1),Xq=BigInt(2),qSe=BigInt(3),HSe=BigInt(5);BigInt(8);function WSe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=_x,o=t*t%s*t%s,a=Ao(o,Xq,s)*o%s,c=Ao(a,zSe,s)*t%s,l=Ao(c,HSe,s)*c%s,u=Ao(l,e,s)*l%s,d=Ao(u,n,s)*u%s,h=Ao(d,r,s)*d%s,f=Ao(h,i,s)*h%s,g=Ao(f,i,s)*h%s,p=Ao(g,e,s)*l%s;return{pow_p_5_8:Ao(p,Xq,s)*t%s,b2:o}}function KSe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Sx=FSe({P:_x,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=_x,{pow_p_5_8:n,b2:r}=WSe(t);return Pi(Ao(n,qSe,e)*r,e)},adjustScalarBytes:KSe,randomBytes:Yp});function eH(t){t.lowS!==void 0&&Qp("lowS",t.lowS),t.prehash!==void 0&&Qp("prehash",t.prehash)}function VSe(t){const e=Qq(t);r0(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:GSe,hexToBytes:ZSe}=ISe;class YSe extends Error{constructor(e=""){super(e)}}const Oc={Err:YSe,_tlv:{encode:(t,e)=>{const{Err:n}=Oc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=e0(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?e0(i.length/2|128):"";return e0(t)+s+i+e},decode(t,e){const{Err:n}=Oc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Oc;if(t<Tc)throw new e("integer: negative integers are not allowed");let n=e0(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Oc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return GSe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Oc,i=typeof t=="string"?ZSe(t):t;zm(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Oc,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Tc=BigInt(0),or=BigInt(1);BigInt(2);const tH=BigInt(3);BigInt(4);function JSe(t){const e=VSe(t),{Fp:n}=e,r=Kq(e.n,e.nBitLength),i=e.toBytes||((p,m,y)=>{const w=m.toAffine();return Hm(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),s=e.fromBytes||(p=>{const m=p.subarray(1),y=n.fromBytes(m.subarray(0,n.BYTES)),w=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:y,y:w}});function o(p){const{a:m,b:y}=e,w=n.sqr(p),b=n.mul(w,p);return n.add(n.add(b,n.mul(p,m)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(p){return t5(p,or,e.n)}function c(p){const{allowedPrivateKeyLengths:m,nByteLength:y,wrapPrivateKey:w,n:b}=e;if(m&&typeof p!="bigint"){if(Xd(p)&&(p=Xp(p)),typeof p!="string"||!m.includes(p.length))throw new Error("invalid private key");p=p.padStart(y*2,"0")}let v;try{v=typeof p=="bigint"?p:eh(fs("private key",p,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof p)}return w&&(v=Pi(v,b)),Pc("private key",v,or,b),v}function l(p){if(!(p instanceof h))throw new Error("ProjectivePoint expected")}const u=gx((p,m)=>{const{px:y,py:w,pz:b}=p;if(n.eql(b,n.ONE))return{x:y,y:w};const v=p.is0();m==null&&(m=v?n.ONE:n.inv(b));const C=n.mul(y,m),A=n.mul(w,m),$=n.mul(b,m);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql($,n.ONE))throw new Error("invZ was invalid");return{x:C,y:A}}),d=gx(p=>{if(p.is0()){if(e.allowInfinityPoint&&!n.is0(p.py))return;throw new Error("bad point: ZERO")}const{x:m,y}=p.toAffine();if(!n.isValid(m)||!n.isValid(y))throw new Error("bad point: x or y not FE");const w=n.sqr(y),b=o(m);if(!n.eql(w,b))throw new Error("bad point: equation left != right");if(!p.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,y,w){if(this.px=m,this.py=y,this.pz=w,m==null||!n.isValid(m))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:y,y:w}=m||{};if(!m||!n.isValid(y)||!n.isValid(w))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(y)&&b(w)?h.ZERO:new h(y,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const y=n.invertBatch(m.map(w=>w.pz));return m.map((w,b)=>w.toAffine(y[b])).map(h.fromAffine)}static fromHex(m){const y=h.fromAffine(s(fs("pointHex",m)));return y.assertValidity(),y}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,y){return jSe(h,r,m,y)}_setWindowSize(m){g.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:y,py:w,pz:b}=this,{px:v,py:C,pz:A}=m,$=n.eql(n.mul(y,A),n.mul(v,b)),R=n.eql(n.mul(w,A),n.mul(C,b));return $&&R}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:y}=e,w=n.mul(y,tH),{px:b,py:v,pz:C}=this;let A=n.ZERO,$=n.ZERO,R=n.ZERO,P=n.mul(b,b),L=n.mul(v,v),U=n.mul(C,C),D=n.mul(b,v);return D=n.add(D,D),R=n.mul(b,C),R=n.add(R,R),A=n.mul(m,R),$=n.mul(w,U),$=n.add(A,$),A=n.sub(L,$),$=n.add(L,$),$=n.mul(A,$),A=n.mul(D,A),R=n.mul(w,R),U=n.mul(m,U),D=n.sub(P,U),D=n.mul(m,D),D=n.add(D,R),R=n.add(P,P),P=n.add(R,P),P=n.add(P,U),P=n.mul(P,D),$=n.add($,P),U=n.mul(v,C),U=n.add(U,U),P=n.mul(U,D),A=n.sub(A,P),R=n.mul(U,L),R=n.add(R,R),R=n.add(R,R),new h(A,$,R)}add(m){l(m);const{px:y,py:w,pz:b}=this,{px:v,py:C,pz:A}=m;let $=n.ZERO,R=n.ZERO,P=n.ZERO;const L=e.a,U=n.mul(e.b,tH);let D=n.mul(y,v),j=n.mul(w,C),I=n.mul(b,A),E=n.add(y,w),S=n.add(v,C);E=n.mul(E,S),S=n.add(D,j),E=n.sub(E,S),S=n.add(y,b);let k=n.add(v,A);return S=n.mul(S,k),k=n.add(D,I),S=n.sub(S,k),k=n.add(w,b),$=n.add(C,A),k=n.mul(k,$),$=n.add(j,I),k=n.sub(k,$),P=n.mul(L,S),$=n.mul(U,I),P=n.add($,P),$=n.sub(j,P),P=n.add(j,P),R=n.mul($,P),j=n.add(D,D),j=n.add(j,D),I=n.mul(L,I),S=n.mul(U,S),j=n.add(j,I),I=n.sub(D,I),I=n.mul(L,I),S=n.add(S,I),D=n.mul(j,S),R=n.add(R,D),D=n.mul(k,S),$=n.mul(E,$),$=n.sub($,D),D=n.mul(E,j),P=n.mul(k,P),P=n.add(P,D),new h($,R,P)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return g.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:y,n:w}=e;Pc("scalar",m,Tc,w);const b=h.ZERO;if(m===Tc)return b;if(this.is0()||m===or)return this;if(!y||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:v,k1:C,k2neg:A,k2:$}=y.splitScalar(m),R=b,P=b,L=this;for(;C>Tc||$>Tc;)C&or&&(R=R.add(L)),$&or&&(P=P.add(L)),L=L.double(),C>>=or,$>>=or;return v&&(R=R.negate()),A&&(P=P.negate()),P=new h(n.mul(P.px,y.beta),P.py,P.pz),R.add(P)}multiply(m){const{endo:y,n:w}=e;Pc("scalar",m,or,w);let b,v;if(y){const{k1neg:C,k1:A,k2neg:$,k2:R}=y.splitScalar(m);let{p:P,f:L}=this.wNAF(A),{p:U,f:D}=this.wNAF(R);P=g.constTimeNegate(C,P),U=g.constTimeNegate($,U),U=new h(n.mul(U.px,y.beta),U.py,U.pz),b=P.add(U),v=L.add(D)}else{const{p:C,f:A}=this.wNAF(m);b=C,v=A}return h.normalizeZ([b,v])[0]}multiplyAndAddUnsafe(m,y,w){const b=h.BASE,v=(A,$)=>$===Tc||$===or||!A.equals(b)?A.multiplyUnsafe($):A.multiply($),C=v(this,y).add(v(m,w));return C.is0()?void 0:C}toAffine(m){return u(this,m)}isTorsionFree(){const{h:m,isTorsionFree:y}=e;if(m===or)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:y}=e;return m===or?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return Qp("isCompressed",m),this.assertValidity(),i(h,this,m)}toHex(m=!0){return Qp("isCompressed",m),Xp(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,g=LSe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function QSe(t){const e=Qq(t);return r0(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function XSe(t){const e=QSe(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(I){return Pi(I,r)}function a(I){return yx(I,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=JSe({...e,toBytes(I,E,S){const k=E.toAffine(),_=n.toBytes(k.x),x=Hm;return Qp("isCompressed",S),S?x(Uint8Array.from([E.hasEvenY()?2:3]),_):x(Uint8Array.from([4]),_,n.toBytes(k.y))},fromBytes(I){const E=I.length,S=I[0],k=I.subarray(1);if(E===i&&(S===2||S===3)){const _=eh(k);if(!t5(_,or,n.ORDER))throw new Error("Point is not on curve");const x=u(_);let T;try{T=n.sqrt(x)}catch(O){const N=O instanceof Error?": "+O.message:"";throw new Error("Point is not on curve"+N)}const M=(T&or)===or;return(S&1)===1!==M&&(T=n.neg(T)),{x:_,y:T}}else if(E===s&&S===4){const _=n.fromBytes(k.subarray(0,n.BYTES)),x=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:_,y:x}}else{const _=i,x=s;throw new Error("invalid Point, expected length of "+_+", or uncompressed "+x+", got "+E)}}}),h=I=>Xp(n0(I,e.nByteLength));function f(I){const E=r>>or;return I>E}function g(I){return f(I)?o(-I):I}const p=(I,E,S)=>eh(I.slice(E,S));class m{constructor(E,S,k){this.r=E,this.s=S,this.recovery=k,this.assertValidity()}static fromCompact(E){const S=e.nByteLength;return E=fs("compactSignature",E,S*2),new m(p(E,0,S),p(E,S,2*S))}static fromDER(E){const{r:S,s:k}=Oc.toSig(fs("DER",E));return new m(S,k)}assertValidity(){Pc("r",this.r,or,r),Pc("s",this.s,or,r)}addRecoveryBit(E){return new m(this.r,this.s,E)}recoverPublicKey(E){const{r:S,s:k,recovery:_}=this,x=A(fs("msgHash",E));if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");const T=_===2||_===3?S+e.n:S;if(T>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=_&1?"03":"02",O=c.fromHex(M+h(T)),N=a(T),B=o(-x*N),F=o(k*N),z=c.BASE.multiplyAndAddUnsafe(O,B,F);if(!z)throw new Error("point at infinify");return z.assertValidity(),z}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return t0(this.toDERHex())}toDERHex(){return Oc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return t0(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(I){try{return l(I),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const I=Gq(e.n);return MSe(e.randomBytes(I),e.n)},precompute(I=8,E=c.BASE){return E._setWindowSize(I),E.multiply(BigInt(3)),E}};function w(I,E=!0){return c.fromPrivateKey(I).toRawBytes(E)}function b(I){const E=Xd(I),S=typeof I=="string",k=(E||S)&&I.length;return E?k===i||k===s:S?k===2*i||k===2*s:I instanceof c}function v(I,E,S=!0){if(b(I))throw new Error("first arg must be private key");if(!b(E))throw new Error("second arg must be public key");return c.fromHex(E).multiply(l(I)).toRawBytes(S)}const C=e.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");const E=eh(I),S=I.length*8-e.nBitLength;return S>0?E>>BigInt(S):E},A=e.bits2int_modN||function(I){return o(C(I))},$=fx(e.nBitLength);function R(I){return Pc("num < 2^"+e.nBitLength,I,Tc,$),n0(I,e.nByteLength)}function P(I,E,S=L){if(["recovered","canonical"].some(H=>H in S))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:_}=e;let{lowS:x,prehash:T,extraEntropy:M}=S;x==null&&(x=!0),I=fs("msgHash",I),eH(S),T&&(I=fs("prehashed msgHash",k(I)));const O=A(I),N=l(E),B=[R(N),R(O)];if(M!=null&&M!==!1){const H=M===!0?_(n.BYTES):M;B.push(fs("extraEntropy",H))}const F=Hm(...B),z=O;function q(H){const K=C(H);if(!d(K))return;const Y=a(K),J=c.BASE.multiply(K).toAffine(),G=o(J.x);if(G===Tc)return;const te=o(Y*o(z+G*N));if(te===Tc)return;let se=(J.x===G?0:2)|Number(J.y&or),he=te;return x&&f(te)&&(he=g(te),se^=1),new m(G,he,se)}return{seed:F,k2sig:q}}const L={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function D(I,E,S=L){const{seed:k,k2sig:_}=P(I,E,S),x=e;return Fq(x.hash.outputLen,x.nByteLength,x.hmac)(k,_)}c.BASE._setWindowSize(8);function j(I,E,S,k=U){var te;const _=I;E=fs("msgHash",E),S=fs("publicKey",S);const{lowS:x,prehash:T,format:M}=k;if(eH(k),"strict"in k)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&M!=="compact"&&M!=="der")throw new Error("format must be compact or der");const O=typeof _=="string"||Xd(_),N=!O&&!M&&typeof _=="object"&&_!==null&&typeof _.r=="bigint"&&typeof _.s=="bigint";if(!O&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let B,F;try{if(N&&(B=new m(_.r,_.s)),O){try{M!=="compact"&&(B=m.fromDER(_))}catch(se){if(!(se instanceof Oc.Err))throw se}!B&&M!=="der"&&(B=m.fromCompact(_))}F=c.fromHex(S)}catch{return!1}if(!B||x&&B.hasHighS())return!1;T&&(E=e.hash(E));const{r:z,s:q}=B,H=A(E),K=a(q),Y=o(H*K),J=o(z*K),G=(te=c.BASE.multiplyAndAddUnsafe(F,Y,J))==null?void 0:te.toAffine();return G?o(G.x)===z:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:v,sign:D,verify:j,ProjectivePoint:c,Signature:m,utils:y}}function exe(t){return{hash:t,hmac:(e,...n)=>J2(t,e,s_e(...n)),randomBytes:Yp}}function txe(t,e){const n=r=>XSe({...t,...exe(r)});return{...n(e),create:n}}const nH=Kq(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),nxe=nH.create(BigInt("-3")),rxe=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),ixe=txe({a:nxe,b:rxe,Fp:nH,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Fm),rH="base10",ti="base16",Io="base64pad",su="base64url",Wm="utf8",iH=0,Nc=1,Km=2,sxe=0,sH=1,Vm=12,xx=32;function oxe(){const t=Sx.utils.randomPrivateKey(),e=Sx.getPublicKey(t);return{privateKey:Dt(t,ti),publicKey:Dt(e,ti)}}function Ax(){const t=Yp(xx);return Dt(t,ti)}function axe(t,e){const n=Sx.getSharedSecret(nn(t,ti),nn(e,ti)),r=dSe(Fm,n,void 0,void 0,xx);return Dt(r,ti)}function r5(t){const e=Fm(nn(t,ti));return Dt(e,ti)}function va(t){const e=Fm(nn(t,Wm));return Dt(e,ti)}function oH(t){return nn(`${t}`,rH)}function nh(t){return Number(Dt(t,rH))}function aH(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function cH(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function cxe(t){const e=oH(typeof t.type<"u"?t.type:iH);if(nh(e)===Nc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?nn(t.senderPublicKey,ti):void 0,r=typeof t.iv<"u"?nn(t.iv,ti):Yp(Vm),i=nn(t.symKey,ti),s=Mq(i,r).encrypt(nn(t.message,Wm)),o=lH({type:e,sealed:s,iv:r,senderPublicKey:n});return t.encoding===su?aH(o):o}function lxe(t){const e=nn(t.symKey,ti),{sealed:n,iv:r}=Gm({encoded:t.encoded,encoding:t.encoding}),i=Mq(e,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return Dt(i,Wm)}function uxe(t,e){const n=oH(Km),r=Yp(Vm),i=nn(t,Wm),s=lH({type:n,sealed:i,iv:r});return e===su?aH(s):s}function dxe(t,e){const{sealed:n}=Gm({encoded:t,encoding:e});return Dt(n,Wm)}function lH(t){if(nh(t.type)===Km)return Dt(oa([t.type,t.sealed]),Io);if(nh(t.type)===Nc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Dt(oa([t.type,t.senderPublicKey,t.iv,t.sealed]),Io)}return Dt(oa([t.type,t.iv,t.sealed]),Io)}function Gm(t){const e=(t.encoding||Io)===su?cH(t.encoded):t.encoded,n=nn(e,Io),r=n.slice(sxe,sH),i=sH;if(nh(r)===Nc){const c=i+xx,l=c+Vm,u=n.slice(i,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(nh(r)===Km){const c=n.slice(i),l=Yp(Vm);return{type:r,sealed:c,iv:l}}const s=i+Vm,o=n.slice(i,s),a=n.slice(s);return{type:r,sealed:a,iv:o}}function hxe(t,e){const n=Gm({encoded:t,encoding:e==null?void 0:e.encoding});return uH({type:nh(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Dt(n.senderPublicKey,ti):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function uH(t){const e=(t==null?void 0:t.type)||iH;if(e===Nc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function dH(t){return t.type===Nc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function hH(t){return t.type===Km}function fxe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return oa([new Uint8Array([4]),e,n])}function pxe(t,e){const[n,r,i]=t.split("."),s=Buffer.from(cH(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${n}.${r}`,l=Fm(c),u=fxe(e);if(!ixe.verify(oa([o,a]),l,u))throw new Error("Invalid signature");return Yf(t).payload}const gxe="irn";function i5(t){return(t==null?void 0:t.relay)||{protocol:gxe}}function Zm(t){const e=sL[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function mxe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(r)){const s=i.replace(r,""),o=t[i];n[s]=o}}),n}function fH(t){if(!t.includes("wc:")){const l=oq(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),i=t.substring(e+1,n).split("@"),s=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:yxe(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:mxe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function yxe(t){return t.startsWith("//")?t.substring(2):t}function wxe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(i=>{const s=i,o=n+e+s;t[s]&&(r[o]=t[s])}),r}function pH(t){const e=new URLSearchParams,n=wxe(t.relay);Object.keys(n).sort().forEach(i=>{e.set(i,n[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function s5(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var bxe=Object.defineProperty,vxe=Object.defineProperties,Exe=Object.getOwnPropertyDescriptors,gH=Object.getOwnPropertySymbols,Cxe=Object.prototype.hasOwnProperty,_xe=Object.prototype.propertyIsEnumerable,mH=(t,e,n)=>e in t?bxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sxe=(t,e)=>{for(var n in e||(e={}))Cxe.call(e,n)&&mH(t,n,e[n]);if(gH)for(var n of gH(e))_xe.call(e,n)&&mH(t,n,e[n]);return t},xxe=(t,e)=>vxe(t,Exe(e));function s0(t){const e=[];return t.forEach(n=>{const[r,i]=n.split(":");e.push(`${r}:${i}`)}),e}function Axe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...s0(n.accounts))}),e}function Ixe(t,e){const n=[];return Object.values(t).forEach(r=>{s0(r.accounts).includes(e)&&n.push(...r.methods)}),n}function $xe(t,e){const n=[];return Object.values(t).forEach(r=>{s0(r.accounts).includes(e)&&n.push(...r.events)}),n}function o5(t){return t.includes(":")}function o0(t){return o5(t)?t.split(":")[0]:t}function yH(t){var e,n,r;const i={};if(!au(t))return i;for(const[s,o]of Object.entries(t)){const a=o5(s)?[s]:o.chains,c=o.methods||[],l=o.events||[],u=o0(s);i[u]=xxe(Sxe({},i[u]),{chains:wa(a,(e=i[u])==null?void 0:e.chains),methods:wa(c,(n=i[u])==null?void 0:n.methods),events:wa(l,(r=i[u])==null?void 0:r.events)})}return i}function Pxe(t){const e={};return t==null||t.forEach(n=>{var r;const[i,s]=n.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(n),(r=e[i].chains)==null||r.push(`${i}:${s}`)}),e}function wH(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=Pxe(e);for(const[r,i]of Object.entries(n))i.methods?i.methods=wa(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return n}function Oxe(t,e){var n,r,i,s,o,a;const c=yH(t),l=yH(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:wa((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:wa((i=c[h])==null?void 0:i.methods,(s=l[h])==null?void 0:s.methods),events:wa((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const Txe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Nxe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ce(t,e){const{message:n,code:r}=Nxe[t];return{message:e?`${n} ${e}`:n,code:r}}function jt(t,e){const{message:n,code:r}=Txe[t];return{message:e?`${n} ${e}`:n,code:r}}function ou(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function au(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function $r(t){return typeof t>"u"}function On(t,e){return e&&$r(t)?!0:typeof t=="string"&&!!t.trim().length}function Ix(t,e){return e&&$r(t)?!0:typeof t=="number"&&!isNaN(t)}function kxe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),i=Object.keys(n);let s=!0;return Yd(i,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=s0(a),d=n[o];(!Yd(Zz(o,d),u)||!Yd(d.methods,c)||!Yd(d.events,l))&&(s=!1)}),s):!1}function a5(t){return On(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Rxe(t){if(On(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&a5(n)}}return!1}function Mxe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(On(t,!1)){if(e(t))return!0;const n=oq(t);return e(n)}}catch{}return!1}function Bxe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Dxe(t){return t==null?void 0:t.topic}function Lxe(t,e){let n=null;return On(t==null?void 0:t.publicKey,!1)||(n=Ce("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function bH(t){let e=!0;return ou(t)?t.length&&(e=t.every(n=>On(n,!1))):e=!1,e}function jxe(t,e,n){let r=null;return ou(e)&&e.length?e.forEach(i=>{r||a5(i)||(r=jt("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):a5(t)||(r=jt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function Uxe(t,e,n){let r=null;return Object.entries(t).forEach(([i,s])=>{if(r)return;const o=jxe(i,Zz(i,s),`${e} ${n}`);o&&(r=o)}),r}function Fxe(t,e){let n=null;return ou(t)?t.forEach(r=>{n||Rxe(r)||(n=jt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=jt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function zxe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const i=Fxe(r==null?void 0:r.accounts,`${e} namespace`);i&&(n=i)}),n}function qxe(t,e){let n=null;return bH(t==null?void 0:t.methods)?bH(t==null?void 0:t.events)||(n=jt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=jt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function vH(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const i=qxe(r,`${e}, namespace`);i&&(n=i)}),n}function Hxe(t,e,n){let r=null;if(t&&au(t)){const i=vH(t,e);i&&(r=i);const s=Uxe(t,e,n);s&&(r=s)}else r=Ce("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function $x(t,e){let n=null;if(t&&au(t)){const r=vH(t,e);r&&(n=r);const i=zxe(t,e);i&&(n=i)}else n=Ce("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function EH(t){return On(t.protocol,!0)}function Wxe(t,e){let n=!1;return e&&!t?n=!0:t&&ou(t)&&t.length&&t.forEach(r=>{n=EH(r)}),n}function Kxe(t){return typeof t=="number"}function Oi(t){return typeof t<"u"&&typeof t!==null}function Vxe(t){return!(!t||typeof t!="object"||!t.code||!Ix(t.code,!1)||!t.message||!On(t.message,!1))}function Gxe(t){return!($r(t)||!On(t.method,!1))}function Zxe(t){return!($r(t)||$r(t.result)&&$r(t.error)||!Ix(t.id,!1)||!On(t.jsonrpc,!1))}function Yxe(t){return!($r(t)||!On(t.name,!1))}function CH(t,e){return!(!a5(e)||!Axe(t).includes(e))}function Jxe(t,e,n){return On(n,!1)?Ixe(t,e).includes(n):!1}function Qxe(t,e,n){return On(n,!1)?$xe(t,e).includes(n):!1}function _H(t,e,n){let r=null;const i=Xxe(t),s=e9e(e),o=Object.keys(i),a=Object.keys(s),c=SH(Object.keys(t)),l=SH(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Ce("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Yd(o,a)||(r=Ce("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=s0(e[d].accounts);h.includes(d)||(r=Ce("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Yd(i[d].methods,s[d].methods)?Yd(i[d].events,s[d].events)||(r=Ce("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Ce("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function Xxe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(i=>{e[i]={methods:t[n].methods,events:t[n].events}})}),e}function SH(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function e9e(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=s0(t[n].accounts);r==null||r.forEach(i=>{e[i]={accounts:t[n].accounts.filter(s=>s.includes(`${i}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function t9e(t,e){return Ix(t,!1)&&t<=e.max&&t>=e.min}function xH(){const t=Bm();return new Promise(e=>{switch(t){case ds.browser:e(n9e());break;case ds.reactNative:e(r9e());break;case ds.node:e(i9e());break;default:e(!0)}})}function n9e(){return Kp()&&(navigator==null?void 0:navigator.onLine)}async function r9e(){if(Xl()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function i9e(){return!0}function s9e(t){switch(Bm()){case ds.browser:o9e(t);break;case ds.reactNative:a9e(t);break}}function o9e(t){!Xl()&&Kp()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function a9e(t){Xl()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function c9e(){var t;return Kp()&&Xi()?((t=Xi())==null?void 0:t.visibilityState)==="visible":!0}const Px={};class Ym{static get(e){return Px[e]}static set(e,n){Px[e]=n}static delete(e){delete Px[e]}}const AH="wc",IH=2,c5="core",Ea=`${AH}@2:${c5}:`,l9e={name:c5,logger:"error"},u9e={database:":memory:"},d9e="crypto",$H="client_ed25519_seed",h9e=X.ONE_DAY,f9e="keychain",p9e="0.3",g9e="messages",m9e="0.3",PH=X.SIX_HOURS,y9e="publisher",OH="irn",w9e="error",TH="wss://relay.walletconnect.org",b9e="relayer",ar={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},v9e="_subscription",Ws={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},E9e=.1,Ox="2.21.0",en={link_mode:"link_mode",relay:"relay"},l5={inbound:"inbound",outbound:"outbound"},C9e="0.3",_9e="WALLETCONNECT_CLIENT_ID",NH="WALLETCONNECT_LINK_MODE_APPS",ps={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},S9e="subscription",x9e="0.3",A9e="pairing",I9e="0.3",Jm={wc_pairingDelete:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:X.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:X.ONE_DAY,prompt:!1,tag:0},res:{ttl:X.ONE_DAY,prompt:!1,tag:0}}},rh={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},$o={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},$9e="history",P9e="0.3",O9e="expirer",Ks={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},T9e="0.3",N9e="verify-api",k9e="https://verify.walletconnect.com",kH="https://verify.walletconnect.org",Qm=kH,R9e=`${Qm}/v3`,M9e=[k9e,kH],B9e="echo",D9e="https://echo.walletconnect.com",Ca={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},kc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Po={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ih={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},sh={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},Xm={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},L9e=.1,j9e="event-client",U9e=86400,F9e="https://pulse.walletconnect.org/batch";function z9e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var p=0,m=0,y=0,w=g.length;y!==w&&g[y]===0;)y++,p++;for(var b=(w-y)*u+1>>>0,v=new Uint8Array(b);y!==w;){for(var C=g[y],A=0,$=b-1;(C!==0||A<m)&&$!==-1;$--,A++)C+=256*v[$]>>>0,v[$]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");m=A,y++}for(var R=b-m;R!==b&&v[R]===0;)R++;for(var P=c.repeat(p);R<b;++R)P+=t.charAt(v[R]);return P}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var p=0;if(g[p]!==" "){for(var m=0,y=0;g[p]===c;)m++,p++;for(var w=(g.length-p)*l+1>>>0,b=new Uint8Array(w);g[p];){var v=n[g.charCodeAt(p)];if(v===255)return;for(var C=0,A=w-1;(v!==0||C<y)&&A!==-1;A--,C++)v+=a*b[A]>>>0,b[A]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");y=C,p++}if(g[p]!==" "){for(var $=w-y;$!==w&&b[$]===0;)$++;for(var R=new Uint8Array(m+(w-$)),P=m;$!==w;)R[P++]=b[$++];return R}}}function f(g){var p=h(g);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var q9e=z9e,H9e=q9e;const RH=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},W9e=t=>new TextEncoder().encode(t),K9e=t=>new TextDecoder().decode(t);class V9e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class G9e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return MH(this,e)}}class Z9e{constructor(e){this.decoders=e}or(e){return MH(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const MH=(t,e)=>new Z9e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Y9e{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new V9e(e,n,r),this.decoder=new G9e(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const u5=({name:t,prefix:e,encode:n,decode:r})=>new Y9e(t,e,n,r),ey=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=H9e(n,e);return u5({prefix:t,name:e,encode:r,decode:s=>RH(i(s))})},J9e=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Q9e=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},Pr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>u5({prefix:e,name:t,encode(i){return Q9e(i,r,n)},decode(i){return J9e(i,r,n,t)}}),X9e=u5({prefix:"\0",name:"identity",encode:t=>K9e(t),decode:t=>W9e(t)});var eAe=Object.freeze({__proto__:null,identity:X9e});const tAe=Pr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var nAe=Object.freeze({__proto__:null,base2:tAe});const rAe=Pr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var iAe=Object.freeze({__proto__:null,base8:rAe});const sAe=ey({prefix:"9",name:"base10",alphabet:"0123456789"});var oAe=Object.freeze({__proto__:null,base10:sAe});const aAe=Pr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cAe=Pr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var lAe=Object.freeze({__proto__:null,base16:aAe,base16upper:cAe});const uAe=Pr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),dAe=Pr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hAe=Pr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fAe=Pr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pAe=Pr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),gAe=Pr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),mAe=Pr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),yAe=Pr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),wAe=Pr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var bAe=Object.freeze({__proto__:null,base32:uAe,base32upper:dAe,base32pad:hAe,base32padupper:fAe,base32hex:pAe,base32hexupper:gAe,base32hexpad:mAe,base32hexpadupper:yAe,base32z:wAe});const vAe=ey({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),EAe=ey({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var CAe=Object.freeze({__proto__:null,base36:vAe,base36upper:EAe});const _Ae=ey({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),SAe=ey({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var xAe=Object.freeze({__proto__:null,base58btc:_Ae,base58flickr:SAe});const AAe=Pr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),IAe=Pr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$Ae=Pr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),PAe=Pr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var OAe=Object.freeze({__proto__:null,base64:AAe,base64pad:IAe,base64url:$Ae,base64urlpad:PAe});const BH=Array.from(""),TAe=BH.reduce((t,e,n)=>(t[n]=e,t),[]),NAe=BH.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function kAe(t){return t.reduce((e,n)=>(e+=TAe[n],e),"")}function RAe(t){const e=[];for(const n of t){const r=NAe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const MAe=u5({prefix:"",name:"base256emoji",encode:kAe,decode:RAe});var BAe=Object.freeze({__proto__:null,base256emoji:MAe}),DAe=LH,DH=128,LAe=127,jAe=~LAe,UAe=Math.pow(2,31);function LH(t,e,n){e=e||[],n=n||0;for(var r=n;t>=UAe;)e[n++]=t&255|DH,t/=128;for(;t&jAe;)e[n++]=t&255|DH,t>>>=7;return e[n]=t|0,LH.bytes=n-r+1,e}var FAe=Tx,zAe=128,jH=127;function Tx(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw Tx.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&jH)<<i:(o&jH)*Math.pow(2,i),i+=7}while(o>=zAe);return Tx.bytes=s-r,n}var qAe=Math.pow(2,7),HAe=Math.pow(2,14),WAe=Math.pow(2,21),KAe=Math.pow(2,28),VAe=Math.pow(2,35),GAe=Math.pow(2,42),ZAe=Math.pow(2,49),YAe=Math.pow(2,56),JAe=Math.pow(2,63),QAe=function(t){return t<qAe?1:t<HAe?2:t<WAe?3:t<KAe?4:t<VAe?5:t<GAe?6:t<ZAe?7:t<YAe?8:t<JAe?9:10},XAe={encode:DAe,decode:FAe,encodingLength:QAe},UH=XAe;const FH=(t,e,n=0)=>(UH.encode(t,e,n),e),zH=t=>UH.encodingLength(t),Nx=(t,e)=>{const n=e.byteLength,r=zH(t),i=r+zH(n),s=new Uint8Array(i+n);return FH(t,s,0),FH(n,s,r),s.set(e,i),new eIe(t,n,e,s)};class eIe{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}}const qH=({name:t,code:e,encode:n})=>new tIe(t,e,n);class tIe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Nx(this.code,n):n.then(r=>Nx(this.code,r))}else throw Error("Unknown type, must be binary type")}}const HH=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),nIe=qH({name:"sha2-256",code:18,encode:HH("SHA-256")}),rIe=qH({name:"sha2-512",code:19,encode:HH("SHA-512")});var iIe=Object.freeze({__proto__:null,sha256:nIe,sha512:rIe});const WH=0,sIe="identity",KH=RH;var oIe=Object.freeze({__proto__:null,identity:{code:WH,name:sIe,encode:KH,digest:t=>Nx(WH,KH(t))}});new TextEncoder,new TextDecoder;const VH={...eAe,...nAe,...iAe,...oAe,...lAe,...bAe,...CAe,...xAe,...OAe,...BAe};({...iIe,...oIe});function aIe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function GH(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const ZH=GH("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),kx=GH("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=aIe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),cIe={utf8:ZH,"utf-8":ZH,hex:VH.base16,latin1:kx,ascii:kx,binary:kx,...VH};function lIe(t,e="utf8"){const n=cIe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var uIe=Object.defineProperty,dIe=(t,e,n)=>e in t?uIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_a=(t,e,n)=>dIe(t,typeof e!="symbol"?e+"":e,n);class hIe{constructor(e,n){this.core=e,this.logger=n,_a(this,"keychain",new Map),_a(this,"name",f9e),_a(this,"version",p9e),_a(this,"initialized",!1),_a(this,"storagePrefix",Ea),_a(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),_a(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),_a(this,"set",async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()}),_a(this,"get",r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:s}=Ce("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(s)}return i}),_a(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Pt(n,this.name)}get context(){return Ft(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,QS(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?XS(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var fIe=Object.defineProperty,pIe=(t,e,n)=>e in t?fIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Or=(t,e,n)=>pIe(t,typeof e!="symbol"?e+"":e,n);class gIe{constructor(e,n,r){this.core=e,this.logger=n,Or(this,"name",d9e),Or(this,"keychain"),Or(this,"randomSessionIdentifier",Ax()),Or(this,"initialized",!1),Or(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Or(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Or(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Jv(i);return n_(s.publicKey)}),Or(this,"generateKeyPair",()=>{this.isInitialized();const i=oxe();return this.setPrivateKey(i.publicKey,i.privateKey)}),Or(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Jv(s),a=this.randomSessionIdentifier;return await JD(a,i,h9e,o)}),Or(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=axe(a,s);return this.setSymKey(c,o)}),Or(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||r5(i);return await this.keychain.set(o,i),o}),Or(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Or(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Or(this,"encode",async(i,s,o)=>{this.isInitialized();const a=uH(o),c=ia(s);if(hH(a))return uxe(c,o==null?void 0:o.encoding);if(dH(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;i=await this.generateSharedKey(h,f)}const l=this.getSymKey(i),{type:u,senderPublicKey:d}=a;return cxe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Or(this,"decode",async(i,s,o)=>{this.isInitialized();const a=hxe(s,o);if(hH(a)){const c=dxe(s,o==null?void 0:o.encoding);return uc(c)}if(dH(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=lxe({symKey:c,encoded:s,encoding:o==null?void 0:o.encoding});return uc(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Or(this,"getPayloadType",(i,s=Io)=>{const o=Gm({encoded:i,encoding:s});return nh(o.type)}),Or(this,"getPayloadSenderPublicKey",(i,s=Io)=>{const o=Gm({encoded:i,encoding:s});return o.senderPublicKey?Dt(o.senderPublicKey,ti):void 0}),this.core=e,this.logger=Pt(n,this.name),this.keychain=r||new hIe(this.core,this.logger)}get context(){return Ft(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get($H)}catch{e=Ax(),await this.keychain.set($H,e)}return lIe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var mIe=Object.defineProperty,yIe=Object.defineProperties,wIe=Object.getOwnPropertyDescriptors,YH=Object.getOwnPropertySymbols,bIe=Object.prototype.hasOwnProperty,vIe=Object.prototype.propertyIsEnumerable,Rx=(t,e,n)=>e in t?mIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,EIe=(t,e)=>{for(var n in e||(e={}))bIe.call(e,n)&&Rx(t,n,e[n]);if(YH)for(var n of YH(e))vIe.call(e,n)&&Rx(t,n,e[n]);return t},CIe=(t,e)=>yIe(t,wIe(e)),gs=(t,e,n)=>Rx(t,typeof e!="symbol"?e+"":e,n);class _Ie extends R8e{constructor(e,n){super(e,n),this.logger=e,this.core=n,gs(this,"messages",new Map),gs(this,"messagesWithoutClientAck",new Map),gs(this,"name",g9e),gs(this,"version",m9e),gs(this,"initialized",!1),gs(this,"storagePrefix",Ea),gs(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),gs(this,"set",async(r,i,s)=>{this.isInitialized();const o=va(i);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(r,a),s===l5.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,CIe(EIe({},c),{[o]:i}))}return await this.persist(),o}),gs(this,"get",r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i}),gs(this,"getWithoutAck",r=>{this.isInitialized();const i={};for(const s of r){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),gs(this,"has",(r,i)=>{this.isInitialized();const s=this.get(r),o=va(i);return typeof s[o]<"u"}),gs(this,"ack",async(r,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(r);if(typeof s>"u")return;const o=va(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,s),await this.persist()}),gs(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Pt(e,this.name),this.core=n}get context(){return Ft(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,QS(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,QS(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?XS(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?XS(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var SIe=Object.defineProperty,xIe=Object.defineProperties,AIe=Object.getOwnPropertyDescriptors,JH=Object.getOwnPropertySymbols,IIe=Object.prototype.hasOwnProperty,$Ie=Object.prototype.propertyIsEnumerable,Mx=(t,e,n)=>e in t?SIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d5=(t,e)=>{for(var n in e||(e={}))IIe.call(e,n)&&Mx(t,n,e[n]);if(JH)for(var n of JH(e))$Ie.call(e,n)&&Mx(t,n,e[n]);return t},Bx=(t,e)=>xIe(t,AIe(e)),Oo=(t,e,n)=>Mx(t,typeof e!="symbol"?e+"":e,n);class PIe extends M8e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Oo(this,"events",new An.EventEmitter),Oo(this,"name",y9e),Oo(this,"queue",new Map),Oo(this,"publishTimeout",X.toMiliseconds(X.ONE_MINUTE)),Oo(this,"initialPublishTimeout",X.toMiliseconds(X.ONE_SECOND*15)),Oo(this,"needsTransportRestart",!1),Oo(this,"publish",async(r,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}});const a=(s==null?void 0:s.ttl)||PH,c=i5(s),l=(s==null?void 0:s.prompt)||!1,u=(s==null?void 0:s.tag)||0,d=(s==null?void 0:s.id)||ss().toString(),h={topic:r,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const g=new Promise(async p=>{const m=({id:w})=>{h.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(ar.publish,m),p(h))};this.relayer.events.on(ar.publish,m);const y=eu(new Promise((w,b)=>{this.rpcPublish({topic:r,message:i,ttl:a,prompt:l,tag:u,id:d,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}).then(w).catch(v=>{this.logger.warn(v,v==null?void 0:v.message),b(v)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(ar.publish,m)}catch(w){this.queue.set(d,Bx(d5({},h),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:i,opts:s}}),await eu(g,this.publishTimeout,f)}catch(g){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(g),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw g}finally{this.queue.delete(d)}}),Oo(this,"on",(r,i)=>{this.events.on(r,i)}),Oo(this,"once",(r,i)=>{this.events.once(r,i)}),Oo(this,"off",(r,i)=>{this.events.off(r,i)}),Oo(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.relayer=e,this.logger=Pt(n,this.name),this.registerEventListeners()}get context(){return Ft(this.logger)}async rpcPublish(e){var n,r,i,s;const{topic:o,message:a,ttl:c=PH,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,g={method:Zm(i5().protocol).publish,params:d5({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};$r((n=g.params)==null?void 0:n.prompt)&&((r=g.params)==null||delete r.prompt),$r((i=g.params)==null?void 0:i.tag)&&((s=g.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:g});const p=await this.relayer.request(g);return this.relayer.events.emit(ar.publish,e),this.logger.debug("Successfully Published Payload"),p}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,Bx(d5({},e),{attempt:r}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Bx(d5({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(is.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ar.connection_stalled);return}this.checkQueue()}),this.relayer.on(ar.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var OIe=Object.defineProperty,TIe=(t,e,n)=>e in t?OIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,a0=(t,e,n)=>TIe(t,typeof e!="symbol"?e+"":e,n);class NIe{constructor(){a0(this,"map",new Map),a0(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),a0(this,"get",e=>this.map.get(e)||[]),a0(this,"exists",(e,n)=>this.get(e).includes(n)),a0(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const i=r.filter(s=>s!==n);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),a0(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var kIe=Object.defineProperty,RIe=Object.defineProperties,MIe=Object.getOwnPropertyDescriptors,QH=Object.getOwnPropertySymbols,BIe=Object.prototype.hasOwnProperty,DIe=Object.prototype.propertyIsEnumerable,Dx=(t,e,n)=>e in t?kIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ty=(t,e)=>{for(var n in e||(e={}))BIe.call(e,n)&&Dx(t,n,e[n]);if(QH)for(var n of QH(e))DIe.call(e,n)&&Dx(t,n,e[n]);return t},Lx=(t,e)=>RIe(t,MIe(e)),Wt=(t,e,n)=>Dx(t,typeof e!="symbol"?e+"":e,n);class LIe extends L8e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Wt(this,"subscriptions",new Map),Wt(this,"topicMap",new NIe),Wt(this,"events",new An.EventEmitter),Wt(this,"name",S9e),Wt(this,"version",x9e),Wt(this,"pending",new Map),Wt(this,"cached",[]),Wt(this,"initialized",!1),Wt(this,"storagePrefix",Ea),Wt(this,"subscribeTimeout",X.toMiliseconds(X.ONE_MINUTE)),Wt(this,"initialSubscribeTimeout",X.toMiliseconds(X.ONE_SECOND*15)),Wt(this,"clientId"),Wt(this,"batchSubscribeTopicsLimit",500),Wt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Wt(this,"subscribe",async(r,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const s=i5(i),o={topic:r,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),Wt(this,"unsubscribe",async(r,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)}),Wt(this,"isSubscribed",r=>new Promise(i=>{i(this.topicMap.topics.includes(r))})),Wt(this,"isKnownTopic",r=>new Promise(i=>{i(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(s=>s.topic===r))})),Wt(this,"on",(r,i)=>{this.events.on(r,i)}),Wt(this,"once",(r,i)=>{this.events.once(r,i)}),Wt(this,"off",(r,i)=>{this.events.off(r,i)}),Wt(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),Wt(this,"start",async()=>{await this.onConnect()}),Wt(this,"stop",async()=>{await this.onDisconnect()}),Wt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Wt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}),Wt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(is.pulse,async()=>{await this.checkPending()}),this.events.on(ps.created,async r=>{const i=ps.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(ps.deleted,async r=>{const i=ps.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}),this.relayer=e,this.logger=Pt(n,this.name),this.clientId=""}get context(){return Ft(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async i=>await this.unsubscribeById(e,i,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const i=i5(r);await this.restartToComplete({topic:e,id:n,relay:i}),await this.rpcUnsubscribe(e,n,i);const s=jt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,n,r){var i;(!r||(r==null?void 0:r.transportType)===en.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const s={method:Zm(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===en.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},X.toMiliseconds(X.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(ps.created,d),u(h.id))};this.events.on(ps.created,d);try{const h=await eu(new Promise((f,g)=>{this.relayer.request(s).catch(p=>{this.logger.warn(p,p==null?void 0:p.message),g(p)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(ps.created,d),u(h)}catch{}}),l=await eu(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ar.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Zm(n.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await eu(new Promise(i=>{this.relayer.request(r).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(ar.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Zm(n.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let i;try{i=await await eu(new Promise((s,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(ar.connection_stalled)}return i}rpcUnsubscribe(e,n,r){const i={method:Zm(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,n){this.setSubscription(e,Lx(ty({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,ty({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,ty({},n)),this.topicMap.set(n.topic,e),this.events.emit(ps.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(ps.deleted,Lx(ty({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ps.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(ps.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>Lx(ty({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await GCe(X.toMiliseconds(X.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return va(e+await this.getClientId())}}var jIe=Object.defineProperty,XH=Object.getOwnPropertySymbols,UIe=Object.prototype.hasOwnProperty,FIe=Object.prototype.propertyIsEnumerable,jx=(t,e,n)=>e in t?jIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eW=(t,e)=>{for(var n in e||(e={}))UIe.call(e,n)&&jx(t,n,e[n]);if(XH)for(var n of XH(e))FIe.call(e,n)&&jx(t,n,e[n]);return t},vt=(t,e,n)=>jx(t,typeof e!="symbol"?e+"":e,n);class zIe extends B8e{constructor(e){super(e),vt(this,"protocol","wc"),vt(this,"version",2),vt(this,"core"),vt(this,"logger"),vt(this,"events",new An.EventEmitter),vt(this,"provider"),vt(this,"messages"),vt(this,"subscriber"),vt(this,"publisher"),vt(this,"name",b9e),vt(this,"transportExplicitlyClosed",!1),vt(this,"initialized",!1),vt(this,"connectionAttemptInProgress",!1),vt(this,"relayUrl"),vt(this,"projectId"),vt(this,"packageName"),vt(this,"bundleId"),vt(this,"hasExperiencedNetworkDisruption",!1),vt(this,"pingTimeout"),vt(this,"heartBeatTimeout",X.toMiliseconds(X.THIRTY_SECONDS+X.FIVE_SECONDS)),vt(this,"reconnectTimeout"),vt(this,"connectPromise"),vt(this,"reconnectInProgress",!1),vt(this,"requestsInFlight",[]),vt(this,"connectTimeout",X.toMiliseconds(X.ONE_SECOND*15)),vt(this,"request",async n=>{var r,i;this.logger.debug("Publishing Request Payload");const s=n.id||ss().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${s}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),vt(this,"resetPingTimeout",()=>{K2()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),vt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),vt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(ar.connect)}),vt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),vt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(ar.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),vt(this,"registerProviderListeners",()=>{this.provider.on(Ws.payload,this.onPayloadHandler),this.provider.on(Ws.connect,this.onConnectHandler),this.provider.on(Ws.disconnect,this.onDisconnectHandler),this.provider.on(Ws.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Pt(e.logger,this.name):ql(wc({level:e.logger||w9e})),this.messages=new _Ie(this.logger,e.core),this.subscriber=new LIe(this,this.logger),this.publisher=new PIe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||TH,this.projectId=e.projectId,NCe()?this.packageName=Xz():kCe()&&(this.bundleId=Xz()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return Ft(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:en.relay},l5.outbound)}async subscribe(e,n){var r,i,s;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(ps.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(ps.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,eW({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await eu(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await xH())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,i)=>r.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const i=jn(X.FIVE_MINUTES),s={topic:r,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,s)}this.events.emit(ar.message,e),await this.recordMessageEvent(e,l5.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ws.disconnect,s),await eu(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(Ws.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ws.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ws.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const i=r;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,X.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,i,s;if(K2())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new rn(new fU(LCe({sdkVersion:Ox,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:i}=e;await this.messages.set(r,i,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const i=this.messages.has(n,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),yp(e)){if(!e.method.endsWith(v9e))return;const n=e.params,{topic:r,message:i,publishedAt:s,attestation:o}=n.data,a={topic:r,message:i,publishedAt:s,transportType:en.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(eW({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Pd(e)&&this.events.emit(ar.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,l5.inbound),this.events.emit(ar.message,e))}async acknowledgePayload(e){const n=Hl(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ws.payload,this.onPayloadHandler),this.provider.off(Ws.connect,this.onConnectHandler),this.provider.off(Ws.disconnect,this.onDisconnectHandler),this.provider.off(Ws.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await xH();s9e(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(is.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&c9e())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(ar.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},X.toMiliseconds(E9e)))))}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function qIe(){}function tW(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function nW(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function rW(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const HIe="[object RegExp]",WIe="[object String]",KIe="[object Number]",VIe="[object Boolean]",iW="[object Arguments]",GIe="[object Symbol]",ZIe="[object Date]",YIe="[object Map]",JIe="[object Set]",QIe="[object Array]",XIe="[object Function]",e$e="[object ArrayBuffer]",Ux="[object Object]",t$e="[object Error]",n$e="[object DataView]",r$e="[object Uint8Array]",i$e="[object Uint8ClampedArray]",s$e="[object Uint16Array]",o$e="[object Uint32Array]",a$e="[object BigUint64Array]",c$e="[object Int8Array]",l$e="[object Int16Array]",u$e="[object Int32Array]",d$e="[object BigInt64Array]",h$e="[object Float32Array]",f$e="[object Float64Array]";function p$e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function g$e(t,e,n){return ny(t,e,void 0,void 0,void 0,void 0,n)}function ny(t,e,n,r,i,s,o){const a=o(t,e,n,r,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return ry(t,e,s,o)}return ry(t,e,s,o)}function ry(t,e,n,r){if(Object.is(t,e))return!0;let i=rW(t),s=rW(e);if(i===iW&&(i=Ux),s===iW&&(s=Ux),i!==s)return!1;switch(i){case WIe:return t.toString()===e.toString();case KIe:{const c=t.valueOf(),l=e.valueOf();return p$e(c,l)}case VIe:case ZIe:case GIe:return Object.is(t.valueOf(),e.valueOf());case HIe:return t.source===e.source&&t.flags===e.flags;case XIe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(i){case YIe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!ny(l,e.get(c),c,t,e,n,r))return!1;return!0}case JIe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>ny(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case QIe:case r$e:case i$e:case s$e:case o$e:case a$e:case c$e:case l$e:case u$e:case d$e:case h$e:case f$e:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!ny(t[c],e[c],c,t,e,n,r))return!1;return!0}case e$e:return t.byteLength!==e.byteLength?!1:ry(new Uint8Array(t),new Uint8Array(e),n,r);case n$e:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:ry(new Uint8Array(t),new Uint8Array(e),n,r);case t$e:return t.name===e.name&&t.message===e.message;case Ux:{if(!(ry(t.constructor,e.constructor,n,r)||tW(t)&&tW(e)))return!1;const c=[...Object.keys(t),...nW(t)],l=[...Object.keys(e),...nW(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!ny(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function m$e(t,e){return g$e(t,e,qIe)}var y$e=Object.defineProperty,sW=Object.getOwnPropertySymbols,w$e=Object.prototype.hasOwnProperty,b$e=Object.prototype.propertyIsEnumerable,Fx=(t,e,n)=>e in t?y$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oW=(t,e)=>{for(var n in e||(e={}))w$e.call(e,n)&&Fx(t,n,e[n]);if(sW)for(var n of sW(e))b$e.call(e,n)&&Fx(t,n,e[n]);return t},Ti=(t,e,n)=>Fx(t,typeof e!="symbol"?e+"":e,n);class oh extends D8e{constructor(e,n,r,i=Ea,s=void 0){super(e,n,r,i),this.core=e,this.logger=n,this.name=r,Ti(this,"map",new Map),Ti(this,"version",C9e),Ti(this,"cached",[]),Ti(this,"initialized",!1),Ti(this,"getKey"),Ti(this,"storagePrefix",Ea),Ti(this,"recentlyDeleted",[]),Ti(this,"recentlyDeletedLimit",200),Ti(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!$r(o)?this.map.set(this.getKey(o),o):Bxe(o)?this.map.set(o.id,o):Dxe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ti(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ti(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ti(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>m$e(a[c],o[c]))):this.values)),Ti(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=oW(oW({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ti(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Pt(n,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Ft(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:i}=Ce("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:r}=Ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var v$e=Object.defineProperty,E$e=(t,e,n)=>e in t?v$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lt=(t,e,n)=>E$e(t,typeof e!="symbol"?e+"":e,n);class C$e{constructor(e,n){this.core=e,this.logger=n,lt(this,"name",A9e),lt(this,"version",I9e),lt(this,"events",new hf),lt(this,"pairings"),lt(this,"initialized",!1),lt(this,"storagePrefix",Ea),lt(this,"ignoredPayloadTypes",[Nc]),lt(this,"registeredMethods",[]),lt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),lt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),lt(this,"create",async r=>{this.isInitialized();const i=Ax(),s=await this.core.crypto.setSymKey(i),o=jn(X.FIVE_MINUTES),a={protocol:OH},c={topic:s,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=pH({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(rh.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:r==null?void 0:r.transportType}),{topic:s,uri:l}}),lt(this,"pair",async r=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Ca.pairing_started]}});this.isValidPair(r,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=fH(r.uri);i.props.properties.topic=s,i.addTrace(Ca.pairing_uri_validation_success),i.addTrace(Ca.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(Ca.existing_pairing),u.active)throw i.setError(kc.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(Ca.pairing_not_expired)}const d=c||jn(X.FIVE_MINUTES),h={topic:s,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(s,d),await this.pairings.set(s,h),i.addTrace(Ca.store_new_pairing),r.activatePairing&&await this.activate({topic:s}),this.events.emit(rh.create,h),i.addTrace(Ca.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(Ca.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(kc.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(f){throw i.setError(kc.subscribe_pairing_topic_failure),f}return i.addTrace(Ca.subscribe_pairing_topic_success),h}),lt(this,"activate",async({topic:r})=>{this.isInitialized();const i=jn(X.FIVE_MINUTES);this.core.expirer.set(r,i),await this.pairings.update(r,{active:!0,expiry:i})}),lt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=r;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Jd();this.events.once(Tt("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),lt(this,"updateExpiry",async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})}),lt(this,"updateMetadata",async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})}),lt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),lt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",jt("USER_DISCONNECTED")),await this.deletePairing(i))}),lt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(i);return pH({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),lt(this,"sendRequest",async(r,i,s)=>{const o=Xr(i,s),a=await this.core.crypto.encode(r,o),c=Jm[i].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),lt(this,"sendResult",async(r,i,s)=>{const o=Hl(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=Jm[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),lt(this,"sendError",async(r,i,s)=>{const o=mp(r,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,r)).request.method,l=Jm[c]?Jm[c].res:Jm.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),lt(this,"deletePairing",async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,jt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])}),lt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(i=>tu(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))}),lt(this,"onRelayEventRequest",async r=>{const{topic:i,payload:s}=r;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),lt(this,"onRelayEventResponse",async r=>{const{topic:i,payload:s}=r,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),lt(this,"onPairingPingRequest",async(r,i)=>{const{id:s}=i;try{this.isValidPing({topic:r}),await this.sendResult(s,r,!0),this.events.emit(rh.ping,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),lt(this,"onPairingPingResponse",(r,i)=>{const{id:s}=i;setTimeout(()=>{Bn(i)?this.events.emit(Tt("pairing_ping",s),{}):hn(i)&&this.events.emit(Tt("pairing_ping",s),{error:i.error})},500)}),lt(this,"onPairingDeleteRequest",async(r,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(rh.delete,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}}),lt(this,"onUnknownRpcMethodRequest",async(r,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=jt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,r,a),this.logger.error(a)}catch(a){await this.sendError(s,r,a),this.logger.error(a)}}),lt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(jt("WC_METHOD_UNSUPPORTED",r))}),lt(this,"isValidPair",(r,i)=>{var s;if(!Oi(r)){const{message:a}=Ce("MISSING_OR_INVALID",`pair() params: ${r}`);throw i.setError(kc.malformed_pairing_uri),new Error(a)}if(!Mxe(r.uri)){const{message:a}=Ce("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw i.setError(kc.malformed_pairing_uri),new Error(a)}const o=fH(r==null?void 0:r.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=Ce("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(kc.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Ce("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(kc.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&X.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(kc.pairing_expired);const{message:a}=Ce("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),lt(this,"isValidPing",async r=>{if(!Oi(r)){const{message:s}=Ce("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),lt(this,"isValidDisconnect",async r=>{if(!Oi(r)){const{message:s}=Ce("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)}),lt(this,"isValidPairingTopic",async r=>{if(!On(r,!1)){const{message:i}=Ce("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=Ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(tu(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=Ce("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}}),this.core=e,this.logger=Pt(n,this.name),this.pairings=new oh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ft(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(ar.message,async e=>{const{topic:n,message:r,transportType:i}=e;if(this.pairings.keys.includes(n)&&i!==en.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const s=await this.core.crypto.decode(n,r);yp(s)?(this.core.history.set(n,s),await this.onRelayEventRequest({topic:n,payload:s})):Pd(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:n,payload:s}),this.core.history.delete(n,s.id)),await this.core.relayer.messages.ack(n,r)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Ks.expired,async e=>{const{topic:n}=rq(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(rh.expire,{topic:n}))})}}var _$e=Object.defineProperty,S$e=(t,e,n)=>e in t?_$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tr=(t,e,n)=>S$e(t,typeof e!="symbol"?e+"":e,n);class x$e extends k8e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Tr(this,"records",new Map),Tr(this,"events",new An.EventEmitter),Tr(this,"name",$9e),Tr(this,"version",P9e),Tr(this,"cached",[]),Tr(this,"initialized",!1),Tr(this,"storagePrefix",Ea),Tr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Tr(this,"set",(r,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:s,expiry:jn(X.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit($o.created,o)}),Tr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=hn(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.persist(),this.events.emit($o.updated,i))}),Tr(this,"get",async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i))),Tr(this,"delete",(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===r){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit($o.deleted,s)}}),this.persist()}),Tr(this,"exists",async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1)),Tr(this,"on",(r,i)=>{this.events.on(r,i)}),Tr(this,"once",(r,i)=>{this.events.once(r,i)}),Tr(this,"off",(r,i)=>{this.events.off(r,i)}),Tr(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Pt(n,this.name)}get context(){return Ft(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Xr(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit($o.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on($o.created,e=>{const n=$o.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on($o.updated,e=>{const n=$o.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on($o.deleted,e=>{const n=$o.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(is.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{X.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit($o.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var A$e=Object.defineProperty,I$e=(t,e,n)=>e in t?A$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ur=(t,e,n)=>I$e(t,typeof e!="symbol"?e+"":e,n);class $$e extends j8e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Ur(this,"expirations",new Map),Ur(this,"events",new An.EventEmitter),Ur(this,"name",O9e),Ur(this,"version",T9e),Ur(this,"cached",[]),Ur(this,"initialized",!1),Ur(this,"storagePrefix",Ea),Ur(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ur(this,"has",r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Ur(this,"set",(r,i)=>{this.isInitialized();const s=this.formatTarget(r),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Ks.created,{target:s,expiration:o})}),Ur(this,"get",r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)}),Ur(this,"del",r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Ks.deleted,{target:i,expiration:s})}}),Ur(this,"on",(r,i)=>{this.events.on(r,i)}),Ur(this,"once",(r,i)=>{this.events.once(r,i)}),Ur(this,"off",(r,i)=>{this.events.off(r,i)}),Ur(this,"removeListener",(r,i)=>{this.events.removeListener(r,i)}),this.logger=Pt(n,this.name)}get context(){return Ft(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return jCe(e);if(typeof e=="number")return UCe(e);const{message:n}=Ce("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ks.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Ce("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Ce("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;X.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Ks.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(is.pulse,()=>this.checkExpirations()),this.events.on(Ks.created,e=>{const n=Ks.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ks.expired,e=>{const n=Ks.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ks.deleted,e=>{const n=Ks.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}}var P$e=Object.defineProperty,O$e=(t,e,n)=>e in t?P$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tn=(t,e,n)=>O$e(t,typeof e!="symbol"?e+"":e,n);class T$e extends U8e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Tn(this,"name",N9e),Tn(this,"abortController"),Tn(this,"isDevEnv"),Tn(this,"verifyUrlV3",R9e),Tn(this,"storagePrefix",Ea),Tn(this,"version",IH),Tn(this,"publicKey"),Tn(this,"fetchPromise"),Tn(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&X.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Tn(this,"register",async i=>{if(!Kp()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=Xi(),u=this.startAbortTimer(X.ONE_SECOND*5),d=await new Promise((h,f)=>{const g=()=>{window.removeEventListener("message",m),l.body.removeChild(p),f("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const p=l.createElement("iframe");p.src=c,p.style.display="none",p.addEventListener("error",g,{signal:this.abortController.signal});const m=y=>{if(y.data&&typeof y.data=="string")try{const w=JSON.parse(y.data);if(w.type==="verify_attestation"){if(Yf(w.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(p),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",m),h(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(p),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Tn(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(Yf(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,c)}),Tn(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(X.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Tn(this,"getVerifyUrl",i=>{let s=i||Qm;return M9e.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Qm}`),s=Qm),s}),Tn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(X.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),Tn(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),Tn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Tn(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Tn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Tn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),Tn(this,"validateAttestation",(i,s)=>{const o=pxe(i,s.publicKey),a={hasExpired:X.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Pt(n,this.name),this.abortController=new AbortController,this.isDevEnv=ex(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Ft(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),X.toMiliseconds(e))}}var N$e=Object.defineProperty,k$e=(t,e,n)=>e in t?N$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aW=(t,e,n)=>k$e(t,typeof e!="symbol"?e+"":e,n);class R$e extends F8e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,aW(this,"context",B9e),aW(this,"registerDeviceToken",async r=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=r,c=`${D9e}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=Pt(n,this.context)}}var M$e=Object.defineProperty,cW=Object.getOwnPropertySymbols,B$e=Object.prototype.hasOwnProperty,D$e=Object.prototype.propertyIsEnumerable,zx=(t,e,n)=>e in t?M$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iy=(t,e)=>{for(var n in e||(e={}))B$e.call(e,n)&&zx(t,n,e[n]);if(cW)for(var n of cW(e))D$e.call(e,n)&&zx(t,n,e[n]);return t},cr=(t,e,n)=>zx(t,typeof e!="symbol"?e+"":e,n);class L$e extends z8e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,cr(this,"context",j9e),cr(this,"storagePrefix",Ea),cr(this,"storageVersion",L9e),cr(this,"events",new Map),cr(this,"shouldPersist",!1),cr(this,"init",async()=>{if(!ex())try{const i={eventId:sq(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:tq(this.core.relayer.protocol,this.core.relayer.version,Ox)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),cr(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=sq(),u=this.core.projectId||"",d=Date.now(),h=iy({eventId:l,timestamp:d,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),cr(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return iy(iy({},a),this.setMethods(a.eventId))}),cr(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),cr(this,"setEventListeners",()=>{this.core.heartbeat.on(is.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{X.fromMiliseconds(Date.now())-X.fromMiliseconds(i.timestamp)>U9e&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),cr(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),cr(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),cr(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),cr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),cr(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,iy(iy({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),cr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),cr(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${F9e}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Ox}${s}`,{method:"POST",body:JSON.stringify(i)})}),cr(this,"getAppDomain",()=>eq().url),this.logger=Pt(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var j$e=Object.defineProperty,lW=Object.getOwnPropertySymbols,U$e=Object.prototype.hasOwnProperty,F$e=Object.prototype.propertyIsEnumerable,qx=(t,e,n)=>e in t?j$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uW=(t,e)=>{for(var n in e||(e={}))U$e.call(e,n)&&qx(t,n,e[n]);if(lW)for(var n of lW(e))F$e.call(e,n)&&qx(t,n,e[n]);return t},Qt=(t,e,n)=>qx(t,typeof e!="symbol"?e+"":e,n);const z$e=class AV extends P8e{constructor(e){var n;super(e),Qt(this,"protocol",AH),Qt(this,"version",IH),Qt(this,"name",c5),Qt(this,"relayUrl"),Qt(this,"projectId"),Qt(this,"customStoragePrefix"),Qt(this,"events",new An.EventEmitter),Qt(this,"logger"),Qt(this,"heartbeat"),Qt(this,"relayer"),Qt(this,"crypto"),Qt(this,"storage"),Qt(this,"history"),Qt(this,"expirer"),Qt(this,"pairing"),Qt(this,"verify"),Qt(this,"echoClient"),Qt(this,"linkModeSupportedApps"),Qt(this,"eventClient"),Qt(this,"initialized",!1),Qt(this,"logChunkController"),Qt(this,"on",(a,c)=>this.events.on(a,c)),Qt(this,"once",(a,c)=>this.events.once(a,c)),Qt(this,"off",(a,c)=>this.events.off(a,c)),Qt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Qt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:en.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||TH,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=wc({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:l9e.logger,name:c5}),{logger:s,chunkLoggerController:o}=F_({opts:i,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Pt(s,this.name),this.heartbeat=new jj,this.crypto=new gIe(this,this.logger,e==null?void 0:e.keychain),this.history=new x$e(this,this.logger),this.expirer=new $$e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new qj(uW(uW({},u9e),e==null?void 0:e.storageOptions)),this.relayer=new zIe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new C$e(this,this.logger),this.verify=new T$e(this,this.logger,this.storage),this.echoClient=new R$e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new L$e(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new AV(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(_9e,r),n}get context(){return Ft(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(NH,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(NH)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&process.env.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}},dW="wc",hW=2,fW="client",Hx=`${dW}@${hW}:${fW}:`,Wx={name:fW,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},pW="WALLETCONNECT_DEEPLINK_CHOICE",q$e="proposal",gW="Proposal expired",H$e="session",c0=X.SEVEN_DAYS,W$e="engine",lr={wc_sessionPropose:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1104},res:{ttl:X.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1106},res:{ttl:X.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1112},res:{ttl:X.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1114},res:{ttl:X.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:X.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:X.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1119}}},Kx={min:X.FIVE_MINUTES,max:X.SEVEN_DAYS},Sa={idle:"IDLE",active:"ACTIVE"},mW={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},K$e="request",V$e=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],G$e="wc",Z$e="auth",Y$e="authKeys",J$e="pairingTopics",Q$e="requests",h5=`${G$e}@${1.5}:${Z$e}:`,f5=`${h5}:PUB_KEY`;var X$e=Object.defineProperty,e7e=Object.defineProperties,t7e=Object.getOwnPropertyDescriptors,yW=Object.getOwnPropertySymbols,n7e=Object.prototype.hasOwnProperty,r7e=Object.prototype.propertyIsEnumerable,Vx=(t,e,n)=>e in t?X$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kt=(t,e)=>{for(var n in e||(e={}))n7e.call(e,n)&&Vx(t,n,e[n]);if(yW)for(var n of yW(e))r7e.call(e,n)&&Vx(t,n,e[n]);return t},ni=(t,e)=>e7e(t,t7e(e)),ge=(t,e,n)=>Vx(t,typeof e!="symbol"?e+"":e,n);class i7e extends K8e{constructor(e){super(e),ge(this,"name",W$e),ge(this,"events",new hf),ge(this,"initialized",!1),ge(this,"requestQueue",{state:Sa.idle,queue:[]}),ge(this,"sessionRequestQueue",{state:Sa.idle,queue:[]}),ge(this,"requestQueueDelay",X.ONE_SECOND),ge(this,"expectedPairingMethodMap",new Map),ge(this,"recentlyDeletedMap",new Map),ge(this,"recentlyDeletedLimit",200),ge(this,"relayMessageCache",[]),ge(this,"pendingSessions",new Map),ge(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(lr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},X.toMiliseconds(this.requestQueueDelay)))}),ge(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ni(Kt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=Oxe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=i,d,h=!1;try{if(u){const A=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=A.active}}catch(A){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),A}if(!u||!h){const{topic:A,uri:$}=await this.client.core.pairing.create();u=A,d=$}if(!u){const{message:A}=Ce("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(A)}const f=await this.client.core.crypto.generateKeyPair(),g=lr.wc_sessionPropose.req.ttl||X.FIVE_MINUTES,p=jn(g),m=ni(Kt(Kt({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:OH}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:p,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Xn()}),y=Tt("session_connect",m.id),{reject:w,resolve:b,done:v}=Jd(g,gW),C=({id:A})=>{A===m.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(m.id),this.events.emit(y,{error:{message:gW,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(y,({error:A,session:$})=>{this.client.events.off("proposal_expire",C),A?w(A):$&&b($)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:d,approval:v}}),ge(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),ge(this,"approve",async n=>{var r,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Po.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(P){throw o.setError(ih.no_internet_connection),P}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(P){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(ih.proposal_not_found),P}try{await this.isValidApprove(n)}catch(P){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ih.session_approve_namespace_validation_failure),P}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:p,requiredNamespaces:m,optionalNamespaces:y}=f;let w=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:g});w||(w=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Po.session_approve_started,properties:{topic:g,trace:[Po.session_approve_started,Po.session_namespaces_validation_success]}}));const b=await this.client.core.crypto.generateKeyPair(),v=p.publicKey,C=await this.client.core.crypto.generateSharedKey(b,v),A=Kt(Kt(Kt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:b,metadata:this.client.metadata},expiry:jn(c0)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),$=en.relay;w.addTrace(Po.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:$})}catch(P){throw w.setError(ih.subscribe_session_topic_failure),P}w.addTrace(Po.subscribe_session_topic_success);const R=ni(Kt({},A),{topic:C,requiredNamespaces:m,optionalNamespaces:y,pairingTopic:g,acknowledged:!1,self:A.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:b,transportType:en.relay});await this.client.session.set(C,R),w.addTrace(Po.store_session);try{w.addTrace(Po.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:A,throwOnFailedPublish:!0}).catch(P=>{throw w==null||w.setError(ih.session_settle_publish_failure),P}),w.addTrace(Po.session_settle_publish_success),w.addTrace(Po.publishing_session_approve),await this.sendResult({id:a,topic:g,result:{relay:{protocol:c??"irn"},responderPublicKey:b},throwOnFailedPublish:!0}).catch(P=>{throw w==null||w.setError(ih.session_approve_publish_failure),P}),w.addTrace(Po.session_approve_publish_success)}catch(P){throw this.client.logger.error(P),this.client.session.delete(C,jt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),P}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:p.metadata}),await this.client.proposal.delete(a,jt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(C,jn(c0)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),ge(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:i}=n;let s;try{s=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}s&&(await this.sendError({id:r,topic:s,error:i,rpcOpts:lr.wc_sessionPropose.reject}),await this.client.proposal.delete(r,jt("USER_DISCONNECTED")))}),ge(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:i}=n,{done:s,resolve:o,reject:a}=Jd(),c=Xn(),l=ss().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Tt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:s}}),ge(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,i=Xn(),{done:s,resolve:o,reject:a}=Jd();return this.events.once(Tt("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,jn(c0)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),ge(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:i,topic:s,expiry:o=lr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(s);(a==null?void 0:a.transportType)===en.relay&&await this.confirmOnlineStateOrThrow();const c=Xn(),l=ss().toString(),{done:u,resolve:d,reject:h}=Jd(o,"Request expired. Please try again.");this.events.once(Tt("session_request",c),({error:y,result:w})=>{y?h(y):d(w)});const f="wc_sessionRequest",g=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(g)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:{request:ni(Kt({},i),{expiryTimestamp:jn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:g}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),await u();const p={request:ni(Kt({},i),{expiryTimestamp:jn(o)}),chainId:r},m=this.shouldSetTVF(f,p);return await Promise.all([new Promise(async y=>{await this.sendRequest(Kt({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:p,expiry:o,throwOnFailedPublish:!0},m&&{tvf:this.getTVFParams(c,p)})).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),y()}),new Promise(async y=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const b=await HCe(this.client.core.storage,pW);await FCe({id:c,topic:s,wcDeepLink:b})}y()}),u()]).then(y=>y[2])}),ge(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:i}=n,{id:s}=i,o=this.client.session.get(r);o.transportType===en.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Bn(i)?await this.sendResult({id:s,topic:r,result:i.result,throwOnFailedPublish:!0,appLink:a}):hn(i)&&await this.sendError({id:s,topic:r,error:i.error,appLink:a}),this.cleanupAfterResponse(n)}),ge(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:r}=n;if(this.client.session.keys.includes(r)){const i=Xn(),s=ss().toString(),{done:o,resolve:a,reject:c}=Jd();this.events.once(Tt("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),ge(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:i,chainId:s}=n,o=ss().toString(),a=Xn();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),ge(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:jt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:i}=Ce("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(i)}}),ge(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>kxe(r,n)))),ge(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ge(this,"authenticate",async(n,r)=>{var i;this.isInitialized(),this.isValidAuthenticate(n);const s=r&&this.client.core.linkModeSupportedApps.includes(r)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?en.link_mode:en.relay;o===en.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:g,methods:p=[],expiry:m}=n,y=[...n.resources||[]],{topic:w,uri:b}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:b}});const v=await this.client.core.crypto.generateKeyPair(),C=r5(v);if(await Promise.all([this.client.auth.authKeys.set(f5,{responseTopic:C,publicKey:v}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:w})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),p.length>0){const{namespace:x}=Wp(a[0]);let T=B_e(x,"request",p);Z2(y)&&(T=L_e(T,y.pop())),y.push(T)}const A=m&&m>lr.wc_sessionAuthenticate.req.ttl?m:lr.wc_sessionAuthenticate.req.ttl,$={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:g,resources:y},requester:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:jn(A)},R={eip155:{chains:a,methods:[...new Set(["personal_sign",...p])],events:["chainChanged","accountsChanged"]}},P={requiredNamespaces:{},optionalNamespaces:R,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:jn(lr.wc_sessionPropose.req.ttl),id:Xn()},{done:L,resolve:U,reject:D}=Jd(A,"Request expired"),j=Xn(),I=Tt("session_connect",P.id),E=Tt("session_request",j),S=async({error:x,session:T})=>{this.events.off(E,k),x?D(x):T&&U({session:T})},k=async x=>{var T,M,O;if(await this.deletePendingAuthRequest(j,{message:"fulfilled",code:0}),x.error){const K=jt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return x.error.code===K.code?void 0:(this.events.off(I,S),D(x.error.message))}await this.deleteProposal(P.id),this.events.off(I,S);const{cacaos:N,responder:B}=x.result,F=[],z=[];for(const K of N){await vq({cacao:K,projectId:this.client.core.projectId})||(this.client.logger.error(K,"Signature verification failed"),D(jt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Y}=K,J=Z2(Y.resources),G=[sx(Y.iss)],te=G2(Y.iss);if(J){const se=_q(J),he=Sq(J);F.push(...se),G.push(...he)}for(const se of G)z.push(`${se}:${te}`)}const q=await this.client.core.crypto.generateSharedKey(v,B.publicKey);let H;F.length>0&&(H={topic:q,acknowledged:!0,self:{publicKey:v,metadata:this.client.metadata},peer:B,controller:B.publicKey,expiry:jn(c0),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:wH([...new Set(F)],[...new Set(z)]),transportType:o},await this.client.core.relayer.subscribe(q,{transportType:o}),await this.client.session.set(q,H),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:B.metadata}),H=this.client.session.get(q)),(T=this.client.metadata.redirect)!=null&&T.linkMode&&(M=B.metadata.redirect)!=null&&M.linkMode&&(O=B.metadata.redirect)!=null&&O.universal&&r&&(this.client.core.addLinkModeSupportedApp(B.metadata.redirect.universal),this.client.session.update(q,{transportType:en.link_mode})),U({auths:N,session:H})};this.events.once(I,S),this.events.once(E,k);let _;try{if(s){const x=Xr("wc_sessionAuthenticate",$,j);this.client.core.history.set(w,x);const T=await this.client.core.crypto.encode("",x,{type:Km,encoding:su});_=s5(r,w,T)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:$,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:j}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:P,expiry:lr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:P.id})])}catch(x){throw this.events.off(I,S),this.events.off(E,k),x}return await this.setProposal(P.id,P),await this.setAuthRequest(j,{request:ni(Kt({},$),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:_??b,response:L}}),ge(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:i}=n,s=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[sh.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw s.setError(Xm.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw s.setError(Xm.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||en.relay;a===en.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=r5(c),d={type:Nc,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const m of i){if(!await vq({cacao:m,projectId:this.client.core.projectId})){s.setError(Xm.invalid_cacao);const C=jt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}s.addTrace(sh.cacaos_verified);const{p:y}=m,w=Z2(y.resources),b=[sx(y.iss)],v=G2(y.iss);if(w){const C=_q(w),A=Sq(w);h.push(...C),b.push(...A)}for(const C of b)f.push(`${C}:${v}`)}const g=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(sh.create_authenticated_session_topic);let p;if((h==null?void 0:h.length)>0){p={topic:g,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:jn(c0),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:wH([...new Set(h)],[...new Set(f)]),transportType:a},s.addTrace(sh.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:a})}catch(m){throw s.setError(Xm.subscribe_authenticated_session_topic_failure),m}s.addTrace(sh.subscribe_authenticated_session_topic_success),await this.client.session.set(g,p),s.addTrace(sh.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(sh.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw s.setError(Xm.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:p}}),ge(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:i}=n,s=this.getPendingAuthRequest(r);if(!s)throw new Error(`Could not find pending auth request with id ${r}`);s.transportType===en.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=r5(o),l={type:Nc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:i,encodeOpts:l,rpcOpts:lr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,jt("USER_DISCONNECTED"))}),ge(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:i}=n;return Eq(r,i)}),ge(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),ge(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&s.topic&&s.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),ge(this,"deleteSession",async n=>{var r;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,jt("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(pW).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,jt("USER_DISCONNECTED"))}),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Sa.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),ge(this,"deleteProposal",async(n,r)=>{if(r)try{const i=this.client.proposal.get(n),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(ih.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,jt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),ge(this,"deletePendingSessionRequest",async(n,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==n),i&&(this.sessionRequestQueue.state=Sa.idle,this.client.events.emit("session_request_expire",{id:n}))}),ge(this,"deletePendingAuthRequest",async(n,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),i?Promise.resolve():this.client.core.expirer.del(n)])}),ge(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),ge(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,jn(lr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),ge(this,"setAuthRequest",async(n,r)=>{const{request:i,pairingTopic:s,transportType:o=en.relay}=r;this.client.core.expirer.set(n,i.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:n,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),ge(this,"setPendingSessionRequest",async n=>{const{id:r,topic:i,params:s,verifyContext:o}=n,a=s.request.expiryTimestamp||jn(lr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:i,params:s,verifyContext:o})}),ge(this,"sendRequest",async n=>{const{topic:r,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Xr(i,s,c);let f;const g=!!u;try{const y=g?su:Io;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let p;if(V$e.includes(i)){const y=va(JSON.stringify(h)),w=va(f);p=await this.client.core.verify.register({id:w,decryptedId:y})}const m=lr[i].req;if(m.attestation=p,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(r,h),g){const y=s5(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=lr[i].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=ni(Kt({},d),{correlationId:h.id}),l?(y.internal=ni(Kt({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(w=>this.client.logger.error(w))}return h.id}),ge(this,"sendResult",async n=>{const{id:r,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=Hl(r,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?su:Io;u=await this.client.core.crypto.encode(i,l,ni(Kt({},a||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),g}let h,f;try{h=await this.client.core.history.get(i,r);const g=h.request;try{this.shouldSetTVF(g.method,g.params)&&(f=this.getTVFParams(r,g.params,s))}catch(p){this.client.logger.warn("sendResult() -> getTVFParams() failed",p)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),g}if(d){const g=s5(c,i,u);await global.Linking.openURL(g,this.client.name)}else{const g=h.request.method,p=lr[g].res;p.tvf=ni(Kt({},f),{correlationId:r}),o?(p.internal=ni(Kt({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,p)):this.client.core.relayer.publish(i,u,p).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),ge(this,"sendError",async n=>{const{id:r,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=mp(r,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?su:Io;u=await this.client.core.crypto.encode(i,l,ni(Kt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),f}let h;try{h=await this.client.core.history.get(i,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),f}if(d){const f=s5(c,i,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,g=a||lr[f].res;this.client.core.relayer.publish(i,u,g)}await this.client.core.history.resolve(l)}),ge(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(i=>{let s=!1;tu(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&n.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{tu(i.expiryTimestamp)&&r.push(i.id)}),await Promise.all([...n.map(i=>this.deleteSession({topic:i})),...r.map(i=>this.deleteProposal(i))])}),ge(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),ge(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),ge(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Sa.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Sa.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Sa.idle}),ge(this,"processRequest",async n=>{const{topic:r,payload:i,attestation:s,transportType:o,encryptedId:a}=n,c=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,i);case"wc_sessionPing":return await this.onSessionPingRequest(r,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),ge(this,"onRelayEventResponse",async n=>{const{topic:r,payload:i,transportType:s}=n,o=(await this.client.core.history.get(r,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),ge(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:i}=Ce("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),ge(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:i}=n,s=this.expectedPairingMethodMap.get(r);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ge(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:i,attestation:s,encryptedId:o}=n,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(kc.proposal_listener_not_found)),this.isValidConnect(Kt({},i.params));const u=a.expiryTimestamp||jn(lr.wc_sessionPropose.req.ttl),d=Kt({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:s,hash:va(JSON.stringify(i)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Ca.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:lr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),ge(this,"onSessionProposeResponse",async(n,r,i)=>{const{id:s}=r;if(Bn(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:n,proposalId:s,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(hn(r)){await this.client.proposal.delete(s,jt("USER_DISCONNECTED"));const o=Tt("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),ge(this,"onSessionSettleRequest",async(n,r)=>{const{id:i,params:s}=r;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(m=>m.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const g=this.client.proposal.get(f.proposalId),p=ni(Kt(Kt(Kt({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:en.relay});await this.client.session.set(p.topic,p),await this.setExpiry(p.topic,p.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:p.peer.metadata}),this.client.events.emit("session_connect",{session:p}),this.events.emit(Tt("session_connect",f.proposalId),{session:p}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(p),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),ge(this,"onSessionSettleResponse",async(n,r)=>{const{id:i}=r;Bn(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Tt("session_approve",i),{})):hn(r)&&(await this.client.session.delete(n,jt("USER_DISCONNECTED")),this.events.emit(Tt("session_approve",i),{error:r.error}))}),ge(this,"onSessionUpdateRequest",async(n,r)=>{const{params:i,id:s}=r;try{const o=`${n}_session_update`,a=Ym.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:n,error:jt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Kt({topic:n},i));try{Ym.set(o,s),await this.client.session.update(n,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw Ym.delete(o),c}this.client.events.emit("session_update",{id:s,topic:n,params:i})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),ge(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),ge(this,"onSessionUpdateResponse",(n,r)=>{const{id:i}=r,s=Tt("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Bn(r)?this.events.emit(Tt("session_update",i),{}):hn(r)&&this.events.emit(Tt("session_update",i),{error:r.error})}),ge(this,"onSessionExtendRequest",async(n,r)=>{const{id:i}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,jn(c0)),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),ge(this,"onSessionExtendResponse",(n,r)=>{const{id:i}=r,s=Tt("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Bn(r)?this.events.emit(Tt("session_extend",i),{}):hn(r)&&this.events.emit(Tt("session_extend",i),{error:r.error})}),ge(this,"onSessionPingRequest",async(n,r)=>{const{id:i}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:n})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),ge(this,"onSessionPingResponse",(n,r)=>{const{id:i}=r,s=Tt("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Bn(r)?this.events.emit(Tt("session_ping",i),{}):hn(r)&&this.events.emit(Tt("session_ping",i),{error:r.error})},500)}),ge(this,"onSessionDeleteRequest",async(n,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(ar.publish,async()=>{s(await this.deleteSession({topic:n,id:i}))})}),this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:jt("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),ge(this,"onSessionRequest",async n=>{var r,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Kt({topic:o},h));const f=this.client.session.get(o),g=await this.getVerifyContext({attestationId:c,hash:va(JSON.stringify(Xr("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),p={id:d,topic:o,params:h,verifyContext:g};await this.setPendingSessionRequest(p),u===en.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((i=f.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(p):(this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),ge(this,"onSessionRequestResponse",(n,r)=>{const{id:i}=r,s=Tt("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Bn(r)?this.events.emit(Tt("session_request",i),{result:r.result}):hn(r)&&this.events.emit(Tt("session_request",i),{error:r.error})}),ge(this,"onSessionEventRequest",async(n,r)=>{const{id:i,params:s}=r;try{const o=`${n}_session_event_${s.event.name}`,a=Ym.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Kt({topic:n},s)),this.client.events.emit("session_event",{id:i,topic:n,params:s}),Ym.set(o,i)}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),ge(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Bn(r)?this.events.emit(Tt("session_request",i),{result:r.result}):hn(r)&&this.events.emit(Tt("session_request",i),{error:r.error})}),ge(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=s.params,h=await this.getVerifyContext({attestationId:o,hash:va(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(s.id,{request:f,pairingTopic:i,transportType:c}),c===en.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(s.params.requester.metadata,c),f={type:Nc,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:f,rpcOpts:lr.wc_sessionAuthenticate.autoReject,appLink:h})}}),ge(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),ge(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Sa.idle,this.processSessionRequestQueue()},X.toMiliseconds(this.requestQueueDelay))}),ge(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===n&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=Tt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Tt("session_request",s.request.id),{error:r})})}),ge(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Sa.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Sa.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),ge(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),ge(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Xr("wc_sessionPropose",ni(Kt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),ge(this,"isValidConnect",async n=>{if(!Oi(n)){const{message:l}=Ce("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=n;if($r(r)||await this.isValidPairingTopic(r),!Wxe(c,!0)){const{message:l}=Ce("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!$r(i)&&au(i)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(i,"requiredNamespaces")}if(!$r(s)&&au(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),$r(o)||this.validateSessionProps(o,"sessionProperties"),!$r(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),ge(this,"validateNamespaces",(n,r)=>{const i=Hxe(n,"connect()",r);if(i)throw new Error(i.message)}),ge(this,"isValidApprove",async n=>{if(!Oi(n))throw new Error(Ce("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=$x(i,"approve()");if(l)throw new Error(l.message);const u=_H(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!On(s,!0)){const{message:d}=Ce("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}if($r(o)||this.validateSessionProps(o,"sessionProperties"),!$r(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(i));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),ge(this,"isValidReject",async n=>{if(!Oi(n)){const{message:s}=Ce("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(s)}const{id:r,reason:i}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!Vxe(i)){const{message:s}=Ce("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),ge(this,"isValidSessionSettleRequest",n=>{if(!Oi(n)){const{message:l}=Ce("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:i,namespaces:s,expiry:o}=n;if(!EH(r)){const{message:l}=Ce("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Lxe(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=$x(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(tu(o)){const{message:l}=Ce("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),ge(this,"isValidUpdate",async n=>{if(!Oi(n)){const{message:c}=Ce("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:i}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const s=this.client.session.get(r),o=$x(i,"update()");if(o)throw new Error(o.message);const a=_H(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),ge(this,"isValidExtend",async n=>{if(!Oi(n)){const{message:i}=Ce("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(i)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),ge(this,"isValidRequest",async n=>{if(!Oi(n)){const{message:c}=Ce("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:i,chainId:s,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!CH(a,s)){const{message:c}=Ce("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!Gxe(i)){const{message:c}=Ce("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!Jxe(a,s,i.method)){const{message:c}=Ce("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!t9e(o,Kx)){const{message:c}=Ce("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Kx.min} and ${Kx.max}`);throw new Error(c)}}),ge(this,"isValidRespond",async n=>{var r;if(!Oi(n)){const{message:o}=Ce("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:i,response:s}=n;try{await this.isValidSessionTopic(i)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!Zxe(s)){const{message:o}=Ce("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),ge(this,"isValidPing",async n=>{if(!Oi(n)){const{message:i}=Ce("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ge(this,"isValidEmit",async n=>{if(!Oi(n)){const{message:a}=Ce("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:i,chainId:s}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!CH(o,s)){const{message:a}=Ce("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!Yxe(i)){const{message:a}=Ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!Qxe(o,s,i.name)){const{message:a}=Ce("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),ge(this,"isValidDisconnect",async n=>{if(!Oi(n)){const{message:i}=Ce("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ge(this,"isValidAuthenticate",n=>{const{chains:r,uri:i,domain:s,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!On(i,!1))throw new Error("uri is required parameter");if(!On(s,!1))throw new Error("domain is required parameter");if(!On(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Wp(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Wp(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ge(this,"getVerifyContext",async n=>{const{attestationId:r,hash:i,encryptedId:s,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||Qm,validation:"UNKNOWN",origin:o.url||""}};try{if(a===en.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),ge(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((i,s)=>{if(i==null){const{message:o}=Ce("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${i} for key ${Object.keys(n)[s]}`);throw new Error(o)}})}),ge(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),ge(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),ge(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:i}=Ce("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(i)}}),ge(this,"isLinkModeEnabled",(n,r)=>{var i,s,o,a,c,l,u,d,h;return!n||r!==en.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ge(this,"getAppLinkIfEnabled",(n,r)=>{var i;return this.isLinkModeEnabled(n,r)?(i=n==null?void 0:n.redirect)==null?void 0:i.universal:void 0}),ge(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=iq(n,"topic")||"",i=decodeURIComponent(iq(n,"wc_ev")||""),s=this.client.session.keys.includes(r);s&&this.client.session.update(r,{transportType:en.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:s})}),ge(this,"registerLinkModeListeners",async()=>{var n;if(ex()||Xl()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await r.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),ge(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:i}=r;return Object.keys(mW).includes(i.method)}),ge(this,"getTVFParams",(n,r,i)=>{var s,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,i);return ni(Kt({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(s=r.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),ge(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const i=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),ge(this,"extractTxHashesFromResult",(n,r)=>{try{const i=mW[n];if(typeof r=="string")return[r];const s=r[i.key];if(ou(s))return n==="solana_signAllTransactions"?s.map(o=>C_e(o)):s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,i]of Object.entries(n))for(const s of i)try{await this.onProviderMessageEvent({topic:r,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ce("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ar.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(f5)?this.client.auth.authKeys.get(f5):{responseTopic:void 0,publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:s===en.link_mode?su:Io});yp(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:i,transportType:s,encryptedId:va(r)})):Pd(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:s}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Ks.expired,async e=>{const{topic:n,id:r}=rq(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ce("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ce("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(rh.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(rh.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!On(e,!1)){const{message:n}=Ce("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Ce("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(tu(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Ce("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!On(e,!1)){const{message:n}=Ce("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Ce("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(tu(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Ce("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Ce("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(On(e,!1)){const{message:n}=Ce("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Ce("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!Kxe(e)){const{message:n}=Ce("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Ce("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(tu(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Ce("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class s7e extends oh{constructor(e,n){super(e,n,q$e,Hx),this.core=e,this.logger=n}}let o7e=class extends oh{constructor(e,n){super(e,n,H$e,Hx),this.core=e,this.logger=n}};class a7e extends oh{constructor(e,n){super(e,n,K$e,Hx,r=>r.id),this.core=e,this.logger=n}}class c7e extends oh{constructor(e,n){super(e,n,Y$e,h5,()=>f5),this.core=e,this.logger=n}}class l7e extends oh{constructor(e,n){super(e,n,J$e,h5),this.core=e,this.logger=n}}class u7e extends oh{constructor(e,n){super(e,n,Q$e,h5,r=>r.id),this.core=e,this.logger=n}}var d7e=Object.defineProperty,h7e=(t,e,n)=>e in t?d7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gx=(t,e,n)=>h7e(t,typeof e!="symbol"?e+"":e,n);class f7e{constructor(e,n){this.core=e,this.logger=n,Gx(this,"authKeys"),Gx(this,"pairingTopics"),Gx(this,"requests"),this.authKeys=new c7e(this.core,this.logger),this.pairingTopics=new l7e(this.core,this.logger),this.requests=new u7e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var p7e=Object.defineProperty,g7e=(t,e,n)=>e in t?p7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ut=(t,e,n)=>g7e(t,typeof e!="symbol"?e+"":e,n);let m7e=class IV extends W8e{constructor(e){super(e),ut(this,"protocol",dW),ut(this,"version",hW),ut(this,"name",Wx.name),ut(this,"metadata"),ut(this,"core"),ut(this,"logger"),ut(this,"events",new An.EventEmitter),ut(this,"engine"),ut(this,"session"),ut(this,"proposal"),ut(this,"pendingRequest"),ut(this,"auth"),ut(this,"signConfig"),ut(this,"on",(r,i)=>this.events.on(r,i)),ut(this,"once",(r,i)=>this.events.once(r,i)),ut(this,"off",(r,i)=>this.events.off(r,i)),ut(this,"removeListener",(r,i)=>this.events.removeListener(r,i)),ut(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),ut(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"update",async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"request",async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"find",r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),ut(this,"authenticate",async(r,i)=>{try{return await this.engine.authenticate(r,i)}catch(s){throw this.logger.error(s.message),s}}),ut(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),ut(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||Wx.name,this.metadata=MCe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ql(wc({level:(e==null?void 0:e.logger)||Wx.logger}));this.core=(e==null?void 0:e.core)||new z$e(e),this.logger=Pt(n,this.name),this.session=new o7e(this.core,this.logger),this.proposal=new s7e(this.core,this.logger),this.pendingRequest=new a7e(this.core,this.logger),this.engine=new i7e(this),this.auth=new f7e(this.core,this.logger)}static async init(e){const n=new IV(e);return await n.initialize(),n}get context(){return Ft(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},X.toMiliseconds(X.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const wW="error",y7e="wss://relay.walletconnect.org",w7e="wc",b7e="universal_provider",p5=`${w7e}@2:${b7e}:`,bW="https://rpc.walletconnect.org/v1/",l0="generic",v7e=`${bW}bundler`,Vs={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function E7e(){}function Zx(t){return t==null||typeof t!="object"&&typeof t!="function"}function Yx(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function C7e(t){if(Zx(t))return t;if(Array.isArray(t)||Yx(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function vW(t){return typeof t=="object"&&t!==null}function EW(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function CW(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const _7e="[object RegExp]",_W="[object String]",SW="[object Number]",xW="[object Boolean]",AW="[object Arguments]",S7e="[object Symbol]",x7e="[object Date]",A7e="[object Map]",I7e="[object Set]",$7e="[object Array]",P7e="[object ArrayBuffer]",O7e="[object Object]",T7e="[object DataView]",N7e="[object Uint8Array]",k7e="[object Uint8ClampedArray]",R7e="[object Uint16Array]",M7e="[object Uint32Array]",B7e="[object Int8Array]",D7e="[object Int16Array]",L7e="[object Int32Array]",j7e="[object Float32Array]",U7e="[object Float64Array]";function F7e(t,e){return u0(t,void 0,t,new Map,e)}function u0(t,e,n,r=new Map,i=void 0){const s=i==null?void 0:i(t,e,n,r);if(s!=null)return s;if(Zx(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=u0(t[a],a,n,r,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,u0(c,a,n,r,i));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(u0(a,void 0,n,r,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(Yx(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=u0(t[a],a,n,r,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),ah(o,t,n,r,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),ah(o,t,n,r,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),ah(o,t,n,r,i),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,ah(o,t,n,r,i),o}if(typeof t=="object"&&z7e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),ah(o,t,n,r,i),o}return t}function ah(t,e,n=t,r,i){const s=[...Object.keys(e),...EW(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=u0(e[a],a,n,r,i))}}function z7e(t){switch(CW(t)){case AW:case $7e:case P7e:case T7e:case xW:case x7e:case j7e:case U7e:case B7e:case D7e:case L7e:case A7e:case SW:case O7e:case _7e:case I7e:case _W:case S7e:case N7e:case k7e:case R7e:case M7e:return!0;default:return!1}}function q7e(t,e){return F7e(t,(n,r,i,s)=>{const o=e==null?void 0:e(n,r,i,s);if(o!=null)return o;if(typeof t=="object")switch(Object.prototype.toString.call(t)){case SW:case _W:case xW:{const a=new t.constructor(t==null?void 0:t.valueOf());return ah(a,t),a}case AW:{const a={};return ah(a,t),a.length=t.length,a[Symbol.iterator]=t[Symbol.iterator],a}default:return}})}function IW(t){return q7e(t)}function $W(t){return t!==null&&typeof t=="object"&&CW(t)==="[object Arguments]"}function H7e(t){return Yx(t)}function W7e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function K7e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let i=t;for(let s=0;s<n.length;s++){const o=n[s];i=Jx(i,o,r,new Map)}return i}function Jx(t,e,n,r){if(Zx(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return C7e(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...EW(e)];for(let s=0;s<i.length;s++){const o=i[s];let a=e[o],c=t[o];if($W(a)&&(a={...a}),$W(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=IW(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||vW(c)&&vW(a)?t[o]=Jx(c,a,n,r):c==null&&W7e(a)?t[o]=Jx({},a,n,r):c==null&&H7e(a)?t[o]=IW(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function V7e(t,...e){return K7e(t,...e,E7e)}var G7e=Object.defineProperty,Z7e=Object.defineProperties,Y7e=Object.getOwnPropertyDescriptors,PW=Object.getOwnPropertySymbols,J7e=Object.prototype.hasOwnProperty,Q7e=Object.prototype.propertyIsEnumerable,OW=(t,e,n)=>e in t?G7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g5=(t,e)=>{for(var n in e||(e={}))J7e.call(e,n)&&OW(t,n,e[n]);if(PW)for(var n of PW(e))Q7e.call(e,n)&&OW(t,n,e[n]);return t},X7e=(t,e)=>Z7e(t,Y7e(e));function ms(t,e,n){var r;const i=Wp(t);return((r=e.rpcMap)==null?void 0:r[i.reference])||`${bW}?chainId=${i.namespace}:${i.reference}&projectId=${n}`}function ch(t){return t.includes(":")?t.split(":")[1]:t}function TW(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function ePe(t,e){const n=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!n.length)return[];const r=[];return n.forEach(i=>{const s=e.namespaces[i].accounts;r.push(...s)}),r}function m5(t={},e={}){const n=NW(t),r=NW(e);return V7e(n,r)}function NW(t){var e,n,r,i,s;const o={};if(!au(t))return o;for(const[a,c]of Object.entries(t)){const l=o5(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=o0(a);o[f]=X7e(g5(g5({},o[f]),c),{chains:wa(l,(e=o[f])==null?void 0:e.chains),methods:wa(u,(n=o[f])==null?void 0:n.methods),events:wa(d,(r=o[f])==null?void 0:r.events)}),(au(h)||au(((i=o[f])==null?void 0:i.rpcMap)||{}))&&(o[f].rpcMap=g5(g5({},h),(s=o[f])==null?void 0:s.rpcMap))}return o}function kW(t){return t.includes(":")?t.split(":")[2]:t}function RW(t){const e={};for(const[n,r]of Object.entries(t)){const i=r.methods||[],s=r.events||[],o=r.accounts||[],a=o5(n)?[n]:r.chains?r.chains:TW(r.accounts);e[n]={chains:a,methods:i,events:s,accounts:o}}return e}function Qx(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const MW={},Et=t=>MW[t],Xx=(t,e)=>{MW[t]=e};var tPe=Object.defineProperty,nPe=(t,e,n)=>e in t?tPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d0=(t,e,n)=>nPe(t,typeof e!="symbol"?e+"":e,n);class rPe{constructor(e){d0(this,"name","polkadot"),d0(this,"client"),d0(this,"httpProviders"),d0(this,"events"),d0(this,"namespace"),d0(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=ch(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ms(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,Et("disableProviderPing")))}}var iPe=Object.defineProperty,sPe=Object.defineProperties,oPe=Object.getOwnPropertyDescriptors,BW=Object.getOwnPropertySymbols,aPe=Object.prototype.hasOwnProperty,cPe=Object.prototype.propertyIsEnumerable,e9=(t,e,n)=>e in t?iPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DW=(t,e)=>{for(var n in e||(e={}))aPe.call(e,n)&&e9(t,n,e[n]);if(BW)for(var n of BW(e))cPe.call(e,n)&&e9(t,n,e[n]);return t},LW=(t,e)=>sPe(t,oPe(e)),h0=(t,e,n)=>e9(t,typeof e!="symbol"?e+"":e,n);class lPe{constructor(e){h0(this,"name","eip155"),h0(this,"client"),h0(this,"chainId"),h0(this,"namespace"),h0(this,"httpProviders"),h0(this,"events"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||ms(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,Et("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=parseInt(ch(n));e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let i=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,i,s,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((s=(i=e.request)==null?void 0:i.params)==null?void 0:s[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:LW(DW({},u.sessionProperties||{}),{capabilities:LW(DW({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const i=this.client.session.get(e.topic),s=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xr("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,n){return`${v7e}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var uPe=Object.defineProperty,dPe=(t,e,n)=>e in t?uPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f0=(t,e,n)=>dPe(t,typeof e!="symbol"?e+"":e,n);class hPe{constructor(e){f0(this,"name","solana"),f0(this,"client"),f0(this,"httpProviders"),f0(this,"events"),f0(this,"namespace"),f0(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=ch(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ms(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,Et("disableProviderPing")))}}var fPe=Object.defineProperty,pPe=(t,e,n)=>e in t?fPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p0=(t,e,n)=>pPe(t,typeof e!="symbol"?e+"":e,n);class gPe{constructor(e){p0(this,"name","cosmos"),p0(this,"client"),p0(this,"httpProviders"),p0(this,"events"),p0(this,"namespace"),p0(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=ch(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ms(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,Et("disableProviderPing")))}}var mPe=Object.defineProperty,yPe=(t,e,n)=>e in t?mPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g0=(t,e,n)=>yPe(t,typeof e!="symbol"?e+"":e,n);class wPe{constructor(e){g0(this,"name","algorand"),g0(this,"client"),g0(this,"httpProviders"),g0(this,"events"),g0(this,"namespace"),g0(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||ms(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ms(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new rn(new fn(r,Et("disableProviderPing")))}}var bPe=Object.defineProperty,vPe=(t,e,n)=>e in t?bPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,m0=(t,e,n)=>vPe(t,typeof e!="symbol"?e+"":e,n);class EPe{constructor(e){m0(this,"name","cip34"),m0(this,"client"),m0(this,"httpProviders"),m0(this,"events"),m0(this,"namespace"),m0(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),i=ch(n);e[i]=this.createHttpProvider(i,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,Et("disableProviderPing")))}}var CPe=Object.defineProperty,_Pe=(t,e,n)=>e in t?CPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y0=(t,e,n)=>_Pe(t,typeof e!="symbol"?e+"":e,n);class SPe{constructor(e){y0(this,"name","elrond"),y0(this,"client"),y0(this,"httpProviders"),y0(this,"events"),y0(this,"namespace"),y0(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=ch(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ms(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,Et("disableProviderPing")))}}var xPe=Object.defineProperty,APe=(t,e,n)=>e in t?xPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w0=(t,e,n)=>APe(t,typeof e!="symbol"?e+"":e,n);class IPe{constructor(e){w0(this,"name","multiversx"),w0(this,"client"),w0(this,"httpProviders"),w0(this,"events"),w0(this,"namespace"),w0(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const i=ch(n);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ms(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,Et("disableProviderPing")))}}var $Pe=Object.defineProperty,PPe=(t,e,n)=>e in t?$Pe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,b0=(t,e,n)=>PPe(t,typeof e!="symbol"?e+"":e,n);class OPe{constructor(e){b0(this,"name","near"),b0(this,"client"),b0(this,"httpProviders"),b0(this,"events"),b0(this,"namespace"),b0(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||ms(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ms(e,this.namespace);return typeof r>"u"?void 0:new rn(new fn(r,Et("disableProviderPing")))}}var TPe=Object.defineProperty,NPe=(t,e,n)=>e in t?TPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v0=(t,e,n)=>NPe(t,typeof e!="symbol"?e+"":e,n);class kPe{constructor(e){v0(this,"name","tezos"),v0(this,"client"),v0(this,"httpProviders"),v0(this,"events"),v0(this,"namespace"),v0(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||ms(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ms(e,this.namespace);return typeof r>"u"?void 0:new rn(new fn(r))}}var RPe=Object.defineProperty,MPe=(t,e,n)=>e in t?RPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E0=(t,e,n)=>MPe(t,typeof e!="symbol"?e+"":e,n);class BPe{constructor(e){E0(this,"name",l0),E0(this,"client"),E0(this,"httpProviders"),E0(this,"events"),E0(this,"namespace"),E0(this,"chainId"),this.namespace=e.namespace,this.events=Et("events"),this.client=Et("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Vs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(i=>{const s=Wp(i);r[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ms(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rn(new fn(r,Et("disableProviderPing")))}}var DPe=Object.defineProperty,LPe=Object.defineProperties,jPe=Object.getOwnPropertyDescriptors,jW=Object.getOwnPropertySymbols,UPe=Object.prototype.hasOwnProperty,FPe=Object.prototype.propertyIsEnumerable,t9=(t,e,n)=>e in t?DPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y5=(t,e)=>{for(var n in e||(e={}))UPe.call(e,n)&&t9(t,n,e[n]);if(jW)for(var n of jW(e))FPe.call(e,n)&&t9(t,n,e[n]);return t},n9=(t,e)=>LPe(t,jPe(e)),Gs=(t,e,n)=>t9(t,typeof e!="symbol"?e+"":e,n);let zPe=class $V{constructor(e){Gs(this,"client"),Gs(this,"namespaces"),Gs(this,"optionalNamespaces"),Gs(this,"sessionProperties"),Gs(this,"scopedProperties"),Gs(this,"events",new hf),Gs(this,"rpcProviders",{}),Gs(this,"session"),Gs(this,"providerOpts"),Gs(this,"logger"),Gs(this,"uri"),Gs(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:ql(wc({level:(e==null?void 0:e.logger)||wW})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new $V(e);return await n.initialize(),n}async request(e,n,r){const[i,s]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:y5({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,i){const s=new Date().getTime();this.request(e,r,i).then(o=>n(null,Hl(s,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:jt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const s=await i();if(this.session=s.session,this.session){const o=RW(this.session.namespaces);this.namespaces=m5(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const i=await r();this.session=i;const s=RW(i.namespaces);return this.namespaces=m5(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,i]=this.validateChain(e),s=this.getProvider(r);s.name===l0?s.setDefaultChain(`${r}:${i}`,n):s.setDefaultChain(i,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(ou(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await m7e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||wW,relayUrl:this.providerOpts.relayUrl||y7e,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>o0(n)))];Xx("client",this.client),Xx("events",this.events),Xx("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=ePe(n,this.session),i=TW(r),s=m5(this.namespaces,this.optionalNamespaces),o=n9(y5({},s[n]),{accounts:r,chains:i});switch(n){case"eip155":this.rpcProviders[n]=new lPe({namespace:o});break;case"algorand":this.rpcProviders[n]=new wPe({namespace:o});break;case"solana":this.rpcProviders[n]=new hPe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new gPe({namespace:o});break;case"polkadot":this.rpcProviders[n]=new rPe({namespace:o});break;case"cip34":this.rpcProviders[n]=new EPe({namespace:o});break;case"elrond":this.rpcProviders[n]=new SPe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new IPe({namespace:o});break;case"near":this.rpcProviders[n]=new OPe({namespace:o});break;case"tezos":this.rpcProviders[n]=new kPe({namespace:o});break;default:this.rpcProviders[l0]?this.rpcProviders[l0].updateNamespace(o):this.rpcProviders[l0]=new BPe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:i}=e;if(i!==((n=this.session)==null?void 0:n.topic))return;const{event:s}=r;if(s.name==="accountsChanged"){const o=s.data;o&&ou(o)&&this.events.emit("accountsChanged",o.map(kW))}else if(s.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=o0(o),l=Qx(o)!==Qx(a)?`${c}:${Qx(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,i;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:s}=n,o=(i=this.client)==null?void 0:i.session.get(e);this.session=n9(y5({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",n9(y5({},jt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Vs.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[l0]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:i,scopedProperties:s}=e;this.optionalNamespaces=m5(n,r),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>o0(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const i=o0(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(r,i),this.events.emit("chainChanged",i);const s=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:s,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var i,s;try{if(n===r)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(kW);if(!ou(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,i={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const i=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${p5}/${e}${i}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${p5}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${p5}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(p5)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};function w5(t,e){return me.getConnectorId(t)===e}function qPe(t){const e=Array.from(W.state.chains.keys());let n=[];return t?(n.push([t,W.state.chains.get(t)]),w5(t,Te.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&w5(r,Te.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,W.state.chains.get(r)])}):w5(t,Te.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&w5(r,Te.CONNECTOR_ID.AUTH)&&n.push([r,W.state.chains.get(r)])})):n=Array.from(W.state.chains.entries()),n}const Un={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},b5={ConnectorExplorerIds:{[Te.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Te.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Te.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[Te.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[Te.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Un.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Un.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Un.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Un.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Un.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Un.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Un.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Un.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Un.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Un.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Un.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Te.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Te.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Te.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Te.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Te.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Te.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Te.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Te.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Te.CONNECTOR_ID.COINBASE]:"Coinbase",[Te.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Te.CONNECTOR_ID.LEDGER]:"Ledger",[Te.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[Te.CONNECTOR_ID.INJECTED]:"INJECTED",[Te.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[Te.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[Te.CONNECTOR_ID.AUTH]:"AUTH"},WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]},r9={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Un.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},C0={EmbeddedWalletAbortController:new AbortController,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${HPe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function HPe(){return typeof window<"u"}const WPe={createLogger(t,e="error"){const n=wc({level:e}),{logger:r}=F_({opts:n});return r.error=(...i)=>{for(const s of i)if(s instanceof Error){t(s,...i);return}t(void 0,...i)},r}},KPe="rpc.walletconnect.org";function UW(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const i9=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],_0={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===KPe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Te.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Te.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var i,s,o;const r=(o=(s=(i=t.rpcUrls)==null?void 0:i.default)==null?void 0:s.http)==null?void 0:o[0];return i9.includes(e)?UW(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,g,p,m;const i=this.getChainNamespace(t),s=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,s,n),c=((p=(g=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:g.http)==null?void 0:p[0])||o,l=((m=r==null?void 0:r[s])==null?void 0:m.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:i,caipNetworkId:s,assets:{imageId:b5.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(i=>_0.extendCaipNetwork(i,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var i,s,o;const r=[];return n==null||n.forEach(a=>{r.push(rl(a.url,a.config))}),i9.includes(t.caipNetworkId)&&r.push(rl(UW(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(s=(i=t==null?void 0:t.rpcUrls)==null?void 0:i.default)==null?void 0:s.http)==null||o.forEach(a=>{r.push(rl(a))}),iP(r)},extendWagmiTransports(t,e,n){if(i9.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return iP([n,rl(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Te.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Re.getActiveCaipNetworkId(),n=W.getAllRequestedCaipNetworks(),r=Array.from(((c=W.state.chains)==null?void 0:c.keys())||[]),i=e==null?void 0:e.split(":")[0],s=i?r.includes(i):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return s&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},v5={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ni=Yt({providers:{...v5},providerIds:{...v5}}),on={state:Ni,subscribeKey(t,e){return xr(Ni,t,e)},subscribe(t){return Sr(Ni,()=>{t(Ni)})},subscribeProviders(t){return Sr(Ni.providers,()=>t(Ni.providers))},setProvider(t,e){e&&(Ni.providers[t]=Fd(e))},getProvider(t){return Ni.providers[t]},setProviderId(t,e){e&&(Ni.providerIds[t]=e)},getProviderId(t){if(t)return Ni.providerIds[t]},reset(){Ni.providers={...v5},Ni.providerIds={...v5}},resetChain(t){Ni.providers[t]=void 0,Ni.providerIds[t]=void 0}},cu={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},lh={filterOutDuplicatesByRDNS(t){const e=le.state.enableEIP6963?me.state.connectors:[],n=Re.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),i=n.map(a=>a.rdns).filter(Boolean),s=r.concat(i);if(s.includes("io.metamask.mobile")&&ye.isMobile()){const a=s.indexOf("io.metamask.mobile");s[a]="io.metamask"}return t.filter(a=>!s.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=me.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Re.getRecentWallets(),r=e.map(a=>a.explorerId),i=n.map(a=>a.id),s=r.concat(i);return t.filter(a=>!s.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=me.state,{featuredWalletIds:n}=le.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=le.state.features)==null?void 0:c.connectMethodsOrder),r=e||me.state.connectors;if(n)return n;const{injected:i,announced:s}=Rc.getConnectorsByType(r,be.state.recommended,be.state.featured),o=i.filter(Rc.showConnector),a=s.filter(Rc.showConnector);return o.length||a.length?["wallet","email","social"]:cu.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&be.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&be.state.excludedWallets.some(r=>r9.isLowerCaseMatch(r.name,t.name));return e||n}},Rc={getConnectorsByType(t,e,n){const{customWallets:r}=le.state,i=Re.getRecentWallets(),s=lh.filterOutDuplicateWallets(e),o=lh.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:i,external:u,multiChain:a,announced:c,injected:l,recommended:s,featured:o}},showConnector(t){var i;const e=(i=t.info)==null?void 0:i.rdns,n=!!e&&be.state.excludedWallets.some(s=>!!s.rdns&&s.rdns===e),r=!!t.name&&be.state.excludedWallets.some(s=>r9.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ye.isMobile()||ye.isMobile()&&!e&&!xe.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(W.state.chains.values()).some(n=>me.getConnectorId(n.namespace)===Te.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:i,injected:s,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=le.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=Rc.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:le.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...s,...i,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),g=new Set(f.map(y=>y.type)),p=c.filter(y=>g.has(y)).map(y=>({type:y,isEnabled:!0})),m=f.filter(({type:y})=>!p.some(({type:b})=>b===y));return Array.from(new Set([...p,...m].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const E5=globalThis,s9=E5.ShadowRoot&&(E5.ShadyCSS===void 0||E5.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o9=Symbol(),FW=new WeakMap;let zW=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==o9)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(s9&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=FW.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&FW.set(n,e))}return e}toString(){return this.cssText}};const Zs=t=>new zW(typeof t=="string"?t:t+"",void 0,o9),qe=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new zW(n,t,o9)},VPe=(t,e)=>{if(s9)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),i=E5.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)}},qW=s9?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Zs(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:GPe,defineProperty:ZPe,getOwnPropertyDescriptor:YPe,getOwnPropertyNames:JPe,getOwnPropertySymbols:QPe,getPrototypeOf:XPe}=Object,lu=globalThis,HW=lu.trustedTypes,eOe=HW?HW.emptyScript:"",a9=lu.reactiveElementPolyfillSupport,sy=(t,e)=>t,C5={toAttribute(t,e){switch(e){case Boolean:t=t?eOe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},c9=(t,e)=>!GPe(t,e),WW={attribute:!0,type:String,converter:C5,reflect:!1,useDefault:!1,hasChanged:c9};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),lu.litPropertyMetadata??(lu.litPropertyMetadata=new WeakMap);let S0=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=WW){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(e,r,n);i!==void 0&&ZPe(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){const{get:i,set:s}=YPe(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:i,set(o){const a=i==null?void 0:i.call(this);s==null||s.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??WW}static _$Ei(){if(this.hasOwnProperty(sy("elementProperties")))return;const e=XPe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(sy("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(sy("properties"))){const n=this.properties,r=[...JPe(n),...QPe(n)];for(const i of r)this.createProperty(i,n[i])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,i]of n)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const i=this._$Eu(n,r);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(qW(i))}else e!==void 0&&n.push(qW(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return VPe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var s;const r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(i!==void 0&&r.reflect===!0){const o=(((s=r.converter)==null?void 0:s.toAttribute)!==void 0?r.converter:C5).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(i):this.setAttribute(i,o),this._$Em=null}}_$AK(e,n){var s,o;const r=this.constructor,i=r._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const a=r.getPropertyOptions(i),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)==null?void 0:s.fromAttribute)!==void 0?a.converter:C5;this._$Em=i;const l=c.fromAttribute(n,a.type);this[i]=l??((o=this._$Ej)==null?void 0:o.get(i))??l,this._$Em=null}}requestUpdate(e,n,r){var i;if(e!==void 0){const s=this.constructor,o=this[e];if(r??(r=s.getPropertyOptions(e)),!((r.hasChanged??c9)(o,n)||r.useDefault&&r.reflect&&o===((i=this._$Ej)==null?void 0:i.get(e))&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:i,wrapped:s},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),i===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[s,o]of i){const{wrapped:a}=o,c=this[s];a!==!0||this._$AL.has(s)||c===void 0||this.C(s,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(i=>{var s;return(s=i.hostUpdate)==null?void 0:s.call(i)}),this.update(n)):this._$EM()}catch(i){throw e=!1,this._$EM(),i}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var i;return(i=r.hostUpdated)==null?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};S0.elementStyles=[],S0.shadowRootOptions={mode:"open"},S0[sy("elementProperties")]=new Map,S0[sy("finalized")]=new Map,a9==null||a9({ReactiveElement:S0}),(lu.reactiveElementVersions??(lu.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oy=globalThis,_5=oy.trustedTypes,KW=_5?_5.createPolicy("lit-html",{createHTML:t=>t}):void 0,VW="$lit$",uu=`lit$${Math.random().toFixed(9).slice(2)}$`,GW="?"+uu,tOe=`<${GW}>`,uh=document,ay=()=>uh.createComment(""),cy=t=>t===null||typeof t!="object"&&typeof t!="function",l9=Array.isArray,nOe=t=>l9(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",u9=`[ 	
\f\r]`,ly=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ZW=/-->/g,YW=/>/g,dh=RegExp(`>|${u9}(?:([^\\s"'>=/]+)(${u9}*=${u9}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),JW=/'/g,QW=/"/g,XW=/^(?:script|style|textarea|title)$/i,eK=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),Z=eK(1),Se=eK(2),Mc=Symbol.for("lit-noChange"),Sn=Symbol.for("lit-nothing"),tK=new WeakMap,hh=uh.createTreeWalker(uh,129);function nK(t,e){if(!l9(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return KW!==void 0?KW.createHTML(e):e}const rOe=(t,e)=>{const n=t.length-1,r=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=ly;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===ly?u[1]==="!--"?o=ZW:u[1]!==void 0?o=YW:u[2]!==void 0?(XW.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=dh):u[3]!==void 0&&(o=dh):o===dh?u[0]===">"?(o=i??ly,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?dh:u[3]==='"'?QW:JW):o===QW||o===JW?o=dh:o===ZW||o===YW?o=ly:(o=dh,i=void 0);const f=o===dh&&t[a+1].startsWith("/>")?" ":"";s+=o===ly?c+tOe:d>=0?(r.push(l),c.slice(0,d)+VW+c.slice(d)+uu+f):c+uu+(d===-2?a:f)}return[nK(t,s+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class uy{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=rOe(e,n);if(this.el=uy.createElement(l,r),hh.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(i=hh.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const d of i.getAttributeNames())if(d.endsWith(VW)){const h=u[o++],f=i.getAttribute(d).split(uu),g=/([.?@])?(.*)/.exec(h);c.push({type:1,index:s,name:g[2],strings:f,ctor:g[1]==="."?sOe:g[1]==="?"?oOe:g[1]==="@"?aOe:S5}),i.removeAttribute(d)}else d.startsWith(uu)&&(c.push({type:6,index:s}),i.removeAttribute(d));if(XW.test(i.tagName)){const d=i.textContent.split(uu),h=d.length-1;if(h>0){i.textContent=_5?_5.emptyScript:"";for(let f=0;f<h;f++)i.append(d[f],ay()),hh.nextNode(),c.push({type:2,index:++s});i.append(d[h],ay())}}}else if(i.nodeType===8)if(i.data===GW)c.push({type:2,index:s});else{let d=-1;for(;(d=i.data.indexOf(uu,d+1))!==-1;)c.push({type:7,index:s}),d+=uu.length-1}s++}}static createElement(e,n){const r=uh.createElement("template");return r.innerHTML=e,r}}function x0(t,e,n=t,r){var o,a;if(e===Mc)return e;let i=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const s=cy(e)?void 0:e._$litDirective$;return(i==null?void 0:i.constructor)!==s&&((a=i==null?void 0:i._$AO)==null||a.call(i,!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=i:n._$Cl=i),i!==void 0&&(e=x0(t,i._$AS(t,e.values),i,r)),e}class iOe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,i=((e==null?void 0:e.creationScope)??uh).importNode(n,!0);hh.currentNode=i;let s=hh.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new dy(s,s.nextSibling,this,e):c.type===1?l=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(l=new cOe(s,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(s=hh.nextNode(),o++)}return hh.currentNode=uh,i}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class dy{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,i){this.type=2,this._$AH=Sn,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=x0(this,e,n),cy(e)?e===Sn||e==null||e===""?(this._$AH!==Sn&&this._$AR(),this._$AH=Sn):e!==this._$AH&&e!==Mc&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):nOe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Sn&&cy(this._$AH)?this._$AA.nextSibling.data=e:this.T(uh.createTextNode(e)),this._$AH=e}$(e){var s;const{values:n,_$litType$:r}=e,i=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=uy.createElement(nK(r.h,r.h[0]),this.options)),r);if(((s=this._$AH)==null?void 0:s._$AD)===i)this._$AH.p(n);else{const o=new iOe(i,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=tK.get(e.strings);return n===void 0&&tK.set(e.strings,n=new uy(e)),n}k(e){l9(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of e)i===n.length?n.push(r=new dy(this.O(ay()),this.O(ay()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class S5{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,i,s){this.type=1,this._$AH=Sn,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Sn}_$AI(e,n=this,r,i){const s=this.strings;let o=!1;if(s===void 0)e=x0(this,e,n,0),o=!cy(e)||e!==this._$AH&&e!==Mc,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=x0(this,a[r+c],n,c),l===Mc&&(l=this._$AH[c]),o||(o=!cy(l)||l!==this._$AH[c]),l===Sn?e=Sn:e!==Sn&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===Sn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class sOe extends S5{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Sn?void 0:e}}class oOe extends S5{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Sn)}}class aOe extends S5{constructor(e,n,r,i,s){super(e,n,r,i,s),this.type=5}_$AI(e,n=this){if((e=x0(this,e,n,0)??Sn)===Mc)return;const r=this._$AH,i=e===Sn&&r!==Sn||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==Sn&&(r===Sn||i);i&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class cOe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){x0(this,e)}}const d9=oy.litHtmlPolyfillSupport;d9==null||d9(uy,dy),(oy.litHtmlVersions??(oy.litHtmlVersions=[])).push("3.3.1");const lOe=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let i=r._$litPart$;if(i===void 0){const s=(n==null?void 0:n.renderBefore)??null;r._$litPart$=i=new dy(e.insertBefore(ay(),s),s,void 0,n??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fh=globalThis;let Be=class extends S0{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=lOe(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Mc}};Be._$litElement$=!0,Be.finalized=!0,(fV=fh.litElementHydrateSupport)==null||fV.call(fh,{LitElement:Be});const h9=fh.litElementPolyfillSupport;h9==null||h9({LitElement:Be}),(fh.litElementVersions??(fh.litElementVersions=[])).push("4.2.1");let hy,du,hu;function uOe(t,e){hy=document.createElement("style"),du=document.createElement("style"),hu=document.createElement("style"),hy.textContent=A0(t).core.cssText,du.textContent=A0(t).dark.cssText,hu.textContent=A0(t).light.cssText,document.head.appendChild(hy),document.head.appendChild(du),document.head.appendChild(hu),rK(e)}function rK(t){du&&hu&&(t==="light"?(du.removeAttribute("media"),hu.media="enabled"):(hu.removeAttribute("media"),du.media="enabled"))}function dOe(t){hy&&du&&hu&&(hy.textContent=A0(t).core.cssText,du.textContent=A0(t).dark.cssText,hu.textContent=A0(t).light.cssText)}function A0(t){return{core:qe`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Zs(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Zs((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Zs((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Zs((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Zs((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:qe`
      :root {
        --w3m-color-mix: ${Zs((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Zs(Kl(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Zs(Kl(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:qe`
      :root {
        --w3m-color-mix: ${Zs((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Zs(Kl(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Zs(Kl(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const St=qe`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Nr=qe`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,fy=qe`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,ur={getSpacingStyles(t,e){if(Array.isArray(t))return t[e]?`var(--wui-spacing-${t[e]})`:void 0;if(typeof t=="string")return`var(--wui-spacing-${t})`},getFormattedDate(t){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(t)},getHostName(t){try{return new URL(t).hostname}catch{return""}},getTruncateString({string:t,charsStart:e,charsEnd:n,truncate:r}){return t.length<=e+n?t:r==="end"?`${t.substring(0,e)}...`:r==="start"?`...${t.substring(t.length-n)}`:`${t.substring(0,Math.floor(e))}...${t.substring(t.length-Math.floor(n))}`},generateAvatarColors(t){const n=t.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,"").substring(0,6).padEnd(6,"0"),r=this.hexToRgb(n),i=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),o=100-3*Number(i==null?void 0:i.replace("px","")),a=`${o}% ${o}% at 65% 40%`,c=[];for(let l=0;l<5;l+=1){const u=this.tintColor(r,.15*l);c.push(`rgb(${u[0]}, ${u[1]}, ${u[2]})`)}return`
    --local-color-1: ${c[0]};
    --local-color-2: ${c[1]};
    --local-color-3: ${c[2]};
    --local-color-4: ${c[3]};
    --local-color-5: ${c[4]};
    --local-radial-circle: ${a}
   `},hexToRgb(t){const e=parseInt(t,16),n=e>>16&255,r=e>>8&255,i=e&255;return[n,r,i]},tintColor(t,e){const[n,r,i]=t,s=Math.round(n+(255-n)*e),o=Math.round(r+(255-r)*e),a=Math.round(i+(255-i)*e);return[s,o,a]},isNumber(t){return{number:/^[0-9]+$/u}.number.test(t)},getColorTheme(t){var e;return t||(typeof window<"u"&&window.matchMedia?(e=window.matchMedia("(prefers-color-scheme: dark)"))!=null&&e.matches?"dark":"light":"dark")},splitBalance(t){const e=t.split(".");return e.length===2?[e[0],e[1]]:["0","00"]},roundNumber(t,e,n){return t.toString().length>=e?Number(t).toFixed(n):t},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})}};function hOe(t,e){const{kind:n,elements:r}=e;return{kind:n,elements:r,finisher(i){customElements.get(t)||customElements.define(t,i)}}}function fOe(t,e){return customElements.get(t)||customElements.define(t,e),e}function ke(t){return function(n){return typeof n=="function"?fOe(t,n):hOe(t,n)}}const py={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};function gy(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const iK=gy({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),sK=gy({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});gy({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"}),gy({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),gy({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const pOe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},x5={getMethodsByChainNamespace(t){return pOe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(i=>r.add(i)),e.chains&&Object.keys(e.chains).forEach(i=>r.add(i)),e.events&&Object.keys(e.events).forEach(i=>r.add(i)),e.rpcMap&&Object.keys(e.rpcMap).forEach(i=>{const[s]=i.split(":");s&&r.add(s)}),r.forEach(i=>{n[i]||(n[i]=this.createDefaultNamespace(i))}),e.methods&&Object.entries(e.methods).forEach(([i,s])=>{n[i]&&(n[i].methods=s)}),e.chains&&Object.entries(e.chains).forEach(([i,s])=>{n[i]&&(n[i].chains=s)}),e.events&&Object.entries(e.events).forEach(([i,s])=>{n[i]&&(n[i].events=s)}),e.rpcMap){const i=new Set;Object.entries(e.rpcMap).forEach(([s,o])=>{const[a,c]=s.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),i.has(a)||(n[a].rpcMap={},i.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,i)=>{const{id:s,chainNamespace:o,rpcUrls:a}=i,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${s}`,u=r[o];switch(u.chains.push(l),l){case iK.caipNetworkId:u.chains.push(iK.deprecatedCaipNetworkId);break;case sK.caipNetworkId:u.chains.push(sK.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[s]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await $m.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(i=>{const[s,o]=i.split(":");return`${s}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const s=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(s,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class oK{constructor({provider:e,namespace:n}){this.id=Te.CONNECTOR_ID.WALLET_CONNECT,this.name=b5.ConnectorNamesMap[Te.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=b5.ConnectorImageIds[Te.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=W.getCaipNetworks.bind(W),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=le.state.universalProviderConfigOverride,i=x5.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:i})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Hd.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:gOe})}}const gOe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class mOe{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>W.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:Te.CONNECTOR_ID.AUTH,type:"AUTH",name:Te.CONNECTOR_NAMES.AUTH,provider:e,imageId:b5.ConnectorImageIds[Te.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){je.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(i=>i(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var s;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const i="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){i.setDefaultChain(n.caipNetworkId);return}if(i&&r==="AUTH"){const o=i,a=(s=je.state.preferredAccountTypes)==null?void 0:s[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof oK);if(!e)throw new Error("WalletConnectConnector not found");return e}}class yOe extends mOe{setUniversalProvider(e){this.addConnector(new oK({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var i,s,o,a;const n=this.provider,r=((a=(o=(s=(i=n==null?void 0:n.session)==null?void 0:i.namespaces)==null?void 0:s[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>ye.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var s,o,a,c,l;if(!(e.caipNetwork&&Rt.BALANCE_SUPPORTED_CHAINS.includes((s=e.caipNetwork)==null?void 0:s.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(je.state.balanceLoading&&e.chainId===((c=W.state.activeCaipNetwork)==null?void 0:c.id))return{balance:je.state.balance||"0.00",symbol:je.state.balanceSymbol||""};const i=(await je.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(i==null?void 0:i.quantity.numeric)||"0.00",symbol:(i==null?void 0:i.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:i}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let s="";return((o=W.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===Te.CHAIN.SOLANA?s=(await n.request({method:"solana_signMessage",params:{message:Gz.encode(new TextEncoder().encode(r)),pubkey:i}},(a=W.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:s=await n.request({method:"personal_sign",params:[r,i]},(c=W.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:s}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var i,s,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===Te.CHAIN.EVM)try{await((i=r.provider)==null?void 0:i.request({method:"wallet_switchEthereumChain",params:[{chainId:Cs(n.id)}]}))}catch(u){if(u.code===py.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===py.ERROR_INVALID_CHAIN_ID||u.code===py.ERROR_CODE_DEFAULT||((o=(s=u==null?void 0:u.data)==null?void 0:s.originalError)==null?void 0:o.code)===py.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Cs(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const wOe=["email","socials","swaps","onramp","activity","reownBranding"],A5={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Rt.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Rt.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Rt.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Rt.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Rt.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Rt.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Rt.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Rt.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Rt.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},bOe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=A5[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,i){const s=A5[t],o=e[s.localFeatureName];if(i&&!s.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(s.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return A5[t].processApi(e)},processFallbackFeature(t,e){return A5[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,i=!1;try{r=await be.fetchProjectConfig(),i=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const s=i&&!e?Rt.DEFAULT_REMOTE_FEATURES:Rt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of wOe){const a=this.processFeature(o,n,r,i,e);Object.assign(s,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Rt.DEFAULT_REMOTE_FEATURES}if(i&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;_o.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return s}};class vOe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var i,s,o,a;if(n){const c=(s=(i=W.getNetworkData(n))==null?void 0:i.requestedCaipNetworks)==null?void 0:s.find(d=>d.id===r);if(c)return c;const l=(o=W.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=W.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return W.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>W.getCaipNetworks(n),this.getActiveChainNamespace=()=>W.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{W.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>W.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>W.state.activeChain===n||!n?W.state.activeCaipAddress:W.getAccountProp("caipAddress",n),this.setClientId=n=>{We.setClientId(n)},this.getProvider=n=>on.getProvider(n),this.getProviderType=n=>on.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=je.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{je.setCaipAddress(n,r),n&&le.state.enableEmbedded&&this.close()},this.setBalance=(n,r,i)=>{je.setBalance(n,r,i)},this.setProfileName=(n,r)=>{je.setProfileName(n,r)},this.setProfileImage=(n,r)=>{je.setProfileImage(n,r)},this.setUser=(n,r)=>{je.setUser(n,r)},this.resetAccount=n=>{je.resetAccount(n)},this.setCaipNetwork=n=>{W.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{W.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{je.setAllAccounts(n,r),le.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{je.setStatus(n,r),me.isConnected()?Re.setConnectionStatus("connected"):Re.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>W.getAccountProp("address",n),this.setConnectors=n=>{const r=[...me.state.allConnectors,...n];me.setConnectors(r)},this.setConnections=(n,r)=>{xe.setConnections(n,r)},this.fetchIdentity=n=>We.fetchIdentity(n),this.getReownName=n=>$m.getNamesForAddress(n),this.getConnectors=()=>me.getConnectors(),this.getConnectorImage=n=>Dn.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const i=on.getProviderId(r),s=n?{...n,type:i}:void 0;je.setConnectedWalletInfo(s,r)},this.getIsConnectedState=()=>!!W.state.activeCaipAddress,this.addAddressLabel=(n,r,i)=>{je.addAddressLabel(n,r,i)},this.removeAddressLabel=(n,r)=>{je.removeAddressLabel(n,r)},this.getAddress=n=>W.state.activeChain===n||!n?je.state.address:W.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>W.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{W.resetNetwork(n)},this.addConnector=n=>{me.addConnector(n)},this.resetWcConnection=()=>{xe.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{je.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{je.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{W.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{je.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{le.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(s=>s.namespace).filter(s=>!!s);if(r!=null&&r.length)return[...new Set(r)];const i=n==null?void 0:n.map(s=>s.chainNamespace);return[...new Set(i)]}async initialize(e){var n,r,i;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await bOe.fetchRemoteFeatures(e),le.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&OS.setOnrampProviders(this.remoteFeatures.onramp),((n=le.state.remoteFeatures)!=null&&n.email||Array.isArray((r=le.state.remoteFeatures)==null?void 0:r.socials)&&((i=le.state.remoteFeatures)==null?void 0:i.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await be.fetchAllowedOrigins();if(e&&ye.isClient()){const n=window.location.origin;x5.isOriginAllowed(n,e,py.DEFAULT_ALLOWED_ANCESTORS)||_o.open(C0.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else _o.open(C0.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,it.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(i=>i.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Ar.setThemeMode(e.themeMode),e.themeVariables&&Ar.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");W.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&W.setActiveCaipNetwork(n)}initializeConnectionController(e){xe.setWcBasic(e.basic??!1)}initializeConnectorController(){me.initialize(this.chainNamespaces)}initializeProjectSettings(e){le.setProjectId(e.projectId),le.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;le.setDebug(e.debug!==!1),le.setEnableWalletConnect(e.enableWalletConnect!==!1),le.setEnableWalletGuide(e.enableWalletGuide!==!1),le.setEnableWallets(e.enableWallets!==!1),le.setEIP6963Enabled(e.enableEIP6963!==!1),le.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),le.setEnableAuthLogger(e.enableAuthLogger!==!1),le.setCustomRpcUrls(e.customRpcUrls),le.setEnableEmbedded(e.enableEmbedded),le.setAllWallets(e.allWallets),le.setIncludeWalletIds(e.includeWalletIds),le.setExcludeWalletIds(e.excludeWalletIds),le.setFeaturedWalletIds(e.featuredWalletIds),le.setTokens(e.tokens),le.setTermsConditionsUrl(e.termsConditionsUrl),le.setPrivacyPolicyUrl(e.privacyPolicyUrl),le.setCustomWallets(e.customWallets),le.setFeatures(e.features),le.setAllowUnsupportedChain(e.allowUnsupportedChain),le.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),le.setPreferUniversalLinks(e.experimental_preferUniversalLinks),le.setDefaultAccountTypes(e.defaultAccountTypes);const n=Re.getPreferredAccountTypes()||{},r={...le.state.defaultAccountTypes,...n};je.setPreferredAccountTypes(r);const i=this.getDefaultMetaData();if(!e.metadata&&i&&(e.metadata=i),le.setMetadata(e.metadata),le.setDisableAppend(e.disableAppend),le.setEnableEmbedded(e.enableEmbedded),le.setSIWX(e.siwx),!e.projectId){_o.open(C0.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===Te.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");le.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,i;return ye.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((i=document.querySelector('link[rel~="icon"]'))==null?void 0:i.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=_0.getUnsupportedNetwork(`${n}:${e}`);W.setActiveCaipNetwork(r)}}getDefaultNetwork(){return _0.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return _0.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return _0.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(i=>{var s;return i.id===((s=e.defaultNetwork)==null?void 0:s.id)});return n?_0.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=on.getProvider(e),i=on.getProviderId(e),{caipAddress:s}=W.getAccountData(e)||{};this.setLoading(!0,e),s&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:i}),Re.removeConnectedNamespace(e),on.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),me.removeConnectorId(e),W.resetAccount(e),W.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var s;const e=W.state.activeChain,n=this.getAdapter(e),r=(s=this.getCaipNetwork(e))==null?void 0:s.id;if(!n)throw new Error("Adapter not found");const i=await n.connectWalletConnect(r);this.close(),this.setClientId((i==null?void 0:i.clientId)||null),Re.setConnectedNamespaces([...W.state.chains.keys()]),this.chainNamespaces.forEach(o=>{me.setConnectorId(Un.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:i,chain:s,caipNetwork:o,socialUri:a})=>{var p,m,y,w,b,v;const c=W.state.activeChain,l=s||c,u=this.getAdapter(l);if(s&&s!==c&&!o){const C=this.getCaipNetworks().find(A=>A.chainNamespace===s);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:i,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(m=(p=o==null?void 0:o.rpcUrls)==null?void 0:p.default)==null?void 0:m.http)==null?void 0:y[0])||((v=(b=(w=d==null?void 0:d.rpcUrls)==null?void 0:w.default)==null?void 0:b.http)==null?void 0:v[0])});if(!h)return;Re.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=je.state.allAccounts,{accounts:g}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(g,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:i})=>{var a;const s=W.state.activeChain,o=this.getAdapter(s);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:i,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Re.addConnectedNamespace(s),this.syncConnectedWalletInfo(s))},disconnect:async e=>{const n=qPe(e);try{const r=await Promise.allSettled(n.map(async([s])=>this.disconnectNamespace(s)));_t.resetSend(),xe.resetWcConnection(),await Hd.clearSessions(),me.setFilterByNamespace(void 0);const i=r.filter(s=>s.status==="rejected");if(i.length>0)throw new Error(i.map(s=>s.reason.message).join(", "));Re.deleteConnectedSocialProvider(),it.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(W.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:je.state.address,provider:on.getProvider(W.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Rt.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(W.state.activeChain),i=on.getProvider(n),s=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:i}));return(s==null?void 0:s.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===Te.CHAIN.EVM){const n=this.getAdapter(W.state.activeChain),r=on.getProvider(W.state.activeChain),i=this.getCaipNetwork();if(!i)throw new Error("CaipNetwork is undefined");const s=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:i}));return(s==null?void 0:s.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:je.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:W.state.activeChain}),je.state.profileImage||!1},getEnsAddress:async e=>await x5.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(W.state.activeChain),r=this.getCaipNetwork(),i=this.getCaipAddress(),s=on.getProvider(W.state.activeChain);if(!r||!i)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:s,caipAddress:i}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(W.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(W.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(W.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(W.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(W.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(W.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!je.state.address||this.updateNativeBalance(je.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},xe.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,i,s,o;if(on.getProviderId(W.state.activeChain)===Un.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(s=(i=this.universalProvider)==null?void 0:i.session)==null?void 0:s.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const i=on.getProvider(n),s=on.getProviderId(n);if(e.chainNamespace===W.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:i,providerType:s}))}else if(this.setCaipNetwork(e),s===Un.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],i=n.accounts.map(s=>{const{chainId:o,chainNamespace:a}=Wl.parseCaipAddress(s);return`${a}:${o}`});return Array.from(new Set([...r,...i]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var s;const i=e==null?void 0:e.find(o=>o.namespace===r);return i?(i.construct({namespace:r,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),n[r]=i):n[r]=new yOe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Re.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Re.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:i,chainId:s})=>{const o=this.getCaipNetworks().find(l=>l.id===s||l.caipNetworkId===s),a=W.state.activeChain===e,c=W.getAccountProp("address",e);if(o){const l=a&&i?i:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(s)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",i=>{this.setConnections(i,e)}),n.on("pendingTransactions",()=>{const i=je.state.address,s=W.state.activeCaipNetwork;!i||!(s!=null&&s.id)||this.updateNativeBalance(i,s.id,s.chainNamespace)}),n.on("accountChanged",({address:i,chainId:s})=>{var a,c;const o=W.state.activeChain===e;o&&s?this.syncAccount({address:i,chainId:s,chainNamespace:e}):o&&((a=W.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:i,chainId:(c=W.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(i,s,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,i;await this.getUniversalProvider(),this.universalProvider&&((i=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||i.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===Te.CHAIN.EVM&&ye.isSafeApp()&&me.setConnectorId(Te.CONNECTOR_ID.SAFE,e);const n=me.getConnectorId(e);switch(this.setStatus("connecting",e),n){case Te.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Te.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=me.getConnectorId(e),i=this.getCaipNetwork(e),o=me.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(i!=null&&i.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:i.id,rpcUrl:(l=(c=(a=i==null?void 0:i.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([ye.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),i=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],s=(d=W.state.activeCaipNetwork)==null?void 0:d.id,o=i.find(h=>{const{chainId:f}=Wl.parseCaipAddress(h);return f===(s==null?void 0:s.toString())})||i[0];if(o){const h=Wl.validateCaipAddress(o),{chainId:f,address:g}=Wl.parseCaipAddress(h);if(on.setProviderId(n,Un.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&W.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==Te.CHAIN.EVM){const p=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:W.state.activeCaipNetwork});on.setProvider(n,p)}else on.setProvider(n,this.universalProvider);me.setConnectorId(Te.CONNECTOR_ID.WALLET_CONNECT,n),Re.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:g,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await W.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,i,s,o,a;const n=(a=(o=(s=(i=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:i.namespaces)==null?void 0:s[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Wl.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>ye.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:i}){on.setProviderId(i,e),on.setProvider(i,n),me.setConnectorId(r,i)}async syncAllAccounts(e){const n=me.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),i=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));i&&i.accounts.length>0&&this.setAllAccounts(i.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===W.state.activeChain,r=W.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:s,chainNamespace:o}=e,{chainId:a}=Re.getActiveNetworkProps(),c=s||a,l=((d=W.state.activeCaipNetwork)==null?void 0:d.name)===Te.UNSUPPORTED_NETWORK_NAME,u=W.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(m=>m.id.toString()===c.toString()),g=this.getCaipNetworks().find(m=>m.chainNamespace===o);if(!u&&!f&&!g){const m=this.getApprovedCaipNetworkIds()||[],y=m.find(b=>{var v;return((v=Wl.parseCaipNetworkId(b))==null?void 0:v.chainId)===c.toString()}),w=m.find(b=>{var v;return((v=Wl.parseCaipNetworkId(b))==null?void 0:v.chainNamespace)===o});f=this.getCaipNetworks().find(b=>b.caipNetworkId===y),g=this.getCaipNetworks().find(b=>b.caipNetworkId===w||"deprecatedCaipNetworkId"in b&&b.deprecatedCaipNetworkId===w)}const p=f||g;(p==null?void 0:p.chainNamespace)===W.state.activeChain?le.state.enableNetworkSwitch&&!le.state.allowUnsupportedChain&&((h=W.state.activeCaipNetwork)==null?void 0:h.name)===Te.UNSUPPORTED_NETWORK_NAME?W.showUnsupportedChainUI():this.setCaipNetwork(p):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),r9.isLowerCaseMatch(i,je.state.address)||this.syncAccountInfo(i,p==null?void 0:p.id,o),n?await this.syncBalance({address:i,chainId:p==null?void 0:p.id,chainNamespace:o}):await this.syncBalance({address:i,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const i=this.getCaipAddress(r),s=n||(i==null?void 0:i.split(":")[1]);if(!s)return;const o=`${r}:${s}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:s,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const i=r[0];this.setProfileName(i.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var i;const n=me.getConnectorId(e),r=on.getProviderId(e);if(r===Un.CONNECTOR_TYPE_ANNOUNCED||r===Un.CONNECTOR_TYPE_INJECTED){if(n){const s=this.getConnectors().find(o=>o.id===n);if(s){const{info:o,name:a,imageUrl:c}=s,l=c||this.getConnectorImage(s);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Un.CONNECTOR_TYPE_WALLET_CONNECT){const s=on.getProvider(e);s!=null&&s.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:(i=s.session.peer.metadata.icons)==null?void 0:i[0]},e)}else if(n&&n===Te.CONNECTOR_ID.COINBASE){const s=this.getConnectors().find(o=>o.id===Te.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(s)},e)}}async syncBalance(e){!qF.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var i;return r.id.toString()===((i=e.chainId)==null?void 0:i.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const i=this.getAdapter(r),s=W.getCaipNetworkByNamespace(r,n);if(i){const o=await i.getBalance({address:e,chainId:n,caipNetwork:s,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,i,s,o,a,c,l,u,d,h;const e=WPe.createLogger((f,...g)=>{f&&this.handleAlertError(f),console.error(...g)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(i=this.options)!=null&&i.metadata?(s=this.options)==null?void 0:s.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};le.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await zPe.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{xe.setUri(e)}),this.universalProvider.on("connect",xe.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),xe.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(i=>i.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(x5.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&ye.isCaipAddress(r[0])&&this.syncAccount(Wl.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ye.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){it.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(C0.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,i]=n??[],{message:s,alertErrorKey:o}=i??{};if(r&&s&&!this.reportedAlertErrors[r]){const a=C0.ALERT_ERRORS[o];a&&(_o.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var i;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&xe.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Ot.open({...e,data:{swap:e.arguments}})}return Ot.open(e)}async close(){await this.injectModalUi(),Ot.close()}setLoading(e,n){Ot.setLoading(e,n)}async disconnect(e){await xe.disconnect(e)}getSIWX(){return le.state.siwx}getError(){return""}getChainId(){var e;return(e=W.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){_o.open(C0.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await W.switchActiveNetwork(n)}getWalletProvider(){return W.state.activeChain?on.state.providers[W.state.activeChain]:null}getWalletProviderType(){return on.getProviderId(W.state.activeChain)}subscribeProviders(e){return on.subscribeProviders(e)}getThemeMode(){return Ar.state.themeMode}getThemeVariables(){return Ar.state.themeVariables}setThemeMode(e){Ar.setThemeMode(e),rK(Ar.state.themeMode)}setTermsConditionsUrl(e){le.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){le.setPrivacyPolicyUrl(e)}setThemeVariables(e){Ar.setThemeVariables(e),dOe(Ar.state.themeVariables)}subscribeTheme(e){return Ar.subscribe(e)}getWalletInfo(){return je.state.connectedWalletInfo}getAccount(e){var o;const n=me.getAuthConnector(e),r=W.getAccountData(e),i=W.state.activeChain,s=Re.getConnectedConnectorId(e||i);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:ye.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&s===Te.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Re.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||i],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const i=this.getAccount(n);i&&e(i)};n?W.subscribeChainProp("accountState",r,n):W.subscribe(r),me.subscribe(r)}subscribeNetwork(e){return W.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return je.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){je.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){W.subscribeKey("activeCaipNetwork",e)}getState(){return Yl.state}subscribeState(e){return Yl.subscribe(e)}showErrorMessage(e){En.showError(e)}showSuccessMessage(e){En.showSuccess(e)}getEvent(){return{...it.state}}subscribeEvents(e){return it.subscribe(e)}replace(e){we.replace(e)}redirect(e){we.push(e)}popTransactionStack(e){we.popTransactionStack(e)}isOpen(){return Ot.state.open}isTransactionStackEmpty(){return we.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){le.setFeatures(e)}updateRemoteFeatures(e){le.setRemoteFeatures(e)}updateOptions(e){const r={...le.state||{},...e};le.setOptions(r)}setConnectMethodsOrder(e){le.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){le.setWalletFeaturesOrder(e)}setCollapseWallets(e){le.setCollapseWallets(e)}setSocialsOrder(e){le.setSocialsOrder(e)}getConnectMethodsOrder(){return lh.getConnectOrderMethod(le.state.features,me.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(i=>i.id===r.id)||W.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(i=>i.id===n)&&W.removeNetwork(e,n)}}let aK=!1;class cK extends vOe{async open(e){me.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&xe.finalizeWcConnection()}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!aK&&ye.isClient()){if(await Promise.resolve().then(()=>CNe),await Promise.resolve().then(()=>LNe),!document.querySelector("w3m-modal")){const n=document.createElement("w3m-modal");!le.state.disableAppend&&!le.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",n)}aK=!0}}}const EOe="1.7.8";function COe(t){return new cK({...t,basic:!0,sdkVersion:`html-core-${EOe}`})}const _Oe=Object.freeze(Object.defineProperty({__proto__:null,AppKit:cK,createAppKit:COe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const SOe={attribute:!0,type:String,converter:C5,reflect:!1,hasChanged:c9},xOe=(t=SOe,e,n)=>{const{kind:r,metadata:i}=n;let s=globalThis.litPropertyMetadata.get(i);if(s===void 0&&globalThis.litPropertyMetadata.set(i,s=new Map),r==="setter"&&((t=Object.create(t)).wrapped=!0),s.set(n.name,t),r==="accessor"){const{name:o}=n;return{set(a){const c=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,c,t)},init(a){return a!==void 0&&this.C(o,void 0,t,a),a}}}if(r==="setter"){const{name:o}=n;return function(a){const c=this[o];e.call(this,a),this.requestUpdate(o,c,t)}}throw Error("Unsupported decorator location: "+r)};function Q(t){return(e,n)=>typeof n=="object"?xOe(t,e,n):((r,i,s)=>{const o=i.hasOwnProperty(s);return i.constructor.createProperty(s,r),o?Object.getOwnPropertyDescriptor(i,s):void 0})(t,e,n)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function $e(t){return Q({...t,state:!0,attribute:!1})}const AOe=qe`
  :host {
    display: flex;
    width: inherit;
    height: inherit;
  }
`;var ys=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let ri=class extends Be{render(){return this.style.cssText=`
      flex-direction: ${this.flexDirection};
      flex-wrap: ${this.flexWrap};
      flex-basis: ${this.flexBasis};
      flex-grow: ${this.flexGrow};
      flex-shrink: ${this.flexShrink};
      align-items: ${this.alignItems};
      justify-content: ${this.justifyContent};
      column-gap: ${this.columnGap&&`var(--wui-spacing-${this.columnGap})`};
      row-gap: ${this.rowGap&&`var(--wui-spacing-${this.rowGap})`};
      gap: ${this.gap&&`var(--wui-spacing-${this.gap})`};
      padding-top: ${this.padding&&ur.getSpacingStyles(this.padding,0)};
      padding-right: ${this.padding&&ur.getSpacingStyles(this.padding,1)};
      padding-bottom: ${this.padding&&ur.getSpacingStyles(this.padding,2)};
      padding-left: ${this.padding&&ur.getSpacingStyles(this.padding,3)};
      margin-top: ${this.margin&&ur.getSpacingStyles(this.margin,0)};
      margin-right: ${this.margin&&ur.getSpacingStyles(this.margin,1)};
      margin-bottom: ${this.margin&&ur.getSpacingStyles(this.margin,2)};
      margin-left: ${this.margin&&ur.getSpacingStyles(this.margin,3)};
    `,Z`<slot></slot>`}};ri.styles=[St,AOe],ys([Q()],ri.prototype,"flexDirection",void 0),ys([Q()],ri.prototype,"flexWrap",void 0),ys([Q()],ri.prototype,"flexBasis",void 0),ys([Q()],ri.prototype,"flexGrow",void 0),ys([Q()],ri.prototype,"flexShrink",void 0),ys([Q()],ri.prototype,"alignItems",void 0),ys([Q()],ri.prototype,"justifyContent",void 0),ys([Q()],ri.prototype,"columnGap",void 0),ys([Q()],ri.prototype,"rowGap",void 0),ys([Q()],ri.prototype,"gap",void 0),ys([Q()],ri.prototype,"padding",void 0),ys([Q()],ri.prototype,"margin",void 0),ri=ys([ke("wui-flex")],ri);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const He=t=>t??Sn;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const IOe=t=>t===null||typeof t!="object"&&typeof t!="function",$Oe=t=>t.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const lK={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},f9=t=>(...e)=>({_$litDirective$:t,values:e});let uK=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const my=(t,e)=>{var r;const n=t._$AN;if(n===void 0)return!1;for(const i of n)(r=i._$AO)==null||r.call(i,e,!1),my(i,e);return!0},I5=t=>{let e,n;do{if((e=t._$AM)===void 0)break;n=e._$AN,n.delete(t),t=e}while((n==null?void 0:n.size)===0)},dK=t=>{for(let e;e=t._$AM;t=e){let n=e._$AN;if(n===void 0)e._$AN=n=new Set;else if(n.has(t))break;n.add(t),TOe(e)}};function POe(t){this._$AN!==void 0?(I5(this),this._$AM=t,dK(this)):this._$AM=t}function OOe(t,e=!1,n=0){const r=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(e)if(Array.isArray(r))for(let s=n;s<r.length;s++)my(r[s],!1),I5(r[s]);else r!=null&&(my(r,!1),I5(r));else my(this,t)}const TOe=t=>{t.type==lK.CHILD&&(t._$AP??(t._$AP=OOe),t._$AQ??(t._$AQ=POe))};class hK extends uK{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,n,r){super._$AT(e,n,r),dK(this),this.isConnected=e._$AU}_$AO(e,n=!0){var r,i;e!==this.isConnected&&(this.isConnected=e,e?(r=this.reconnected)==null||r.call(this):(i=this.disconnected)==null||i.call(this)),n&&(my(this,e),I5(this))}setValue(e){if($Oe(this._$Ct))this._$Ct._$AI(e,this);else{const n=[...this._$Ct._$AH];n[this._$Ci]=e,this._$Ct._$AI(n,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class NOe{constructor(e){this.G=e}disconnect(){this.G=void 0}reconnect(e){this.G=e}deref(){return this.G}}class kOe{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){this.Y??(this.Y=new Promise(e=>this.Z=e))}resume(){var e;(e=this.Z)==null||e.call(this),this.Y=this.Z=void 0}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fK=t=>!IOe(t)&&typeof t.then=="function",pK=1073741823;class ROe extends hK{constructor(){super(...arguments),this._$Cwt=pK,this._$Cbt=[],this._$CK=new NOe(this),this._$CX=new kOe}render(...e){return e.find(n=>!fK(n))??Mc}update(e,n){const r=this._$Cbt;let i=r.length;this._$Cbt=n;const s=this._$CK,o=this._$CX;this.isConnected||this.disconnected();for(let a=0;a<n.length&&!(a>this._$Cwt);a++){const c=n[a];if(!fK(c))return this._$Cwt=a,c;a<i&&c===r[a]||(this._$Cwt=pK,i=0,Promise.resolve(c).then(async l=>{for(;o.get();)await o.get();const u=s.deref();if(u!==void 0){const d=u._$Cbt.indexOf(c);d>-1&&d<u._$Cwt&&(u._$Cwt=d,u.setValue(l))}}))}return Mc}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}}const MOe=f9(ROe);class BOe{constructor(){this.cache=new Map}set(e,n){this.cache.set(e,n)}get(e){return this.cache.get(e)}has(e){return this.cache.has(e)}delete(e){this.cache.delete(e)}clear(){this.cache.clear()}}const p9=new BOe,DOe=qe`
  :host {
    display: flex;
    aspect-ratio: var(--local-aspect-ratio);
    color: var(--local-color);
    width: var(--local-width);
  }

  svg {
    width: inherit;
    height: inherit;
    object-fit: contain;
    object-position: center;
  }

  .fallback {
    width: var(--local-width);
    height: var(--local-height);
  }
`;var yy=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const gK={add:async()=>(await Promise.resolve().then(()=>UNe)).addSvg,allWallets:async()=>(await Promise.resolve().then(()=>zNe)).allWalletsSvg,arrowBottomCircle:async()=>(await Promise.resolve().then(()=>HNe)).arrowBottomCircleSvg,appStore:async()=>(await Promise.resolve().then(()=>KNe)).appStoreSvg,apple:async()=>(await Promise.resolve().then(()=>GNe)).appleSvg,arrowBottom:async()=>(await Promise.resolve().then(()=>YNe)).arrowBottomSvg,arrowLeft:async()=>(await Promise.resolve().then(()=>QNe)).arrowLeftSvg,arrowRight:async()=>(await Promise.resolve().then(()=>eke)).arrowRightSvg,arrowTop:async()=>(await Promise.resolve().then(()=>nke)).arrowTopSvg,bank:async()=>(await Promise.resolve().then(()=>ike)).bankSvg,browser:async()=>(await Promise.resolve().then(()=>oke)).browserSvg,card:async()=>(await Promise.resolve().then(()=>cke)).cardSvg,checkmark:async()=>(await Promise.resolve().then(()=>uke)).checkmarkSvg,checkmarkBold:async()=>(await Promise.resolve().then(()=>hke)).checkmarkBoldSvg,chevronBottom:async()=>(await Promise.resolve().then(()=>pke)).chevronBottomSvg,chevronLeft:async()=>(await Promise.resolve().then(()=>mke)).chevronLeftSvg,chevronRight:async()=>(await Promise.resolve().then(()=>wke)).chevronRightSvg,chevronTop:async()=>(await Promise.resolve().then(()=>vke)).chevronTopSvg,chromeStore:async()=>(await Promise.resolve().then(()=>Cke)).chromeStoreSvg,clock:async()=>(await Promise.resolve().then(()=>Ske)).clockSvg,close:async()=>(await Promise.resolve().then(()=>Ake)).closeSvg,compass:async()=>(await Promise.resolve().then(()=>$ke)).compassSvg,coinPlaceholder:async()=>(await Promise.resolve().then(()=>Oke)).coinPlaceholderSvg,copy:async()=>(await Promise.resolve().then(()=>Nke)).copySvg,cursor:async()=>(await Promise.resolve().then(()=>Rke)).cursorSvg,cursorTransparent:async()=>(await Promise.resolve().then(()=>Bke)).cursorTransparentSvg,desktop:async()=>(await Promise.resolve().then(()=>Lke)).desktopSvg,disconnect:async()=>(await Promise.resolve().then(()=>Uke)).disconnectSvg,discord:async()=>(await Promise.resolve().then(()=>zke)).discordSvg,etherscan:async()=>(await Promise.resolve().then(()=>Hke)).etherscanSvg,extension:async()=>(await Promise.resolve().then(()=>Kke)).extensionSvg,externalLink:async()=>(await Promise.resolve().then(()=>Gke)).externalLinkSvg,facebook:async()=>(await Promise.resolve().then(()=>Yke)).facebookSvg,farcaster:async()=>(await Promise.resolve().then(()=>Qke)).farcasterSvg,filters:async()=>(await Promise.resolve().then(()=>eRe)).filtersSvg,github:async()=>(await Promise.resolve().then(()=>nRe)).githubSvg,google:async()=>(await Promise.resolve().then(()=>iRe)).googleSvg,helpCircle:async()=>(await Promise.resolve().then(()=>oRe)).helpCircleSvg,image:async()=>(await Promise.resolve().then(()=>cRe)).imageSvg,id:async()=>(await Promise.resolve().then(()=>uRe)).idSvg,infoCircle:async()=>(await Promise.resolve().then(()=>hRe)).infoCircleSvg,lightbulb:async()=>(await Promise.resolve().then(()=>pRe)).lightbulbSvg,mail:async()=>(await Promise.resolve().then(()=>mRe)).mailSvg,mobile:async()=>(await Promise.resolve().then(()=>wRe)).mobileSvg,more:async()=>(await Promise.resolve().then(()=>vRe)).moreSvg,networkPlaceholder:async()=>(await Promise.resolve().then(()=>CRe)).networkPlaceholderSvg,nftPlaceholder:async()=>(await Promise.resolve().then(()=>SRe)).nftPlaceholderSvg,off:async()=>(await Promise.resolve().then(()=>ARe)).offSvg,playStore:async()=>(await Promise.resolve().then(()=>$Re)).playStoreSvg,plus:async()=>(await Promise.resolve().then(()=>ORe)).plusSvg,qrCode:async()=>(await Promise.resolve().then(()=>NRe)).qrCodeIcon,recycleHorizontal:async()=>(await Promise.resolve().then(()=>RRe)).recycleHorizontalSvg,refresh:async()=>(await Promise.resolve().then(()=>BRe)).refreshSvg,search:async()=>(await Promise.resolve().then(()=>LRe)).searchSvg,send:async()=>(await Promise.resolve().then(()=>URe)).sendSvg,swapHorizontal:async()=>(await Promise.resolve().then(()=>zRe)).swapHorizontalSvg,swapHorizontalMedium:async()=>(await Promise.resolve().then(()=>HRe)).swapHorizontalMediumSvg,swapHorizontalBold:async()=>(await Promise.resolve().then(()=>KRe)).swapHorizontalBoldSvg,swapHorizontalRoundedBold:async()=>(await Promise.resolve().then(()=>GRe)).swapHorizontalRoundedBoldSvg,swapVertical:async()=>(await Promise.resolve().then(()=>YRe)).swapVerticalSvg,telegram:async()=>(await Promise.resolve().then(()=>QRe)).telegramSvg,threeDots:async()=>(await Promise.resolve().then(()=>eMe)).threeDotsSvg,twitch:async()=>(await Promise.resolve().then(()=>nMe)).twitchSvg,twitter:async()=>(await Promise.resolve().then(()=>tV)).xSvg,twitterIcon:async()=>(await Promise.resolve().then(()=>sMe)).twitterIconSvg,verify:async()=>(await Promise.resolve().then(()=>aMe)).verifySvg,verifyFilled:async()=>(await Promise.resolve().then(()=>lMe)).verifyFilledSvg,wallet:async()=>(await Promise.resolve().then(()=>dMe)).walletSvg,walletConnect:async()=>(await Promise.resolve().then(()=>X9)).walletConnectSvg,walletConnectLightBrown:async()=>(await Promise.resolve().then(()=>X9)).walletConnectLightBrownSvg,walletConnectBrown:async()=>(await Promise.resolve().then(()=>X9)).walletConnectBrownSvg,walletPlaceholder:async()=>(await Promise.resolve().then(()=>mMe)).walletPlaceholderSvg,warningCircle:async()=>(await Promise.resolve().then(()=>wMe)).warningCircleSvg,x:async()=>(await Promise.resolve().then(()=>tV)).xSvg,info:async()=>(await Promise.resolve().then(()=>vMe)).infoSvg,exclamationTriangle:async()=>(await Promise.resolve().then(()=>CMe)).exclamationTriangleSvg,reown:async()=>(await Promise.resolve().then(()=>SMe)).reownSvg};async function LOe(t){if(p9.has(t))return p9.get(t);const n=(gK[t]??gK.copy)();return p9.set(t,n),n}let ph=class extends Be{constructor(){super(...arguments),this.size="md",this.name="copy",this.color="fg-300",this.aspectRatio="1 / 1"}render(){return this.style.cssText=`
      --local-color: ${`var(--wui-color-${this.color});`}
      --local-width: ${`var(--wui-icon-size-${this.size});`}
      --local-aspect-ratio: ${this.aspectRatio}
    `,Z`${MOe(LOe(this.name),Z`<div class="fallback"></div>`)}`}};ph.styles=[St,fy,DOe],yy([Q()],ph.prototype,"size",void 0),yy([Q()],ph.prototype,"name",void 0),yy([Q()],ph.prototype,"color",void 0),yy([Q()],ph.prototype,"aspectRatio",void 0),ph=yy([ke("wui-icon")],ph);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const mK=f9(class extends uK{constructor(t){var e;if(super(t),t.type!==lK.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,i;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!((r=this.nt)!=null&&r.has(s))&&this.st.add(s);return this.render(e)}const n=t.element.classList;for(const s of this.st)s in e||(n.remove(s),this.st.delete(s));for(const s in e){const o=!!e[s];o===this.st.has(s)||(i=this.nt)!=null&&i.has(s)||(o?(n.add(s),this.st.add(s)):(n.remove(s),this.st.delete(s)))}return Mc}}),jOe=qe`
  :host {
    display: inline-flex !important;
  }

  slot {
    width: 100%;
    display: inline-block;
    font-style: normal;
    font-family: var(--wui-font-family);
    font-feature-settings:
      'tnum' on,
      'lnum' on,
      'case' on;
    line-height: 130%;
    font-weight: var(--wui-font-weight-regular);
    overflow: inherit;
    text-overflow: inherit;
    text-align: var(--local-align);
    color: var(--local-color);
  }

  .wui-line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }

  .wui-line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  .wui-font-medium-400 {
    font-size: var(--wui-font-size-medium);
    font-weight: var(--wui-font-weight-light);
    letter-spacing: var(--wui-letter-spacing-medium);
  }

  .wui-font-medium-600 {
    font-size: var(--wui-font-size-medium);
    letter-spacing: var(--wui-letter-spacing-medium);
  }

  .wui-font-title-600 {
    font-size: var(--wui-font-size-title);
    letter-spacing: var(--wui-letter-spacing-title);
  }

  .wui-font-title-6-600 {
    font-size: var(--wui-font-size-title-6);
    letter-spacing: var(--wui-letter-spacing-title-6);
  }

  .wui-font-mini-700 {
    font-size: var(--wui-font-size-mini);
    letter-spacing: var(--wui-letter-spacing-mini);
    text-transform: uppercase;
  }

  .wui-font-large-500,
  .wui-font-large-600,
  .wui-font-large-700 {
    font-size: var(--wui-font-size-large);
    letter-spacing: var(--wui-letter-spacing-large);
  }

  .wui-font-2xl-500,
  .wui-font-2xl-600,
  .wui-font-2xl-700 {
    font-size: var(--wui-font-size-2xl);
    letter-spacing: var(--wui-letter-spacing-2xl);
  }

  .wui-font-paragraph-400,
  .wui-font-paragraph-500,
  .wui-font-paragraph-600,
  .wui-font-paragraph-700 {
    font-size: var(--wui-font-size-paragraph);
    letter-spacing: var(--wui-letter-spacing-paragraph);
  }

  .wui-font-small-400,
  .wui-font-small-500,
  .wui-font-small-600 {
    font-size: var(--wui-font-size-small);
    letter-spacing: var(--wui-letter-spacing-small);
  }

  .wui-font-tiny-400,
  .wui-font-tiny-500,
  .wui-font-tiny-600 {
    font-size: var(--wui-font-size-tiny);
    letter-spacing: var(--wui-letter-spacing-tiny);
  }

  .wui-font-micro-700,
  .wui-font-micro-600 {
    font-size: var(--wui-font-size-micro);
    letter-spacing: var(--wui-letter-spacing-micro);
    text-transform: uppercase;
  }

  .wui-font-tiny-400,
  .wui-font-small-400,
  .wui-font-medium-400,
  .wui-font-paragraph-400 {
    font-weight: var(--wui-font-weight-light);
  }

  .wui-font-large-700,
  .wui-font-paragraph-700,
  .wui-font-micro-700,
  .wui-font-mini-700 {
    font-weight: var(--wui-font-weight-bold);
  }

  .wui-font-medium-600,
  .wui-font-medium-title-600,
  .wui-font-title-6-600,
  .wui-font-large-600,
  .wui-font-paragraph-600,
  .wui-font-small-600,
  .wui-font-tiny-600,
  .wui-font-micro-600 {
    font-weight: var(--wui-font-weight-medium);
  }

  :host([disabled]) {
    opacity: 0.4;
  }
`;var wy=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let gh=class extends Be{constructor(){super(...arguments),this.variant="paragraph-500",this.color="fg-300",this.align="left",this.lineClamp=void 0}render(){const e={[`wui-font-${this.variant}`]:!0,[`wui-color-${this.color}`]:!0,[`wui-line-clamp-${this.lineClamp}`]:!!this.lineClamp};return this.style.cssText=`
      --local-align: ${this.align};
      --local-color: var(--wui-color-${this.color});
    `,Z`<slot class=${mK(e)}></slot>`}};gh.styles=[St,jOe],wy([Q()],gh.prototype,"variant",void 0),wy([Q()],gh.prototype,"color",void 0),wy([Q()],gh.prototype,"align",void 0),wy([Q()],gh.prototype,"lineClamp",void 0),gh=wy([ke("wui-text")],gh);const UOe=qe`
  :host {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden;
    background-color: var(--wui-color-gray-glass-020);
    border-radius: var(--local-border-radius);
    border: var(--local-border);
    box-sizing: content-box;
    width: var(--local-size);
    height: var(--local-size);
    min-height: var(--local-size);
    min-width: var(--local-size);
  }

  @supports (background: color-mix(in srgb, white 50%, black)) {
    :host {
      background-color: color-mix(in srgb, var(--local-bg-value) var(--local-bg-mix), transparent);
    }
  }
`;var Bc=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let To=class extends Be{constructor(){super(...arguments),this.size="md",this.backgroundColor="accent-100",this.iconColor="accent-100",this.background="transparent",this.border=!1,this.borderColor="wui-color-bg-125",this.icon="copy"}render(){const e=this.iconSize||this.size,n=this.size==="lg",r=this.size==="xl",i=n?"12%":"16%",s=n?"xxs":r?"s":"3xl",o=this.background==="gray",a=this.background==="opaque",c=this.backgroundColor==="accent-100"&&a||this.backgroundColor==="success-100"&&a||this.backgroundColor==="error-100"&&a||this.backgroundColor==="inverse-100"&&a;let l=`var(--wui-color-${this.backgroundColor})`;return c?l=`var(--wui-icon-box-bg-${this.backgroundColor})`:o&&(l=`var(--wui-color-gray-${this.backgroundColor})`),this.style.cssText=`
       --local-bg-value: ${l};
       --local-bg-mix: ${c||o?"100%":i};
       --local-border-radius: var(--wui-border-radius-${s});
       --local-size: var(--wui-icon-box-size-${this.size});
       --local-border: ${this.borderColor==="wui-color-bg-125"?"2px":"1px"} solid ${this.border?`var(--${this.borderColor})`:"transparent"}
   `,Z` <wui-icon color=${this.iconColor} size=${e} name=${this.icon}></wui-icon> `}};To.styles=[St,Nr,UOe],Bc([Q()],To.prototype,"size",void 0),Bc([Q()],To.prototype,"backgroundColor",void 0),Bc([Q()],To.prototype,"iconColor",void 0),Bc([Q()],To.prototype,"iconSize",void 0),Bc([Q()],To.prototype,"background",void 0),Bc([Q({type:Boolean})],To.prototype,"border",void 0),Bc([Q()],To.prototype,"borderColor",void 0),Bc([Q()],To.prototype,"icon",void 0),To=Bc([ke("wui-icon-box")],To);const FOe=qe`
  :host {
    display: block;
    width: var(--local-width);
    height: var(--local-height);
  }

  img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center center;
    border-radius: inherit;
  }
`;var $5=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let I0=class extends Be{constructor(){super(...arguments),this.src="./path/to/image.jpg",this.alt="Image",this.size=void 0}render(){return this.style.cssText=`
      --local-width: ${this.size?`var(--wui-icon-size-${this.size});`:"100%"};
      --local-height: ${this.size?`var(--wui-icon-size-${this.size});`:"100%"};
      `,Z`<img src=${this.src} alt=${this.alt} @error=${this.handleImageError} />`}handleImageError(){this.dispatchEvent(new CustomEvent("onLoadError",{bubbles:!0,composed:!0}))}};I0.styles=[St,fy,FOe],$5([Q()],I0.prototype,"src",void 0),$5([Q()],I0.prototype,"alt",void 0),$5([Q()],I0.prototype,"size",void 0),I0=$5([ke("wui-image")],I0);const zOe=qe`
  :host {
    position: relative;
    background-color: var(--wui-color-gray-glass-002);
    display: flex;
    justify-content: center;
    align-items: center;
    width: var(--local-size);
    height: var(--local-size);
    border-radius: inherit;
    border-radius: var(--local-border-radius);
  }

  :host > wui-flex {
    overflow: hidden;
    border-radius: inherit;
    border-radius: var(--local-border-radius);
  }

  :host::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
    border: 1px solid var(--wui-color-gray-glass-010);
    pointer-events: none;
  }

  :host([name='Extension'])::after {
    border: 1px solid var(--wui-color-accent-glass-010);
  }

  :host([data-wallet-icon='allWallets']) {
    background-color: var(--wui-all-wallets-bg-100);
  }

  :host([data-wallet-icon='allWallets'])::after {
    border: 1px solid var(--wui-color-accent-glass-010);
  }

  wui-icon[data-parent-size='inherit'] {
    width: 75%;
    height: 75%;
    align-items: center;
  }

  wui-icon[data-parent-size='sm'] {
    width: 18px;
    height: 18px;
  }

  wui-icon[data-parent-size='md'] {
    width: 24px;
    height: 24px;
  }

  wui-icon[data-parent-size='lg'] {
    width: 42px;
    height: 42px;
  }

  wui-icon[data-parent-size='full'] {
    width: 100%;
    height: 100%;
  }

  :host > wui-icon-box {
    position: absolute;
    overflow: hidden;
    right: -1px;
    bottom: -2px;
    z-index: 1;
    border: 2px solid var(--wui-color-bg-150, #1e1f1f);
    padding: 1px;
  }
`;var mh=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Dc=class extends Be{constructor(){super(...arguments),this.size="md",this.name="",this.installed=!1,this.badgeSize="xs"}render(){let e="xxs";return this.size==="lg"?e="m":this.size==="md"?e="xs":e="xxs",this.style.cssText=`
       --local-border-radius: var(--wui-border-radius-${e});
       --local-size: var(--wui-wallet-image-size-${this.size});
   `,this.walletIcon&&(this.dataset.walletIcon=this.walletIcon),Z`
      <wui-flex justifyContent="center" alignItems="center"> ${this.templateVisual()} </wui-flex>
    `}templateVisual(){return this.imageSrc?Z`<wui-image src=${this.imageSrc} alt=${this.name}></wui-image>`:this.walletIcon?Z`<wui-icon
        data-parent-size="md"
        size="md"
        color="inherit"
        name=${this.walletIcon}
      ></wui-icon>`:Z`<wui-icon
      data-parent-size=${this.size}
      size="inherit"
      color="inherit"
      name="walletPlaceholder"
    ></wui-icon>`}};Dc.styles=[Nr,St,zOe],mh([Q()],Dc.prototype,"size",void 0),mh([Q()],Dc.prototype,"name",void 0),mh([Q()],Dc.prototype,"imageSrc",void 0),mh([Q()],Dc.prototype,"walletIcon",void 0),mh([Q({type:Boolean})],Dc.prototype,"installed",void 0),mh([Q()],Dc.prototype,"badgeSize",void 0),Dc=mh([ke("wui-wallet-image")],Dc);const qOe=qe`
  :host {
    position: relative;
    border-radius: var(--wui-border-radius-xxs);
    width: 40px;
    height: 40px;
    overflow: hidden;
    background: var(--wui-color-gray-glass-002);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--wui-spacing-4xs);
    padding: 3.75px !important;
  }

  :host::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
    border: 1px solid var(--wui-color-gray-glass-010);
    pointer-events: none;
  }

  :host > wui-wallet-image {
    width: 14px;
    height: 14px;
    border-radius: var(--wui-border-radius-5xs);
  }

  :host > wui-flex {
    padding: 2px;
    position: fixed;
    overflow: hidden;
    left: 34px;
    bottom: 8px;
    background: var(--dark-background-150, #1e1f1f);
    border-radius: 50%;
    z-index: 2;
    display: flex;
  }
`;var yK=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const g9=4;let P5=class extends Be{constructor(){super(...arguments),this.walletImages=[]}render(){const e=this.walletImages.length<g9;return Z`${this.walletImages.slice(0,g9).map(({src:n,walletName:r})=>Z`
            <wui-wallet-image
              size="inherit"
              imageSrc=${n}
              name=${He(r)}
            ></wui-wallet-image>
          `)}
      ${e?[...Array(g9-this.walletImages.length)].map(()=>Z` <wui-wallet-image size="inherit" name=""></wui-wallet-image>`):null}
      <wui-flex>
        <wui-icon-box
          size="xxs"
          iconSize="xxs"
          iconcolor="success-100"
          backgroundcolor="success-100"
          icon="checkmark"
          background="opaque"
        ></wui-icon-box>
      </wui-flex>`}};P5.styles=[St,qOe],yK([Q({type:Array})],P5.prototype,"walletImages",void 0),P5=yK([ke("wui-all-wallets-image")],P5);const HOe=qe`
  :host {
    display: flex;
    justify-content: center;
    align-items: center;
    height: var(--wui-spacing-m);
    padding: 0 var(--wui-spacing-3xs) !important;
    border-radius: var(--wui-border-radius-5xs);
    transition:
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius, background-color;
  }

  :host > wui-text {
    transform: translateY(5%);
  }

  :host([data-variant='main']) {
    background-color: var(--wui-color-accent-glass-015);
    color: var(--wui-color-accent-100);
  }

  :host([data-variant='shade']) {
    background-color: var(--wui-color-gray-glass-010);
    color: var(--wui-color-fg-200);
  }

  :host([data-variant='success']) {
    background-color: var(--wui-icon-box-bg-success-100);
    color: var(--wui-color-success-100);
  }

  :host([data-variant='error']) {
    background-color: var(--wui-icon-box-bg-error-100);
    color: var(--wui-color-error-100);
  }

  :host([data-size='lg']) {
    padding: 11px 5px !important;
  }

  :host([data-size='lg']) > wui-text {
    transform: translateY(2%);
  }
`;var m9=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let by=class extends Be{constructor(){super(...arguments),this.variant="main",this.size="lg"}render(){this.dataset.variant=this.variant,this.dataset.size=this.size;const e=this.size==="md"?"mini-700":"micro-700";return Z`
      <wui-text data-variant=${this.variant} variant=${e} color="inherit">
        <slot></slot>
      </wui-text>
    `}};by.styles=[St,HOe],m9([Q()],by.prototype,"variant",void 0),m9([Q()],by.prototype,"size",void 0),by=m9([ke("wui-tag")],by);const WOe=qe`
  button {
    column-gap: var(--wui-spacing-s);
    padding: 7px var(--wui-spacing-l) 7px var(--wui-spacing-xs);
    width: 100%;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
    color: var(--wui-color-fg-100);
  }

  button > wui-text:nth-child(2) {
    display: flex;
    flex: 1;
  }

  button:disabled {
    background-color: var(--wui-color-gray-glass-015);
    color: var(--wui-color-gray-glass-015);
  }

  button:disabled > wui-tag {
    background-color: var(--wui-color-gray-glass-010);
    color: var(--wui-color-fg-300);
  }

  wui-icon {
    color: var(--wui-color-fg-200) !important;
  }
`;var ki=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Fr=class extends Be{constructor(){super(...arguments),this.walletImages=[],this.imageSrc="",this.name="",this.tabIdx=void 0,this.installed=!1,this.disabled=!1,this.showAllWallets=!1,this.loading=!1,this.loadingSpinnerColor="accent-100"}render(){return Z`
      <button ?disabled=${this.disabled} tabindex=${He(this.tabIdx)}>
        ${this.templateAllWallets()} ${this.templateWalletImage()}
        <wui-text variant="paragraph-500" color="inherit">${this.name}</wui-text>
        ${this.templateStatus()}
      </button>
    `}templateAllWallets(){return this.showAllWallets&&this.imageSrc?Z` <wui-all-wallets-image .imageeSrc=${this.imageSrc}> </wui-all-wallets-image> `:this.showAllWallets&&this.walletIcon?Z` <wui-wallet-image .walletIcon=${this.walletIcon} size="sm"> </wui-wallet-image> `:null}templateWalletImage(){return!this.showAllWallets&&this.imageSrc?Z`<wui-wallet-image
        size="sm"
        imageSrc=${this.imageSrc}
        name=${this.name}
        .installed=${this.installed}
      ></wui-wallet-image>`:!this.showAllWallets&&!this.imageSrc?Z`<wui-wallet-image size="sm" name=${this.name}></wui-wallet-image>`:null}templateStatus(){return this.loading?Z`<wui-loading-spinner
        size="lg"
        color=${this.loadingSpinnerColor}
      ></wui-loading-spinner>`:this.tagLabel&&this.tagVariant?Z`<wui-tag variant=${this.tagVariant}>${this.tagLabel}</wui-tag>`:this.icon?Z`<wui-icon color="inherit" size="sm" name=${this.icon}></wui-icon>`:null}};Fr.styles=[St,Nr,WOe],ki([Q({type:Array})],Fr.prototype,"walletImages",void 0),ki([Q()],Fr.prototype,"imageSrc",void 0),ki([Q()],Fr.prototype,"name",void 0),ki([Q()],Fr.prototype,"tagLabel",void 0),ki([Q()],Fr.prototype,"tagVariant",void 0),ki([Q()],Fr.prototype,"icon",void 0),ki([Q()],Fr.prototype,"walletIcon",void 0),ki([Q()],Fr.prototype,"tabIdx",void 0),ki([Q({type:Boolean})],Fr.prototype,"installed",void 0),ki([Q({type:Boolean})],Fr.prototype,"disabled",void 0),ki([Q({type:Boolean})],Fr.prototype,"showAllWallets",void 0),ki([Q({type:Boolean})],Fr.prototype,"loading",void 0),ki([Q({type:String})],Fr.prototype,"loadingSpinnerColor",void 0),Fr=ki([ke("wui-list-wallet")],Fr);var $0=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let yh=class extends Be{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=me.state.connectors,this.count=be.state.count,this.filteredCount=be.state.filteredWallets.length,this.isFetchingRecommendedWallets=be.state.isFetchingRecommendedWallets,this.unsubscribe.push(me.subscribeKey("connectors",e=>this.connectors=e),be.subscribeKey("count",e=>this.count=e),be.subscribeKey("filteredWallets",e=>this.filteredCount=e.length),be.subscribeKey("isFetchingRecommendedWallets",e=>this.isFetchingRecommendedWallets=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.connectors.find(c=>c.id==="walletConnect"),{allWallets:n}=le.state;if(!e||n==="HIDE"||n==="ONLY_MOBILE"&&!ye.isMobile())return null;const r=be.state.featured.length,i=this.count+r,s=i<10?i:Math.floor(i/10)*10,o=this.filteredCount>0?this.filteredCount:s;let a=`${o}`;return this.filteredCount>0?a=`${this.filteredCount}`:o<i&&(a=`${o}+`),Z`
      <wui-list-wallet
        name="All Wallets"
        walletIcon="allWallets"
        showAllWallets
        @click=${this.onAllWallets.bind(this)}
        tagLabel=${a}
        tagVariant="shade"
        data-testid="all-wallets"
        tabIdx=${He(this.tabIdx)}
        .loading=${this.isFetchingRecommendedWallets}
        loadingSpinnerColor=${this.isFetchingRecommendedWallets?"fg-300":"accent-100"}
      ></wui-list-wallet>
    `}onAllWallets(){it.sendEvent({type:"track",event:"CLICK_ALL_WALLETS"}),we.push("AllWallets")}};$0([Q()],yh.prototype,"tabIdx",void 0),$0([$e()],yh.prototype,"connectors",void 0),$0([$e()],yh.prototype,"count",void 0),$0([$e()],yh.prototype,"filteredCount",void 0),$0([$e()],yh.prototype,"isFetchingRecommendedWallets",void 0),yh=$0([ke("w3m-all-wallets-widget")],yh);var y9=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let O5=class extends Be{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=me.state.connectors,this.unsubscribe.push(me.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.connectors.filter(n=>n.type==="ANNOUNCED");return e!=null&&e.length?Z`
      <wui-flex flexDirection="column" gap="xs">
        ${e.filter(Rc.showConnector).map(n=>Z`
              <wui-list-wallet
                imageSrc=${He(Dn.getConnectorImage(n))}
                name=${n.name??"Unknown"}
                @click=${()=>this.onConnector(n)}
                tagVariant="success"
                tagLabel="installed"
                data-testid=${`wallet-selector-${n.id}`}
                .installed=${!0}
                tabIdx=${He(this.tabIdx)}
              >
              </wui-list-wallet>
            `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){e.id==="walletConnect"?ye.isMobile()?we.push("AllWallets"):we.push("ConnectingWalletConnect"):we.push("ConnectingExternal",{connector:e})}};y9([Q()],O5.prototype,"tabIdx",void 0),y9([$e()],O5.prototype,"connectors",void 0),O5=y9([ke("w3m-connect-announced-widget")],O5);var T5=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let vy=class extends Be{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=me.state.connectors,this.loading=!1,this.unsubscribe.push(me.subscribeKey("connectors",e=>this.connectors=e)),ye.isTelegram()&&ye.isIos()&&(this.loading=!xe.state.wcUri,this.unsubscribe.push(xe.subscribeKey("wcUri",e=>this.loading=!e)))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const{customWallets:e}=le.state;if(!(e!=null&&e.length))return this.style.cssText="display: none",null;const n=this.filterOutDuplicateWallets(e);return Z`<wui-flex flexDirection="column" gap="xs">
      ${n.map(r=>Z`
          <wui-list-wallet
            imageSrc=${He(Dn.getWalletImage(r))}
            name=${r.name??"Unknown"}
            @click=${()=>this.onConnectWallet(r)}
            data-testid=${`wallet-selector-${r.id}`}
            tabIdx=${He(this.tabIdx)}
            ?loading=${this.loading}
          >
          </wui-list-wallet>
        `)}
    </wui-flex>`}filterOutDuplicateWallets(e){const n=Re.getRecentWallets(),r=this.connectors.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),i=n.map(a=>a.rdns).filter(Boolean),s=r.concat(i);if(s.includes("io.metamask.mobile")&&ye.isMobile()){const a=s.indexOf("io.metamask.mobile");s[a]="io.metamask"}return e.filter(a=>!s.includes(String(a==null?void 0:a.rdns)))}onConnectWallet(e){this.loading||we.push("ConnectingWalletConnect",{wallet:e})}};T5([Q()],vy.prototype,"tabIdx",void 0),T5([$e()],vy.prototype,"connectors",void 0),T5([$e()],vy.prototype,"loading",void 0),vy=T5([ke("w3m-connect-custom-widget")],vy);var w9=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let N5=class extends Be{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=me.state.connectors,this.unsubscribe.push(me.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const r=this.connectors.filter(i=>i.type==="EXTERNAL").filter(Rc.showConnector).filter(i=>i.id!==Te.CONNECTOR_ID.COINBASE_SDK);return r!=null&&r.length?Z`
      <wui-flex flexDirection="column" gap="xs">
        ${r.map(i=>Z`
            <wui-list-wallet
              imageSrc=${He(Dn.getConnectorImage(i))}
              .installed=${!0}
              name=${i.name??"Unknown"}
              data-testid=${`wallet-selector-external-${i.id}`}
              @click=${()=>this.onConnector(i)}
              tabIdx=${He(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){we.push("ConnectingExternal",{connector:e})}};w9([Q()],N5.prototype,"tabIdx",void 0),w9([$e()],N5.prototype,"connectors",void 0),N5=w9([ke("w3m-connect-external-widget")],N5);var b9=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let k5=class extends Be{constructor(){super(...arguments),this.tabIdx=void 0,this.wallets=[]}render(){return this.wallets.length?Z`
      <wui-flex flexDirection="column" gap="xs">
        ${this.wallets.map(e=>Z`
            <wui-list-wallet
              data-testid=${`wallet-selector-featured-${e.id}`}
              imageSrc=${He(Dn.getWalletImage(e))}
              name=${e.name??"Unknown"}
              @click=${()=>this.onConnectWallet(e)}
              tabIdx=${He(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnectWallet(e){me.selectWalletConnector(e)}};b9([Q()],k5.prototype,"tabIdx",void 0),b9([Q()],k5.prototype,"wallets",void 0),k5=b9([ke("w3m-connect-featured-widget")],k5);var v9=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let R5=class extends Be{constructor(){super(...arguments),this.tabIdx=void 0,this.connectors=[]}render(){const e=this.connectors.filter(Rc.showConnector);return e.length===0?(this.style.cssText="display: none",null):Z`
      <wui-flex flexDirection="column" gap="xs">
        ${e.map(n=>Z`
            <wui-list-wallet
              imageSrc=${He(Dn.getConnectorImage(n))}
              .installed=${!0}
              name=${n.name??"Unknown"}
              tagVariant="success"
              tagLabel="installed"
              data-testid=${`wallet-selector-${n.id}`}
              @click=${()=>this.onConnector(n)}
              tabIdx=${He(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `}onConnector(e){me.setActiveConnector(e),we.push("ConnectingExternal",{connector:e})}};v9([Q()],R5.prototype,"tabIdx",void 0),v9([Q()],R5.prototype,"connectors",void 0),R5=v9([ke("w3m-connect-injected-widget")],R5);var E9=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let M5=class extends Be{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=me.state.connectors,this.unsubscribe.push(me.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.connectors.filter(n=>n.type==="MULTI_CHAIN"&&n.name!=="WalletConnect");return e!=null&&e.length?Z`
      <wui-flex flexDirection="column" gap="xs">
        ${e.map(n=>Z`
            <wui-list-wallet
              imageSrc=${He(Dn.getConnectorImage(n))}
              .installed=${!0}
              name=${n.name??"Unknown"}
              tagVariant="shade"
              tagLabel="multichain"
              data-testid=${`wallet-selector-${n.id}`}
              @click=${()=>this.onConnector(n)}
              tabIdx=${He(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){me.setActiveConnector(e),we.push("ConnectingMultiChain")}};E9([Q()],M5.prototype,"tabIdx",void 0),E9([$e()],M5.prototype,"connectors",void 0),M5=E9([ke("w3m-connect-multi-chain-widget")],M5);var B5=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Ey=class extends Be{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=me.state.connectors,this.loading=!1,this.unsubscribe.push(me.subscribeKey("connectors",e=>this.connectors=e)),ye.isTelegram()&&ye.isIos()&&(this.loading=!xe.state.wcUri,this.unsubscribe.push(xe.subscribeKey("wcUri",e=>this.loading=!e)))}render(){const n=Re.getRecentWallets().filter(r=>!lh.isExcluded(r)).filter(r=>!this.hasWalletConnector(r)).filter(r=>this.isWalletCompatibleWithCurrentChain(r));return n.length?Z`
      <wui-flex flexDirection="column" gap="xs">
        ${n.map(r=>Z`
            <wui-list-wallet
              imageSrc=${He(Dn.getWalletImage(r))}
              name=${r.name??"Unknown"}
              @click=${()=>this.onConnectWallet(r)}
              tagLabel="recent"
              tagVariant="shade"
              tabIdx=${He(this.tabIdx)}
              ?loading=${this.loading}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnectWallet(e){this.loading||me.selectWalletConnector(e)}hasWalletConnector(e){return this.connectors.some(n=>n.id===e.id||n.name===e.name)}isWalletCompatibleWithCurrentChain(e){const n=W.state.activeChain;return n&&e.chains?e.chains.some(r=>{const i=r.split(":")[0];return n===i}):!0}};B5([Q()],Ey.prototype,"tabIdx",void 0),B5([$e()],Ey.prototype,"connectors",void 0),B5([$e()],Ey.prototype,"loading",void 0),Ey=B5([ke("w3m-connect-recent-widget")],Ey);var D5=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Cy=class extends Be{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.wallets=[],this.loading=!1,ye.isTelegram()&&ye.isIos()&&(this.loading=!xe.state.wcUri,this.unsubscribe.push(xe.subscribeKey("wcUri",e=>this.loading=!e)))}render(){const{connectors:e}=me.state,{customWallets:n,featuredWalletIds:r}=le.state,i=Re.getRecentWallets(),s=e.find(d=>d.id==="walletConnect"),a=e.filter(d=>d.type==="INJECTED"||d.type==="ANNOUNCED"||d.type==="MULTI_CHAIN").filter(d=>d.name!=="Browser Wallet");if(!s)return null;if(r||n||!this.wallets.length)return this.style.cssText="display: none",null;const c=a.length+i.length,l=Math.max(0,2-c),u=lh.filterOutDuplicateWallets(this.wallets).slice(0,l);return u.length?Z`
      <wui-flex flexDirection="column" gap="xs">
        ${u.map(d=>Z`
            <wui-list-wallet
              imageSrc=${He(Dn.getWalletImage(d))}
              name=${(d==null?void 0:d.name)??"Unknown"}
              @click=${()=>this.onConnectWallet(d)}
              tabIdx=${He(this.tabIdx)}
              ?loading=${this.loading}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnectWallet(e){if(this.loading)return;const n=me.getConnector(e.id,e.rdns);n?we.push("ConnectingExternal",{connector:n}):we.push("ConnectingWalletConnect",{wallet:e})}};D5([Q()],Cy.prototype,"tabIdx",void 0),D5([Q()],Cy.prototype,"wallets",void 0),D5([$e()],Cy.prototype,"loading",void 0),Cy=D5([ke("w3m-connect-recommended-widget")],Cy);var L5=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let _y=class extends Be{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=me.state.connectors,this.connectorImages=Si.state.connectorImages,this.unsubscribe.push(me.subscribeKey("connectors",e=>this.connectors=e),Si.subscribeKey("connectorImages",e=>this.connectorImages=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){if(ye.isMobile())return this.style.cssText="display: none",null;const e=this.connectors.find(r=>r.id==="walletConnect");if(!e)return this.style.cssText="display: none",null;const n=e.imageUrl||this.connectorImages[(e==null?void 0:e.imageId)??""];return Z`
      <wui-list-wallet
        imageSrc=${He(n)}
        name=${e.name??"Unknown"}
        @click=${()=>this.onConnector(e)}
        tagLabel="qr code"
        tagVariant="main"
        tabIdx=${He(this.tabIdx)}
        data-testid="wallet-selector-walletconnect"
      >
      </wui-list-wallet>
    `}onConnector(e){me.setActiveConnector(e),we.push("ConnectingWalletConnect")}};L5([Q()],_y.prototype,"tabIdx",void 0),L5([$e()],_y.prototype,"connectors",void 0),L5([$e()],_y.prototype,"connectorImages",void 0),_y=L5([ke("w3m-connect-walletconnect-widget")],_y);const KOe=qe`
  :host {
    margin-top: var(--wui-spacing-3xs);
  }
  wui-separator {
    margin: var(--wui-spacing-m) calc(var(--wui-spacing-m) * -1) var(--wui-spacing-xs)
      calc(var(--wui-spacing-m) * -1);
    width: calc(100% + var(--wui-spacing-s) * 2);
  }
`;var Sy=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let wh=class extends Be{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=me.state.connectors,this.recommended=be.state.recommended,this.featured=be.state.featured,this.unsubscribe.push(me.subscribeKey("connectors",e=>this.connectors=e),be.subscribeKey("recommended",e=>this.recommended=e),be.subscribeKey("featured",e=>this.featured=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){return Z`
      <wui-flex flexDirection="column" gap="xs"> ${this.connectorListTemplate()} </wui-flex>
    `}connectorListTemplate(){const{custom:e,recent:n,announced:r,injected:i,multiChain:s,recommended:o,featured:a,external:c}=Rc.getConnectorsByType(this.connectors,this.recommended,this.featured);return Rc.getConnectorTypeOrder({custom:e,recent:n,announced:r,injected:i,multiChain:s,recommended:o,featured:a,external:c}).map(u=>{switch(u){case"injected":return Z`
            ${s.length?Z`<w3m-connect-multi-chain-widget
                  tabIdx=${He(this.tabIdx)}
                ></w3m-connect-multi-chain-widget>`:null}
            ${r.length?Z`<w3m-connect-announced-widget
                  tabIdx=${He(this.tabIdx)}
                ></w3m-connect-announced-widget>`:null}
            ${i.length?Z`<w3m-connect-injected-widget
                  .connectors=${i}
                  tabIdx=${He(this.tabIdx)}
                ></w3m-connect-injected-widget>`:null}
          `;case"walletConnect":return Z`<w3m-connect-walletconnect-widget
            tabIdx=${He(this.tabIdx)}
          ></w3m-connect-walletconnect-widget>`;case"recent":return Z`<w3m-connect-recent-widget
            tabIdx=${He(this.tabIdx)}
          ></w3m-connect-recent-widget>`;case"featured":return Z`<w3m-connect-featured-widget
            .wallets=${a}
            tabIdx=${He(this.tabIdx)}
          ></w3m-connect-featured-widget>`;case"custom":return Z`<w3m-connect-custom-widget
            tabIdx=${He(this.tabIdx)}
          ></w3m-connect-custom-widget>`;case"external":return Z`<w3m-connect-external-widget
            tabIdx=${He(this.tabIdx)}
          ></w3m-connect-external-widget>`;case"recommended":return Z`<w3m-connect-recommended-widget
            .wallets=${o}
            tabIdx=${He(this.tabIdx)}
          ></w3m-connect-recommended-widget>`;default:return console.warn(`Unknown connector type: ${u}`),null}})}};wh.styles=KOe,Sy([Q()],wh.prototype,"tabIdx",void 0),Sy([$e()],wh.prototype,"connectors",void 0),Sy([$e()],wh.prototype,"recommended",void 0),Sy([$e()],wh.prototype,"featured",void 0),wh=Sy([ke("w3m-connector-list")],wh);const VOe=qe`
  :host {
    display: inline-flex;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-3xl);
    padding: var(--wui-spacing-3xs);
    position: relative;
    height: 36px;
    min-height: 36px;
    overflow: hidden;
  }

  :host::before {
    content: '';
    position: absolute;
    pointer-events: none;
    top: 4px;
    left: 4px;
    display: block;
    width: var(--local-tab-width);
    height: 28px;
    border-radius: var(--wui-border-radius-3xl);
    background-color: var(--wui-color-gray-glass-002);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    transform: translateX(calc(var(--local-tab) * var(--local-tab-width)));
    transition: transform var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: background-color, opacity;
  }

  :host([data-type='flex'])::before {
    left: 3px;
    transform: translateX(calc((var(--local-tab) * 34px) + (var(--local-tab) * 4px)));
  }

  :host([data-type='flex']) {
    display: flex;
    padding: 0px 0px 0px 12px;
    gap: 4px;
  }

  :host([data-type='flex']) > button > wui-text {
    position: absolute;
    left: 18px;
    opacity: 0;
  }

  button[data-active='true'] > wui-icon,
  button[data-active='true'] > wui-text {
    color: var(--wui-color-fg-100);
  }

  button[data-active='false'] > wui-icon,
  button[data-active='false'] > wui-text {
    color: var(--wui-color-fg-200);
  }

  button[data-active='true']:disabled,
  button[data-active='false']:disabled {
    background-color: transparent;
    opacity: 0.5;
    cursor: not-allowed;
  }

  button[data-active='true']:disabled > wui-text {
    color: var(--wui-color-fg-200);
  }

  button[data-active='false']:disabled > wui-text {
    color: var(--wui-color-fg-300);
  }

  button > wui-icon,
  button > wui-text {
    pointer-events: none;
    transition: color var(--wui-e ase-out-power-1) var(--wui-duration-md);
    will-change: color;
  }

  button {
    width: var(--local-tab-width);
    transition: background-color var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: background-color;
  }

  :host([data-type='flex']) > button {
    width: 34px;
    position: relative;
    display: flex;
    justify-content: flex-start;
  }

  button:hover:enabled,
  button:active:enabled {
    background-color: transparent !important;
  }

  button:hover:enabled > wui-icon,
  button:active:enabled > wui-icon {
    transition: all var(--wui-ease-out-power-1) var(--wui-duration-lg);
    color: var(--wui-color-fg-125);
  }

  button:hover:enabled > wui-text,
  button:active:enabled > wui-text {
    transition: all var(--wui-ease-out-power-1) var(--wui-duration-lg);
    color: var(--wui-color-fg-125);
  }

  button {
    border-radius: var(--wui-border-radius-3xl);
  }
`;var fu=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let xa=class extends Be{constructor(){super(...arguments),this.tabs=[],this.onTabChange=()=>null,this.buttons=[],this.disabled=!1,this.localTabWidth="100px",this.activeTab=0,this.isDense=!1}render(){return this.isDense=this.tabs.length>3,this.style.cssText=`
      --local-tab: ${this.activeTab};
      --local-tab-width: ${this.localTabWidth};
    `,this.dataset.type=this.isDense?"flex":"block",this.tabs.map((e,n)=>{var i;const r=n===this.activeTab;return Z`
        <button
          ?disabled=${this.disabled}
          @click=${()=>this.onTabClick(n)}
          data-active=${r}
          data-testid="tab-${(i=e.label)==null?void 0:i.toLowerCase()}"
        >
          ${this.iconTemplate(e)}
          <wui-text variant="small-600" color="inherit"> ${e.label} </wui-text>
        </button>
      `})}firstUpdated(){this.shadowRoot&&this.isDense&&(this.buttons=[...this.shadowRoot.querySelectorAll("button")],setTimeout(()=>{this.animateTabs(0,!0)},0))}iconTemplate(e){return e.icon?Z`<wui-icon size="xs" color="inherit" name=${e.icon}></wui-icon>`:null}onTabClick(e){this.buttons&&this.animateTabs(e,!1),this.activeTab=e,this.onTabChange(e)}animateTabs(e,n){const r=this.buttons[this.activeTab],i=this.buttons[e],s=r==null?void 0:r.querySelector("wui-text"),o=i==null?void 0:i.querySelector("wui-text"),a=i==null?void 0:i.getBoundingClientRect(),c=o==null?void 0:o.getBoundingClientRect();r&&s&&!n&&e!==this.activeTab&&(s.animate([{opacity:0}],{duration:50,easing:"ease",fill:"forwards"}),r.animate([{width:"34px"}],{duration:500,easing:"ease",fill:"forwards"})),i&&a&&c&&o&&(e!==this.activeTab||n)&&(this.localTabWidth=`${Math.round(a.width+c.width)+6}px`,i.animate([{width:`${a.width+c.width}px`}],{duration:n?0:500,fill:"forwards",easing:"ease"}),o.animate([{opacity:1}],{duration:n?0:125,delay:n?0:200,fill:"forwards",easing:"ease"}))}};xa.styles=[St,Nr,VOe],fu([Q({type:Array})],xa.prototype,"tabs",void 0),fu([Q()],xa.prototype,"onTabChange",void 0),fu([Q({type:Array})],xa.prototype,"buttons",void 0),fu([Q({type:Boolean})],xa.prototype,"disabled",void 0),fu([Q()],xa.prototype,"localTabWidth",void 0),fu([$e()],xa.prototype,"activeTab",void 0),fu([$e()],xa.prototype,"isDense",void 0),xa=fu([ke("wui-tabs")],xa);var C9=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let j5=class extends Be{constructor(){super(...arguments),this.platformTabs=[],this.unsubscribe=[],this.platforms=[],this.onSelectPlatfrom=void 0}disconnectCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.generateTabs();return Z`
      <wui-flex justifyContent="center" .padding=${["0","0","l","0"]}>
        <wui-tabs .tabs=${e} .onTabChange=${this.onTabChange.bind(this)}></wui-tabs>
      </wui-flex>
    `}generateTabs(){const e=this.platforms.map(n=>n==="browser"?{label:"Browser",icon:"extension",platform:"browser"}:n==="mobile"?{label:"Mobile",icon:"mobile",platform:"mobile"}:n==="qrcode"?{label:"Mobile",icon:"mobile",platform:"qrcode"}:n==="web"?{label:"Webapp",icon:"browser",platform:"web"}:n==="desktop"?{label:"Desktop",icon:"desktop",platform:"desktop"}:{label:"Browser",icon:"extension",platform:"unsupported"});return this.platformTabs=e.map(({platform:n})=>n),e}onTabChange(e){var r;const n=this.platformTabs[e];n&&((r=this.onSelectPlatfrom)==null||r.call(this,n))}};C9([Q({type:Array})],j5.prototype,"platforms",void 0),C9([Q()],j5.prototype,"onSelectPlatfrom",void 0),j5=C9([ke("w3m-connecting-header")],j5);const GOe=qe`
  :host {
    display: flex;
  }

  :host([data-size='sm']) > svg {
    width: 12px;
    height: 12px;
  }

  :host([data-size='md']) > svg {
    width: 16px;
    height: 16px;
  }

  :host([data-size='lg']) > svg {
    width: 24px;
    height: 24px;
  }

  :host([data-size='xl']) > svg {
    width: 32px;
    height: 32px;
  }

  svg {
    animation: rotate 2s linear infinite;
  }

  circle {
    fill: none;
    stroke: var(--local-color);
    stroke-width: 4px;
    stroke-dasharray: 1, 124;
    stroke-dashoffset: 0;
    stroke-linecap: round;
    animation: dash 1.5s ease-in-out infinite;
  }

  :host([data-size='md']) > svg > circle {
    stroke-width: 6px;
  }

  :host([data-size='sm']) > svg > circle {
    stroke-width: 8px;
  }

  @keyframes rotate {
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes dash {
    0% {
      stroke-dasharray: 1, 124;
      stroke-dashoffset: 0;
    }

    50% {
      stroke-dasharray: 90, 124;
      stroke-dashoffset: -35;
    }

    100% {
      stroke-dashoffset: -125;
    }
  }
`;var _9=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let xy=class extends Be{constructor(){super(...arguments),this.color="accent-100",this.size="lg"}render(){return this.style.cssText=`--local-color: ${this.color==="inherit"?"inherit":`var(--wui-color-${this.color})`}`,this.dataset.size=this.size,Z`<svg viewBox="25 25 50 50">
      <circle r="20" cy="50" cx="50"></circle>
    </svg>`}};xy.styles=[St,GOe],_9([Q()],xy.prototype,"color",void 0),_9([Q()],xy.prototype,"size",void 0),xy=_9([ke("wui-loading-spinner")],xy);const ZOe=qe`
  :host {
    width: var(--local-width);
    position: relative;
  }

  button {
    border: none;
    border-radius: var(--local-border-radius);
    width: var(--local-width);
    white-space: nowrap;
  }

  /* -- Sizes --------------------------------------------------- */
  button[data-size='md'] {
    padding: 8.2px var(--wui-spacing-l) 9px var(--wui-spacing-l);
    height: 36px;
  }

  button[data-size='md'][data-icon-left='true'][data-icon-right='false'] {
    padding: 8.2px var(--wui-spacing-l) 9px var(--wui-spacing-s);
  }

  button[data-size='md'][data-icon-right='true'][data-icon-left='false'] {
    padding: 8.2px var(--wui-spacing-s) 9px var(--wui-spacing-l);
  }

  button[data-size='lg'] {
    padding: var(--wui-spacing-m) var(--wui-spacing-2l);
    height: 48px;
  }

  /* -- Variants --------------------------------------------------------- */
  button[data-variant='main'] {
    background-color: var(--wui-color-accent-100);
    color: var(--wui-color-inverse-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='inverse'] {
    background-color: var(--wui-color-inverse-100);
    color: var(--wui-color-inverse-000);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='accent'] {
    background-color: var(--wui-color-accent-glass-010);
    color: var(--wui-color-accent-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  button[data-variant='accent-error'] {
    background: var(--wui-color-error-glass-015);
    color: var(--wui-color-error-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-error-glass-010);
  }

  button[data-variant='accent-success'] {
    background: var(--wui-color-success-glass-015);
    color: var(--wui-color-success-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-success-glass-010);
  }

  button[data-variant='neutral'] {
    background: transparent;
    color: var(--wui-color-fg-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  /* -- Focus states --------------------------------------------------- */
  button[data-variant='main']:focus-visible:enabled {
    background-color: var(--wui-color-accent-090);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
  button[data-variant='inverse']:focus-visible:enabled {
    background-color: var(--wui-color-inverse-100);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-gray-glass-010),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
  button[data-variant='accent']:focus-visible:enabled {
    background-color: var(--wui-color-accent-glass-010);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
  button[data-variant='accent-error']:focus-visible:enabled {
    background: var(--wui-color-error-glass-015);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-error-100),
      0 0 0 4px var(--wui-color-error-glass-020);
  }
  button[data-variant='accent-success']:focus-visible:enabled {
    background: var(--wui-color-success-glass-015);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-success-100),
      0 0 0 4px var(--wui-color-success-glass-020);
  }
  button[data-variant='neutral']:focus-visible:enabled {
    background: var(--wui-color-gray-glass-005);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-gray-glass-010),
      0 0 0 4px var(--wui-color-gray-glass-002);
  }

  /* -- Hover & Active states ----------------------------------------------------------- */
  @media (hover: hover) and (pointer: fine) {
    button[data-variant='main']:hover:enabled {
      background-color: var(--wui-color-accent-090);
    }

    button[data-variant='main']:active:enabled {
      background-color: var(--wui-color-accent-080);
    }

    button[data-variant='accent']:hover:enabled {
      background-color: var(--wui-color-accent-glass-015);
    }

    button[data-variant='accent']:active:enabled {
      background-color: var(--wui-color-accent-glass-020);
    }

    button[data-variant='accent-error']:hover:enabled {
      background: var(--wui-color-error-glass-020);
      color: var(--wui-color-error-100);
    }

    button[data-variant='accent-error']:active:enabled {
      background: var(--wui-color-error-glass-030);
      color: var(--wui-color-error-100);
    }

    button[data-variant='accent-success']:hover:enabled {
      background: var(--wui-color-success-glass-020);
      color: var(--wui-color-success-100);
    }

    button[data-variant='accent-success']:active:enabled {
      background: var(--wui-color-success-glass-030);
      color: var(--wui-color-success-100);
    }

    button[data-variant='neutral']:hover:enabled {
      background: var(--wui-color-gray-glass-002);
    }

    button[data-variant='neutral']:active:enabled {
      background: var(--wui-color-gray-glass-005);
    }

    button[data-size='lg'][data-icon-left='true'][data-icon-right='false'] {
      padding-left: var(--wui-spacing-m);
    }

    button[data-size='lg'][data-icon-right='true'][data-icon-left='false'] {
      padding-right: var(--wui-spacing-m);
    }
  }

  /* -- Disabled state --------------------------------------------------- */
  button:disabled {
    background-color: var(--wui-color-gray-glass-002);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    color: var(--wui-color-gray-glass-020);
    cursor: not-allowed;
  }

  button > wui-text {
    transition: opacity var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: opacity;
    opacity: var(--local-opacity-100);
  }

  ::slotted(*) {
    transition: opacity var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: opacity;
    opacity: var(--local-opacity-100);
  }

  wui-loading-spinner {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    opacity: var(--local-opacity-000);
  }
`;var Aa=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const wK={main:"inverse-100",inverse:"inverse-000",accent:"accent-100","accent-error":"error-100","accent-success":"success-100",neutral:"fg-100",disabled:"gray-glass-020"},YOe={lg:"paragraph-600",md:"small-600"},JOe={lg:"md",md:"md"};let Ys=class extends Be{constructor(){super(...arguments),this.size="lg",this.disabled=!1,this.fullWidth=!1,this.loading=!1,this.variant="main",this.hasIconLeft=!1,this.hasIconRight=!1,this.borderRadius="m"}render(){this.style.cssText=`
    --local-width: ${this.fullWidth?"100%":"auto"};
    --local-opacity-100: ${this.loading?0:1};
    --local-opacity-000: ${this.loading?1:0};
    --local-border-radius: var(--wui-border-radius-${this.borderRadius});
    `;const e=this.textVariant??YOe[this.size];return Z`
      <button
        data-variant=${this.variant}
        data-icon-left=${this.hasIconLeft}
        data-icon-right=${this.hasIconRight}
        data-size=${this.size}
        ?disabled=${this.disabled}
      >
        ${this.loadingTemplate()}
        <slot name="iconLeft" @slotchange=${()=>this.handleSlotLeftChange()}></slot>
        <wui-text variant=${e} color="inherit">
          <slot></slot>
        </wui-text>
        <slot name="iconRight" @slotchange=${()=>this.handleSlotRightChange()}></slot>
      </button>
    `}handleSlotLeftChange(){this.hasIconLeft=!0}handleSlotRightChange(){this.hasIconRight=!0}loadingTemplate(){if(this.loading){const e=JOe[this.size],n=this.disabled?wK.disabled:wK[this.variant];return Z`<wui-loading-spinner color=${n} size=${e}></wui-loading-spinner>`}return Z``}};Ys.styles=[St,Nr,ZOe],Aa([Q()],Ys.prototype,"size",void 0),Aa([Q({type:Boolean})],Ys.prototype,"disabled",void 0),Aa([Q({type:Boolean})],Ys.prototype,"fullWidth",void 0),Aa([Q({type:Boolean})],Ys.prototype,"loading",void 0),Aa([Q()],Ys.prototype,"variant",void 0),Aa([Q({type:Boolean})],Ys.prototype,"hasIconLeft",void 0),Aa([Q({type:Boolean})],Ys.prototype,"hasIconRight",void 0),Aa([Q()],Ys.prototype,"borderRadius",void 0),Aa([Q()],Ys.prototype,"textVariant",void 0),Ys=Aa([ke("wui-button")],Ys);const QOe=qe`
  button {
    padding: var(--wui-spacing-4xs) var(--wui-spacing-xxs);
    border-radius: var(--wui-border-radius-3xs);
    background-color: transparent;
    color: var(--wui-color-accent-100);
  }

  button:disabled {
    background-color: transparent;
    color: var(--wui-color-gray-glass-015);
  }

  button:hover {
    background-color: var(--wui-color-gray-glass-005);
  }
`;var U5=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let P0=class extends Be{constructor(){super(...arguments),this.tabIdx=void 0,this.disabled=!1,this.color="inherit"}render(){return Z`
      <button ?disabled=${this.disabled} tabindex=${He(this.tabIdx)}>
        <slot name="iconLeft"></slot>
        <wui-text variant="small-600" color=${this.color}>
          <slot></slot>
        </wui-text>
        <slot name="iconRight"></slot>
      </button>
    `}};P0.styles=[St,Nr,QOe],U5([Q()],P0.prototype,"tabIdx",void 0),U5([Q({type:Boolean})],P0.prototype,"disabled",void 0),U5([Q()],P0.prototype,"color",void 0),P0=U5([ke("wui-link")],P0);const XOe=qe`
  :host {
    display: block;
    width: var(--wui-box-size-md);
    height: var(--wui-box-size-md);
  }

  svg {
    width: var(--wui-box-size-md);
    height: var(--wui-box-size-md);
  }

  rect {
    fill: none;
    stroke: var(--wui-color-accent-100);
    stroke-width: 4px;
    stroke-linecap: round;
    animation: dash 1s linear infinite;
  }

  @keyframes dash {
    to {
      stroke-dashoffset: 0px;
    }
  }
`;var bK=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let F5=class extends Be{constructor(){super(...arguments),this.radius=36}render(){return this.svgLoaderTemplate()}svgLoaderTemplate(){const e=this.radius>50?50:this.radius,r=36-e,i=116+r,s=245+r,o=360+r*1.75;return Z`
      <svg viewBox="0 0 110 110" width="110" height="110">
        <rect
          x="2"
          y="2"
          width="106"
          height="106"
          rx=${e}
          stroke-dasharray="${i} ${s}"
          stroke-dashoffset=${o}
        />
      </svg>
    `}};F5.styles=[St,XOe],bK([Q({type:Number})],F5.prototype,"radius",void 0),F5=bK([ke("wui-loading-thumbnail")],F5);const eTe=qe`
  button {
    border: none;
    border-radius: var(--wui-border-radius-3xl);
  }

  button[data-variant='main'] {
    background-color: var(--wui-color-accent-100);
    color: var(--wui-color-inverse-100);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='accent'] {
    background-color: var(--wui-color-accent-glass-010);
    color: var(--wui-color-accent-100);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  button[data-variant='gray'] {
    background-color: transparent;
    color: var(--wui-color-fg-200);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='shade'] {
    background-color: transparent;
    color: var(--wui-color-accent-100);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-size='sm'] {
    height: 32px;
    padding: 0 var(--wui-spacing-s);
  }

  button[data-size='md'] {
    height: 40px;
    padding: 0 var(--wui-spacing-l);
  }

  button[data-size='sm'] > wui-image {
    width: 16px;
    height: 16px;
  }

  button[data-size='md'] > wui-image {
    width: 24px;
    height: 24px;
  }

  button[data-size='sm'] > wui-icon {
    width: 12px;
    height: 12px;
  }

  button[data-size='md'] > wui-icon {
    width: 14px;
    height: 14px;
  }

  wui-image {
    border-radius: var(--wui-border-radius-3xl);
    overflow: hidden;
  }

  button.disabled > wui-icon,
  button.disabled > wui-image {
    filter: grayscale(1);
  }

  button[data-variant='main'] > wui-image {
    box-shadow: inset 0 0 0 1px var(--wui-color-accent-090);
  }

  button[data-variant='shade'] > wui-image,
  button[data-variant='gray'] > wui-image {
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  @media (hover: hover) and (pointer: fine) {
    button[data-variant='main']:focus-visible {
      background-color: var(--wui-color-accent-090);
    }

    button[data-variant='main']:hover:enabled {
      background-color: var(--wui-color-accent-090);
    }

    button[data-variant='main']:active:enabled {
      background-color: var(--wui-color-accent-080);
    }

    button[data-variant='accent']:hover:enabled {
      background-color: var(--wui-color-accent-glass-015);
    }

    button[data-variant='accent']:active:enabled {
      background-color: var(--wui-color-accent-glass-020);
    }

    button[data-variant='shade']:focus-visible,
    button[data-variant='gray']:focus-visible,
    button[data-variant='shade']:hover,
    button[data-variant='gray']:hover {
      background-color: var(--wui-color-gray-glass-002);
    }

    button[data-variant='gray']:active,
    button[data-variant='shade']:active {
      background-color: var(--wui-color-gray-glass-005);
    }
  }

  button.disabled {
    color: var(--wui-color-gray-glass-020);
    background-color: var(--wui-color-gray-glass-002);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    pointer-events: none;
  }
`;var bh=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Lc=class extends Be{constructor(){super(...arguments),this.variant="accent",this.imageSrc="",this.disabled=!1,this.icon="externalLink",this.size="md",this.text=""}render(){const e=this.size==="sm"?"small-600":"paragraph-600";return Z`
      <button
        class=${this.disabled?"disabled":""}
        data-variant=${this.variant}
        data-size=${this.size}
      >
        ${this.imageSrc?Z`<wui-image src=${this.imageSrc}></wui-image>`:null}
        <wui-text variant=${e} color="inherit"> ${this.text} </wui-text>
        <wui-icon name=${this.icon} color="inherit" size="inherit"></wui-icon>
      </button>
    `}};Lc.styles=[St,Nr,eTe],bh([Q()],Lc.prototype,"variant",void 0),bh([Q()],Lc.prototype,"imageSrc",void 0),bh([Q({type:Boolean})],Lc.prototype,"disabled",void 0),bh([Q()],Lc.prototype,"icon",void 0),bh([Q()],Lc.prototype,"size",void 0),bh([Q()],Lc.prototype,"text",void 0),Lc=bh([ke("wui-chip-button")],Lc);const tTe=qe`
  wui-flex {
    width: 100%;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
  }
`;var z5=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let O0=class extends Be{constructor(){super(...arguments),this.disabled=!1,this.label="",this.buttonLabel=""}render(){return Z`
      <wui-flex
        justifyContent="space-between"
        alignItems="center"
        .padding=${["1xs","2l","1xs","2l"]}
      >
        <wui-text variant="paragraph-500" color="fg-200">${this.label}</wui-text>
        <wui-chip-button size="sm" variant="shade" text=${this.buttonLabel} icon="chevronRight">
        </wui-chip-button>
      </wui-flex>
    `}};O0.styles=[St,Nr,tTe],z5([Q({type:Boolean})],O0.prototype,"disabled",void 0),z5([Q()],O0.prototype,"label",void 0),z5([Q()],O0.prototype,"buttonLabel",void 0),O0=z5([ke("wui-cta-button")],O0);const nTe=qe`
  :host {
    display: block;
    padding: 0 var(--wui-spacing-xl) var(--wui-spacing-xl);
  }
`;var vK=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let q5=class extends Be{constructor(){super(...arguments),this.wallet=void 0}render(){if(!this.wallet)return this.style.display="none",null;const{name:e,app_store:n,play_store:r,chrome_store:i,homepage:s}=this.wallet,o=ye.isMobile(),a=ye.isIos(),c=ye.isAndroid(),l=[n,r,s,i].filter(Boolean).length>1,u=ur.getTruncateString({string:e,charsStart:12,charsEnd:0,truncate:"end"});return l&&!o?Z`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${()=>we.push("Downloads",{wallet:this.wallet})}
        ></wui-cta-button>
      `:!l&&s?Z`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${this.onHomePage.bind(this)}
        ></wui-cta-button>
      `:n&&a?Z`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${this.onAppStore.bind(this)}
        ></wui-cta-button>
      `:r&&c?Z`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${this.onPlayStore.bind(this)}
        ></wui-cta-button>
      `:(this.style.display="none",null)}onAppStore(){var e;(e=this.wallet)!=null&&e.app_store&&ye.openHref(this.wallet.app_store,"_blank")}onPlayStore(){var e;(e=this.wallet)!=null&&e.play_store&&ye.openHref(this.wallet.play_store,"_blank")}onHomePage(){var e;(e=this.wallet)!=null&&e.homepage&&ye.openHref(this.wallet.homepage,"_blank")}};q5.styles=[nTe],vK([Q({type:Object})],q5.prototype,"wallet",void 0),q5=vK([ke("w3m-mobile-download-links")],q5);const rTe=qe`
  @keyframes shake {
    0% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(3px);
    }
    50% {
      transform: translateX(-3px);
    }
    75% {
      transform: translateX(3px);
    }
    100% {
      transform: translateX(0);
    }
  }

  wui-flex:first-child:not(:only-child) {
    position: relative;
  }

  wui-loading-thumbnail {
    position: absolute;
  }

  wui-icon-box {
    position: absolute;
    right: calc(var(--wui-spacing-3xs) * -1);
    bottom: calc(var(--wui-spacing-3xs) * -1);
    opacity: 0;
    transform: scale(0.5);
    transition-property: opacity, transform;
    transition-duration: var(--wui-duration-lg);
    transition-timing-function: var(--wui-ease-out-power-2);
    will-change: opacity, transform;
  }

  wui-text[align='center'] {
    width: 100%;
    padding: 0px var(--wui-spacing-l);
  }

  [data-error='true'] wui-icon-box {
    opacity: 1;
    transform: scale(1);
  }

  [data-error='true'] > wui-flex:first-child {
    animation: shake 250ms cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
  }

  [data-retry='false'] wui-link {
    display: none;
  }

  [data-retry='true'] wui-link {
    display: block;
    opacity: 1;
  }
`;var Ia=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};class zr extends Be{constructor(){var e,n,r,i,s;super(),this.wallet=(e=we.state.data)==null?void 0:e.wallet,this.connector=(n=we.state.data)==null?void 0:n.connector,this.timeout=void 0,this.secondaryBtnIcon="refresh",this.onConnect=void 0,this.onRender=void 0,this.onAutoConnect=void 0,this.isWalletConnect=!0,this.unsubscribe=[],this.imageSrc=Dn.getWalletImage(this.wallet)??Dn.getConnectorImage(this.connector),this.name=((r=this.wallet)==null?void 0:r.name)??((i=this.connector)==null?void 0:i.name)??"Wallet",this.isRetrying=!1,this.uri=xe.state.wcUri,this.error=xe.state.wcError,this.ready=!1,this.showRetry=!1,this.secondaryBtnLabel="Try again",this.secondaryLabel="Accept connection request in the wallet",this.isLoading=!1,this.isMobile=!1,this.onRetry=void 0,this.unsubscribe.push(xe.subscribeKey("wcUri",o=>{var a;this.uri=o,this.isRetrying&&this.onRetry&&(this.isRetrying=!1,(a=this.onConnect)==null||a.call(this))}),xe.subscribeKey("wcError",o=>this.error=o)),(ye.isTelegram()||ye.isSafari())&&ye.isIos()&&xe.state.wcUri&&((s=this.onConnect)==null||s.call(this))}firstUpdated(){var e;(e=this.onAutoConnect)==null||e.call(this),this.showRetry=!this.onAutoConnect}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),xe.setWcError(!1),clearTimeout(this.timeout)}render(){var r;(r=this.onRender)==null||r.call(this),this.onShowRetry();const e=this.error?"Connection can be declined if a previous request is still active":this.secondaryLabel;let n=`Continue in ${this.name}`;return this.error&&(n="Connection declined"),Z`
      <wui-flex
        data-error=${He(this.error)}
        data-retry=${this.showRetry}
        flexDirection="column"
        alignItems="center"
        .padding=${["3xl","xl","xl","xl"]}
        gap="xl"
      >
        <wui-flex justifyContent="center" alignItems="center">
          <wui-wallet-image size="lg" imageSrc=${He(this.imageSrc)}></wui-wallet-image>

          ${this.error?null:this.loaderTemplate()}

          <wui-icon-box
            backgroundColor="error-100"
            background="opaque"
            iconColor="error-100"
            icon="close"
            size="sm"
            border
            borderColor="wui-color-bg-125"
          ></wui-icon-box>
        </wui-flex>

        <wui-flex flexDirection="column" alignItems="center" gap="xs">
          <wui-text variant="paragraph-500" color=${this.error?"error-100":"fg-100"}>
            ${n}
          </wui-text>
          <wui-text align="center" variant="small-500" color="fg-200">${e}</wui-text>
        </wui-flex>

        ${this.secondaryBtnLabel?Z`
              <wui-button
                variant="accent"
                size="md"
                ?disabled=${this.isRetrying||this.isLoading}
                @click=${this.onTryAgain.bind(this)}
                data-testid="w3m-connecting-widget-secondary-button"
              >
                <wui-icon color="inherit" slot="iconLeft" name=${this.secondaryBtnIcon}></wui-icon>
                ${this.secondaryBtnLabel}
              </wui-button>
            `:null}
      </wui-flex>

      ${this.isWalletConnect?Z`
            <wui-flex .padding=${["0","xl","xl","xl"]} justifyContent="center">
              <wui-link @click=${this.onCopyUri} color="fg-200" data-testid="wui-link-copy">
                <wui-icon size="xs" color="fg-200" slot="iconLeft" name="copy"></wui-icon>
                Copy link
              </wui-link>
            </wui-flex>
          `:null}

      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}onShowRetry(){var e;if(this.error&&!this.showRetry){this.showRetry=!0;const n=(e=this.shadowRoot)==null?void 0:e.querySelector("wui-button");n==null||n.animate([{opacity:0},{opacity:1}],{fill:"forwards",easing:"ease"})}}onTryAgain(){var e,n;xe.setWcError(!1),this.onRetry?(this.isRetrying=!0,(e=this.onRetry)==null||e.call(this)):(n=this.onConnect)==null||n.call(this)}loaderTemplate(){const e=Ar.state.themeVariables["--w3m-border-radius-master"],n=e?parseInt(e.replace("px",""),10):4;return Z`<wui-loading-thumbnail radius=${n*9}></wui-loading-thumbnail>`}onCopyUri(){try{this.uri&&(ye.copyToClopboard(this.uri),En.showSuccess("Link copied"))}catch{En.showError("Failed to copy")}}}zr.styles=rTe,Ia([$e()],zr.prototype,"isRetrying",void 0),Ia([$e()],zr.prototype,"uri",void 0),Ia([$e()],zr.prototype,"error",void 0),Ia([$e()],zr.prototype,"ready",void 0),Ia([$e()],zr.prototype,"showRetry",void 0),Ia([$e()],zr.prototype,"secondaryBtnLabel",void 0),Ia([$e()],zr.prototype,"secondaryLabel",void 0),Ia([$e()],zr.prototype,"isLoading",void 0),Ia([Q({type:Boolean})],zr.prototype,"isMobile",void 0),Ia([Q()],zr.prototype,"onRetry",void 0);var iTe=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let EK=class extends zr{constructor(){if(super(),!this.wallet)throw new Error("w3m-connecting-wc-browser: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.onAutoConnect=this.onConnectProxy.bind(this),it.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"browser"}})}async onConnectProxy(){var e;try{this.error=!1;const{connectors:n}=me.state,r=n.find(i=>{var s,o,a;return i.type==="ANNOUNCED"&&((s=i.info)==null?void 0:s.rdns)===((o=this.wallet)==null?void 0:o.rdns)||i.type==="INJECTED"||i.name===((a=this.wallet)==null?void 0:a.name)});if(r)await xe.connectExternal(r,r.chain);else throw new Error("w3m-connecting-wc-browser: No connector found");Ot.close(),it.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:"browser",name:((e=this.wallet)==null?void 0:e.name)||"Unknown"}})}catch(n){it.sendEvent({type:"track",event:"CONNECT_ERROR",properties:{message:(n==null?void 0:n.message)??"Unknown"}}),this.error=!0}}};EK=iTe([ke("w3m-connecting-wc-browser")],EK);var sTe=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let CK=class extends zr{constructor(){if(super(),!this.wallet)throw new Error("w3m-connecting-wc-desktop: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.onRender=this.onRenderProxy.bind(this),it.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"desktop"}})}onRenderProxy(){var e;!this.ready&&this.uri&&(this.ready=!0,(e=this.onConnect)==null||e.call(this))}onConnectProxy(){var e;if((e=this.wallet)!=null&&e.desktop_link&&this.uri)try{this.error=!1;const{desktop_link:n,name:r}=this.wallet,{redirect:i,href:s}=ye.formatNativeUrl(n,this.uri);xe.setWcLinking({name:r,href:s}),xe.setRecentWallet(this.wallet),ye.openHref(i,"_blank")}catch{this.error=!0}}};CK=sTe([ke("w3m-connecting-wc-desktop")],CK);var T0=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let vh=class extends zr{constructor(){if(super(),this.btnLabelTimeout=void 0,this.redirectDeeplink=void 0,this.redirectUniversalLink=void 0,this.target=void 0,this.preferUniversalLinks=le.state.experimental_preferUniversalLinks,this.isLoading=!0,this.onConnect=()=>{var e;if((e=this.wallet)!=null&&e.mobile_link&&this.uri)try{this.error=!1;const{mobile_link:n,link_mode:r,name:i}=this.wallet,{redirect:s,redirectUniversalLink:o,href:a}=ye.formatNativeUrl(n,this.uri,r);this.redirectDeeplink=s,this.redirectUniversalLink=o,this.target=ye.isIframe()?"_top":"_self",xe.setWcLinking({name:i,href:a}),xe.setRecentWallet(this.wallet),this.preferUniversalLinks&&this.redirectUniversalLink?ye.openHref(this.redirectUniversalLink,this.target):ye.openHref(this.redirectDeeplink,this.target)}catch(n){it.sendEvent({type:"track",event:"CONNECT_PROXY_ERROR",properties:{message:n instanceof Error?n.message:"Error parsing the deeplink",uri:this.uri,mobile_link:this.wallet.mobile_link,name:this.wallet.name}}),this.error=!0}},!this.wallet)throw new Error("w3m-connecting-wc-mobile: No wallet provided");this.secondaryBtnLabel="Open",this.secondaryLabel=Rt.CONNECT_LABELS.MOBILE,this.secondaryBtnIcon="externalLink",this.onHandleURI(),this.unsubscribe.push(xe.subscribeKey("wcUri",()=>{this.onHandleURI()})),it.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"mobile"}})}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.btnLabelTimeout)}onHandleURI(){var e;this.isLoading=!this.uri,!this.ready&&this.uri&&(this.ready=!0,(e=this.onConnect)==null||e.call(this))}onTryAgain(){var e;xe.setWcError(!1),(e=this.onConnect)==null||e.call(this)}};T0([$e()],vh.prototype,"redirectDeeplink",void 0),T0([$e()],vh.prototype,"redirectUniversalLink",void 0),T0([$e()],vh.prototype,"target",void 0),T0([$e()],vh.prototype,"preferUniversalLinks",void 0),T0([$e()],vh.prototype,"isLoading",void 0),vh=T0([ke("w3m-connecting-wc-mobile")],vh);var Ay={},oTe=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},_K={},ws={};let S9;const aTe=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ws.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},ws.getSymbolTotalCodewords=function(e){return aTe[e]},ws.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},ws.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');S9=e},ws.isKanjiModeEnabled=function(){return typeof S9<"u"},ws.toSJIS=function(e){return S9(e)};var H5={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,i){if(t.isValid(r))return r;try{return e(r)}catch{return i}}})(H5);function SK(){this.buffer=[],this.length=0}SK.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var cTe=SK;function Iy(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Iy.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)},Iy.prototype.get=function(t,e){return this.data[t*this.size+e]},Iy.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},Iy.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var lTe=Iy,xK={};(function(t){const e=ws.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(r){const i=[],s=t.getRowColCoords(r),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(xK);var AK={};const uTe=ws.getSymbolSize,IK=7;AK.getPositions=function(e){const n=uTe(e);return[[0,0],[n-IK,0],[0,n-IK]]};var $K={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,l=null,u=null;for(let d=0;d<s;d++){a=c=0,l=u=null;for(let h=0;h<s;h++){let f=i.get(d,h);f===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=f,a=1),f=i.get(h,d),f===u?c++:(c>=5&&(o+=e.N1+(c-5)),u=f,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let u=0;u<s;u++)a=a<<1&2047|i.get(l,u),u>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(u,l),u>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function n(r,i,s){switch(r){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,n(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,i);const u=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),u<c&&(c=u,a=l)}return a}})($K);var W5={};const pu=H5,K5=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],V5=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];W5.getBlocksCount=function(e,n){switch(n){case pu.L:return K5[(e-1)*4+0];case pu.M:return K5[(e-1)*4+1];case pu.Q:return K5[(e-1)*4+2];case pu.H:return K5[(e-1)*4+3];default:return}},W5.getTotalCodewordsCount=function(e,n){switch(n){case pu.L:return V5[(e-1)*4+0];case pu.M:return V5[(e-1)*4+1];case pu.Q:return V5[(e-1)*4+2];case pu.H:return V5[(e-1)*4+3];default:return}};var PK={},G5={};const $y=new Uint8Array(512),Z5=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)$y[n]=e,Z5[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)$y[n]=$y[n-255]})(),G5.log=function(e){if(e<1)throw new Error("log("+e+")");return Z5[e]},G5.exp=function(e){return $y[e]},G5.mul=function(e,n){return e===0||n===0?0:$y[Z5[e]+Z5[n]]},function(t){const e=G5;t.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(r[o],i[a]);return s},t.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(PK);const OK=PK;function x9(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}x9.prototype.initialize=function(e){this.degree=e,this.genPoly=OK.generateECPolynomial(this.degree)},x9.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=OK.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(r,i),s}return r};var dTe=x9,TK={},gu={},A9={};A9.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var $a={};const NK="[0-9]+",hTe="[A-Z $%*+\\-./:]+";let Py="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Py=Py.replace(/u/g,"\\u");const fTe="(?:(?![A-Z0-9 $%*+\\-./:]|"+Py+`)(?:.|[\r
]))+`;$a.KANJI=new RegExp(Py,"g"),$a.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),$a.BYTE=new RegExp(fTe,"g"),$a.NUMERIC=new RegExp(NK,"g"),$a.ALPHANUMERIC=new RegExp(hTe,"g");const pTe=new RegExp("^"+Py+"$"),gTe=new RegExp("^"+NK+"$"),mTe=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");$a.testKanji=function(e){return pTe.test(e)},$a.testNumeric=function(e){return gTe.test(e)},$a.testAlphanumeric=function(e){return mTe.test(e)},function(t){const e=A9,n=$a;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return r(s)}catch{return o}}}(gu),function(t){const e=ws,n=W5,r=H5,i=gu,s=A9,o=7973,a=e.getBCHDigit(o);function c(h,f,g){for(let p=1;p<=40;p++)if(f<=t.getCapacity(p,g,h))return p}function l(h,f){return i.getCharCountIndicator(h,f)+4}function u(h,f){let g=0;return h.forEach(function(p){const m=l(p.mode,f);g+=m+p.getBitsLength()}),g}function d(h,f){for(let g=1;g<=40;g++)if(u(h,g)<=t.getCapacity(g,f,i.MIXED))return g}t.from=function(f,g){return s.isValid(f)?parseInt(f,10):g},t.getCapacity=function(f,g,p){if(!s.isValid(f))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=i.BYTE);const m=e.getSymbolTotalCodewords(f),y=n.getTotalCodewordsCount(f,g),w=(m-y)*8;if(p===i.MIXED)return w;const b=w-l(p,f);switch(p){case i.NUMERIC:return Math.floor(b/10*3);case i.ALPHANUMERIC:return Math.floor(b/11*2);case i.KANJI:return Math.floor(b/13);case i.BYTE:default:return Math.floor(b/8)}},t.getBestVersionForData=function(f,g){let p;const m=r.from(g,r.M);if(Array.isArray(f)){if(f.length>1)return d(f,m);if(f.length===0)return 1;p=f[0]}else p=f;return c(p.mode,p.getLength(),m)},t.getEncodedBits=function(f){if(!s.isValid(f)||f<7)throw new Error("Invalid QR Code version");let g=f<<12;for(;e.getBCHDigit(g)-a>=0;)g^=o<<e.getBCHDigit(g)-a;return f<<12|g}}(TK);var kK={};const I9=ws,RK=1335,yTe=21522,MK=I9.getBCHDigit(RK);kK.getEncodedBits=function(e,n){const r=e.bit<<3|n;let i=r<<10;for(;I9.getBCHDigit(i)-MK>=0;)i^=RK<<I9.getBCHDigit(i)-MK;return(r<<10|i)^yTe};var BK={};const wTe=gu;function N0(t){this.mode=wTe.NUMERIC,this.data=t.toString()}N0.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},N0.prototype.getLength=function(){return this.data.length},N0.prototype.getBitsLength=function(){return N0.getBitsLength(this.data.length)},N0.prototype.write=function(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),e.put(i,10);const s=this.data.length-n;s>0&&(r=this.data.substr(n),i=parseInt(r,10),e.put(i,s*3+1))};var bTe=N0;const vTe=gu,$9=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function k0(t){this.mode=vTe.ALPHANUMERIC,this.data=t}k0.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},k0.prototype.getLength=function(){return this.data.length},k0.prototype.getBitsLength=function(){return k0.getBitsLength(this.data.length)},k0.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=$9.indexOf(this.data[n])*45;r+=$9.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put($9.indexOf(this.data[n]),6)};var ETe=k0,CTe=function(e){for(var n=[],r=e.length,i=0;i<r;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&r>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){n.push(s);continue}if(s<2048){n.push(s>>6|192),n.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128);continue}if(s>=65536&&s<=1114111){n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(s&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const _Te=CTe,STe=gu;function R0(t){this.mode=STe.BYTE,typeof t=="string"&&(t=_Te(t)),this.data=new Uint8Array(t)}R0.getBitsLength=function(e){return e*8},R0.prototype.getLength=function(){return this.data.length},R0.prototype.getBitsLength=function(){return R0.getBitsLength(this.data.length)},R0.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var xTe=R0;const ATe=gu,ITe=ws;function M0(t){this.mode=ATe.KANJI,this.data=t}M0.getBitsLength=function(e){return e*13},M0.prototype.getLength=function(){return this.data.length},M0.prototype.getBitsLength=function(){return M0.getBitsLength(this.data.length)},M0.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=ITe.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var $Te=M0,DK={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,i){var s={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var c,l,u,d,h,f,g,p,m;!a.empty();){c=a.pop(),l=c.value,d=c.cost,h=n[l]||{};for(u in h)h.hasOwnProperty(u)&&(f=h[u],g=d+f,p=o[u],m=typeof o[u]>"u",(m||p>g)&&(o[u]=g,a.push(u,g),s[u]=l))}if(typeof i<"u"&&typeof o[i]>"u"){var y=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(y)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],s=r;s;)i.push(s),n[s],s=n[s];return i.reverse(),i},find_path:function(n,r,i){var s=e.single_source_shortest_paths(n,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,i={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(DK);var PTe=DK.exports;(function(t){const e=gu,n=bTe,r=ETe,i=xTe,s=$Te,o=$a,a=ws,c=PTe;function l(y){return unescape(encodeURIComponent(y)).length}function u(y,w,b){const v=[];let C;for(;(C=y.exec(b))!==null;)v.push({data:C[0],index:C.index,mode:w,length:C[0].length});return v}function d(y){const w=u(o.NUMERIC,e.NUMERIC,y),b=u(o.ALPHANUMERIC,e.ALPHANUMERIC,y);let v,C;return a.isKanjiModeEnabled()?(v=u(o.BYTE,e.BYTE,y),C=u(o.KANJI,e.KANJI,y)):(v=u(o.BYTE_KANJI,e.BYTE,y),C=[]),w.concat(b,v,C).sort(function($,R){return $.index-R.index}).map(function($){return{data:$.data,mode:$.mode,length:$.length}})}function h(y,w){switch(w){case e.NUMERIC:return n.getBitsLength(y);case e.ALPHANUMERIC:return r.getBitsLength(y);case e.KANJI:return s.getBitsLength(y);case e.BYTE:return i.getBitsLength(y)}}function f(y){return y.reduce(function(w,b){const v=w.length-1>=0?w[w.length-1]:null;return v&&v.mode===b.mode?(w[w.length-1].data+=b.data,w):(w.push(b),w)},[])}function g(y){const w=[];for(let b=0;b<y.length;b++){const v=y[b];switch(v.mode){case e.NUMERIC:w.push([v,{data:v.data,mode:e.ALPHANUMERIC,length:v.length},{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.ALPHANUMERIC:w.push([v,{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.KANJI:w.push([v,{data:v.data,mode:e.BYTE,length:l(v.data)}]);break;case e.BYTE:w.push([{data:v.data,mode:e.BYTE,length:l(v.data)}])}}return w}function p(y,w){const b={},v={start:{}};let C=["start"];for(let A=0;A<y.length;A++){const $=y[A],R=[];for(let P=0;P<$.length;P++){const L=$[P],U=""+A+P;R.push(U),b[U]={node:L,lastCount:0},v[U]={};for(let D=0;D<C.length;D++){const j=C[D];b[j]&&b[j].node.mode===L.mode?(v[j][U]=h(b[j].lastCount+L.length,L.mode)-h(b[j].lastCount,L.mode),b[j].lastCount+=L.length):(b[j]&&(b[j].lastCount=L.length),v[j][U]=h(L.length,L.mode)+4+e.getCharCountIndicator(L.mode,w))}}C=R}for(let A=0;A<C.length;A++)v[C[A]].end=0;return{map:v,table:b}}function m(y,w){let b;const v=e.getBestModeForData(y);if(b=e.from(w,v),b!==e.BYTE&&b.bit<v.bit)throw new Error('"'+y+'" cannot be encoded with mode '+e.toString(b)+`.
 Suggested mode is: `+e.toString(v));switch(b===e.KANJI&&!a.isKanjiModeEnabled()&&(b=e.BYTE),b){case e.NUMERIC:return new n(y);case e.ALPHANUMERIC:return new r(y);case e.KANJI:return new s(y);case e.BYTE:return new i(y)}}t.fromArray=function(w){return w.reduce(function(b,v){return typeof v=="string"?b.push(m(v,null)):v.data&&b.push(m(v.data,v.mode)),b},[])},t.fromString=function(w,b){const v=d(w,a.isKanjiModeEnabled()),C=g(v),A=p(C,b),$=c.find_path(A.map,"start","end"),R=[];for(let P=1;P<$.length-1;P++)R.push(A.table[$[P]].node);return t.fromArray(f(R))},t.rawSplit=function(w){return t.fromArray(d(w,a.isKanjiModeEnabled()))}})(BK);const Y5=ws,P9=H5,OTe=cTe,TTe=lTe,NTe=xK,kTe=AK,O9=$K,T9=W5,RTe=dTe,J5=TK,MTe=kK,BTe=gu,N9=BK;function DTe(t,e){const n=t.size,r=kTe.getPositions(e);for(let i=0;i<r.length;i++){const s=r[i][0],o=r[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||n<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||n<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function LTe(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function jTe(t,e){const n=NTe.getPositions(e);for(let r=0;r<n.length;r++){const i=n[r][0],s=n[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function UTe(t,e){const n=t.size,r=J5.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+n-8-3,o=(r>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function k9(t,e,n){const r=t.size,i=MTe.getEncodedBits(e,n);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(r-15+s,8,o,!0),s<8?t.set(8,r-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(r-8,8,1,!0)}function FTe(t,e){const n=t.size;let r=-1,i=n-1,s=7,o=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-c,l),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function zTe(t,e,n){const r=new OTe;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),BTe.getCharCountIndicator(c.mode,t)),c.write(r)});const i=Y5.getSymbolTotalCodewords(t),s=T9.getTotalCodewordsCount(t,e),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return qTe(r,t,e)}function qTe(t,e,n){const r=Y5.getSymbolTotalCodewords(e),i=T9.getTotalCodewordsCount(e,n),s=r-i,o=T9.getBlocksCount(e,n),a=r%o,c=o-a,l=Math.floor(r/o),u=Math.floor(s/o),d=u+1,h=l-u,f=new RTe(h);let g=0;const p=new Array(o),m=new Array(o);let y=0;const w=new Uint8Array(t.buffer);for(let $=0;$<o;$++){const R=$<c?u:d;p[$]=w.slice(g,g+R),m[$]=f.encode(p[$]),g+=R,y=Math.max(y,R)}const b=new Uint8Array(r);let v=0,C,A;for(C=0;C<y;C++)for(A=0;A<o;A++)C<p[A].length&&(b[v++]=p[A][C]);for(C=0;C<h;C++)for(A=0;A<o;A++)b[v++]=m[A][C];return b}function HTe(t,e,n,r){let i;if(Array.isArray(t))i=N9.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=N9.rawSplit(t);l=J5.getBestVersionForData(u,n)}i=N9.fromString(t,l||40)}else throw new Error("Invalid data");const s=J5.getBestVersionForData(i,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=zTe(e,n,i),a=Y5.getSymbolSize(e),c=new TTe(a);return DTe(c,e),LTe(c),jTe(c,e),k9(c,n,0),e>=7&&UTe(c,e),FTe(c,o),isNaN(r)&&(r=O9.getBestMask(c,k9.bind(null,c,n))),O9.applyMask(r,c),k9(c,n,r),{modules:c,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}_K.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=P9.M,i,s;return typeof n<"u"&&(r=P9.from(n.errorCorrectionLevel,P9.M),i=J5.from(n.version),s=O9.from(n.maskPattern),n.toSJISFunc&&Y5.setToSJISFunction(n.toSJISFunc)),HTe(e,i,r,s)};var LK={},R9={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},t.getImageWidth=function(r,i){const s=t.getScale(r,i);return Math.floor((r+i.margin*2)*s)},t.qrToImageData=function(r,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),u=s.margin*c,d=[s.color.light,s.color.dark];for(let h=0;h<l;h++)for(let f=0;f<l;f++){let g=(h*l+f)*4,p=s.color.light;if(h>=u&&f>=u&&h<l-u&&f<l-u){const m=Math.floor((h-u)/c),y=Math.floor((f-u)/c);p=d[a[m*o+y]?1:0]}r[g++]=p.r,r[g++]=p.g,r[g++]=p.b,r[g]=p.a}}})(R9),function(t){const e=R9;function n(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=r()),c=e.getOptions(c);const u=e.getImageWidth(s.modules.size,c),d=l.getContext("2d"),h=d.createImageData(u,u);return e.qrToImageData(h.data,s,c),n(d,l,u),d.putImageData(h,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),u=c.type||"image/png",d=c.rendererOpts||{};return l.toDataURL(u,d.quality)}}(LK);var jK={};const WTe=R9;function UK(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function M9(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function KTe(t,e,n){let r="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(r+=s?M9("M",c+n,.5+l+n):M9("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(r+=M9("h",o),o=0)):i++}return r}jK.render=function(e,n,r){const i=WTe.getOptions(n),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+UK(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+UK(i.color.dark,"stroke")+' d="'+KTe(o,s,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,h),h};const VTe=oTe,B9=_K,FK=LK,GTe=jK;function D9(t,e,n,r,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!VTe())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(c,l){try{const u=B9.create(n,r);c(t(u,e,r))}catch(u){l(u)}})}try{const c=B9.create(n,r);i(null,t(c,e,r))}catch(c){i(c)}}Ay.create=B9.create,Ay.toCanvas=D9.bind(null,FK.render),Ay.toDataURL=D9.bind(null,FK.renderToDataURL),Ay.toString=D9.bind(null,function(t,e,n){return GTe.render(t,n)});const ZTe=.1,zK=2.5,jc=7;function L9(t,e,n){return t===e?!1:(t-e<0?e-t:t-e)<=n+ZTe}function YTe(t,e){const n=Array.prototype.slice.call(Ay.create(t,{errorCorrectionLevel:e}).modules.data,0),r=Math.sqrt(n.length);return n.reduce((i,s,o)=>(o%r===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const JTe={generate({uri:t,size:e,logoSize:n,dotColor:r="#141414"}){const i="transparent",o=[],a=YTe(t,"Q"),c=e/a.length,l=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];l.forEach(({x:p,y:m})=>{const y=(a.length-jc)*c*p,w=(a.length-jc)*c*m,b=.45;for(let v=0;v<l.length;v+=1){const C=c*(jc-v*2);o.push(Se`
            <rect
              fill=${v===2?r:i}
              width=${v===0?C-5:C}
              rx= ${v===0?(C-5)*b:C*b}
              ry= ${v===0?(C-5)*b:C*b}
              stroke=${r}
              stroke-width=${v===0?5:0}
              height=${v===0?C-5:C}
              x= ${v===0?w+c*v+5/2:w+c*v}
              y= ${v===0?y+c*v+5/2:y+c*v}
            />
          `)}});const u=Math.floor((n+25)/c),d=a.length/2-u/2,h=a.length/2+u/2-1,f=[];a.forEach((p,m)=>{p.forEach((y,w)=>{if(a[m][w]&&!(m<jc&&w<jc||m>a.length-(jc+1)&&w<jc||m<jc&&w>a.length-(jc+1))&&!(m>d&&m<h&&w>d&&w<h)){const b=m*c+c/2,v=w*c+c/2;f.push([b,v])}})});const g={};return f.forEach(([p,m])=>{var y;g[p]?(y=g[p])==null||y.push(m):g[p]=[m]}),Object.entries(g).map(([p,m])=>{const y=m.filter(w=>m.every(b=>!L9(w,b,c)));return[Number(p),y]}).forEach(([p,m])=>{m.forEach(y=>{o.push(Se`<circle cx=${p} cy=${y} fill=${r} r=${c/zK} />`)})}),Object.entries(g).filter(([p,m])=>m.length>1).map(([p,m])=>{const y=m.filter(w=>m.some(b=>L9(w,b,c)));return[Number(p),y]}).map(([p,m])=>{m.sort((w,b)=>w<b?-1:1);const y=[];for(const w of m){const b=y.find(v=>v.some(C=>L9(w,C,c)));b?b.push(w):y.push([w])}return[p,y.map(w=>[w[0],w[w.length-1]])]}).forEach(([p,m])=>{m.forEach(([y,w])=>{o.push(Se`
              <line
                x1=${p}
                x2=${p}
                y1=${y}
                y2=${w}
                stroke=${r}
                stroke-width=${c/(zK/2)}
                stroke-linecap="round"
              />
            `)})}),o}},QTe=qe`
  :host {
    position: relative;
    user-select: none;
    display: block;
    overflow: hidden;
    aspect-ratio: 1 / 1;
    width: var(--local-size);
  }

  :host([data-theme='dark']) {
    border-radius: clamp(0px, var(--wui-border-radius-l), 40px);
    background-color: var(--wui-color-inverse-100);
    padding: var(--wui-spacing-l);
  }

  :host([data-theme='light']) {
    box-shadow: 0 0 0 1px var(--wui-color-bg-125);
    background-color: var(--wui-color-bg-125);
  }

  :host([data-clear='true']) > wui-icon {
    display: none;
  }

  svg:first-child,
  wui-image,
  wui-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateY(-50%) translateX(-50%);
  }

  wui-image {
    width: 25%;
    height: 25%;
    border-radius: var(--wui-border-radius-xs);
  }

  wui-icon {
    width: 100%;
    height: 100%;
    color: var(--local-icon-color) !important;
    transform: translateY(-50%) translateX(-50%) scale(0.25);
  }
`;var Uc=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const XTe="#3396ff";let No=class extends Be{constructor(){super(...arguments),this.uri="",this.size=0,this.theme="dark",this.imageSrc=void 0,this.alt=void 0,this.arenaClear=void 0,this.farcaster=void 0}render(){return this.dataset.theme=this.theme,this.dataset.clear=String(this.arenaClear),this.style.cssText=`
     --local-size: ${this.size}px;
     --local-icon-color: ${this.color??XTe}
    `,Z`${this.templateVisual()} ${this.templateSvg()}`}templateSvg(){const e=this.theme==="light"?this.size:this.size-32;return Se`
      <svg height=${e} width=${e}>
        ${JTe.generate({uri:this.uri,size:e,logoSize:this.arenaClear?0:e/4,dotColor:this.color})}
      </svg>
    `}templateVisual(){return this.imageSrc?Z`<wui-image src=${this.imageSrc} alt=${this.alt??"logo"}></wui-image>`:this.farcaster?Z`<wui-icon
        class="farcaster"
        size="inherit"
        color="inherit"
        name="farcaster"
      ></wui-icon>`:Z`<wui-icon size="inherit" color="inherit" name="walletConnect"></wui-icon>`}};No.styles=[St,QTe],Uc([Q()],No.prototype,"uri",void 0),Uc([Q({type:Number})],No.prototype,"size",void 0),Uc([Q()],No.prototype,"theme",void 0),Uc([Q()],No.prototype,"imageSrc",void 0),Uc([Q()],No.prototype,"alt",void 0),Uc([Q()],No.prototype,"color",void 0),Uc([Q({type:Boolean})],No.prototype,"arenaClear",void 0),Uc([Q({type:Boolean})],No.prototype,"farcaster",void 0),No=Uc([ke("wui-qr-code")],No);const eNe=qe`
  :host {
    display: block;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
    background: linear-gradient(
      120deg,
      var(--wui-color-bg-200) 5%,
      var(--wui-color-bg-200) 48%,
      var(--wui-color-bg-300) 55%,
      var(--wui-color-bg-300) 60%,
      var(--wui-color-bg-300) calc(60% + 10px),
      var(--wui-color-bg-200) calc(60% + 12px),
      var(--wui-color-bg-200) 100%
    );
    background-size: 250%;
    animation: shimmer 3s linear infinite reverse;
  }

  :host([variant='light']) {
    background: linear-gradient(
      120deg,
      var(--wui-color-bg-150) 5%,
      var(--wui-color-bg-150) 48%,
      var(--wui-color-bg-200) 55%,
      var(--wui-color-bg-200) 60%,
      var(--wui-color-bg-200) calc(60% + 10px),
      var(--wui-color-bg-150) calc(60% + 12px),
      var(--wui-color-bg-150) 100%
    );
    background-size: 250%;
  }

  @keyframes shimmer {
    from {
      background-position: -250% 0;
    }
    to {
      background-position: 250% 0;
    }
  }
`;var Oy=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Eh=class extends Be{constructor(){super(...arguments),this.width="",this.height="",this.borderRadius="m",this.variant="default"}render(){return this.style.cssText=`
      width: ${this.width};
      height: ${this.height};
      border-radius: ${`clamp(0px,var(--wui-border-radius-${this.borderRadius}), 40px)`};
    `,Z`<slot></slot>`}};Eh.styles=[eNe],Oy([Q()],Eh.prototype,"width",void 0),Oy([Q()],Eh.prototype,"height",void 0),Oy([Q()],Eh.prototype,"borderRadius",void 0),Oy([Q()],Eh.prototype,"variant",void 0),Eh=Oy([ke("wui-shimmer")],Eh);const tNe="https://reown.com",nNe=qe`
  .reown-logo {
    height: var(--wui-spacing-xxl);
  }

  a {
    text-decoration: none;
    cursor: pointer;
  }

  a:hover {
    opacity: 0.9;
  }
`;var rNe=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let j9=class extends Be{render(){return Z`
      <a
        data-testid="ux-branding-reown"
        href=${tNe}
        rel="noreferrer"
        target="_blank"
        style="text-decoration: none;"
      >
        <wui-flex
          justifyContent="center"
          alignItems="center"
          gap="xs"
          .padding=${["0","0","l","0"]}
        >
          <wui-text variant="small-500" color="fg-100"> UX by </wui-text>
          <wui-icon name="reown" size="xxxl" class="reown-logo"></wui-icon>
        </wui-flex>
      </a>
    `}};j9.styles=[St,Nr,nNe],j9=rNe([ke("wui-ux-by-reown")],j9);const iNe=qe`
  @keyframes fadein {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  wui-shimmer {
    width: 100%;
    aspect-ratio: 1 / 1;
    border-radius: clamp(0px, var(--wui-border-radius-l), 40px) !important;
  }

  wui-qr-code {
    opacity: 0;
    animation-duration: 200ms;
    animation-timing-function: ease;
    animation-name: fadein;
    animation-fill-mode: forwards;
  }
`;var sNe=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let U9=class extends zr{constructor(){var e;super(),this.forceUpdate=()=>{this.requestUpdate()},window.addEventListener("resize",this.forceUpdate),it.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:((e=this.wallet)==null?void 0:e.name)??"WalletConnect",platform:"qrcode"}})}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this.unsubscribe)==null||e.forEach(n=>n()),window.removeEventListener("resize",this.forceUpdate)}render(){return this.onRenderProxy(),Z`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["0","xl","xl","xl"]}
        gap="xl"
      >
        <wui-shimmer borderRadius="l" width="100%"> ${this.qrCodeTemplate()} </wui-shimmer>

        <wui-text variant="paragraph-500" color="fg-100">
          Scan this QR Code with your phone
        </wui-text>
        ${this.copyTemplate()}
      </wui-flex>
      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}onRenderProxy(){!this.ready&&this.uri&&(this.timeout=setTimeout(()=>{this.ready=!0},200))}qrCodeTemplate(){if(!this.uri||!this.ready)return null;const e=this.getBoundingClientRect().width-40,n=this.wallet?this.wallet.name:void 0;return xe.setWcLinking(void 0),xe.setRecentWallet(this.wallet),Z` <wui-qr-code
      size=${e}
      theme=${Ar.state.themeMode}
      uri=${this.uri}
      imageSrc=${He(Dn.getWalletImage(this.wallet))}
      color=${He(Ar.state.themeVariables["--w3m-qr-color"])}
      alt=${He(n)}
      data-testid="wui-qr-code"
    ></wui-qr-code>`}copyTemplate(){const e=!this.uri||!this.ready;return Z`<wui-link
      .disabled=${e}
      @click=${this.onCopyUri}
      color="fg-200"
      data-testid="copy-wc2-uri"
    >
      <wui-icon size="xs" color="fg-200" slot="iconLeft" name="copy"></wui-icon>
      Copy link
    </wui-link>`}};U9.styles=iNe,U9=sNe([ke("w3m-connecting-wc-qrcode")],U9);var oNe=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let qK=class extends Be{constructor(){var e;if(super(),this.wallet=(e=we.state.data)==null?void 0:e.wallet,!this.wallet)throw new Error("w3m-connecting-wc-unsupported: No wallet provided");it.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"browser"}})}render(){return Z`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["3xl","xl","xl","xl"]}
        gap="xl"
      >
        <wui-wallet-image
          size="lg"
          imageSrc=${He(Dn.getWalletImage(this.wallet))}
        ></wui-wallet-image>

        <wui-text variant="paragraph-500" color="fg-100">Not Detected</wui-text>
      </wui-flex>

      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}};qK=oNe([ke("w3m-connecting-wc-unsupported")],qK);var HK=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let F9=class extends zr{constructor(){if(super(),this.isLoading=!0,!this.wallet)throw new Error("w3m-connecting-wc-web: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.secondaryBtnLabel="Open",this.secondaryLabel=Rt.CONNECT_LABELS.MOBILE,this.secondaryBtnIcon="externalLink",this.updateLoadingState(),this.unsubscribe.push(xe.subscribeKey("wcUri",()=>{this.updateLoadingState()})),it.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"web"}})}updateLoadingState(){this.isLoading=!this.uri}onConnectProxy(){var e;if((e=this.wallet)!=null&&e.webapp_link&&this.uri)try{this.error=!1;const{webapp_link:n,name:r}=this.wallet,{redirect:i,href:s}=ye.formatUniversalUrl(n,this.uri);xe.setWcLinking({name:r,href:s}),xe.setRecentWallet(this.wallet),ye.openHref(i,"_blank")}catch{this.error=!0}}};HK([$e()],F9.prototype,"isLoading",void 0),F9=HK([ke("w3m-connecting-wc-web")],F9);var Ty=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let B0=class extends Be{constructor(){var e;super(),this.wallet=(e=we.state.data)==null?void 0:e.wallet,this.unsubscribe=[],this.platform=void 0,this.platforms=[],this.isSiwxEnabled=!!le.state.siwx,this.remoteFeatures=le.state.remoteFeatures,this.determinePlatforms(),this.initializeConnection(),this.unsubscribe.push(le.subscribeKey("remoteFeatures",n=>this.remoteFeatures=n))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){return Z`
      ${this.headerTemplate()}
      <div>${this.platformTemplate()}</div>
      ${this.reownBrandingTemplate()}
    `}reownBrandingTemplate(){var e;return(e=this.remoteFeatures)!=null&&e.reownBranding?Z`<wui-ux-by-reown></wui-ux-by-reown>`:null}async initializeConnection(e=!1){if(!(this.platform==="browser"||le.state.manualWCControl&&!e))try{const{wcPairingExpiry:n,status:r}=xe.state;(e||le.state.enableEmbedded||ye.isPairingExpired(n)||r==="connecting")&&(await xe.connectWalletConnect(),this.isSiwxEnabled||Ot.close())}catch(n){it.sendEvent({type:"track",event:"CONNECT_ERROR",properties:{message:(n==null?void 0:n.message)??"Unknown"}}),xe.setWcError(!0),En.showError(n.message??"Connection error"),xe.resetWcConnection(),we.goBack()}}determinePlatforms(){if(!this.wallet){this.platforms.push("qrcode"),this.platform="qrcode";return}if(this.platform)return;const{mobile_link:e,desktop_link:n,webapp_link:r,injected:i,rdns:s}=this.wallet,o=i==null?void 0:i.map(({injected_id:g})=>g).filter(Boolean),a=[...s?[s]:o??[]],c=le.state.isUniversalProvider?!1:a.length,l=e,u=r,d=xe.checkInstalled(a),h=c&&d,f=n&&!ye.isMobile();h&&!W.state.noAdapters&&this.platforms.push("browser"),l&&this.platforms.push(ye.isMobile()?"mobile":"qrcode"),u&&this.platforms.push("web"),f&&this.platforms.push("desktop"),!h&&c&&!W.state.noAdapters&&this.platforms.push("unsupported"),this.platform=this.platforms[0]}platformTemplate(){switch(this.platform){case"browser":return Z`<w3m-connecting-wc-browser></w3m-connecting-wc-browser>`;case"web":return Z`<w3m-connecting-wc-web></w3m-connecting-wc-web>`;case"desktop":return Z`
          <w3m-connecting-wc-desktop .onRetry=${()=>this.initializeConnection(!0)}>
          </w3m-connecting-wc-desktop>
        `;case"mobile":return Z`
          <w3m-connecting-wc-mobile isMobile .onRetry=${()=>this.initializeConnection(!0)}>
          </w3m-connecting-wc-mobile>
        `;case"qrcode":return Z`<w3m-connecting-wc-qrcode></w3m-connecting-wc-qrcode>`;default:return Z`<w3m-connecting-wc-unsupported></w3m-connecting-wc-unsupported>`}}headerTemplate(){return this.platforms.length>1?Z`
      <w3m-connecting-header
        .platforms=${this.platforms}
        .onSelectPlatfrom=${this.onSelectPlatform.bind(this)}
      >
      </w3m-connecting-header>
    `:null}async onSelectPlatform(e){var r;const n=(r=this.shadowRoot)==null?void 0:r.querySelector("div");n&&(await n.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.platform=e,n.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}};Ty([$e()],B0.prototype,"platform",void 0),Ty([$e()],B0.prototype,"platforms",void 0),Ty([$e()],B0.prototype,"isSiwxEnabled",void 0),Ty([$e()],B0.prototype,"remoteFeatures",void 0),B0=Ty([ke("w3m-connecting-wc-view")],B0);var WK=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Q5=class extends Be{constructor(){super(...arguments),this.isMobile=ye.isMobile()}render(){if(this.isMobile){const{featured:e,recommended:n}=be.state,{customWallets:r}=le.state,i=Re.getRecentWallets(),s=e.length||n.length||(r==null?void 0:r.length)||i.length;return Z`<wui-flex
        flexDirection="column"
        gap="xs"
        .margin=${["3xs","s","s","s"]}
      >
        ${s?Z`<w3m-connector-list></w3m-connector-list>`:null}
        <w3m-all-wallets-widget></w3m-all-wallets-widget>
      </wui-flex>`}return Z`<wui-flex flexDirection="column" .padding=${["0","0","l","0"]}>
      <w3m-connecting-wc-view></w3m-connecting-wc-view>
      <wui-flex flexDirection="column" .padding=${["0","m","0","m"]}>
        <w3m-all-wallets-widget></w3m-all-wallets-widget> </wui-flex
    ></wui-flex>`}};WK([$e()],Q5.prototype,"isMobile",void 0),Q5=WK([ke("w3m-connecting-wc-basic-view")],Q5);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const z9=()=>new aNe;class aNe{}const q9=new WeakMap,H9=f9(class extends hK{render(t){return Sn}update(t,[e]){var r;const n=e!==this.G;return n&&this.G!==void 0&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.G=e,this.ht=(r=t.options)==null?void 0:r.host,this.rt(this.ct=t.element)),Sn}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let n=q9.get(e);n===void 0&&(n=new WeakMap,q9.set(e,n)),n.get(this.G)!==void 0&&this.G.call(this.ht,void 0),n.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){var t,e;return typeof this.G=="function"?(t=q9.get(this.ht??globalThis))==null?void 0:t.get(this.G):(e=this.G)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}}),cNe=qe`
  :host {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  label {
    position: relative;
    display: inline-block;
    width: 32px;
    height: 22px;
  }

  input {
    width: 0;
    height: 0;
    opacity: 0;
  }

  span {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--wui-color-blue-100);
    border-width: 1px;
    border-style: solid;
    border-color: var(--wui-color-gray-glass-002);
    border-radius: 999px;
    transition:
      background-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      border-color var(--wui-ease-inout-power-1) var(--wui-duration-md);
    will-change: background-color, border-color;
  }

  span:before {
    position: absolute;
    content: '';
    height: 16px;
    width: 16px;
    left: 3px;
    top: 2px;
    background-color: var(--wui-color-inverse-100);
    transition: transform var(--wui-ease-inout-power-1) var(--wui-duration-lg);
    will-change: transform;
    border-radius: 50%;
  }

  input:checked + span {
    border-color: var(--wui-color-gray-glass-005);
    background-color: var(--wui-color-blue-100);
  }

  input:not(:checked) + span {
    background-color: var(--wui-color-gray-glass-010);
  }

  input:checked + span:before {
    transform: translateX(calc(100% - 7px));
  }
`;var KK=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let X5=class extends Be{constructor(){super(...arguments),this.inputElementRef=z9(),this.checked=void 0}render(){return Z`
      <label>
        <input
          ${H9(this.inputElementRef)}
          type="checkbox"
          ?checked=${He(this.checked)}
          @change=${this.dispatchChangeEvent.bind(this)}
        />
        <span></span>
      </label>
    `}dispatchChangeEvent(){var e;this.dispatchEvent(new CustomEvent("switchChange",{detail:(e=this.inputElementRef.value)==null?void 0:e.checked,bubbles:!0,composed:!0}))}};X5.styles=[St,Nr,fy,cNe],KK([Q({type:Boolean})],X5.prototype,"checked",void 0),X5=KK([ke("wui-switch")],X5);const lNe=qe`
  :host {
    height: 100%;
  }

  button {
    display: flex;
    align-items: center;
    justify-content: center;
    column-gap: var(--wui-spacing-1xs);
    padding: var(--wui-spacing-xs) var(--wui-spacing-s);
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    transition: background-color var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: background-color;
    cursor: pointer;
  }

  wui-switch {
    pointer-events: none;
  }
`;var VK=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let e3=class extends Be{constructor(){super(...arguments),this.checked=void 0}render(){return Z`
      <button>
        <wui-icon size="xl" name="walletConnectBrown"></wui-icon>
        <wui-switch ?checked=${He(this.checked)}></wui-switch>
      </button>
    `}};e3.styles=[St,Nr,lNe],VK([Q({type:Boolean})],e3.prototype,"checked",void 0),e3=VK([ke("wui-certified-switch")],e3);const uNe=qe`
  button {
    background-color: var(--wui-color-fg-300);
    border-radius: var(--wui-border-radius-4xs);
    width: 16px;
    height: 16px;
  }

  button:disabled {
    background-color: var(--wui-color-bg-300);
  }

  wui-icon {
    color: var(--wui-color-bg-200) !important;
  }

  button:focus-visible {
    background-color: var(--wui-color-fg-250);
    border: 1px solid var(--wui-color-accent-100);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-fg-250);
    }

    button:active:enabled {
      background-color: var(--wui-color-fg-225);
    }
  }
`;var GK=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let t3=class extends Be{constructor(){super(...arguments),this.icon="copy"}render(){return Z`
      <button>
        <wui-icon color="inherit" size="xxs" name=${this.icon}></wui-icon>
      </button>
    `}};t3.styles=[St,Nr,uNe],GK([Q()],t3.prototype,"icon",void 0),t3=GK([ke("wui-input-element")],t3);const dNe=qe`
  :host {
    position: relative;
    width: 100%;
    display: inline-block;
    color: var(--wui-color-fg-275);
  }

  input {
    width: 100%;
    border-radius: var(--wui-border-radius-xs);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    background: var(--wui-color-gray-glass-002);
    font-size: var(--wui-font-size-paragraph);
    letter-spacing: var(--wui-letter-spacing-paragraph);
    color: var(--wui-color-fg-100);
    transition:
      background-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      border-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      box-shadow var(--wui-ease-inout-power-1) var(--wui-duration-md);
    will-change: background-color, border-color, box-shadow;
    caret-color: var(--wui-color-accent-100);
  }

  input:disabled {
    cursor: not-allowed;
    border: 1px solid var(--wui-color-gray-glass-010);
  }

  input:disabled::placeholder,
  input:disabled + wui-icon {
    color: var(--wui-color-fg-300);
  }

  input::placeholder {
    color: var(--wui-color-fg-275);
  }

  input:focus:enabled {
    background-color: var(--wui-color-gray-glass-005);
    -webkit-box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0px 0px 0px 4px var(--wui-box-shadow-blue);
    -moz-box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0px 0px 0px 4px var(--wui-box-shadow-blue);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0px 0px 0px 4px var(--wui-box-shadow-blue);
  }

  input:hover:enabled {
    background-color: var(--wui-color-gray-glass-005);
  }

  wui-icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
  }

  .wui-size-sm {
    padding: 9px var(--wui-spacing-m) 10px var(--wui-spacing-s);
  }

  wui-icon + .wui-size-sm {
    padding: 9px var(--wui-spacing-m) 10px 36px;
  }

  wui-icon[data-input='sm'] {
    left: var(--wui-spacing-s);
  }

  .wui-size-md {
    padding: 15px var(--wui-spacing-m) var(--wui-spacing-l) var(--wui-spacing-m);
  }

  wui-icon + .wui-size-md,
  wui-loading-spinner + .wui-size-md {
    padding: 10.5px var(--wui-spacing-3xl) 10.5px var(--wui-spacing-3xl);
  }

  wui-icon[data-input='md'] {
    left: var(--wui-spacing-l);
  }

  .wui-size-lg {
    padding: var(--wui-spacing-s) var(--wui-spacing-s) var(--wui-spacing-s) var(--wui-spacing-l);
    letter-spacing: var(--wui-letter-spacing-medium-title);
    font-size: var(--wui-font-size-medium-title);
    font-weight: var(--wui-font-weight-light);
    line-height: 130%;
    color: var(--wui-color-fg-100);
    height: 64px;
  }

  .wui-padding-right-xs {
    padding-right: var(--wui-spacing-xs);
  }

  .wui-padding-right-s {
    padding-right: var(--wui-spacing-s);
  }

  .wui-padding-right-m {
    padding-right: var(--wui-spacing-m);
  }

  .wui-padding-right-l {
    padding-right: var(--wui-spacing-l);
  }

  .wui-padding-right-xl {
    padding-right: var(--wui-spacing-xl);
  }

  .wui-padding-right-2xl {
    padding-right: var(--wui-spacing-2xl);
  }

  .wui-padding-right-3xl {
    padding-right: var(--wui-spacing-3xl);
  }

  .wui-padding-right-4xl {
    padding-right: var(--wui-spacing-4xl);
  }

  .wui-padding-right-5xl {
    padding-right: var(--wui-spacing-5xl);
  }

  wui-icon + .wui-size-lg,
  wui-loading-spinner + .wui-size-lg {
    padding-left: 50px;
  }

  wui-icon[data-input='lg'] {
    left: var(--wui-spacing-l);
  }

  .wui-size-mdl {
    padding: 17.25px var(--wui-spacing-m) 17.25px var(--wui-spacing-m);
  }
  wui-icon + .wui-size-mdl,
  wui-loading-spinner + .wui-size-mdl {
    padding: 17.25px var(--wui-spacing-3xl) 17.25px 40px;
  }
  wui-icon[data-input='mdl'] {
    left: var(--wui-spacing-m);
  }

  input:placeholder-shown ~ ::slotted(wui-input-element),
  input:placeholder-shown ~ ::slotted(wui-icon) {
    opacity: 0;
    pointer-events: none;
  }

  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type='number'] {
    -moz-appearance: textfield;
  }

  ::slotted(wui-input-element),
  ::slotted(wui-icon) {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
  }

  ::slotted(wui-input-element) {
    right: var(--wui-spacing-m);
  }

  ::slotted(wui-icon) {
    right: 0px;
  }
`;var Pa=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Js=class extends Be{constructor(){super(...arguments),this.inputElementRef=z9(),this.size="md",this.disabled=!1,this.placeholder="",this.type="text",this.value=""}render(){const e=`wui-padding-right-${this.inputRightPadding}`,r={[`wui-size-${this.size}`]:!0,[e]:!!this.inputRightPadding};return Z`${this.templateIcon()}
      <input
        data-testid="wui-input-text"
        ${H9(this.inputElementRef)}
        class=${mK(r)}
        type=${this.type}
        enterkeyhint=${He(this.enterKeyHint)}
        ?disabled=${this.disabled}
        placeholder=${this.placeholder}
        @input=${this.dispatchInputChangeEvent.bind(this)}
        .value=${this.value||""}
        tabindex=${He(this.tabIdx)}
      />
      <slot></slot>`}templateIcon(){return this.icon?Z`<wui-icon
        data-input=${this.size}
        size=${this.size}
        color="inherit"
        name=${this.icon}
      ></wui-icon>`:null}dispatchInputChangeEvent(){var e;this.dispatchEvent(new CustomEvent("inputChange",{detail:(e=this.inputElementRef.value)==null?void 0:e.value,bubbles:!0,composed:!0}))}};Js.styles=[St,Nr,dNe],Pa([Q()],Js.prototype,"size",void 0),Pa([Q()],Js.prototype,"icon",void 0),Pa([Q({type:Boolean})],Js.prototype,"disabled",void 0),Pa([Q()],Js.prototype,"placeholder",void 0),Pa([Q()],Js.prototype,"type",void 0),Pa([Q()],Js.prototype,"keyHint",void 0),Pa([Q()],Js.prototype,"value",void 0),Pa([Q()],Js.prototype,"inputRightPadding",void 0),Pa([Q()],Js.prototype,"tabIdx",void 0),Js=Pa([ke("wui-input-text")],Js);const hNe=qe`
  :host {
    position: relative;
    display: inline-block;
    width: 100%;
  }
`;var fNe=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let W9=class extends Be{constructor(){super(...arguments),this.inputComponentRef=z9()}render(){return Z`
      <wui-input-text
        ${H9(this.inputComponentRef)}
        placeholder="Search wallet"
        icon="search"
        type="search"
        enterKeyHint="search"
        size="sm"
      >
        <wui-input-element @click=${this.clearValue} icon="close"></wui-input-element>
      </wui-input-text>
    `}clearValue(){const e=this.inputComponentRef.value,n=e==null?void 0:e.inputElementRef.value;n&&(n.value="",n.focus(),n.dispatchEvent(new Event("input")))}};W9.styles=[St,hNe],W9=fNe([ke("wui-search-bar")],W9);const pNe=Se`<svg  viewBox="0 0 48 54" fill="none">
  <path
    d="M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z"
  />
</svg>`,gNe=qe`
  :host {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 104px;
    row-gap: var(--wui-spacing-xs);
    padding: var(--wui-spacing-xs) 10px;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: clamp(0px, var(--wui-border-radius-xs), 20px);
    position: relative;
  }

  wui-shimmer[data-type='network'] {
    border: none;
    -webkit-clip-path: var(--wui-path-network);
    clip-path: var(--wui-path-network);
  }

  svg {
    position: absolute;
    width: 48px;
    height: 54px;
    z-index: 1;
  }

  svg > path {
    stroke: var(--wui-color-gray-glass-010);
    stroke-width: 1px;
  }

  @media (max-width: 350px) {
    :host {
      width: 100%;
    }
  }
`;var ZK=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let n3=class extends Be{constructor(){super(...arguments),this.type="wallet"}render(){return Z`
      ${this.shimmerTemplate()}
      <wui-shimmer width="56px" height="20px" borderRadius="xs"></wui-shimmer>
    `}shimmerTemplate(){return this.type==="network"?Z` <wui-shimmer
          data-type=${this.type}
          width="48px"
          height="54px"
          borderRadius="xs"
        ></wui-shimmer>
        ${pNe}`:Z`<wui-shimmer width="56px" height="56px" borderRadius="xs"></wui-shimmer>`}};n3.styles=[St,Nr,gNe],ZK([Q()],n3.prototype,"type",void 0),n3=ZK([ke("wui-card-select-loader")],n3);const mNe=qe`
  :host {
    display: grid;
    width: inherit;
    height: inherit;
  }
`;var Qs=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Ri=class extends Be{render(){return this.style.cssText=`
      grid-template-rows: ${this.gridTemplateRows};
      grid-template-columns: ${this.gridTemplateColumns};
      justify-items: ${this.justifyItems};
      align-items: ${this.alignItems};
      justify-content: ${this.justifyContent};
      align-content: ${this.alignContent};
      column-gap: ${this.columnGap&&`var(--wui-spacing-${this.columnGap})`};
      row-gap: ${this.rowGap&&`var(--wui-spacing-${this.rowGap})`};
      gap: ${this.gap&&`var(--wui-spacing-${this.gap})`};
      padding-top: ${this.padding&&ur.getSpacingStyles(this.padding,0)};
      padding-right: ${this.padding&&ur.getSpacingStyles(this.padding,1)};
      padding-bottom: ${this.padding&&ur.getSpacingStyles(this.padding,2)};
      padding-left: ${this.padding&&ur.getSpacingStyles(this.padding,3)};
      margin-top: ${this.margin&&ur.getSpacingStyles(this.margin,0)};
      margin-right: ${this.margin&&ur.getSpacingStyles(this.margin,1)};
      margin-bottom: ${this.margin&&ur.getSpacingStyles(this.margin,2)};
      margin-left: ${this.margin&&ur.getSpacingStyles(this.margin,3)};
    `,Z`<slot></slot>`}};Ri.styles=[St,mNe],Qs([Q()],Ri.prototype,"gridTemplateRows",void 0),Qs([Q()],Ri.prototype,"gridTemplateColumns",void 0),Qs([Q()],Ri.prototype,"justifyItems",void 0),Qs([Q()],Ri.prototype,"alignItems",void 0),Qs([Q()],Ri.prototype,"justifyContent",void 0),Qs([Q()],Ri.prototype,"alignContent",void 0),Qs([Q()],Ri.prototype,"columnGap",void 0),Qs([Q()],Ri.prototype,"rowGap",void 0),Qs([Q()],Ri.prototype,"gap",void 0),Qs([Q()],Ri.prototype,"padding",void 0),Qs([Q()],Ri.prototype,"margin",void 0),Ri=Qs([ke("wui-grid")],Ri);const yNe=qe`
  button {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    width: 104px;
    row-gap: var(--wui-spacing-xs);
    padding: var(--wui-spacing-s) var(--wui-spacing-0);
    background-color: var(--wui-color-gray-glass-002);
    border-radius: clamp(0px, var(--wui-border-radius-xs), 20px);
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border-radius;
    outline: none;
    border: none;
  }

  button > wui-flex > wui-text {
    color: var(--wui-color-fg-100);
    max-width: 86px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    justify-content: center;
  }

  button > wui-flex > wui-text.certified {
    max-width: 66px;
  }

  button:hover:enabled {
    background-color: var(--wui-color-gray-glass-005);
  }

  button:disabled > wui-flex > wui-text {
    color: var(--wui-color-gray-glass-015);
  }

  [data-selected='true'] {
    background-color: var(--wui-color-accent-glass-020);
  }

  @media (hover: hover) and (pointer: fine) {
    [data-selected='true']:hover:enabled {
      background-color: var(--wui-color-accent-glass-015);
    }
  }

  [data-selected='true']:active:enabled {
    background-color: var(--wui-color-accent-glass-010);
  }

  @media (max-width: 350px) {
    button {
      width: 100%;
    }
  }
`;var Ny=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Ch=class extends Be{constructor(){super(),this.observer=new IntersectionObserver(()=>{}),this.visible=!1,this.imageSrc=void 0,this.imageLoading=!1,this.wallet=void 0,this.observer=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting?(this.visible=!0,this.fetchImageSrc()):this.visible=!1})},{threshold:.01})}firstUpdated(){this.observer.observe(this)}disconnectedCallback(){this.observer.disconnect()}render(){var n,r;const e=((n=this.wallet)==null?void 0:n.badge_type)==="certified";return Z`
      <button>
        ${this.imageTemplate()}
        <wui-flex flexDirection="row" alignItems="center" justifyContent="center" gap="3xs">
          <wui-text
            variant="tiny-500"
            color="inherit"
            class=${He(e?"certified":void 0)}
            >${(r=this.wallet)==null?void 0:r.name}</wui-text
          >
          ${e?Z`<wui-icon size="sm" name="walletConnectBrown"></wui-icon>`:null}
        </wui-flex>
      </button>
    `}imageTemplate(){var e,n;return!this.visible&&!this.imageSrc||this.imageLoading?this.shimmerTemplate():Z`
      <wui-wallet-image
        size="md"
        imageSrc=${He(this.imageSrc)}
        name=${(e=this.wallet)==null?void 0:e.name}
        .installed=${(n=this.wallet)==null?void 0:n.installed}
        badgeSize="sm"
      >
      </wui-wallet-image>
    `}shimmerTemplate(){return Z`<wui-shimmer width="56px" height="56px" borderRadius="xs"></wui-shimmer>`}async fetchImageSrc(){this.wallet&&(this.imageSrc=Dn.getWalletImage(this.wallet),!this.imageSrc&&(this.imageLoading=!0,this.imageSrc=await Dn.fetchWalletImage(this.wallet.image_id),this.imageLoading=!1))}};Ch.styles=yNe,Ny([$e()],Ch.prototype,"visible",void 0),Ny([$e()],Ch.prototype,"imageSrc",void 0),Ny([$e()],Ch.prototype,"imageLoading",void 0),Ny([Q()],Ch.prototype,"wallet",void 0),Ch=Ny([ke("w3m-all-wallets-list-item")],Ch);const wNe=qe`
  wui-grid {
    max-height: clamp(360px, 400px, 80vh);
    overflow: scroll;
    scrollbar-width: none;
    grid-auto-rows: min-content;
    grid-template-columns: repeat(auto-fill, 104px);
  }

  @media (max-width: 350px) {
    wui-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  wui-grid[data-scroll='false'] {
    overflow: hidden;
  }

  wui-grid::-webkit-scrollbar {
    display: none;
  }

  wui-loading-spinner {
    padding-top: var(--wui-spacing-l);
    padding-bottom: var(--wui-spacing-l);
    justify-content: center;
    grid-column: 1 / span 4;
  }
`;var D0=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const YK="local-paginator";let mu=class extends Be{constructor(){super(),this.unsubscribe=[],this.paginationObserver=void 0,this.loading=!be.state.wallets.length,this.wallets=be.state.wallets,this.recommended=be.state.recommended,this.featured=be.state.featured,this.filteredWallets=be.state.filteredWallets,this.unsubscribe.push(be.subscribeKey("wallets",e=>this.wallets=e),be.subscribeKey("recommended",e=>this.recommended=e),be.subscribeKey("featured",e=>this.featured=e),be.subscribeKey("filteredWallets",e=>this.filteredWallets=e))}firstUpdated(){this.initialFetch(),this.createPaginationObserver()}disconnectedCallback(){var e;this.unsubscribe.forEach(n=>n()),(e=this.paginationObserver)==null||e.disconnect()}render(){return Z`
      <wui-grid
        data-scroll=${!this.loading}
        .padding=${["0","s","s","s"]}
        columnGap="xxs"
        rowGap="l"
        justifyContent="space-between"
      >
        ${this.loading?this.shimmerTemplate(16):this.walletsTemplate()}
        ${this.paginationLoaderTemplate()}
      </wui-grid>
    `}async initialFetch(){var n;this.loading=!0;const e=(n=this.shadowRoot)==null?void 0:n.querySelector("wui-grid");e&&(await be.fetchWalletsByPage({page:1}),await e.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.loading=!1,e.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}shimmerTemplate(e,n){return[...Array(e)].map(()=>Z`
        <wui-card-select-loader type="wallet" id=${He(n)}></wui-card-select-loader>
      `)}walletsTemplate(){var r;const e=((r=this.filteredWallets)==null?void 0:r.length)>0?ye.uniqueBy([...this.featured,...this.recommended,...this.filteredWallets],"id"):ye.uniqueBy([...this.featured,...this.recommended,...this.wallets],"id");return lh.markWalletsAsInstalled(e).map(i=>Z`
        <w3m-all-wallets-list-item
          @click=${()=>this.onConnectWallet(i)}
          .wallet=${i}
        ></w3m-all-wallets-list-item>
      `)}paginationLoaderTemplate(){const{wallets:e,recommended:n,featured:r,count:i}=be.state,s=window.innerWidth<352?3:4,o=e.length+n.length;let c=Math.ceil(o/s)*s-o+s;return c-=e.length?r.length%s:0,i===0&&r.length>0?null:i===0||[...r,...e,...n].length<i?this.shimmerTemplate(c,YK):null}createPaginationObserver(){var n;const e=(n=this.shadowRoot)==null?void 0:n.querySelector(`#${YK}`);e&&(this.paginationObserver=new IntersectionObserver(([r])=>{if(r!=null&&r.isIntersecting&&!this.loading){const{page:i,count:s,wallets:o}=be.state;o.length<s&&be.fetchWalletsByPage({page:i+1})}}),this.paginationObserver.observe(e))}onConnectWallet(e){me.selectWalletConnector(e)}};mu.styles=wNe,D0([$e()],mu.prototype,"loading",void 0),D0([$e()],mu.prototype,"wallets",void 0),D0([$e()],mu.prototype,"recommended",void 0),D0([$e()],mu.prototype,"featured",void 0),D0([$e()],mu.prototype,"filteredWallets",void 0),mu=D0([ke("w3m-all-wallets-list")],mu);const bNe=qe`
  wui-grid,
  wui-loading-spinner,
  wui-flex {
    height: 360px;
  }

  wui-grid {
    overflow: scroll;
    scrollbar-width: none;
    grid-auto-rows: min-content;
    grid-template-columns: repeat(auto-fill, 104px);
  }

  wui-grid[data-scroll='false'] {
    overflow: hidden;
  }

  wui-grid::-webkit-scrollbar {
    display: none;
  }

  wui-loading-spinner {
    justify-content: center;
    align-items: center;
  }

  @media (max-width: 350px) {
    wui-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
`;var r3=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let L0=class extends Be{constructor(){super(...arguments),this.prevQuery="",this.prevBadge=void 0,this.loading=!0,this.query=""}render(){return this.onSearch(),this.loading?Z`<wui-loading-spinner color="accent-100"></wui-loading-spinner>`:this.walletsTemplate()}async onSearch(){(this.query.trim()!==this.prevQuery.trim()||this.badge!==this.prevBadge)&&(this.prevQuery=this.query,this.prevBadge=this.badge,this.loading=!0,await be.searchWallet({search:this.query,badge:this.badge}),this.loading=!1)}walletsTemplate(){const{search:e}=be.state,n=lh.markWalletsAsInstalled(e);return e.length?Z`
      <wui-grid
        data-testid="wallet-list"
        .padding=${["0","s","s","s"]}
        rowGap="l"
        columnGap="xs"
        justifyContent="space-between"
      >
        ${n.map(r=>Z`
            <w3m-all-wallets-list-item
              @click=${()=>this.onConnectWallet(r)}
              .wallet=${r}
              data-testid="wallet-search-item-${r.id}"
            ></w3m-all-wallets-list-item>
          `)}
      </wui-grid>
    `:Z`
        <wui-flex
          data-testid="no-wallet-found"
          justifyContent="center"
          alignItems="center"
          gap="s"
          flexDirection="column"
        >
          <wui-icon-box
            size="lg"
            iconColor="fg-200"
            backgroundColor="fg-300"
            icon="wallet"
            background="transparent"
          ></wui-icon-box>
          <wui-text data-testid="no-wallet-found-text" color="fg-200" variant="paragraph-500">
            No Wallet found
          </wui-text>
        </wui-flex>
      `}onConnectWallet(e){me.selectWalletConnector(e)}};L0.styles=bNe,r3([$e()],L0.prototype,"loading",void 0),r3([Q()],L0.prototype,"query",void 0),r3([Q()],L0.prototype,"badge",void 0),L0=r3([ke("w3m-all-wallets-search")],L0);var K9=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let ky=class extends Be{constructor(){super(...arguments),this.search="",this.onDebouncedSearch=ye.debounce(e=>{this.search=e})}render(){const e=this.search.length>=2;return Z`
      <wui-flex .padding=${["0","s","s","s"]} gap="xs">
        <wui-search-bar @inputChange=${this.onInputChange.bind(this)}></wui-search-bar>
        <wui-certified-switch
          ?checked=${this.badge}
          @click=${this.onClick.bind(this)}
          data-testid="wui-certified-switch"
        ></wui-certified-switch>
        ${this.qrButtonTemplate()}
      </wui-flex>
      ${e||this.badge?Z`<w3m-all-wallets-search
            query=${this.search}
            badge=${He(this.badge)}
          ></w3m-all-wallets-search>`:Z`<w3m-all-wallets-list badge=${He(this.badge)}></w3m-all-wallets-list>`}
    `}onInputChange(e){this.onDebouncedSearch(e.detail)}onClick(){if(this.badge==="certified"){this.badge=void 0;return}this.badge="certified",En.showSvg("Only WalletConnect certified",{icon:"walletConnectBrown",iconColor:"accent-100"})}qrButtonTemplate(){return ye.isMobile()?Z`
        <wui-icon-box
          size="lg"
          iconSize="xl"
          iconColor="accent-100"
          backgroundColor="accent-100"
          icon="qrCode"
          background="transparent"
          border
          borderColor="wui-accent-glass-010"
          @click=${this.onWalletConnectQr.bind(this)}
        ></wui-icon-box>
      `:null}onWalletConnectQr(){we.push("ConnectingWalletConnect")}};K9([$e()],ky.prototype,"search",void 0),K9([$e()],ky.prototype,"badge",void 0),ky=K9([ke("w3m-all-wallets-view")],ky);const vNe=qe`
  button {
    column-gap: var(--wui-spacing-s);
    padding: 11px 18px 11px var(--wui-spacing-s);
    width: 100%;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
    color: var(--wui-color-fg-250);
    transition:
      color var(--wui-ease-out-power-1) var(--wui-duration-md),
      background-color var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: color, background-color;
  }

  button[data-iconvariant='square'],
  button[data-iconvariant='square-blue'] {
    padding: 6px 18px 6px 9px;
  }

  button > wui-flex {
    flex: 1;
  }

  button > wui-image {
    width: 32px;
    height: 32px;
    box-shadow: 0 0 0 2px var(--wui-color-gray-glass-005);
    border-radius: var(--wui-border-radius-3xl);
  }

  button > wui-icon {
    width: 36px;
    height: 36px;
    transition: opacity var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: opacity;
  }

  button > wui-icon-box[data-variant='blue'] {
    box-shadow: 0 0 0 2px var(--wui-color-accent-glass-005);
  }

  button > wui-icon-box[data-variant='overlay'] {
    box-shadow: 0 0 0 2px var(--wui-color-gray-glass-005);
  }

  button > wui-icon-box[data-variant='square-blue'] {
    border-radius: var(--wui-border-radius-3xs);
    position: relative;
    border: none;
    width: 36px;
    height: 36px;
  }

  button > wui-icon-box[data-variant='square-blue']::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
    border: 1px solid var(--wui-color-accent-glass-010);
    pointer-events: none;
  }

  button > wui-icon:last-child {
    width: 14px;
    height: 14px;
  }

  button:disabled {
    color: var(--wui-color-gray-glass-020);
  }

  button[data-loading='true'] > wui-icon {
    opacity: 0;
  }

  wui-loading-spinner {
    position: absolute;
    right: 18px;
    top: 50%;
    transform: translateY(-50%);
  }
`;var ko=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let bs=class extends Be{constructor(){super(...arguments),this.tabIdx=void 0,this.variant="icon",this.disabled=!1,this.imageSrc=void 0,this.alt=void 0,this.chevron=!1,this.loading=!1}render(){return Z`
      <button
        ?disabled=${this.loading?!0:!!this.disabled}
        data-loading=${this.loading}
        data-iconvariant=${He(this.iconVariant)}
        tabindex=${He(this.tabIdx)}
      >
        ${this.loadingTemplate()} ${this.visualTemplate()}
        <wui-flex gap="3xs">
          <slot></slot>
        </wui-flex>
        ${this.chevronTemplate()}
      </button>
    `}visualTemplate(){if(this.variant==="image"&&this.imageSrc)return Z`<wui-image src=${this.imageSrc} alt=${this.alt??"list item"}></wui-image>`;if(this.iconVariant==="square"&&this.icon&&this.variant==="icon")return Z`<wui-icon name=${this.icon}></wui-icon>`;if(this.variant==="icon"&&this.icon&&this.iconVariant){const e=["blue","square-blue"].includes(this.iconVariant)?"accent-100":"fg-200",n=this.iconVariant==="square-blue"?"mdl":"md",r=this.iconSize?this.iconSize:n;return Z`
        <wui-icon-box
          data-variant=${this.iconVariant}
          icon=${this.icon}
          iconSize=${r}
          background="transparent"
          iconColor=${e}
          backgroundColor=${e}
          size=${n}
        ></wui-icon-box>
      `}return null}loadingTemplate(){return this.loading?Z`<wui-loading-spinner
        data-testid="wui-list-item-loading-spinner"
        color="fg-300"
      ></wui-loading-spinner>`:Z``}chevronTemplate(){return this.chevron?Z`<wui-icon size="inherit" color="fg-200" name="chevronRight"></wui-icon>`:null}};bs.styles=[St,Nr,vNe],ko([Q()],bs.prototype,"icon",void 0),ko([Q()],bs.prototype,"iconSize",void 0),ko([Q()],bs.prototype,"tabIdx",void 0),ko([Q()],bs.prototype,"variant",void 0),ko([Q()],bs.prototype,"iconVariant",void 0),ko([Q({type:Boolean})],bs.prototype,"disabled",void 0),ko([Q()],bs.prototype,"imageSrc",void 0),ko([Q()],bs.prototype,"alt",void 0),ko([Q({type:Boolean})],bs.prototype,"chevron",void 0),ko([Q({type:Boolean})],bs.prototype,"loading",void 0),bs=ko([ke("wui-list-item")],bs);var ENe=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let V9=class extends Be{constructor(){var e;super(...arguments),this.wallet=(e=we.state.data)==null?void 0:e.wallet}render(){if(!this.wallet)throw new Error("w3m-downloads-view");return Z`
      <wui-flex gap="xs" flexDirection="column" .padding=${["s","s","l","s"]}>
        ${this.chromeTemplate()} ${this.iosTemplate()} ${this.androidTemplate()}
        ${this.homepageTemplate()}
      </wui-flex>
    `}chromeTemplate(){var e;return(e=this.wallet)!=null&&e.chrome_store?Z`<wui-list-item
      variant="icon"
      icon="chromeStore"
      iconVariant="square"
      @click=${this.onChromeStore.bind(this)}
      chevron
    >
      <wui-text variant="paragraph-500" color="fg-100">Chrome Extension</wui-text>
    </wui-list-item>`:null}iosTemplate(){var e;return(e=this.wallet)!=null&&e.app_store?Z`<wui-list-item
      variant="icon"
      icon="appStore"
      iconVariant="square"
      @click=${this.onAppStore.bind(this)}
      chevron
    >
      <wui-text variant="paragraph-500" color="fg-100">iOS App</wui-text>
    </wui-list-item>`:null}androidTemplate(){var e;return(e=this.wallet)!=null&&e.play_store?Z`<wui-list-item
      variant="icon"
      icon="playStore"
      iconVariant="square"
      @click=${this.onPlayStore.bind(this)}
      chevron
    >
      <wui-text variant="paragraph-500" color="fg-100">Android App</wui-text>
    </wui-list-item>`:null}homepageTemplate(){var e;return(e=this.wallet)!=null&&e.homepage?Z`
      <wui-list-item
        variant="icon"
        icon="browser"
        iconVariant="square-blue"
        @click=${this.onHomePage.bind(this)}
        chevron
      >
        <wui-text variant="paragraph-500" color="fg-100">Website</wui-text>
      </wui-list-item>
    `:null}onChromeStore(){var e;(e=this.wallet)!=null&&e.chrome_store&&ye.openHref(this.wallet.chrome_store,"_blank")}onAppStore(){var e;(e=this.wallet)!=null&&e.app_store&&ye.openHref(this.wallet.app_store,"_blank")}onPlayStore(){var e;(e=this.wallet)!=null&&e.play_store&&ye.openHref(this.wallet.play_store,"_blank")}onHomePage(){var e;(e=this.wallet)!=null&&e.homepage&&ye.openHref(this.wallet.homepage,"_blank")}};V9=ENe([ke("w3m-downloads-view")],V9);const CNe=Object.freeze(Object.defineProperty({__proto__:null,get W3mAllWalletsView(){return ky},get W3mConnectingWcBasicView(){return Q5},get W3mDownloadsView(){return V9}},Symbol.toStringTag,{value:"Module"})),_Ne=qe`
  :host {
    display: block;
    border-radius: clamp(0px, var(--wui-border-radius-l), 44px);
    box-shadow: 0 0 0 1px var(--wui-color-gray-glass-005);
    background-color: var(--wui-color-modal-bg);
    overflow: hidden;
  }

  :host([data-embedded='true']) {
    box-shadow:
      0 0 0 1px var(--wui-color-gray-glass-005),
      0px 4px 12px 4px var(--w3m-card-embedded-shadow-color);
  }
`;var SNe=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let G9=class extends Be{render(){return Z`<slot></slot>`}};G9.styles=[St,_Ne],G9=SNe([ke("wui-card")],G9);const xNe=qe`
  :host {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--wui-spacing-s);
    border-radius: var(--wui-border-radius-s);
    border: 1px solid var(--wui-color-dark-glass-100);
    box-sizing: border-box;
    background-color: var(--wui-color-bg-325);
    box-shadow: 0px 0px 16px 0px rgba(0, 0, 0, 0.25);
  }

  wui-flex {
    width: 100%;
  }

  wui-text {
    word-break: break-word;
    flex: 1;
  }

  .close {
    cursor: pointer;
  }

  .icon-box {
    height: 40px;
    width: 40px;
    border-radius: var(--wui-border-radius-3xs);
    background-color: var(--local-icon-bg-value);
  }
`;var Ry=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let _h=class extends Be{constructor(){super(...arguments),this.message="",this.backgroundColor="accent-100",this.iconColor="accent-100",this.icon="info"}render(){return this.style.cssText=`
      --local-icon-bg-value: var(--wui-color-${this.backgroundColor});
   `,Z`
      <wui-flex flexDirection="row" justifyContent="space-between" alignItems="center">
        <wui-flex columnGap="xs" flexDirection="row" alignItems="center">
          <wui-flex
            flexDirection="row"
            alignItems="center"
            justifyContent="center"
            class="icon-box"
          >
            <wui-icon color=${this.iconColor} size="md" name=${this.icon}></wui-icon>
          </wui-flex>
          <wui-text variant="small-500" color="bg-350" data-testid="wui-alertbar-text"
            >${this.message}</wui-text
          >
        </wui-flex>
        <wui-icon
          class="close"
          color="bg-350"
          size="sm"
          name="close"
          @click=${this.onClose}
        ></wui-icon>
      </wui-flex>
    `}onClose(){_o.close()}};_h.styles=[St,xNe],Ry([Q()],_h.prototype,"message",void 0),Ry([Q()],_h.prototype,"backgroundColor",void 0),Ry([Q()],_h.prototype,"iconColor",void 0),Ry([Q()],_h.prototype,"icon",void 0),_h=Ry([ke("wui-alertbar")],_h);const ANe=qe`
  :host {
    display: block;
    position: absolute;
    top: var(--wui-spacing-s);
    left: var(--wui-spacing-l);
    right: var(--wui-spacing-l);
    opacity: 0;
    pointer-events: none;
  }
`;var JK=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const INe={info:{backgroundColor:"fg-350",iconColor:"fg-325",icon:"info"},success:{backgroundColor:"success-glass-reown-020",iconColor:"success-125",icon:"checkmark"},warning:{backgroundColor:"warning-glass-reown-020",iconColor:"warning-100",icon:"warningCircle"},error:{backgroundColor:"error-glass-reown-020",iconColor:"error-125",icon:"exclamationTriangle"}};let i3=class extends Be{constructor(){super(),this.unsubscribe=[],this.open=_o.state.open,this.onOpen(!0),this.unsubscribe.push(_o.subscribeKey("open",e=>{this.open=e,this.onOpen(!1)}))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const{message:e,variant:n}=_o.state,r=INe[n];return Z`
      <wui-alertbar
        message=${e}
        backgroundColor=${r==null?void 0:r.backgroundColor}
        iconColor=${r==null?void 0:r.iconColor}
        icon=${r==null?void 0:r.icon}
      ></wui-alertbar>
    `}onOpen(e){this.open?(this.animate([{opacity:0,transform:"scale(0.85)"},{opacity:1,transform:"scale(1)"}],{duration:150,fill:"forwards",easing:"ease"}),this.style.cssText="pointer-events: auto"):e||(this.animate([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.85)"}],{duration:150,fill:"forwards",easing:"ease"}),this.style.cssText="pointer-events: none")}};i3.styles=ANe,JK([$e()],i3.prototype,"open",void 0),i3=JK([ke("w3m-alertbar")],i3);const $Ne=qe`
  button {
    border-radius: var(--local-border-radius);
    color: var(--wui-color-fg-100);
    padding: var(--local-padding);
  }

  @media (max-width: 700px) {
    button {
      padding: var(--wui-spacing-s);
    }
  }

  button > wui-icon {
    pointer-events: none;
  }

  button:disabled > wui-icon {
    color: var(--wui-color-bg-300) !important;
  }

  button:disabled {
    background-color: transparent;
  }
`;var My=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Sh=class extends Be{constructor(){super(...arguments),this.size="md",this.disabled=!1,this.icon="copy",this.iconColor="inherit"}render(){const e=this.size==="lg"?"--wui-border-radius-xs":"--wui-border-radius-xxs",n=this.size==="lg"?"--wui-spacing-1xs":"--wui-spacing-2xs";return this.style.cssText=`
    --local-border-radius: var(${e});
    --local-padding: var(${n});
`,Z`
      <button ?disabled=${this.disabled}>
        <wui-icon color=${this.iconColor} size=${this.size} name=${this.icon}></wui-icon>
      </button>
    `}};Sh.styles=[St,Nr,fy,$Ne],My([Q()],Sh.prototype,"size",void 0),My([Q({type:Boolean})],Sh.prototype,"disabled",void 0),My([Q()],Sh.prototype,"icon",void 0),My([Q()],Sh.prototype,"iconColor",void 0),Sh=My([ke("wui-icon-link")],Sh);const PNe=qe`
  button {
    display: block;
    display: flex;
    align-items: center;
    padding: var(--wui-spacing-xxs);
    gap: var(--wui-spacing-xxs);
    transition: all var(--wui-ease-out-power-1) var(--wui-duration-md);
    border-radius: var(--wui-border-radius-xxs);
  }

  wui-image {
    border-radius: 100%;
    width: var(--wui-spacing-xl);
    height: var(--wui-spacing-xl);
  }

  wui-icon-box {
    width: var(--wui-spacing-xl);
    height: var(--wui-spacing-xl);
  }

  button:hover {
    background-color: var(--wui-color-gray-glass-002);
  }

  button:active {
    background-color: var(--wui-color-gray-glass-005);
  }
`;var QK=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let s3=class extends Be{constructor(){super(...arguments),this.imageSrc=""}render(){return Z`<button>
      ${this.imageTemplate()}
      <wui-icon size="xs" color="fg-200" name="chevronBottom"></wui-icon>
    </button>`}imageTemplate(){return this.imageSrc?Z`<wui-image src=${this.imageSrc} alt="select visual"></wui-image>`:Z`<wui-icon-box
      size="xxs"
      iconColor="fg-200"
      backgroundColor="fg-100"
      background="opaque"
      icon="networkPlaceholder"
    ></wui-icon-box>`}};s3.styles=[St,Nr,fy,PNe],QK([Q()],s3.prototype,"imageSrc",void 0),s3=QK([ke("wui-select")],s3);const ONe=qe`
  :host {
    height: 64px;
  }

  wui-text {
    text-transform: capitalize;
  }

  wui-flex.w3m-header-title {
    transform: translateY(0);
    opacity: 1;
  }

  wui-flex.w3m-header-title[view-direction='prev'] {
    animation:
      slide-down-out 120ms forwards var(--wui-ease-out-power-2),
      slide-down-in 120ms forwards var(--wui-ease-out-power-2);
    animation-delay: 0ms, 200ms;
  }

  wui-flex.w3m-header-title[view-direction='next'] {
    animation:
      slide-up-out 120ms forwards var(--wui-ease-out-power-2),
      slide-up-in 120ms forwards var(--wui-ease-out-power-2);
    animation-delay: 0ms, 200ms;
  }

  wui-icon-link[data-hidden='true'] {
    opacity: 0 !important;
    pointer-events: none;
  }

  @keyframes slide-up-out {
    from {
      transform: translateY(0px);
      opacity: 1;
    }
    to {
      transform: translateY(3px);
      opacity: 0;
    }
  }

  @keyframes slide-up-in {
    from {
      transform: translateY(-3px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slide-down-out {
    from {
      transform: translateY(0px);
      opacity: 1;
    }
    to {
      transform: translateY(-3px);
      opacity: 0;
    }
  }

  @keyframes slide-down-in {
    from {
      transform: translateY(3px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
`;var Fc=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const TNe=["SmartSessionList"];function Z9(){var o,a,c,l,u,d,h;const t=(a=(o=we.state.data)==null?void 0:o.connector)==null?void 0:a.name,e=(l=(c=we.state.data)==null?void 0:c.wallet)==null?void 0:l.name,n=(d=(u=we.state.data)==null?void 0:u.network)==null?void 0:d.name,r=e??t,i=me.getConnectors();return{Connect:`Connect ${i.length===1&&((h=i[0])==null?void 0:h.id)==="w3m-email"?"Email":""} Wallet`,Create:"Create Wallet",ChooseAccountName:void 0,Account:void 0,AccountSettings:void 0,AllWallets:"All Wallets",ApproveTransaction:"Approve Transaction",BuyInProgress:"Buy",ConnectingExternal:r??"Connect Wallet",ConnectingWalletConnect:r??"WalletConnect",ConnectingWalletConnectBasic:"WalletConnect",ConnectingSiwe:"Sign In",Convert:"Convert",ConvertSelectToken:"Select token",ConvertPreview:"Preview convert",Downloads:r?`Get ${r}`:"Downloads",EmailLogin:"Email Login",EmailVerifyOtp:"Confirm Email",EmailVerifyDevice:"Register Device",GetWallet:"Get a wallet",Networks:"Choose Network",OnRampProviders:"Choose Provider",OnRampActivity:"Activity",OnRampTokenSelect:"Select Token",OnRampFiatSelect:"Select Currency",Pay:"How you pay",Profile:void 0,SwitchNetwork:n??"Switch Network",SwitchAddress:"Switch Address",Transactions:"Activity",UnsupportedChain:"Switch Network",UpgradeEmailWallet:"Upgrade your Wallet",UpdateEmailWallet:"Edit Email",UpdateEmailPrimaryOtp:"Confirm Current Email",UpdateEmailSecondaryOtp:"Confirm New Email",WhatIsABuy:"What is Buy?",RegisterAccountName:"Choose name",RegisterAccountNameSuccess:"",WalletReceive:"Receive",WalletCompatibleNetworks:"Compatible Networks",Swap:"Swap",SwapSelectToken:"Select token",SwapPreview:"Preview swap",WalletSend:"Send",WalletSendPreview:"Review send",WalletSendSelectToken:"Select Token",WhatIsANetwork:"What is a network?",WhatIsAWallet:"What is a wallet?",ConnectWallets:"Connect wallet",ConnectSocials:"All socials",ConnectingSocial:je.state.socialProvider?je.state.socialProvider:"Connect Social",ConnectingMultiChain:"Select chain",ConnectingFarcaster:"Farcaster",SwitchActiveChain:"Switch chain",SmartSessionCreated:void 0,SmartSessionList:"Smart Sessions",SIWXSignMessage:"Sign In",PayLoading:"Payment in progress"}}let Ro=class extends Be{constructor(){super(),this.unsubscribe=[],this.heading=Z9()[we.state.view],this.network=W.state.activeCaipNetwork,this.networkImage=Dn.getNetworkImage(this.network),this.showBack=!1,this.prevHistoryLength=1,this.view=we.state.view,this.viewDirection="",this.headerText=Z9()[we.state.view],this.unsubscribe.push(Si.subscribeNetworkImages(()=>{this.networkImage=Dn.getNetworkImage(this.network)}),we.subscribeKey("view",e=>{setTimeout(()=>{this.view=e,this.headerText=Z9()[e]},cu.ANIMATION_DURATIONS.HeaderText),this.onViewChange(),this.onHistoryChange()}),W.subscribeKey("activeCaipNetwork",e=>{this.network=e,this.networkImage=Dn.getNetworkImage(this.network)}))}disconnectCallback(){this.unsubscribe.forEach(e=>e())}render(){return Z`
      <wui-flex .padding=${this.getPadding()} justifyContent="space-between" alignItems="center">
        ${this.leftHeaderTemplate()} ${this.titleTemplate()} ${this.rightHeaderTemplate()}
      </wui-flex>
    `}onWalletHelp(){it.sendEvent({type:"track",event:"CLICK_WALLET_HELP"}),we.push("WhatIsAWallet")}async onClose(){await nz.safeClose()}rightHeaderTemplate(){var n,r;const e=(r=(n=le==null?void 0:le.state)==null?void 0:n.features)==null?void 0:r.smartSessions;return we.state.view!=="Account"||!e?this.closeButtonTemplate():Z`<wui-flex>
      <wui-icon-link
        icon="clock"
        @click=${()=>we.push("SmartSessionList")}
        data-testid="w3m-header-smart-sessions"
      ></wui-icon-link>
      ${this.closeButtonTemplate()}
    </wui-flex> `}closeButtonTemplate(){return Z`
      <wui-icon-link
        icon="close"
        @click=${this.onClose.bind(this)}
        data-testid="w3m-header-close"
      ></wui-icon-link>
    `}titleTemplate(){const e=TNe.includes(this.view);return Z`
      <wui-flex
        view-direction="${this.viewDirection}"
        class="w3m-header-title"
        alignItems="center"
        gap="xs"
      >
        <wui-text variant="paragraph-700" color="fg-100" data-testid="w3m-header-text"
          >${this.headerText}</wui-text
        >
        ${e?Z`<wui-tag variant="main">Beta</wui-tag>`:null}
      </wui-flex>
    `}leftHeaderTemplate(){var l;const{view:e}=we.state,n=e==="Connect",r=le.state.enableEmbedded,i=e==="ApproveTransaction",s=e==="ConnectingSiwe",o=e==="Account",a=le.state.enableNetworkSwitch,c=i||s||n&&r;return o&&a?Z`<wui-select
        id="dynamic"
        data-testid="w3m-account-select-network"
        active-network=${He((l=this.network)==null?void 0:l.name)}
        @click=${this.onNetworks.bind(this)}
        imageSrc=${He(this.networkImage)}
      ></wui-select>`:this.showBack&&!c?Z`<wui-icon-link
        data-testid="header-back"
        id="dynamic"
        icon="chevronLeft"
        @click=${this.onGoBack.bind(this)}
      ></wui-icon-link>`:Z`<wui-icon-link
      data-hidden=${!n}
      id="dynamic"
      icon="helpCircle"
      @click=${this.onWalletHelp.bind(this)}
    ></wui-icon-link>`}onNetworks(){this.isAllowedNetworkSwitch()&&(it.sendEvent({type:"track",event:"CLICK_NETWORKS"}),we.push("Networks"))}isAllowedNetworkSwitch(){const e=W.getAllRequestedCaipNetworks(),n=e?e.length>1:!1,r=e==null?void 0:e.find(({id:i})=>{var s;return i===((s=this.network)==null?void 0:s.id)});return n||!r}getPadding(){return this.heading?["l","2l","l","2l"]:["0","2l","0","2l"]}onViewChange(){const{history:e}=we.state;let n=cu.VIEW_DIRECTION.Next;e.length<this.prevHistoryLength&&(n=cu.VIEW_DIRECTION.Prev),this.prevHistoryLength=e.length,this.viewDirection=n}async onHistoryChange(){var r;const{history:e}=we.state,n=(r=this.shadowRoot)==null?void 0:r.querySelector("#dynamic");e.length>1&&!this.showBack&&n?(await n.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.showBack=!0,n.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"})):e.length<=1&&this.showBack&&n&&(await n.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.showBack=!1,n.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}onGoBack(){we.goBack()}};Ro.styles=ONe,Fc([$e()],Ro.prototype,"heading",void 0),Fc([$e()],Ro.prototype,"network",void 0),Fc([$e()],Ro.prototype,"networkImage",void 0),Fc([$e()],Ro.prototype,"showBack",void 0),Fc([$e()],Ro.prototype,"prevHistoryLength",void 0),Fc([$e()],Ro.prototype,"view",void 0),Fc([$e()],Ro.prototype,"viewDirection",void 0),Fc([$e()],Ro.prototype,"headerText",void 0),Ro=Fc([ke("w3m-header")],Ro);const NNe=qe`
  :host {
    display: flex;
    column-gap: var(--wui-spacing-s);
    align-items: center;
    padding: var(--wui-spacing-xs) var(--wui-spacing-m) var(--wui-spacing-xs) var(--wui-spacing-xs);
    border-radius: var(--wui-border-radius-s);
    border: 1px solid var(--wui-color-gray-glass-005);
    box-sizing: border-box;
    background-color: var(--wui-color-bg-175);
    box-shadow:
      0px 14px 64px -4px rgba(0, 0, 0, 0.15),
      0px 8px 22px -6px rgba(0, 0, 0, 0.15);

    max-width: 300px;
  }

  :host wui-loading-spinner {
    margin-left: var(--wui-spacing-3xs);
  }
`;var xh=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let zc=class extends Be{constructor(){super(...arguments),this.backgroundColor="accent-100",this.iconColor="accent-100",this.icon="checkmark",this.message="",this.loading=!1,this.iconType="default"}render(){return Z`
      ${this.templateIcon()}
      <wui-text variant="paragraph-500" color="fg-100" data-testid="wui-snackbar-message"
        >${this.message}</wui-text
      >
    `}templateIcon(){return this.loading?Z`<wui-loading-spinner size="md" color="accent-100"></wui-loading-spinner>`:this.iconType==="default"?Z`<wui-icon size="xl" color=${this.iconColor} name=${this.icon}></wui-icon>`:Z`<wui-icon-box
      size="sm"
      iconSize="xs"
      iconColor=${this.iconColor}
      backgroundColor=${this.backgroundColor}
      icon=${this.icon}
      background="opaque"
    ></wui-icon-box>`}};zc.styles=[St,NNe],xh([Q()],zc.prototype,"backgroundColor",void 0),xh([Q()],zc.prototype,"iconColor",void 0),xh([Q()],zc.prototype,"icon",void 0),xh([Q()],zc.prototype,"message",void 0),xh([Q()],zc.prototype,"loading",void 0),xh([Q()],zc.prototype,"iconType",void 0),zc=xh([ke("wui-snackbar")],zc);const kNe=qe`
  :host {
    display: block;
    position: absolute;
    opacity: 0;
    pointer-events: none;
    top: 11px;
    left: 50%;
    width: max-content;
  }
`;var XK=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const RNe={loading:void 0,success:{backgroundColor:"success-100",iconColor:"success-100",icon:"checkmark"},error:{backgroundColor:"error-100",iconColor:"error-100",icon:"close"}};let o3=class extends Be{constructor(){super(),this.unsubscribe=[],this.timeout=void 0,this.open=En.state.open,this.unsubscribe.push(En.subscribeKey("open",e=>{this.open=e,this.onOpen()}))}disconnectedCallback(){clearTimeout(this.timeout),this.unsubscribe.forEach(e=>e())}render(){const{message:e,variant:n,svg:r}=En.state,i=RNe[n],{icon:s,iconColor:o}=r??i??{};return Z`
      <wui-snackbar
        message=${e}
        backgroundColor=${i==null?void 0:i.backgroundColor}
        iconColor=${o}
        icon=${s}
        .loading=${n==="loading"}
      ></wui-snackbar>
    `}onOpen(){clearTimeout(this.timeout),this.open?(this.animate([{opacity:0,transform:"translateX(-50%) scale(0.85)"},{opacity:1,transform:"translateX(-50%) scale(1)"}],{duration:150,fill:"forwards",easing:"ease"}),this.timeout&&clearTimeout(this.timeout),En.state.autoClose&&(this.timeout=setTimeout(()=>En.hide(),2500))):this.animate([{opacity:1,transform:"translateX(-50%) scale(1)"},{opacity:0,transform:"translateX(-50%) scale(0.85)"}],{duration:150,fill:"forwards",easing:"ease"})}};o3.styles=kNe,XK([$e()],o3.prototype,"open",void 0),o3=XK([ke("w3m-snackbar")],o3);const MNe=qe`
  :host {
    pointer-events: none;
  }

  :host > wui-flex {
    display: var(--w3m-tooltip-display);
    opacity: var(--w3m-tooltip-opacity);
    padding: 9px var(--wui-spacing-s) 10px var(--wui-spacing-s);
    border-radius: var(--wui-border-radius-xxs);
    color: var(--wui-color-bg-100);
    position: fixed;
    top: var(--w3m-tooltip-top);
    left: var(--w3m-tooltip-left);
    transform: translate(calc(-50% + var(--w3m-tooltip-parent-width)), calc(-100% - 8px));
    max-width: calc(var(--w3m-modal-width) - var(--wui-spacing-xl));
    transition: opacity 0.2s var(--wui-ease-out-power-2);
    will-change: opacity;
  }

  :host([data-variant='shade']) > wui-flex {
    background-color: var(--wui-color-bg-150);
    border: 1px solid var(--wui-color-gray-glass-005);
  }

  :host([data-variant='shade']) > wui-flex > wui-text {
    color: var(--wui-color-fg-150);
  }

  :host([data-variant='fill']) > wui-flex {
    background-color: var(--wui-color-fg-100);
    border: none;
  }

  wui-icon {
    position: absolute;
    width: 12px !important;
    height: 4px !important;
    color: var(--wui-color-bg-150);
  }

  wui-icon[data-placement='top'] {
    bottom: 0px;
    left: 50%;
    transform: translate(-50%, 95%);
  }

  wui-icon[data-placement='bottom'] {
    top: 0;
    left: 50%;
    transform: translate(-50%, -95%) rotate(180deg);
  }

  wui-icon[data-placement='right'] {
    top: 50%;
    left: 0;
    transform: translate(-65%, -50%) rotate(90deg);
  }

  wui-icon[data-placement='left'] {
    top: 50%;
    right: 0%;
    transform: translate(65%, -50%) rotate(270deg);
  }
`;var By=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Ah=class extends Be{constructor(){super(),this.unsubscribe=[],this.open=Mp.state.open,this.message=Mp.state.message,this.triggerRect=Mp.state.triggerRect,this.variant=Mp.state.variant,this.unsubscribe.push(Mp.subscribe(e=>{this.open=e.open,this.message=e.message,this.triggerRect=e.triggerRect,this.variant=e.variant}))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){this.dataset.variant=this.variant;const e=this.triggerRect.top,n=this.triggerRect.left;return this.style.cssText=`
    --w3m-tooltip-top: ${e}px;
    --w3m-tooltip-left: ${n}px;
    --w3m-tooltip-parent-width: ${this.triggerRect.width/2}px;
    --w3m-tooltip-display: ${this.open?"flex":"none"};
    --w3m-tooltip-opacity: ${this.open?1:0};
    `,Z`<wui-flex>
      <wui-icon data-placement="top" color="fg-100" size="inherit" name="cursor"></wui-icon>
      <wui-text color="inherit" variant="small-500">${this.message}</wui-text>
    </wui-flex>`}};Ah.styles=[MNe],By([$e()],Ah.prototype,"open",void 0),By([$e()],Ah.prototype,"message",void 0),By([$e()],Ah.prototype,"triggerRect",void 0),By([$e()],Ah.prototype,"variant",void 0),Ah=By([ke("w3m-tooltip"),ke("w3m-tooltip")],Ah);const BNe=qe`
  :host {
    --prev-height: 0px;
    --new-height: 0px;
    display: block;
  }

  div.w3m-router-container {
    transform: translateY(0);
    opacity: 1;
  }

  div.w3m-router-container[view-direction='prev'] {
    animation:
      slide-left-out 150ms forwards ease,
      slide-left-in 150ms forwards ease;
    animation-delay: 0ms, 200ms;
  }

  div.w3m-router-container[view-direction='next'] {
    animation:
      slide-right-out 150ms forwards ease,
      slide-right-in 150ms forwards ease;
    animation-delay: 0ms, 200ms;
  }

  @keyframes slide-left-out {
    from {
      transform: translateX(0px);
      opacity: 1;
    }
    to {
      transform: translateX(10px);
      opacity: 0;
    }
  }

  @keyframes slide-left-in {
    from {
      transform: translateX(-10px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slide-right-out {
    from {
      transform: translateX(0px);
      opacity: 1;
    }
    to {
      transform: translateX(-10px);
      opacity: 0;
    }
  }

  @keyframes slide-right-in {
    from {
      transform: translateX(10px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
`;var Y9=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};let Dy=class extends Be{constructor(){super(),this.resizeObserver=void 0,this.prevHeight="0px",this.prevHistoryLength=1,this.unsubscribe=[],this.view=we.state.view,this.viewDirection="",this.unsubscribe.push(we.subscribeKey("view",e=>this.onViewChange(e)))}firstUpdated(){var e;this.resizeObserver=new ResizeObserver(([n])=>{const r=`${n==null?void 0:n.contentRect.height}px`;this.prevHeight!=="0px"&&(this.style.setProperty("--prev-height",this.prevHeight),this.style.setProperty("--new-height",r),this.style.animation="w3m-view-height 150ms forwards ease",this.style.height="auto"),setTimeout(()=>{this.prevHeight=r,this.style.animation="unset"},cu.ANIMATION_DURATIONS.ModalHeight)}),(e=this.resizeObserver)==null||e.observe(this.getWrapper())}disconnectedCallback(){var e;(e=this.resizeObserver)==null||e.unobserve(this.getWrapper()),this.unsubscribe.forEach(n=>n())}render(){return Z`<div class="w3m-router-container" view-direction="${this.viewDirection}">
      ${this.viewTemplate()}
    </div>`}viewTemplate(){switch(this.view){case"AccountSettings":return Z`<w3m-account-settings-view></w3m-account-settings-view>`;case"Account":return Z`<w3m-account-view></w3m-account-view>`;case"AllWallets":return Z`<w3m-all-wallets-view></w3m-all-wallets-view>`;case"ApproveTransaction":return Z`<w3m-approve-transaction-view></w3m-approve-transaction-view>`;case"BuyInProgress":return Z`<w3m-buy-in-progress-view></w3m-buy-in-progress-view>`;case"ChooseAccountName":return Z`<w3m-choose-account-name-view></w3m-choose-account-name-view>`;case"Connect":return Z`<w3m-connect-view></w3m-connect-view>`;case"Create":return Z`<w3m-connect-view walletGuide="explore"></w3m-connect-view>`;case"ConnectingWalletConnect":return Z`<w3m-connecting-wc-view></w3m-connecting-wc-view>`;case"ConnectingWalletConnectBasic":return Z`<w3m-connecting-wc-basic-view></w3m-connecting-wc-basic-view>`;case"ConnectingExternal":return Z`<w3m-connecting-external-view></w3m-connecting-external-view>`;case"ConnectingSiwe":return Z`<w3m-connecting-siwe-view></w3m-connecting-siwe-view>`;case"ConnectWallets":return Z`<w3m-connect-wallets-view></w3m-connect-wallets-view>`;case"ConnectSocials":return Z`<w3m-connect-socials-view></w3m-connect-socials-view>`;case"ConnectingSocial":return Z`<w3m-connecting-social-view></w3m-connecting-social-view>`;case"Downloads":return Z`<w3m-downloads-view></w3m-downloads-view>`;case"EmailLogin":return Z`<w3m-email-login-view></w3m-email-login-view>`;case"EmailVerifyOtp":return Z`<w3m-email-verify-otp-view></w3m-email-verify-otp-view>`;case"EmailVerifyDevice":return Z`<w3m-email-verify-device-view></w3m-email-verify-device-view>`;case"GetWallet":return Z`<w3m-get-wallet-view></w3m-get-wallet-view>`;case"Networks":return Z`<w3m-networks-view></w3m-networks-view>`;case"SwitchNetwork":return Z`<w3m-network-switch-view></w3m-network-switch-view>`;case"Profile":return Z`<w3m-profile-view></w3m-profile-view>`;case"SwitchAddress":return Z`<w3m-switch-address-view></w3m-switch-address-view>`;case"Transactions":return Z`<w3m-transactions-view></w3m-transactions-view>`;case"OnRampProviders":return Z`<w3m-onramp-providers-view></w3m-onramp-providers-view>`;case"OnRampActivity":return Z`<w3m-onramp-activity-view></w3m-onramp-activity-view>`;case"OnRampTokenSelect":return Z`<w3m-onramp-token-select-view></w3m-onramp-token-select-view>`;case"OnRampFiatSelect":return Z`<w3m-onramp-fiat-select-view></w3m-onramp-fiat-select-view>`;case"UpgradeEmailWallet":return Z`<w3m-upgrade-wallet-view></w3m-upgrade-wallet-view>`;case"UpdateEmailWallet":return Z`<w3m-update-email-wallet-view></w3m-update-email-wallet-view>`;case"UpdateEmailPrimaryOtp":return Z`<w3m-update-email-primary-otp-view></w3m-update-email-primary-otp-view>`;case"UpdateEmailSecondaryOtp":return Z`<w3m-update-email-secondary-otp-view></w3m-update-email-secondary-otp-view>`;case"UnsupportedChain":return Z`<w3m-unsupported-chain-view></w3m-unsupported-chain-view>`;case"Swap":return Z`<w3m-swap-view></w3m-swap-view>`;case"SwapSelectToken":return Z`<w3m-swap-select-token-view></w3m-swap-select-token-view>`;case"SwapPreview":return Z`<w3m-swap-preview-view></w3m-swap-preview-view>`;case"WalletSend":return Z`<w3m-wallet-send-view></w3m-wallet-send-view>`;case"WalletSendSelectToken":return Z`<w3m-wallet-send-select-token-view></w3m-wallet-send-select-token-view>`;case"WalletSendPreview":return Z`<w3m-wallet-send-preview-view></w3m-wallet-send-preview-view>`;case"WhatIsABuy":return Z`<w3m-what-is-a-buy-view></w3m-what-is-a-buy-view>`;case"WalletReceive":return Z`<w3m-wallet-receive-view></w3m-wallet-receive-view>`;case"WalletCompatibleNetworks":return Z`<w3m-wallet-compatible-networks-view></w3m-wallet-compatible-networks-view>`;case"WhatIsAWallet":return Z`<w3m-what-is-a-wallet-view></w3m-what-is-a-wallet-view>`;case"ConnectingMultiChain":return Z`<w3m-connecting-multi-chain-view></w3m-connecting-multi-chain-view>`;case"WhatIsANetwork":return Z`<w3m-what-is-a-network-view></w3m-what-is-a-network-view>`;case"ConnectingFarcaster":return Z`<w3m-connecting-farcaster-view></w3m-connecting-farcaster-view>`;case"SwitchActiveChain":return Z`<w3m-switch-active-chain-view></w3m-switch-active-chain-view>`;case"RegisterAccountName":return Z`<w3m-register-account-name-view></w3m-register-account-name-view>`;case"RegisterAccountNameSuccess":return Z`<w3m-register-account-name-success-view></w3m-register-account-name-success-view>`;case"SmartSessionCreated":return Z`<w3m-smart-session-created-view></w3m-smart-session-created-view>`;case"SmartSessionList":return Z`<w3m-smart-session-list-view></w3m-smart-session-list-view>`;case"SIWXSignMessage":return Z`<w3m-siwx-sign-message-view></w3m-siwx-sign-message-view>`;case"Pay":return Z`<w3m-pay-view></w3m-pay-view>`;case"PayLoading":return Z`<w3m-pay-loading-view></w3m-pay-loading-view>`;default:return Z`<w3m-connect-view></w3m-connect-view>`}}onViewChange(e){Mp.hide();let n=cu.VIEW_DIRECTION.Next;const{history:r}=we.state;r.length<this.prevHistoryLength&&(n=cu.VIEW_DIRECTION.Prev),this.prevHistoryLength=r.length,this.viewDirection=n,setTimeout(()=>{this.view=e},cu.ANIMATION_DURATIONS.ViewTransition)}getWrapper(){var e;return(e=this.shadowRoot)==null?void 0:e.querySelector("div")}};Dy.styles=BNe,Y9([$e()],Dy.prototype,"view",void 0),Y9([$e()],Dy.prototype,"viewDirection",void 0),Dy=Y9([ke("w3m-router")],Dy);const DNe=qe`
  :host {
    z-index: var(--w3m-z-index);
    display: block;
    backface-visibility: hidden;
    will-change: opacity;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    opacity: 0;
    background-color: var(--wui-cover);
    transition: opacity 0.2s var(--wui-ease-out-power-2);
    will-change: opacity;
  }

  :host(.open) {
    opacity: 1;
  }

  :host(.appkit-modal) {
    position: relative;
    pointer-events: unset;
    background: none;
    width: 100%;
    opacity: 1;
  }

  wui-card {
    max-width: var(--w3m-modal-width);
    width: 100%;
    position: relative;
    animation: zoom-in 0.2s var(--wui-ease-out-power-2);
    animation-fill-mode: backwards;
    outline: none;
    transition:
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius, background-color;
  }

  :host(.appkit-modal) wui-card {
    max-width: 400px;
  }

  wui-card[shake='true'] {
    animation:
      zoom-in 0.2s var(--wui-ease-out-power-2),
      w3m-shake 0.5s var(--wui-ease-out-power-2);
  }

  wui-flex {
    overflow-x: hidden;
    overflow-y: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  }

  @media (max-height: 700px) and (min-width: 431px) {
    wui-flex {
      align-items: flex-start;
    }

    wui-card {
      margin: var(--wui-spacing-xxl) 0px;
    }
  }

  @media (max-width: 430px) {
    wui-flex {
      align-items: flex-end;
    }

    wui-card {
      max-width: 100%;
      border-bottom-left-radius: var(--local-border-bottom-mobile-radius);
      border-bottom-right-radius: var(--local-border-bottom-mobile-radius);
      border-bottom: none;
      animation: slide-in 0.2s var(--wui-ease-out-power-2);
    }

    wui-card[shake='true'] {
      animation:
        slide-in 0.2s var(--wui-ease-out-power-2),
        w3m-shake 0.5s var(--wui-ease-out-power-2);
    }
  }

  @keyframes zoom-in {
    0% {
      transform: scale(0.95) translateY(0);
    }
    100% {
      transform: scale(1) translateY(0);
    }
  }

  @keyframes slide-in {
    0% {
      transform: scale(1) translateY(50px);
    }
    100% {
      transform: scale(1) translateY(0);
    }
  }

  @keyframes w3m-shake {
    0% {
      transform: scale(1) rotate(0deg);
    }
    20% {
      transform: scale(1) rotate(-1deg);
    }
    40% {
      transform: scale(1) rotate(1.5deg);
    }
    60% {
      transform: scale(1) rotate(-1.5deg);
    }
    80% {
      transform: scale(1) rotate(1deg);
    }
    100% {
      transform: scale(1) rotate(0deg);
    }
  }

  @keyframes w3m-view-height {
    from {
      height: var(--prev-height);
    }
    to {
      height: var(--new-height);
    }
  }
`;var yu=globalThis&&globalThis.__decorate||function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const eV="scroll-lock";class Oa extends Be{constructor(){super(),this.unsubscribe=[],this.abortController=void 0,this.hasPrefetched=!1,this.enableEmbedded=le.state.enableEmbedded,this.open=Ot.state.open,this.caipAddress=W.state.activeCaipAddress,this.caipNetwork=W.state.activeCaipNetwork,this.shake=Ot.state.shake,this.filterByNamespace=me.state.filterByNamespace,this.initializeTheming(),be.prefetchAnalyticsConfig(),this.unsubscribe.push(Ot.subscribeKey("open",e=>e?this.onOpen():this.onClose()),Ot.subscribeKey("shake",e=>this.shake=e),W.subscribeKey("activeCaipNetwork",e=>this.onNewNetwork(e)),W.subscribeKey("activeCaipAddress",e=>this.onNewAddress(e)),le.subscribeKey("enableEmbedded",e=>this.enableEmbedded=e),me.subscribeKey("filterByNamespace",e=>{var n;this.filterByNamespace!==e&&!((n=W.getAccountData(e))!=null&&n.caipAddress)&&(be.fetchRecommendedWallets(),this.filterByNamespace=e)}))}firstUpdated(){if(this.caipAddress){if(this.enableEmbedded){Ot.close(),this.prefetch();return}this.onNewAddress(this.caipAddress)}this.open&&this.onOpen(),this.enableEmbedded&&this.prefetch()}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),this.onRemoveKeyboardListener()}render(){return this.style.cssText=`
      --local-border-bottom-mobile-radius: ${this.enableEmbedded?"clamp(0px, var(--wui-border-radius-l), 44px)":"0px"};
    `,this.enableEmbedded?Z`${this.contentTemplate()}
        <w3m-tooltip></w3m-tooltip> `:this.open?Z`
          <wui-flex @click=${this.onOverlayClick.bind(this)} data-testid="w3m-modal-overlay">
            ${this.contentTemplate()}
          </wui-flex>
          <w3m-tooltip></w3m-tooltip>
        `:null}contentTemplate(){return Z` <wui-card
      shake="${this.shake}"
      data-embedded="${He(this.enableEmbedded)}"
      role="alertdialog"
      aria-modal="true"
      tabindex="0"
      data-testid="w3m-modal-card"
    >
      <w3m-header></w3m-header>
      <w3m-router></w3m-router>
      <w3m-snackbar></w3m-snackbar>
      <w3m-alertbar></w3m-alertbar>
    </wui-card>`}async onOverlayClick(e){e.target===e.currentTarget&&await this.handleClose()}async handleClose(){await nz.safeClose()}initializeTheming(){const{themeVariables:e,themeMode:n}=Ar.state,r=ur.getColorTheme(n);uOe(e,r)}onClose(){this.open=!1,this.classList.remove("open"),this.onScrollUnlock(),En.hide(),this.onRemoveKeyboardListener()}onOpen(){this.open=!0,this.classList.add("open"),this.onScrollLock(),this.onAddKeyboardListener()}onScrollLock(){const e=document.createElement("style");e.dataset.w3m=eV,e.textContent=`
      body {
        touch-action: none;
        overflow: hidden;
        overscroll-behavior: contain;
      }
      w3m-modal {
        pointer-events: auto;
      }
    `,document.head.appendChild(e)}onScrollUnlock(){const e=document.head.querySelector(`style[data-w3m="${eV}"]`);e&&e.remove()}onAddKeyboardListener(){var n;this.abortController=new AbortController;const e=(n=this.shadowRoot)==null?void 0:n.querySelector("wui-card");e==null||e.focus(),window.addEventListener("keydown",r=>{if(r.key==="Escape")this.handleClose();else if(r.key==="Tab"){const{tagName:i}=r.target;i&&!i.includes("W3M-")&&!i.includes("WUI-")&&(e==null||e.focus())}},this.abortController)}onRemoveKeyboardListener(){var e;(e=this.abortController)==null||e.abort(),this.abortController=void 0}async onNewAddress(e){const n=W.state.isSwitchingNamespace,r=ye.getPlainAddress(e);!r&&!n?Ot.close():n&&r&&we.goBack(),await Hd.initializeIfEnabled(),this.caipAddress=e,W.setIsSwitchingNamespace(!1)}onNewNetwork(e){var m,y,w;const n=this.caipNetwork,r=(m=n==null?void 0:n.caipNetworkId)==null?void 0:m.toString(),i=n==null?void 0:n.chainNamespace,s=(y=e==null?void 0:e.caipNetworkId)==null?void 0:y.toString(),o=e==null?void 0:e.chainNamespace,a=r!==s,l=a&&!(i!==o),u=(n==null?void 0:n.name)===Te.UNSUPPORTED_NETWORK_NAME,d=we.state.view==="ConnectingExternal",h=!((w=W.getAccountData(e==null?void 0:e.chainNamespace))!=null&&w.caipAddress),f=we.state.view==="UnsupportedChain",g=Ot.state.open;let p=!1;g&&!d&&(h?a&&(p=!0):(f||l&&!u)&&(p=!0)),p&&we.state.view!=="SIWXSignMessage"&&we.goBack(),this.caipNetwork=e}prefetch(){this.hasPrefetched||(be.prefetch(),be.fetchWalletsByPage({page:1}),this.hasPrefetched=!0)}}Oa.styles=DNe,yu([Q({type:Boolean})],Oa.prototype,"enableEmbedded",void 0),yu([$e()],Oa.prototype,"open",void 0),yu([$e()],Oa.prototype,"caipAddress",void 0),yu([$e()],Oa.prototype,"caipNetwork",void 0),yu([$e()],Oa.prototype,"shake",void 0),yu([$e()],Oa.prototype,"filterByNamespace",void 0);let J9=class extends Oa{};J9=yu([ke("w3m-modal")],J9);let Q9=class extends Oa{};Q9=yu([ke("appkit-modal")],Q9);const LNe=Object.freeze(Object.defineProperty({__proto__:null,get AppKitModal(){return Q9},get W3mModal(){return J9},W3mModalBase:Oa},Symbol.toStringTag,{value:"Module"})),jNe=Se`<svg
  width="14"
  height="14"
  viewBox="0 0 14 14"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M7.0023 0.875C7.48571 0.875 7.8776 1.26675 7.8776 1.75V6.125H12.2541C12.7375 6.125 13.1294 6.51675 13.1294 7C13.1294 7.48325 12.7375 7.875 12.2541 7.875H7.8776V12.25C7.8776 12.7332 7.48571 13.125 7.0023 13.125C6.51889 13.125 6.12701 12.7332 6.12701 12.25V7.875H1.75054C1.26713 7.875 0.875244 7.48325 0.875244 7C0.875244 6.51675 1.26713 6.125 1.75054 6.125H6.12701V1.75C6.12701 1.26675 6.51889 0.875 7.0023 0.875Z"
    fill="#667dff"
  /></svg
>`,UNe=Object.freeze(Object.defineProperty({__proto__:null,addSvg:jNe},Symbol.toStringTag,{value:"Module"})),FNe=Se`<svg fill="none" viewBox="0 0 24 24">
  <path
    style="fill: var(--wui-color-accent-100);"
    d="M10.2 6.6a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0ZM21 6.6a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0ZM10.2 17.4a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0ZM21 17.4a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0Z"
  />
</svg>`,zNe=Object.freeze(Object.defineProperty({__proto__:null,allWalletsSvg:FNe},Symbol.toStringTag,{value:"Module"})),qNe=Se`<svg
  fill="none"
  viewBox="0 0 21 20"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M10.5 2.42908C6.31875 2.42908 2.92859 5.81989 2.92859 10.0034C2.92859 14.1869 6.31875 17.5777 10.5 17.5777C14.6813 17.5777 18.0714 14.1869 18.0714 10.0034C18.0714 5.81989 14.6813 2.42908 10.5 2.42908ZM0.928589 10.0034C0.928589 4.71596 5.21355 0.429077 10.5 0.429077C15.7865 0.429077 20.0714 4.71596 20.0714 10.0034C20.0714 15.2908 15.7865 19.5777 10.5 19.5777C5.21355 19.5777 0.928589 15.2908 0.928589 10.0034ZM10.5 5.75003C11.0523 5.75003 11.5 6.19774 11.5 6.75003L11.5 10.8343L12.7929 9.54137C13.1834 9.15085 13.8166 9.15085 14.2071 9.54137C14.5976 9.9319 14.5976 10.5651 14.2071 10.9556L11.2071 13.9556C10.8166 14.3461 10.1834 14.3461 9.79291 13.9556L6.79291 10.9556C6.40239 10.5651 6.40239 9.9319 6.79291 9.54137C7.18343 9.15085 7.8166 9.15085 8.20712 9.54137L9.50002 10.8343L9.50002 6.75003C9.50002 6.19774 9.94773 5.75003 10.5 5.75003Z"
    clip-rule="evenodd"
  /></svg
>`,HNe=Object.freeze(Object.defineProperty({__proto__:null,arrowBottomCircleSvg:qNe},Symbol.toStringTag,{value:"Module"})),WNe=Se`
<svg width="36" height="36">
  <path
    d="M28.724 0H7.271A7.269 7.269 0 0 0 0 7.272v21.46A7.268 7.268 0 0 0 7.271 36H28.73A7.272 7.272 0 0 0 36 28.728V7.272A7.275 7.275 0 0 0 28.724 0Z"
    fill="url(#a)"
  />
  <path
    d="m17.845 8.271.729-1.26a1.64 1.64 0 1 1 2.843 1.638l-7.023 12.159h5.08c1.646 0 2.569 1.935 1.853 3.276H6.434a1.632 1.632 0 0 1-1.638-1.638c0-.909.73-1.638 1.638-1.638h4.176l5.345-9.265-1.67-2.898a1.642 1.642 0 0 1 2.844-1.638l.716 1.264Zm-6.317 17.5-1.575 2.732a1.64 1.64 0 1 1-2.844-1.638l1.17-2.025c1.323-.41 2.398-.095 3.249.931Zm13.56-4.954h4.262c.909 0 1.638.729 1.638 1.638 0 .909-.73 1.638-1.638 1.638h-2.367l1.597 2.772c.45.788.185 1.782-.602 2.241a1.642 1.642 0 0 1-2.241-.603c-2.69-4.666-4.711-8.159-6.052-10.485-1.372-2.367-.391-4.743.576-5.549 1.075 1.846 2.682 4.631 4.828 8.348Z"
    fill="#fff"
  />
  <defs>
    <linearGradient id="a" x1="18" y1="0" x2="18" y2="36" gradientUnits="userSpaceOnUse">
      <stop stop-color="#18BFFB" />
      <stop offset="1" stop-color="#2072F3" />
    </linearGradient>
  </defs>
</svg>`,KNe=Object.freeze(Object.defineProperty({__proto__:null,appStoreSvg:WNe},Symbol.toStringTag,{value:"Module"})),VNe=Se`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#000" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M28.77 23.3c-.69 1.99-2.75 5.52-4.87 5.56-1.4.03-1.86-.84-3.46-.84-1.61 0-2.12.81-3.45.86-2.25.1-5.72-5.1-5.72-9.62 0-4.15 2.9-6.2 5.42-6.25 1.36-.02 2.64.92 3.47.92.83 0 2.38-1.13 4.02-.97.68.03 2.6.28 3.84 2.08-3.27 2.14-2.76 6.61.75 8.25ZM24.2 7.88c-2.47.1-4.49 2.69-4.2 4.84 2.28.17 4.47-2.39 4.2-4.84Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`,GNe=Object.freeze(Object.defineProperty({__proto__:null,appleSvg:VNe},Symbol.toStringTag,{value:"Module"})),ZNe=Se`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M7 1.99a1 1 0 0 1 1 1v7.58l2.46-2.46a1 1 0 0 1 1.41 1.42L7.7 13.69a1 1 0 0 1-1.41 0L2.12 9.53A1 1 0 0 1 3.54 8.1L6 10.57V3a1 1 0 0 1 1-1Z"
    clip-rule="evenodd"
  />
</svg>`,YNe=Object.freeze(Object.defineProperty({__proto__:null,arrowBottomSvg:ZNe},Symbol.toStringTag,{value:"Module"})),JNe=Se`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M13 7.99a1 1 0 0 1-1 1H4.4l2.46 2.46a1 1 0 1 1-1.41 1.41L1.29 8.7a1 1 0 0 1 0-1.41L5.46 3.1a1 1 0 0 1 1.41 1.42L4.41 6.99H12a1 1 0 0 1 1 1Z"
    clip-rule="evenodd"
  />
</svg>`,QNe=Object.freeze(Object.defineProperty({__proto__:null,arrowLeftSvg:JNe},Symbol.toStringTag,{value:"Module"})),XNe=Se`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M1 7.99a1 1 0 0 1 1-1h7.58L7.12 4.53A1 1 0 1 1 8.54 3.1l4.16 4.17a1 1 0 0 1 0 1.41l-4.16 4.17a1 1 0 1 1-1.42-1.41l2.46-2.46H2a1 1 0 0 1-1-1Z"
    clip-rule="evenodd"
  />
</svg>`,eke=Object.freeze(Object.defineProperty({__proto__:null,arrowRightSvg:XNe},Symbol.toStringTag,{value:"Module"})),tke=Se`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M7 13.99a1 1 0 0 1-1-1V5.4L3.54 7.86a1 1 0 0 1-1.42-1.41L6.3 2.28a1 1 0 0 1 1.41 0l4.17 4.17a1 1 0 1 1-1.41 1.41L8 5.4v7.59a1 1 0 0 1-1 1Z"
    clip-rule="evenodd"
  />
</svg>`,nke=Object.freeze(Object.defineProperty({__proto__:null,arrowTopSvg:tke},Symbol.toStringTag,{value:"Module"})),rke=Se`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="12"
  height="13"
  viewBox="0 0 12 13"
  fill="none"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.61391 1.57124C5.85142 1.42873 6.14813 1.42873 6.38564 1.57124L11.0793 4.38749C11.9179 4.89067 11.5612 6.17864 10.5832 6.17864H9.96398V10.0358H10.2854C10.6996 10.0358 11.0354 10.3716 11.0354 10.7858C11.0354 11.2 10.6996 11.5358 10.2854 11.5358H1.71416C1.29995 11.5358 0.964172 11.2 0.964172 10.7858C0.964172 10.3716 1.29995 10.0358 1.71416 10.0358H2.03558L2.03558 6.17864H1.41637C0.438389 6.17864 0.0816547 4.89066 0.920263 4.38749L5.61391 1.57124ZM3.53554 6.17864V10.0358H5.24979V6.17864H3.53554ZM6.74976 6.17864V10.0358H8.46401V6.17864H6.74976ZM8.64913 4.67864H3.35043L5.99978 3.089L8.64913 4.67864Z"
    fill="currentColor"
  /></svg
>`,ike=Object.freeze(Object.defineProperty({__proto__:null,bankSvg:rke},Symbol.toStringTag,{value:"Module"})),ske=Se`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4 6.4a1 1 0 0 1-.46.89 6.98 6.98 0 0 0 .38 6.18A7 7 0 0 0 16.46 7.3a1 1 0 0 1-.47-.92 7 7 0 0 0-12 .03Zm-2.02-.5a9 9 0 1 1 16.03 8.2A9 9 0 0 1 1.98 5.9Z"
    clip-rule="evenodd"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.03 8.63c-1.46-.3-2.72-.75-3.6-1.35l-.02-.01-.14-.11a1 1 0 0 1 1.2-1.6l.1.08c.6.4 1.52.74 2.69 1 .16-.99.39-1.88.67-2.65.3-.79.68-1.5 1.15-2.02A2.58 2.58 0 0 1 9.99 1c.8 0 1.45.44 1.92.97.47.52.84 1.23 1.14 2.02.29.77.52 1.66.68 2.64a8 8 0 0 0 2.7-1l.26-.18h.48a1 1 0 0 1 .12 2c-.86.51-2.01.91-3.34 1.18a22.24 22.24 0 0 1-.03 3.19c1.45.29 2.7.73 3.58 1.31a1 1 0 0 1-1.1 1.68c-.6-.4-1.56-.76-2.75-1-.15.8-.36 1.55-.6 2.2-.3.79-.67 1.5-1.14 2.02-.47.53-1.12.97-1.92.97-.8 0-1.45-.44-1.91-.97a6.51 6.51 0 0 1-1.15-2.02c-.24-.65-.44-1.4-.6-2.2-1.18.24-2.13.6-2.73.99a1 1 0 1 1-1.1-1.67c.88-.58 2.12-1.03 3.57-1.31a22.03 22.03 0 0 1-.04-3.2Zm2.2-1.7c.15-.86.34-1.61.58-2.24.24-.65.51-1.12.76-1.4.25-.28.4-.29.42-.29.03 0 .17.01.42.3.25.27.52.74.77 1.4.23.62.43 1.37.57 2.22a19.96 19.96 0 0 1-3.52 0Zm-.18 4.6a20.1 20.1 0 0 1-.03-2.62 21.95 21.95 0 0 0 3.94 0 20.4 20.4 0 0 1-.03 2.63 21.97 21.97 0 0 0-3.88 0Zm.27 2c.13.66.3 1.26.49 1.78.24.65.51 1.12.76 1.4.25.28.4.29.42.29.03 0 .17-.01.42-.3.25-.27.52-.74.77-1.4.19-.5.36-1.1.49-1.78a20.03 20.03 0 0 0-3.35 0Z"
    clip-rule="evenodd"
  />
</svg>`,oke=Object.freeze(Object.defineProperty({__proto__:null,browserSvg:ske},Symbol.toStringTag,{value:"Module"})),ake=Se`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="12"
  height="13"
  viewBox="0 0 12 13"
  fill="none"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M4.16072 2C4.17367 2 4.18665 2 4.19968 2L7.83857 2C8.36772 1.99998 8.82398 1.99996 9.19518 2.04018C9.5895 2.0829 9.97577 2.17811 10.3221 2.42971C10.5131 2.56849 10.6811 2.73647 10.8198 2.92749C11.0714 3.27379 11.1666 3.66007 11.2094 4.0544C11.2496 4.42561 11.2496 4.88188 11.2495 5.41105V7.58896C11.2496 8.11812 11.2496 8.57439 11.2094 8.94561C11.1666 9.33994 11.0714 9.72621 10.8198 10.0725C10.6811 10.2635 10.5131 10.4315 10.3221 10.5703C9.97577 10.8219 9.5895 10.9171 9.19518 10.9598C8.82398 11 8.36772 11 7.83856 11H4.16073C3.63157 11 3.17531 11 2.80411 10.9598C2.40979 10.9171 2.02352 10.8219 1.67722 10.5703C1.48621 10.4315 1.31824 10.2635 1.17946 10.0725C0.927858 9.72621 0.832652 9.33994 0.78993 8.94561C0.749713 8.5744 0.749733 8.11813 0.749757 7.58896L0.749758 5.45C0.749758 5.43697 0.749758 5.42399 0.749757 5.41104C0.749733 4.88188 0.749713 4.42561 0.78993 4.0544C0.832652 3.66007 0.927858 3.27379 1.17946 2.92749C1.31824 2.73647 1.48621 2.56849 1.67722 2.42971C2.02352 2.17811 2.40979 2.0829 2.80411 2.04018C3.17531 1.99996 3.63157 1.99998 4.16072 2ZM2.96567 3.53145C2.69897 3.56034 2.60687 3.60837 2.55888 3.64324C2.49521 3.6895 2.43922 3.74549 2.39296 3.80916C2.35809 3.85715 2.31007 3.94926 2.28117 4.21597C2.26629 4.35335 2.25844 4.51311 2.25431 4.70832H9.74498C9.74085 4.51311 9.733 4.35335 9.71812 4.21597C9.68922 3.94926 9.6412 3.85715 9.60633 3.80916C9.56007 3.74549 9.50408 3.6895 9.44041 3.64324C9.39242 3.60837 9.30031 3.56034 9.03362 3.53145C8.75288 3.50103 8.37876 3.5 7.79961 3.5H4.19968C3.62053 3.5 3.24641 3.50103 2.96567 3.53145ZM9.74956 6.20832H2.24973V7.55C2.24973 8.12917 2.25076 8.5033 2.28117 8.78404C2.31007 9.05074 2.35809 9.14285 2.39296 9.19084C2.43922 9.25451 2.49521 9.31051 2.55888 9.35677C2.60687 9.39163 2.69897 9.43966 2.96567 9.46856C3.24641 9.49897 3.62053 9.5 4.19968 9.5H7.79961C8.37876 9.5 8.75288 9.49897 9.03362 9.46856C9.30032 9.43966 9.39242 9.39163 9.44041 9.35677C9.50408 9.31051 9.56007 9.25451 9.60633 9.19084C9.6412 9.14285 9.68922 9.05075 9.71812 8.78404C9.74854 8.5033 9.74956 8.12917 9.74956 7.55V6.20832ZM6.74963 8C6.74963 7.58579 7.08541 7.25 7.49961 7.25H8.2496C8.6638 7.25 8.99958 7.58579 8.99958 8C8.99958 8.41422 8.6638 8.75 8.2496 8.75H7.49961C7.08541 8.75 6.74963 8.41422 6.74963 8Z"
    fill="currentColor"
  /></svg
>`,cke=Object.freeze(Object.defineProperty({__proto__:null,cardSvg:ake},Symbol.toStringTag,{value:"Module"})),lke=Se`<svg
  width="28"
  height="28"
  viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M25.5297 4.92733C26.1221 5.4242 26.1996 6.30724 25.7027 6.89966L12.2836 22.8997C12.0316 23.2001 11.6652 23.3811 11.2735 23.3986C10.8817 23.4161 10.5006 23.2686 10.2228 22.9919L2.38218 15.1815C1.83439 14.6358 1.83268 13.7494 2.37835 13.2016C2.92403 12.6538 3.81046 12.6521 4.35825 13.1978L11.1183 19.9317L23.5573 5.10036C24.0542 4.50794 24.9372 4.43047 25.5297 4.92733Z"
    fill="currentColor"/>
</svg>
`,uke=Object.freeze(Object.defineProperty({__proto__:null,checkmarkSvg:lke},Symbol.toStringTag,{value:"Module"})),dke=Se`<svg fill="none" viewBox="0 0 14 14">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M12.9576 2.23383C13.3807 2.58873 13.4361 3.21947 13.0812 3.64263L6.37159 11.6426C6.19161 11.8572 5.92989 11.9865 5.65009 11.999C5.3703 12.0115 5.09808 11.9062 4.89965 11.7085L0.979321 7.80331C0.588042 7.41354 0.586817 6.78038 0.976585 6.3891C1.36635 5.99782 1.99952 5.99659 2.3908 6.38636L5.53928 9.52268L11.5488 2.35742C11.9037 1.93426 12.5344 1.87893 12.9576 2.23383Z"
    clip-rule="evenodd"
  />
</svg>`,hke=Object.freeze(Object.defineProperty({__proto__:null,checkmarkBoldSvg:dke},Symbol.toStringTag,{value:"Module"})),fke=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M1.46 4.96a1 1 0 0 1 1.41 0L8 10.09l5.13-5.13a1 1 0 1 1 1.41 1.41l-5.83 5.84a1 1 0 0 1-1.42 0L1.46 6.37a1 1 0 0 1 0-1.41Z"
    clip-rule="evenodd"
  />
</svg>`,pke=Object.freeze(Object.defineProperty({__proto__:null,chevronBottomSvg:fke},Symbol.toStringTag,{value:"Module"})),gke=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M11.04 1.46a1 1 0 0 1 0 1.41L5.91 8l5.13 5.13a1 1 0 1 1-1.41 1.41L3.79 8.71a1 1 0 0 1 0-1.42l5.84-5.83a1 1 0 0 1 1.41 0Z"
    clip-rule="evenodd"
  />
</svg>`,mke=Object.freeze(Object.defineProperty({__proto__:null,chevronLeftSvg:gke},Symbol.toStringTag,{value:"Module"})),yke=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4.96 14.54a1 1 0 0 1 0-1.41L10.09 8 4.96 2.87a1 1 0 0 1 1.41-1.41l5.84 5.83a1 1 0 0 1 0 1.42l-5.84 5.83a1 1 0 0 1-1.41 0Z"
    clip-rule="evenodd"
  />
</svg>`,wke=Object.freeze(Object.defineProperty({__proto__:null,chevronRightSvg:yke},Symbol.toStringTag,{value:"Module"})),bke=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M14.54 11.04a1 1 0 0 1-1.41 0L8 5.92l-5.13 5.12a1 1 0 1 1-1.41-1.41l5.83-5.84a1 1 0 0 1 1.42 0l5.83 5.84a1 1 0 0 1 0 1.41Z"
    clip-rule="evenodd"
  />
</svg>`,vke=Object.freeze(Object.defineProperty({__proto__:null,chevronTopSvg:bke},Symbol.toStringTag,{value:"Module"})),Eke=Se`<svg width="36" height="36" fill="none">
  <path
    fill="#fff"
    fill-opacity=".05"
    d="M0 14.94c0-5.55 0-8.326 1.182-10.4a9 9 0 0 1 3.359-3.358C6.614 0 9.389 0 14.94 0h6.12c5.55 0 8.326 0 10.4 1.182a9 9 0 0 1 3.358 3.359C36 6.614 36 9.389 36 14.94v6.12c0 5.55 0 8.326-1.182 10.4a9 9 0 0 1-3.359 3.358C29.386 36 26.611 36 21.06 36h-6.12c-5.55 0-8.326 0-10.4-1.182a9 9 0 0 1-3.358-3.359C0 29.386 0 26.611 0 21.06v-6.12Z"
  />
  <path
    stroke="#fff"
    stroke-opacity=".05"
    d="M14.94.5h6.12c2.785 0 4.84 0 6.46.146 1.612.144 2.743.43 3.691.97a8.5 8.5 0 0 1 3.172 3.173c.541.948.826 2.08.971 3.692.145 1.62.146 3.675.146 6.459v6.12c0 2.785 0 4.84-.146 6.46-.145 1.612-.43 2.743-.97 3.691a8.5 8.5 0 0 1-3.173 3.172c-.948.541-2.08.826-3.692.971-1.62.145-3.674.146-6.459.146h-6.12c-2.784 0-4.84 0-6.46-.146-1.612-.145-2.743-.43-3.691-.97a8.5 8.5 0 0 1-3.172-3.173c-.541-.948-.827-2.08-.971-3.692C.5 25.9.5 23.845.5 21.06v-6.12c0-2.784 0-4.84.146-6.46.144-1.612.43-2.743.97-3.691A8.5 8.5 0 0 1 4.79 1.617C5.737 1.076 6.869.79 8.48.646 10.1.5 12.156.5 14.94.5Z"
  />
  <path
    fill="url(#a)"
    d="M17.998 10.8h12.469a14.397 14.397 0 0 0-24.938.001l6.234 10.798.006-.001a7.19 7.19 0 0 1 6.23-10.799Z"
  />
  <path
    fill="url(#b)"
    d="m24.237 21.598-6.234 10.798A14.397 14.397 0 0 0 30.47 10.798H18.002l-.002.006a7.191 7.191 0 0 1 6.237 10.794Z"
  />
  <path
    fill="url(#c)"
    d="M11.765 21.601 5.531 10.803A14.396 14.396 0 0 0 18.001 32.4l6.235-10.798-.004-.004a7.19 7.19 0 0 1-12.466.004Z"
  />
  <path fill="#fff" d="M18 25.2a7.2 7.2 0 1 0 0-14.4 7.2 7.2 0 0 0 0 14.4Z" />
  <path fill="#1A73E8" d="M18 23.7a5.7 5.7 0 1 0 0-11.4 5.7 5.7 0 0 0 0 11.4Z" />
  <defs>
    <linearGradient
      id="a"
      x1="6.294"
      x2="41.1"
      y1="5.995"
      y2="5.995"
      gradientUnits="userSpaceOnUse"
    >
      <stop stop-color="#D93025" />
      <stop offset="1" stop-color="#EA4335" />
    </linearGradient>
    <linearGradient
      id="b"
      x1="20.953"
      x2="37.194"
      y1="32.143"
      y2="2.701"
      gradientUnits="userSpaceOnUse"
    >
      <stop stop-color="#FCC934" />
      <stop offset="1" stop-color="#FBBC04" />
    </linearGradient>
    <linearGradient
      id="c"
      x1="25.873"
      x2="9.632"
      y1="31.2"
      y2="1.759"
      gradientUnits="userSpaceOnUse"
    >
      <stop stop-color="#1E8E3E" />
      <stop offset="1" stop-color="#34A853" />
    </linearGradient>
  </defs>
</svg>`,Cke=Object.freeze(Object.defineProperty({__proto__:null,chromeStoreSvg:Eke},Symbol.toStringTag,{value:"Module"})),_ke=Se`<svg width="14" height="14" viewBox="0 0 14 14" fill="none">
  <path 
    fill-rule="evenodd" 
    clip-rule="evenodd" 
    d="M7.00235 2C4.24 2 2.00067 4.23858 2.00067 7C2.00067 9.76142 4.24 12 7.00235 12C9.7647 12 12.004 9.76142 12.004 7C12.004 4.23858 9.7647 2 7.00235 2ZM0 7C0 3.13401 3.13506 0 7.00235 0C10.8696 0 14.0047 3.13401 14.0047 7C14.0047 10.866 10.8696 14 7.00235 14C3.13506 14 0 10.866 0 7ZM7.00235 3C7.55482 3 8.00269 3.44771 8.00269 4V6.58579L9.85327 8.43575C10.2439 8.82627 10.2439 9.45944 9.85327 9.84996C9.46262 10.2405 8.82924 10.2405 8.43858 9.84996L6.29501 7.70711C6.10741 7.51957 6.00201 7.26522 6.00201 7V4C6.00201 3.44771 6.44988 3 7.00235 3Z" 
    fill="currentColor"
  />
</svg>`,Ske=Object.freeze(Object.defineProperty({__proto__:null,clockSvg:_ke},Symbol.toStringTag,{value:"Module"})),xke=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M2.54 2.54a1 1 0 0 1 1.42 0L8 6.6l4.04-4.05a1 1 0 1 1 1.42 1.42L9.4 8l4.05 4.04a1 1 0 0 1-1.42 1.42L8 9.4l-4.04 4.05a1 1 0 0 1-1.42-1.42L6.6 8 2.54 3.96a1 1 0 0 1 0-1.42Z"
    clip-rule="evenodd"
  />
</svg>`,Ake=Object.freeze(Object.defineProperty({__proto__:null,closeSvg:xke},Symbol.toStringTag,{value:"Module"})),Ike=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M8 2a6 6 0 1 0 0 12A6 6 0 0 0 8 2ZM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm10.66-2.65a1 1 0 0 1 .23 1.06L9.83 9.24a1 1 0 0 1-.59.58l-2.83 1.06A1 1 0 0 1 5.13 9.6l1.06-2.82a1 1 0 0 1 .58-.59L9.6 5.12a1 1 0 0 1 1.06.23ZM7.9 7.89l-.13.35.35-.13.12-.35-.34.13Z"
    clip-rule="evenodd"
  />
</svg>`,$ke=Object.freeze(Object.defineProperty({__proto__:null,compassSvg:Ike},Symbol.toStringTag,{value:"Module"})),Pke=Se`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M10 3a7 7 0 0 0-6.85 8.44l8.29-8.3C10.97 3.06 10.49 3 10 3Zm3.49.93-9.56 9.56c.32.55.71 1.06 1.16 1.5L15 5.1a7.03 7.03 0 0 0-1.5-1.16Zm2.7 2.8-9.46 9.46a7 7 0 0 0 9.46-9.46ZM1.99 5.9A9 9 0 1 1 18 14.09 9 9 0 0 1 1.98 5.91Z"
    clip-rule="evenodd"
  />
</svg>`,Oke=Object.freeze(Object.defineProperty({__proto__:null,coinPlaceholderSvg:Pke},Symbol.toStringTag,{value:"Module"})),Tke=Se`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="16"
  height="16"
  viewBox="0 0 16 16"
  fill="none"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M9.21498 1.28565H10.5944C11.1458 1.28562 11.6246 1.2856 12.0182 1.32093C12.4353 1.35836 12.853 1.44155 13.2486 1.66724C13.7005 1.92498 14.0749 2.29935 14.3326 2.75122C14.5583 3.14689 14.6415 3.56456 14.6789 3.9817C14.7143 4.37531 14.7142 4.85403 14.7142 5.40545V6.78489C14.7142 7.33631 14.7143 7.81503 14.6789 8.20865C14.6415 8.62578 14.5583 9.04345 14.3326 9.43912C14.0749 9.89099 13.7005 10.2654 13.2486 10.5231C12.853 10.7488 12.4353 10.832 12.0182 10.8694C11.7003 10.8979 11.3269 10.9034 10.9045 10.9045C10.9034 11.3269 10.8979 11.7003 10.8694 12.0182C10.832 12.4353 10.7488 12.853 10.5231 13.2486C10.2654 13.7005 9.89099 14.0749 9.43912 14.3326C9.04345 14.5583 8.62578 14.6415 8.20865 14.6789C7.81503 14.7143 7.33631 14.7142 6.78489 14.7142H5.40545C4.85403 14.7142 4.37531 14.7143 3.9817 14.6789C3.56456 14.6415 3.14689 14.5583 2.75122 14.3326C2.29935 14.0749 1.92498 13.7005 1.66724 13.2486C1.44155 12.853 1.35836 12.4353 1.32093 12.0182C1.2856 11.6246 1.28562 11.1458 1.28565 10.5944V9.21498C1.28562 8.66356 1.2856 8.18484 1.32093 7.79122C1.35836 7.37409 1.44155 6.95642 1.66724 6.56074C1.92498 6.10887 2.29935 5.73451 2.75122 5.47677C3.14689 5.25108 3.56456 5.16789 3.9817 5.13045C4.2996 5.10192 4.67301 5.09645 5.09541 5.09541C5.09645 4.67302 5.10192 4.2996 5.13045 3.9817C5.16789 3.56456 5.25108 3.14689 5.47676 2.75122C5.73451 2.29935 6.10887 1.92498 6.56074 1.66724C6.95642 1.44155 7.37409 1.35836 7.79122 1.32093C8.18484 1.2856 8.66356 1.28562 9.21498 1.28565ZM5.09541 7.09552C4.68397 7.09667 4.39263 7.10161 4.16046 7.12245C3.88053 7.14757 3.78516 7.18949 3.74214 7.21403C3.60139 7.29431 3.48478 7.41091 3.4045 7.55166C3.37997 7.59468 3.33804 7.69005 3.31292 7.96999C3.28659 8.26345 3.28565 8.65147 3.28565 9.25708V10.5523C3.28565 11.1579 3.28659 11.5459 3.31292 11.8394C3.33804 12.1193 3.37997 12.2147 3.4045 12.2577C3.48478 12.3985 3.60139 12.5151 3.74214 12.5954C3.78516 12.6199 3.88053 12.6618 4.16046 12.6869C4.45393 12.7133 4.84195 12.7142 5.44755 12.7142H6.74279C7.3484 12.7142 7.73641 12.7133 8.02988 12.6869C8.30981 12.6618 8.40518 12.6199 8.44821 12.5954C8.58895 12.5151 8.70556 12.3985 8.78584 12.2577C8.81038 12.2147 8.8523 12.1193 8.87742 11.8394C8.89825 11.6072 8.90319 11.3159 8.90435 10.9045C8.48219 10.9034 8.10898 10.8979 7.79122 10.8694C7.37409 10.832 6.95641 10.7488 6.56074 10.5231C6.10887 10.2654 5.73451 9.89099 5.47676 9.43912C5.25108 9.04345 5.16789 8.62578 5.13045 8.20865C5.10194 7.89089 5.09645 7.51767 5.09541 7.09552ZM7.96999 3.31292C7.69005 3.33804 7.59468 3.37997 7.55166 3.4045C7.41091 3.48478 7.29431 3.60139 7.21403 3.74214C7.18949 3.78516 7.14757 3.88053 7.12245 4.16046C7.09611 4.45393 7.09517 4.84195 7.09517 5.44755V6.74279C7.09517 7.3484 7.09611 7.73641 7.12245 8.02988C7.14757 8.30981 7.18949 8.40518 7.21403 8.4482C7.29431 8.58895 7.41091 8.70556 7.55166 8.78584C7.59468 8.81038 7.69005 8.8523 7.96999 8.87742C8.26345 8.90376 8.65147 8.9047 9.25708 8.9047H10.5523C11.1579 8.9047 11.5459 8.90376 11.8394 8.87742C12.1193 8.8523 12.2147 8.81038 12.2577 8.78584C12.3985 8.70556 12.5151 8.58895 12.5954 8.4482C12.6199 8.40518 12.6618 8.30981 12.6869 8.02988C12.7133 7.73641 12.7142 7.3484 12.7142 6.74279V5.44755C12.7142 4.84195 12.7133 4.45393 12.6869 4.16046C12.6618 3.88053 12.6199 3.78516 12.5954 3.74214C12.5151 3.60139 12.3985 3.48478 12.2577 3.4045C12.2147 3.37997 12.1193 3.33804 11.8394 3.31292C11.5459 3.28659 11.1579 3.28565 10.5523 3.28565H9.25708C8.65147 3.28565 8.26345 3.28659 7.96999 3.31292Z"
    fill="#788181"
  /></svg
>`,Nke=Object.freeze(Object.defineProperty({__proto__:null,copySvg:Tke},Symbol.toStringTag,{value:"Module"})),kke=Se` <svg fill="none" viewBox="0 0 13 4">
  <path fill="currentColor" d="M.5 0h12L8.9 3.13a3.76 3.76 0 0 1-4.8 0L.5 0Z" />
</svg>`,Rke=Object.freeze(Object.defineProperty({__proto__:null,cursorSvg:kke},Symbol.toStringTag,{value:"Module"})),Mke=Se`<svg fill="none" viewBox="0 0 14 6">
  <path style="fill: var(--wui-color-bg-150);" d="M0 1h14L9.21 5.12a3.31 3.31 0 0 1-4.49 0L0 1Z" />
  <path
    style="stroke: var(--wui-color-inverse-100);"
    stroke-opacity=".05"
    d="M1.33 1.5h11.32L8.88 4.75l-.01.01a2.81 2.81 0 0 1-3.8 0l-.02-.01L1.33 1.5Z"
  />
  <path
    style="fill: var(--wui-color-bg-150);"
    d="M1.25.71h11.5L9.21 3.88a3.31 3.31 0 0 1-4.49 0L1.25.71Z"
  />
</svg> `,Bke=Object.freeze(Object.defineProperty({__proto__:null,cursorTransparentSvg:Mke},Symbol.toStringTag,{value:"Module"})),Dke=Se`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M13.66 2H6.34c-1.07 0-1.96 0-2.68.08-.74.08-1.42.25-2.01.68a4 4 0 0 0-.89.89c-.43.6-.6 1.27-.68 2.01C0 6.38 0 7.26 0 8.34v.89c0 1.07 0 1.96.08 2.68.08.74.25 1.42.68 2.01a4 4 0 0 0 .89.89c.6.43 1.27.6 2.01.68a27 27 0 0 0 2.68.08h7.32a27 27 0 0 0 2.68-.08 4.03 4.03 0 0 0 2.01-.68 4 4 0 0 0 .89-.89c.43-.6.6-1.27.68-2.01.08-.72.08-1.6.08-2.68v-.89c0-1.07 0-1.96-.08-2.68a4.04 4.04 0 0 0-.68-2.01 4 4 0 0 0-.89-.89c-.6-.43-1.27-.6-2.01-.68C15.62 2 14.74 2 13.66 2ZM2.82 4.38c.2-.14.48-.25 1.06-.31C4.48 4 5.25 4 6.4 4h7.2c1.15 0 1.93 0 2.52.07.58.06.86.17 1.06.31a2 2 0 0 1 .44.44c.14.2.25.48.31 1.06.07.6.07 1.37.07 2.52v.77c0 1.15 0 1.93-.07 2.52-.06.58-.17.86-.31 1.06a2 2 0 0 1-.44.44c-.2.14-.48.25-1.06.32-.6.06-1.37.06-2.52.06H6.4c-1.15 0-1.93 0-2.52-.06-.58-.07-.86-.18-1.06-.32a2 2 0 0 1-.44-.44c-.14-.2-.25-.48-.31-1.06C2 11.1 2 10.32 2 9.17V8.4c0-1.15 0-1.93.07-2.52.06-.58.17-.86.31-1.06a2 2 0 0 1 .44-.44Z"
    clip-rule="evenodd"
  />
  <path fill="currentColor" d="M6.14 17.57a1 1 0 1 0 0 2h7.72a1 1 0 1 0 0-2H6.14Z" />
</svg>`,Lke=Object.freeze(Object.defineProperty({__proto__:null,desktopSvg:Dke},Symbol.toStringTag,{value:"Module"})),jke=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.07 1h.57a1 1 0 0 1 0 2h-.52c-.98 0-1.64 0-2.14.06-.48.05-.7.14-.84.24-.13.1-.25.22-.34.35-.1.14-.2.35-.25.83-.05.5-.05 1.16-.05 2.15v2.74c0 .99 0 1.65.05 2.15.05.48.14.7.25.83.1.14.2.25.34.35.14.1.36.2.84.25.5.05 1.16.05 2.14.05h.52a1 1 0 0 1 0 2h-.57c-.92 0-1.69 0-2.3-.07a3.6 3.6 0 0 1-1.8-.61c-.3-.22-.57-.49-.8-.8a3.6 3.6 0 0 1-.6-1.79C.5 11.11.5 10.35.5 9.43V6.58c0-.92 0-1.7.06-2.31a3.6 3.6 0 0 1 .62-1.8c.22-.3.48-.57.79-.79a3.6 3.6 0 0 1 1.8-.61C4.37 1 5.14 1 6.06 1ZM9.5 3a1 1 0 0 1 1.42 0l4.28 4.3a1 1 0 0 1 0 1.4L10.93 13a1 1 0 0 1-1.42-1.42L12.1 9H6.8a1 1 0 1 1 0-2h5.3L9.51 4.42a1 1 0 0 1 0-1.41Z"
    clip-rule="evenodd"
  />
</svg>`,Uke=Object.freeze(Object.defineProperty({__proto__:null,disconnectSvg:jke},Symbol.toStringTag,{value:"Module"})),Fke=Se`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#5865F2" />
      <path
        fill="#fff"
        fill-rule="evenodd"
        d="M25.71 28.15C30.25 28 32 25.02 32 25.02c0-6.61-2.96-11.98-2.96-11.98-2.96-2.22-5.77-2.15-5.77-2.15l-.29.32c3.5 1.07 5.12 2.61 5.12 2.61a16.75 16.75 0 0 0-10.34-1.93l-.35.04a15.43 15.43 0 0 0-5.88 1.9s1.71-1.63 5.4-2.7l-.2-.24s-2.81-.07-5.77 2.15c0 0-2.96 5.37-2.96 11.98 0 0 1.73 2.98 6.27 3.13l1.37-1.7c-2.6-.79-3.6-2.43-3.6-2.43l.58.35.09.06.08.04.02.01.08.05a17.25 17.25 0 0 0 4.52 1.58 14.4 14.4 0 0 0 8.3-.86c.72-.27 1.52-.66 2.37-1.21 0 0-1.03 1.68-3.72 2.44.61.78 1.35 1.67 1.35 1.67Zm-9.55-9.6c-1.17 0-2.1 1.03-2.1 2.28 0 1.25.95 2.28 2.1 2.28 1.17 0 2.1-1.03 2.1-2.28.01-1.25-.93-2.28-2.1-2.28Zm7.5 0c-1.17 0-2.1 1.03-2.1 2.28 0 1.25.95 2.28 2.1 2.28 1.17 0 2.1-1.03 2.1-2.28 0-1.25-.93-2.28-2.1-2.28Z"
        clip-rule="evenodd"
      />
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
  </defs>
</svg>`,zke=Object.freeze(Object.defineProperty({__proto__:null,discordSvg:Fke},Symbol.toStringTag,{value:"Module"})),qke=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="M4.25 7a.63.63 0 0 0-.63.63v3.97c0 .28-.2.51-.47.54l-.75.07a.93.93 0 0 1-.9-.47A7.51 7.51 0 0 1 5.54.92a7.5 7.5 0 0 1 9.54 4.62c.12.35.06.72-.16 1-.74.97-1.68 1.78-2.6 2.44V4.44a.64.64 0 0 0-.63-.64h-1.06c-.35 0-.63.3-.63.64v5.5c0 .23-.12.42-.32.5l-.52.23V6.05c0-.36-.3-.64-.64-.64H7.45c-.35 0-.64.3-.64.64v4.97c0 .25-.17.46-.4.52a5.8 5.8 0 0 0-.45.11v-4c0-.36-.3-.65-.64-.65H4.25ZM14.07 12.4A7.49 7.49 0 0 1 3.6 14.08c4.09-.58 9.14-2.5 11.87-6.6v.03a7.56 7.56 0 0 1-1.41 4.91Z"
  />
</svg>`,Hke=Object.freeze(Object.defineProperty({__proto__:null,etherscanSvg:qke},Symbol.toStringTag,{value:"Module"})),Wke=Se`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.71 2.99a.57.57 0 0 0-.57.57 1 1 0 0 1-1 1c-.58 0-.96 0-1.24.03-.27.03-.37.07-.42.1a.97.97 0 0 0-.36.35c-.04.08-.09.21-.11.67a2.57 2.57 0 0 1 0 5.13c.02.45.07.6.11.66.09.15.21.28.36.36.07.04.21.1.67.12a2.57 2.57 0 0 1 5.12 0c.46-.03.6-.08.67-.12a.97.97 0 0 0 .36-.36c.03-.04.07-.14.1-.41.02-.29.03-.66.03-1.24a1 1 0 0 1 1-1 .57.57 0 0 0 0-1.15 1 1 0 0 1-1-1c0-.58 0-.95-.03-1.24a1.04 1.04 0 0 0-.1-.42.97.97 0 0 0-.36-.36 1.04 1.04 0 0 0-.42-.1c-.28-.02-.65-.02-1.24-.02a1 1 0 0 1-1-1 .57.57 0 0 0-.57-.57ZM5.15 13.98a1 1 0 0 0 .99-1v-.78a.57.57 0 0 1 1.14 0v.78a1 1 0 0 0 .99 1H8.36a66.26 66.26 0 0 0 .73 0 3.78 3.78 0 0 0 1.84-.38c.46-.26.85-.64 1.1-1.1.23-.4.32-.8.36-1.22.02-.2.03-.4.03-.63a2.57 2.57 0 0 0 0-4.75c0-.23-.01-.44-.03-.63a2.96 2.96 0 0 0-.35-1.22 2.97 2.97 0 0 0-1.1-1.1c-.4-.22-.8-.31-1.22-.35a8.7 8.7 0 0 0-.64-.04 2.57 2.57 0 0 0-4.74 0c-.23 0-.44.02-.63.04-.42.04-.83.13-1.22.35-.46.26-.84.64-1.1 1.1-.33.57-.37 1.2-.39 1.84a21.39 21.39 0 0 0 0 .72v.1a1 1 0 0 0 1 .99h.78a.57.57 0 0 1 0 1.15h-.77a1 1 0 0 0-1 .98v.1a63.87 63.87 0 0 0 0 .73c0 .64.05 1.27.38 1.83.26.47.64.85 1.1 1.11.56.32 1.2.37 1.84.38a20.93 20.93 0 0 0 .72 0h.1Z"
    clip-rule="evenodd"
  />
</svg>`,Kke=Object.freeze(Object.defineProperty({__proto__:null,extensionSvg:Wke},Symbol.toStringTag,{value:"Module"})),Vke=Se`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.74 3.99a1 1 0 0 1 1-1H11a1 1 0 0 1 1 1v6.26a1 1 0 0 1-2 0V6.4l-6.3 6.3a1 1 0 0 1-1.4-1.42l6.29-6.3H4.74a1 1 0 0 1-1-1Z"
    clip-rule="evenodd"
  />
</svg>`,Gke=Object.freeze(Object.defineProperty({__proto__:null,externalLinkSvg:Vke},Symbol.toStringTag,{value:"Module"})),Zke=Se`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#1877F2" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M26 12.38h-2.89c-.92 0-1.61.38-1.61 1.34v1.66H26l-.36 4.5H21.5v12H17v-12h-3v-4.5h3V12.5c0-3.03 1.6-4.62 5.2-4.62H26v4.5Z"
        />
      </g>
    </g>
    <path
      fill="#1877F2"
      d="M40 20a20 20 0 1 0-23.13 19.76V25.78H11.8V20h5.07v-4.4c0-5.02 3-7.79 7.56-7.79 2.19 0 4.48.4 4.48.4v4.91h-2.53c-2.48 0-3.25 1.55-3.25 3.13V20h5.54l-.88 5.78h-4.66v13.98A20 20 0 0 0 40 20Z"
    />
    <path
      fill="#fff"
      d="m27.79 25.78.88-5.78h-5.55v-3.75c0-1.58.78-3.13 3.26-3.13h2.53V8.2s-2.3-.39-4.48-.39c-4.57 0-7.55 2.77-7.55 7.78V20H11.8v5.78h5.07v13.98a20.15 20.15 0 0 0 6.25 0V25.78h4.67Z"
    />
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`,Yke=Object.freeze(Object.defineProperty({__proto__:null,facebookSvg:Zke},Symbol.toStringTag,{value:"Module"})),Jke=Se`<svg style="border-radius: 9999px; overflow: hidden;"  fill="none" viewBox="0 0 1000 1000">
  <rect width="1000" height="1000" rx="9999" ry="9999" fill="#855DCD"/>
  <path fill="#855DCD" d="M0 0h1000v1000H0V0Z" />
  <path
    fill="#fff"
    d="M320 248h354v504h-51.96V521.13h-.5c-5.76-63.8-59.31-113.81-124.54-113.81s-118.78 50-124.53 113.81h-.5V752H320V248Z"
  />
  <path
    fill="#fff"
    d="m225 320 21.16 71.46h17.9v289.09a16.29 16.29 0 0 0-16.28 16.24v19.49h-3.25a16.3 16.3 0 0 0-16.28 16.24V752h182.26v-19.48a16.22 16.22 0 0 0-16.28-16.24h-3.25v-19.5a16.22 16.22 0 0 0-16.28-16.23h-19.52V320H225Zm400.3 360.55a16.3 16.3 0 0 0-15.04 10.02 16.2 16.2 0 0 0-1.24 6.22v19.49h-3.25a16.29 16.29 0 0 0-16.27 16.24V752h182.24v-19.48a16.23 16.23 0 0 0-16.27-16.24h-3.25v-19.5a16.2 16.2 0 0 0-10.04-15 16.3 16.3 0 0 0-6.23-1.23v-289.1h17.9L775 320H644.82v360.55H625.3Z"
  />
</svg>`,Qke=Object.freeze(Object.defineProperty({__proto__:null,farcasterSvg:Jke},Symbol.toStringTag,{value:"Module"})),Xke=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M0 3a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1Zm2.63 5.25a1 1 0 0 1 1-1h8.75a1 1 0 1 1 0 2H3.63a1 1 0 0 1-1-1Zm2.62 5.25a1 1 0 0 1 1-1h3.5a1 1 0 0 1 0 2h-3.5a1 1 0 0 1-1-1Z"
    clip-rule="evenodd"
  />
</svg>`,eRe=Object.freeze(Object.defineProperty({__proto__:null,filtersSvg:Xke},Symbol.toStringTag,{value:"Module"})),tRe=Se`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#1B1F23" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M8 19.89a12 12 0 1 1 15.8 11.38c-.6.12-.8-.26-.8-.57v-3.3c0-1.12-.4-1.85-.82-2.22 2.67-.3 5.48-1.31 5.48-5.92 0-1.31-.47-2.38-1.24-3.22.13-.3.54-1.52-.12-3.18 0 0-1-.32-3.3 1.23a11.54 11.54 0 0 0-6 0c-2.3-1.55-3.3-1.23-3.3-1.23a4.32 4.32 0 0 0-.12 3.18 4.64 4.64 0 0 0-1.24 3.22c0 4.6 2.8 5.63 5.47 5.93-.34.3-.65.83-.76 1.6-.69.31-2.42.84-3.5-1 0 0-.63-1.15-1.83-1.23 0 0-1.18-.02-.09.73 0 0 .8.37 1.34 1.76 0 0 .7 2.14 4.03 1.41v2.24c0 .31-.2.68-.8.57A12 12 0 0 1 8 19.9Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`,nRe=Object.freeze(Object.defineProperty({__proto__:null,githubSvg:tRe},Symbol.toStringTag,{value:"Module"})),rRe=Se`<svg fill="none" viewBox="0 0 40 40">
  <path
    fill="#4285F4"
    d="M32.74 20.3c0-.93-.08-1.81-.24-2.66H20.26v5.03h7a6 6 0 0 1-2.62 3.91v3.28h4.22c2.46-2.27 3.88-5.6 3.88-9.56Z"
  />
  <path
    fill="#34A853"
    d="M20.26 33a12.4 12.4 0 0 0 8.6-3.14l-4.22-3.28a7.74 7.74 0 0 1-4.38 1.26 7.76 7.76 0 0 1-7.28-5.36H8.65v3.36A12.99 12.99 0 0 0 20.26 33Z"
  />
  <path
    fill="#FBBC05"
    d="M12.98 22.47a7.79 7.79 0 0 1 0-4.94v-3.36H8.65a12.84 12.84 0 0 0 0 11.66l3.37-2.63.96-.73Z"
  />
  <path
    fill="#EA4335"
    d="M20.26 12.18a7.1 7.1 0 0 1 4.98 1.93l3.72-3.72A12.47 12.47 0 0 0 20.26 7c-5.08 0-9.47 2.92-11.6 7.17l4.32 3.36a7.76 7.76 0 0 1 7.28-5.35Z"
  />
</svg>`,iRe=Object.freeze(Object.defineProperty({__proto__:null,googleSvg:rRe},Symbol.toStringTag,{value:"Module"})),sRe=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="M8.51 5.66a.83.83 0 0 0-.57-.2.83.83 0 0 0-.52.28.8.8 0 0 0-.25.52 1 1 0 0 1-2 0c0-.75.34-1.43.81-1.91a2.75 2.75 0 0 1 4.78 1.92c0 1.24-.8 1.86-1.25 2.2l-.04.03c-.47.36-.5.43-.5.65a1 1 0 1 1-2 0c0-1.25.8-1.86 1.24-2.2l.04-.04c.47-.36.5-.43.5-.65 0-.3-.1-.49-.24-.6ZM9.12 11.87a1.13 1.13 0 1 1-2.25 0 1.13 1.13 0 0 1 2.25 0Z"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6a6 6 0 1 0 0 12A6 6 0 0 0 8 2Z"
    clip-rule="evenodd"
  />
</svg>`,oRe=Object.freeze(Object.defineProperty({__proto__:null,helpCircleSvg:sRe},Symbol.toStringTag,{value:"Module"})),aRe=Se`<svg width="14" height="14" viewBox="0 0 14 14" fill="none">
  <path d="M4.98926 3.73932C4.2989 3.73932 3.73926 4.29896 3.73926 4.98932C3.73926 5.67968 4.2989 6.23932 4.98926 6.23932C5.67962 6.23932 6.23926 5.67968 6.23926 4.98932C6.23926 4.29896 5.67962 3.73932 4.98926 3.73932Z" fill="currentColor"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.60497 0.500001H6.39504C5.41068 0.499977 4.59185 0.499958 3.93178 0.571471C3.24075 0.64634 2.60613 0.809093 2.04581 1.21619C1.72745 1.44749 1.44749 1.72745 1.21619 2.04581C0.809093 2.60613 0.64634 3.24075 0.571471 3.93178C0.499958 4.59185 0.499977 5.41065 0.500001 6.39501V7.57815C0.499998 8.37476 0.499995 9.05726 0.534869 9.62725C0.570123 10.2034 0.644114 10.7419 0.828442 11.2302C0.925651 11.4877 1.05235 11.7287 1.21619 11.9542C1.44749 12.2726 1.72745 12.5525 2.04581 12.7838C2.60613 13.1909 3.24075 13.3537 3.93178 13.4285C4.59185 13.5001 5.41066 13.5 6.39503 13.5H7.60496C8.58933 13.5 9.40815 13.5001 10.0682 13.4285C10.7593 13.3537 11.3939 13.1909 11.9542 12.7838C12.2726 12.5525 12.5525 12.2726 12.7838 11.9542C13.1909 11.3939 13.3537 10.7593 13.4285 10.0682C13.5 9.40816 13.5 8.58935 13.5 7.60497V6.39505C13.5 5.41068 13.5 4.59185 13.4285 3.93178C13.3537 3.24075 13.1909 2.60613 12.7838 2.04581C12.5525 1.72745 12.2726 1.44749 11.9542 1.21619C11.3939 0.809093 10.7593 0.64634 10.0682 0.571471C9.40816 0.499958 8.58933 0.499977 7.60497 0.500001ZM3.22138 2.83422C3.38394 2.71612 3.62634 2.61627 4.14721 2.55984C4.68679 2.50138 5.39655 2.5 6.45 2.5H7.55C8.60345 2.5 9.31322 2.50138 9.8528 2.55984C10.3737 2.61627 10.6161 2.71612 10.7786 2.83422C10.9272 2.94216 11.0578 3.07281 11.1658 3.22138C11.2839 3.38394 11.3837 3.62634 11.4402 4.14721C11.4986 4.68679 11.5 5.39655 11.5 6.45V6.49703C10.9674 6.11617 10.386 5.84936 9.74213 5.81948C8.40536 5.75745 7.3556 6.73051 6.40509 7.84229C6.33236 7.92737 6.27406 7.98735 6.22971 8.02911L6.1919 8.00514L6.17483 7.99427C6.09523 7.94353 5.98115 7.87083 5.85596 7.80302C5.56887 7.64752 5.18012 7.4921 4.68105 7.4921C4.66697 7.4921 4.6529 7.49239 4.63884 7.49299C3.79163 7.52878 3.09922 8.1106 2.62901 8.55472C2.58751 8.59392 2.54594 8.6339 2.50435 8.6745C2.50011 8.34653 2.5 7.97569 2.5 7.55V6.45C2.5 5.39655 2.50138 4.68679 2.55984 4.14721C2.61627 3.62634 2.71612 3.38394 2.83422 3.22138C2.94216 3.07281 3.07281 2.94216 3.22138 2.83422ZM10.3703 8.14825C10.6798 8.37526 11.043 8.71839 11.4832 9.20889C11.4744 9.44992 11.4608 9.662 11.4402 9.8528C11.3837 10.3737 11.2839 10.6161 11.1658 10.7786C11.0578 10.9272 10.9272 11.0578 10.7786 11.1658C10.6161 11.2839 10.3737 11.3837 9.8528 11.4402C9.31322 11.4986 8.60345 11.5 7.55 11.5H6.45C5.39655 11.5 4.68679 11.4986 4.14721 11.4402C3.62634 11.3837 3.38394 11.2839 3.22138 11.1658C3.15484 11.1174 3.0919 11.0645 3.03298 11.0075C3.10126 10.9356 3.16806 10.8649 3.23317 10.7959L3.29772 10.7276C3.55763 10.4525 3.78639 10.2126 4.00232 10.0087C4.22016 9.80294 4.39412 9.66364 4.53524 9.57742C4.63352 9.51738 4.69022 9.49897 4.71275 9.49345C4.76387 9.49804 4.81803 9.51537 4.90343 9.56162C4.96409 9.59447 5.02355 9.63225 5.11802 9.69238L5.12363 9.69595C5.20522 9.74789 5.32771 9.82587 5.46078 9.89278C5.76529 10.0459 6.21427 10.186 6.74977 10.0158C7.21485 9.86796 7.59367 9.52979 7.92525 9.14195C8.91377 7.98571 9.38267 7.80495 9.64941 7.81733C9.7858 7.82366 10.0101 7.884 10.3703 8.14825Z" fill="currentColor"/>
</svg>`,cRe=Object.freeze(Object.defineProperty({__proto__:null,imageSvg:aRe},Symbol.toStringTag,{value:"Module"})),lRe=Se`<svg
 xmlns="http://www.w3.org/2000/svg"
 width="28"
 height="28"
 viewBox="0 0 28 28"
 fill="none">
  <path
    fill="#949E9E"
    fill-rule="evenodd"
    d="M7.974 2.975h12.052c1.248 0 2.296 0 3.143.092.89.096 1.723.307 2.461.844a4.9 4.9 0 0 1 1.084 1.084c.537.738.748 1.57.844 2.461.092.847.092 1.895.092 3.143v6.802c0 1.248 0 2.296-.092 3.143-.096.89-.307 1.723-.844 2.461a4.9 4.9 0 0 1-1.084 1.084c-.738.537-1.57.748-2.461.844-.847.092-1.895.092-3.143.092H7.974c-1.247 0-2.296 0-3.143-.092-.89-.096-1.723-.307-2.461-.844a4.901 4.901 0 0 1-1.084-1.084c-.537-.738-.748-1.571-.844-2.461C.35 19.697.35 18.649.35 17.4v-6.802c0-1.248 0-2.296.092-3.143.096-.89.307-1.723.844-2.461A4.9 4.9 0 0 1 2.37 3.91c.738-.537 1.571-.748 2.461-.844.847-.092 1.895-.092 3.143-.092ZM5.133 5.85c-.652.071-.936.194-1.117.326a2.1 2.1 0 0 0-.465.465c-.132.181-.255.465-.325 1.117-.074.678-.076 1.573-.076 2.917v6.65c0 1.344.002 2.239.076 2.917.07.652.193.936.325 1.117a2.1 2.1 0 0 0 .465.465c.181.132.465.255 1.117.326.678.073 1.574.075 2.917.075h11.9c1.344 0 2.239-.002 2.917-.075.652-.071.936-.194 1.117-.326.179-.13.335-.286.465-.465.132-.181.255-.465.326-1.117.073-.678.075-1.573.075-2.917v-6.65c0-1.344-.002-2.239-.075-2.917-.071-.652-.194-.936-.326-1.117a2.1 2.1 0 0 0-.465-.465c-.181-.132-.465-.255-1.117-.326-.678-.073-1.573-.075-2.917-.075H8.05c-1.343 0-2.239.002-2.917.075Zm.467 7.275a3.15 3.15 0 1 1 6.3 0 3.15 3.15 0 0 1-6.3 0Zm8.75-1.75a1.4 1.4 0 0 1 1.4-1.4h3.5a1.4 1.4 0 0 1 0 2.8h-3.5a1.4 1.4 0 0 1-1.4-1.4Zm0 5.25a1.4 1.4 0 0 1 1.4-1.4H21a1.4 1.4 0 1 1 0 2.8h-5.25a1.4 1.4 0 0 1-1.4-1.4Z"
    clip-rule="evenodd"/>
</svg>`,uRe=Object.freeze(Object.defineProperty({__proto__:null,idSvg:lRe},Symbol.toStringTag,{value:"Module"})),dRe=Se`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    d="M6 10.49a1 1 0 1 0 2 0v-2a1 1 0 0 0-2 0v2ZM7 4.49a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M7 14.99a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm5-7a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z"
    clip-rule="evenodd"
  />
</svg>`,hRe=Object.freeze(Object.defineProperty({__proto__:null,infoCircleSvg:dRe},Symbol.toStringTag,{value:"Module"})),fRe=Se`<svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.00177 1.78569C3.8179 1.78569 2.85819 2.74508 2.85819 3.92855C2.85819 4.52287 3.09928 5.05956 3.49077 5.4485L3.5005 5.45817C3.64381 5.60054 3.76515 5.72108 3.85631 5.81845C3.93747 5.90512 4.05255 6.03218 4.12889 6.1805C4.16999 6.26034 4.19 6.30843 4.21768 6.39385C4.22145 6.40546 4.22499 6.41703 4.22833 6.42855H5.77521C5.77854 6.41703 5.78208 6.40547 5.78585 6.39385C5.81353 6.30843 5.83354 6.26034 5.87464 6.1805C5.95098 6.03218 6.06606 5.90512 6.14722 5.81845C6.23839 5.72108 6.35973 5.60053 6.50304 5.45816L6.51276 5.4485C6.90425 5.05956 7.14534 4.52287 7.14534 3.92855C7.14534 2.74508 6.18563 1.78569 5.00177 1.78569ZM5.71629 7.85712H4.28724C4.28724 8.21403 4.28876 8.40985 4.30703 8.54571C4.30727 8.54748 4.30751 8.54921 4.30774 8.55091C4.30944 8.55115 4.31118 8.55138 4.31295 8.55162C4.44884 8.56989 4.64474 8.5714 5.00177 8.5714C5.3588 8.5714 5.55469 8.56989 5.69059 8.55162C5.69236 8.55138 5.69409 8.55115 5.69579 8.55091C5.69603 8.54921 5.69627 8.54748 5.6965 8.54571C5.71477 8.40985 5.71629 8.21403 5.71629 7.85712ZM2.85819 7.14283C2.85819 6.9948 2.85796 6.91114 2.8548 6.85032C2.85461 6.84656 2.85441 6.84309 2.85421 6.83988C2.84393 6.8282 2.83047 6.81334 2.81301 6.79469C2.74172 6.71856 2.63908 6.61643 2.48342 6.46178C1.83307 5.81566 1.42914 4.91859 1.42914 3.92855C1.42914 1.9561 3.02866 0.357117 5.00177 0.357117C6.97487 0.357117 8.57439 1.9561 8.57439 3.92855C8.57439 4.91859 8.17047 5.81566 7.52012 6.46178C7.36445 6.61643 7.26182 6.71856 7.19053 6.79469C7.17306 6.81334 7.1596 6.8282 7.14932 6.83988C7.14912 6.84309 7.14892 6.84656 7.14873 6.85032C7.14557 6.91114 7.14534 6.9948 7.14534 7.14283V7.85712C7.14534 7.87009 7.14535 7.88304 7.14535 7.89598C7.14541 8.19889 7.14547 8.49326 7.11281 8.73606C7.076 9.00978 6.98631 9.32212 6.72678 9.58156C6.46726 9.841 6.15481 9.93065 5.881 9.96745C5.63813 10.0001 5.34365 10 5.04064 9.99998C5.0277 9.99998 5.01474 9.99998 5.00177 9.99998C4.98879 9.99998 4.97583 9.99998 4.96289 9.99998C4.65988 10 4.36541 10.0001 4.12253 9.96745C3.84872 9.93065 3.53628 9.841 3.27675 9.58156C3.01722 9.32212 2.92753 9.00978 2.89072 8.73606C2.85807 8.49326 2.85812 8.19889 2.85818 7.89598C2.85819 7.88304 2.85819 7.87008 2.85819 7.85712V7.14283ZM7.1243 6.86977C7.12366 6.87069 7.1233 6.87116 7.12327 6.87119C7.12323 6.87123 7.12356 6.87076 7.1243 6.86977ZM2.88027 6.8712C2.88025 6.87119 2.87988 6.8707 2.87921 6.86975C2.87995 6.87072 2.88028 6.8712 2.88027 6.8712Z" fill="#949E9E"/>
</svg>`,pRe=Object.freeze(Object.defineProperty({__proto__:null,lightbulbSvg:fRe},Symbol.toStringTag,{value:"Module"})),gRe=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4.83 1.34h6.34c.68 0 1.26 0 1.73.04.5.05.97.15 1.42.4.52.3.95.72 1.24 1.24.26.45.35.92.4 1.42.04.47.04 1.05.04 1.73v3.71c0 .69 0 1.26-.04 1.74-.05.5-.14.97-.4 1.41-.3.52-.72.95-1.24 1.25-.45.25-.92.35-1.42.4-.47.03-1.05.03-1.73.03H4.83c-.68 0-1.26 0-1.73-.04-.5-.04-.97-.14-1.42-.4-.52-.29-.95-.72-1.24-1.24a3.39 3.39 0 0 1-.4-1.41A20.9 20.9 0 0 1 0 9.88v-3.7c0-.7 0-1.27.04-1.74.05-.5.14-.97.4-1.42.3-.52.72-.95 1.24-1.24.45-.25.92-.35 1.42-.4.47-.04 1.05-.04 1.73-.04ZM3.28 3.38c-.36.03-.51.08-.6.14-.21.11-.39.29-.5.5a.8.8 0 0 0-.08.19l5.16 3.44c.45.3 1.03.3 1.48 0L13.9 4.2a.79.79 0 0 0-.08-.2c-.11-.2-.29-.38-.5-.5-.09-.05-.24-.1-.6-.13-.37-.04-.86-.04-1.6-.04H4.88c-.73 0-1.22 0-1.6.04ZM14 6.54 9.85 9.31a3.33 3.33 0 0 1-3.7 0L2 6.54v3.3c0 .74 0 1.22.03 1.6.04.36.1.5.15.6.11.2.29.38.5.5.09.05.24.1.6.14.37.03.86.03 1.6.03h6.25c.73 0 1.22 0 1.6-.03.35-.03.5-.09.6-.14.2-.12.38-.3.5-.5.05-.1.1-.24.14-.6.03-.38.03-.86.03-1.6v-3.3Z"
    clip-rule="evenodd"
  />
</svg>`,mRe=Object.freeze(Object.defineProperty({__proto__:null,mailSvg:gRe},Symbol.toStringTag,{value:"Module"})),yRe=Se`<svg fill="none" viewBox="0 0 20 20">
  <path fill="currentColor" d="M10.81 5.81a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z" />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3 4.75A4.75 4.75 0 0 1 7.75 0h4.5A4.75 4.75 0 0 1 17 4.75v10.5A4.75 4.75 0 0 1 12.25 20h-4.5A4.75 4.75 0 0 1 3 15.25V4.75ZM7.75 2A2.75 2.75 0 0 0 5 4.75v10.5A2.75 2.75 0 0 0 7.75 18h4.5A2.75 2.75 0 0 0 15 15.25V4.75A2.75 2.75 0 0 0 12.25 2h-4.5Z"
    clip-rule="evenodd"
  />
</svg>`,wRe=Object.freeze(Object.defineProperty({__proto__:null,mobileSvg:yRe},Symbol.toStringTag,{value:"Module"})),bRe=Se`<svg fill="none" viewBox="0 0 41 40">
  <path
    style="fill: var(--wui-color-fg-100);"
    fill-opacity=".05"
    d="M.6 20a20 20 0 1 1 40 0 20 20 0 0 1-40 0Z"
  />
  <path
    fill="#949E9E"
    d="M15.6 20.31a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM23.1 20.31a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM28.1 22.81a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"
  />
</svg>`,vRe=Object.freeze(Object.defineProperty({__proto__:null,moreSvg:bRe},Symbol.toStringTag,{value:"Module"})),ERe=Se`<svg fill="none" viewBox="0 0 22 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M16.32 13.62a3.14 3.14 0 1 1-.99 1.72l-1.6-.93a3.83 3.83 0 0 1-3.71 1 3.66 3.66 0 0 1-1.74-1l-1.6.94a3.14 3.14 0 1 1-1-1.73l1.6-.94a3.7 3.7 0 0 1 0-2 3.81 3.81 0 0 1 1.8-2.33c.29-.17.6-.3.92-.38V6.1a3.14 3.14 0 1 1 2 0l-.01.02v1.85H12a3.82 3.82 0 0 1 2.33 1.8 3.7 3.7 0 0 1 .39 2.91l1.6.93ZM2.6 16.54a1.14 1.14 0 0 0 1.98-1.14 1.14 1.14 0 0 0-1.98 1.14ZM11 2.01a1.14 1.14 0 1 0 0 2.28 1.14 1.14 0 0 0 0-2.28Zm1.68 10.45c.08-.19.14-.38.16-.58v-.05l.02-.13v-.13a1.92 1.92 0 0 0-.24-.8l-.11-.15a1.89 1.89 0 0 0-.74-.6 1.86 1.86 0 0 0-.77-.17h-.19a1.97 1.97 0 0 0-.89.34 1.98 1.98 0 0 0-.61.74 1.99 1.99 0 0 0-.16.9v.05a1.87 1.87 0 0 0 .24.74l.1.15c.12.16.26.3.42.42l.16.1.13.07.04.02a1.84 1.84 0 0 0 .76.17h.17a2 2 0 0 0 .91-.35 1.78 1.78 0 0 0 .52-.58l.03-.05a.84.84 0 0 0 .05-.11Zm5.15 4.5a1.14 1.14 0 0 0 1.14-1.97 1.13 1.13 0 0 0-1.55.41c-.32.55-.13 1.25.41 1.56Z"
    clip-rule="evenodd"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4.63 9.43a1.5 1.5 0 1 0 1.5-2.6 1.5 1.5 0 0 0-1.5 2.6Zm.32-1.55a.5.5 0 0 1 .68-.19.5.5 0 0 1 .18.68.5.5 0 0 1-.68.19.5.5 0 0 1-.18-.68ZM17.94 8.88a1.5 1.5 0 1 1-2.6-1.5 1.5 1.5 0 1 1 2.6 1.5ZM16.9 7.69a.5.5 0 0 0-.68.19.5.5 0 0 0 .18.68.5.5 0 0 0 .68-.19.5.5 0 0 0-.18-.68ZM9.75 17.75a1.5 1.5 0 1 1 2.6 1.5 1.5 1.5 0 1 1-2.6-1.5Zm1.05 1.18a.5.5 0 0 0 .68-.18.5.5 0 0 0-.18-.68.5.5 0 0 0-.68.18.5.5 0 0 0 .18.68Z"
    clip-rule="evenodd"
  />
</svg>`,CRe=Object.freeze(Object.defineProperty({__proto__:null,networkPlaceholderSvg:ERe},Symbol.toStringTag,{value:"Module"})),_Re=Se`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M9.13 1h1.71c1.46 0 2.63 0 3.56.1.97.1 1.8.33 2.53.85a5 5 0 0 1 1.1 1.11c.53.73.75 1.56.86 2.53.1.93.1 2.1.1 3.55v1.72c0 1.45 0 2.62-.1 3.55-.1.97-.33 1.8-.86 2.53a5 5 0 0 1-1.1 1.1c-.73.53-1.56.75-2.53.86-.93.1-2.1.1-3.55.1H9.13c-1.45 0-2.62 0-3.56-.1-.96-.1-1.8-.33-2.52-.85a5 5 0 0 1-1.1-1.11 5.05 5.05 0 0 1-.86-2.53c-.1-.93-.1-2.1-.1-3.55V9.14c0-1.45 0-2.62.1-3.55.1-.97.33-1.8.85-2.53a5 5 0 0 1 1.1-1.1 5.05 5.05 0 0 1 2.53-.86C6.51 1 7.67 1 9.13 1ZM5.79 3.09a3.1 3.1 0 0 0-1.57.48 3 3 0 0 0-.66.67c-.24.32-.4.77-.48 1.56-.1.82-.1 1.88-.1 3.4v1.6c0 1.15 0 2.04.05 2.76l.41-.42c.5-.5.93-.92 1.32-1.24.41-.33.86-.6 1.43-.7a3 3 0 0 1 .94 0c.35.06.66.2.95.37a17.11 17.11 0 0 0 .8.45c.1-.08.2-.2.41-.4l.04-.03a27 27 0 0 1 1.95-1.84 4.03 4.03 0 0 1 1.91-.94 4 4 0 0 1 1.25 0c.73.11 1.33.46 1.91.94l.64.55V9.2c0-1.52 0-2.58-.1-3.4a3.1 3.1 0 0 0-.48-1.56 3 3 0 0 0-.66-.67 3.1 3.1 0 0 0-1.56-.48C13.37 3 12.3 3 10.79 3h-1.6c-1.52 0-2.59 0-3.4.09Zm11.18 10-.04-.05a26.24 26.24 0 0 0-1.83-1.74c-.45-.36-.73-.48-.97-.52a2 2 0 0 0-.63 0c-.24.04-.51.16-.97.52-.46.38-1.01.93-1.83 1.74l-.02.02c-.17.18-.34.34-.49.47a2.04 2.04 0 0 1-1.08.5 1.97 1.97 0 0 1-1.25-.27l-.79-.46-.02-.02a.65.65 0 0 0-.24-.1 1 1 0 0 0-.31 0c-.08.02-.21.06-.49.28-.3.24-.65.59-1.2 1.14l-.56.56-.65.66a3 3 0 0 0 .62.6c.33.24.77.4 1.57.49.81.09 1.88.09 3.4.09h1.6c1.52 0 2.58 0 3.4-.09a3.1 3.1 0 0 0 1.56-.48 3 3 0 0 0 .66-.67c.24-.32.4-.77.49-1.56l.07-1.12Zm-8.02-1.03ZM4.99 7a2 2 0 1 1 4 0 2 2 0 0 1-4 0Z"
    clip-rule="evenodd"
  />
</svg>`,SRe=Object.freeze(Object.defineProperty({__proto__:null,nftPlaceholderSvg:_Re},Symbol.toStringTag,{value:"Module"})),xRe=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M8 0a1 1 0 0 1 1 1v5.38a1 1 0 0 1-2 0V1a1 1 0 0 1 1-1ZM5.26 2.6a1 1 0 0 1-.28 1.39 5.46 5.46 0 1 0 6.04 0 1 1 0 1 1 1.1-1.67 7.46 7.46 0 1 1-8.25 0 1 1 0 0 1 1.4.28Z"
    clip-rule="evenodd"
  />
</svg>`,ARe=Object.freeze(Object.defineProperty({__proto__:null,offSvg:xRe},Symbol.toStringTag,{value:"Module"})),IRe=Se` <svg
  width="36"
  height="36"
  fill="none"
>
  <path
    d="M0 8a8 8 0 0 1 8-8h20a8 8 0 0 1 8 8v20a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8V8Z"
    fill="#fff"
    fill-opacity=".05"
  />
  <path
    d="m18.262 17.513-8.944 9.49v.01a2.417 2.417 0 0 0 3.56 1.452l.026-.017 10.061-5.803-4.703-5.132Z"
    fill="#EA4335"
  />
  <path
    d="m27.307 15.9-.008-.008-4.342-2.52-4.896 4.36 4.913 4.912 4.325-2.494a2.42 2.42 0 0 0 .008-4.25Z"
    fill="#FBBC04"
  />
  <path
    d="M9.318 8.997c-.05.202-.084.403-.084.622V26.39c0 .218.025.42.084.621l9.246-9.247-9.246-8.768Z"
    fill="#4285F4"
  />
  <path
    d="m18.33 18 4.627-4.628-10.053-5.828a2.427 2.427 0 0 0-3.586 1.444L18.329 18Z"
    fill="#34A853"
  />
  <path
    d="M8 .5h20A7.5 7.5 0 0 1 35.5 8v20a7.5 7.5 0 0 1-7.5 7.5H8A7.5 7.5 0 0 1 .5 28V8A7.5 7.5 0 0 1 8 .5Z"
    stroke="#fff"
    stroke-opacity=".05"
  />
</svg>`,$Re=Object.freeze(Object.defineProperty({__proto__:null,playStoreSvg:IRe},Symbol.toStringTag,{value:"Module"})),PRe=Se`<svg
  width="13"
  height="12"
  viewBox="0 0 13 12"
  fill="none"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M0.794373 5.99982C0.794373 5.52643 1.17812 5.14268 1.6515 5.14268H5.643V1.15109C5.643 0.677701 6.02675 0.293946 6.50012 0.293945C6.9735 0.293946 7.35725 0.677701 7.35725 1.15109V5.14268H11.3488C11.8221 5.14268 12.2059 5.52643 12.2059 5.99982C12.2059 6.47321 11.8221 6.85696 11.3488 6.85696H7.35725V10.8486C7.35725 11.3219 6.9735 11.7057 6.50012 11.7057C6.02675 11.7057 5.643 11.3219 5.643 10.8486V6.85696H1.6515C1.17812 6.85696 0.794373 6.47321 0.794373 5.99982Z"
  /></svg
>`,ORe=Object.freeze(Object.defineProperty({__proto__:null,plusSvg:PRe},Symbol.toStringTag,{value:"Module"})),TRe=Se`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    d="M3 6a3 3 0 0 1 3-3h1a1 1 0 1 0 0-2H6a5 5 0 0 0-5 5v1a1 1 0 0 0 2 0V6ZM13 1a1 1 0 1 0 0 2h1a3 3 0 0 1 3 3v1a1 1 0 1 0 2 0V6a5 5 0 0 0-5-5h-1ZM3 13a1 1 0 1 0-2 0v1a5 5 0 0 0 5 5h1a1 1 0 1 0 0-2H6a3 3 0 0 1-3-3v-1ZM19 13a1 1 0 1 0-2 0v1a3 3 0 0 1-3 3h-1a1 1 0 1 0 0 2h1.01a5 5 0 0 0 5-5v-1ZM5.3 6.36c-.04.2-.04.43-.04.89s0 .7.05.89c.14.52.54.92 1.06 1.06.19.05.42.05.89.05.46 0 .7 0 .88-.05A1.5 1.5 0 0 0 9.2 8.14c.06-.2.06-.43.06-.89s0-.7-.06-.89A1.5 1.5 0 0 0 8.14 5.3c-.19-.05-.42-.05-.88-.05-.47 0-.7 0-.9.05a1.5 1.5 0 0 0-1.05 1.06ZM10.8 6.36c-.04.2-.04.43-.04.89s0 .7.05.89c.14.52.54.92 1.06 1.06.19.05.42.05.89.05.46 0 .7 0 .88-.05a1.5 1.5 0 0 0 1.06-1.06c.06-.2.06-.43.06-.89s0-.7-.06-.89a1.5 1.5 0 0 0-1.06-1.06c-.19-.05-.42-.05-.88-.05-.47 0-.7 0-.9.05a1.5 1.5 0 0 0-1.05 1.06ZM5.26 12.75c0-.46 0-.7.05-.89a1.5 1.5 0 0 1 1.06-1.06c.19-.05.42-.05.89-.05.46 0 .7 0 .88.05.52.14.93.54 1.06 1.06.06.2.06.43.06.89s0 .7-.06.89a1.5 1.5 0 0 1-1.06 1.06c-.19.05-.42.05-.88.05-.47 0-.7 0-.9-.05a1.5 1.5 0 0 1-1.05-1.06c-.05-.2-.05-.43-.05-.89ZM10.8 11.86c-.04.2-.04.43-.04.89s0 .7.05.89c.14.52.54.92 1.06 1.06.19.05.42.05.89.05.46 0 .7 0 .88-.05a1.5 1.5 0 0 0 1.06-1.06c.06-.2.06-.43.06-.89s0-.7-.06-.89a1.5 1.5 0 0 0-1.06-1.06c-.19-.05-.42-.05-.88-.05-.47 0-.7 0-.9.05a1.5 1.5 0 0 0-1.05 1.06Z"
  />
</svg>`,NRe=Object.freeze(Object.defineProperty({__proto__:null,qrCodeIcon:TRe},Symbol.toStringTag,{value:"Module"})),kRe=Se`<svg
  fill="none"
  viewBox="0 0 21 20"
>
  <path
    fill="currentColor"
    d="M8.8071 0.292893C9.19763 0.683417 9.19763 1.31658 8.8071 1.70711L6.91421 3.6H11.8404C14.3368 3.6 16.5533 5.1975 17.3427 7.56588L17.4487 7.88377C17.6233 8.40772 17.3402 8.97404 16.8162 9.14868C16.2923 9.32333 15.726 9.04017 15.5513 8.51623L15.4453 8.19834C14.9281 6.64664 13.476 5.6 11.8404 5.6H6.91421L8.8071 7.49289C9.19763 7.88342 9.19763 8.51658 8.8071 8.90711C8.41658 9.29763 7.78341 9.29763 7.39289 8.90711L3.79289 5.30711C3.40236 4.91658 3.40236 4.28342 3.79289 3.89289L7.39289 0.292893C7.78341 -0.0976311 8.41658 -0.0976311 8.8071 0.292893ZM4.18377 10.8513C4.70771 10.6767 5.27403 10.9598 5.44868 11.4838L5.55464 11.8017C6.07188 13.3534 7.52401 14.4 9.15964 14.4L14.0858 14.4L12.1929 12.5071C11.8024 12.1166 11.8024 11.4834 12.1929 11.0929C12.5834 10.7024 13.2166 10.7024 13.6071 11.0929L17.2071 14.6929C17.5976 15.0834 17.5976 15.7166 17.2071 16.1071L13.6071 19.7071C13.2166 20.0976 12.5834 20.0976 12.1929 19.7071C11.8024 19.3166 11.8024 18.6834 12.1929 18.2929L14.0858 16.4L9.15964 16.4C6.66314 16.4 4.44674 14.8025 3.65728 12.4341L3.55131 12.1162C3.37667 11.5923 3.65983 11.026 4.18377 10.8513Z"
  /></svg
>`,RRe=Object.freeze(Object.defineProperty({__proto__:null,recycleHorizontalSvg:kRe},Symbol.toStringTag,{value:"Module"})),MRe=Se`<svg fill="none" viewBox="0 0 14 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.94 1.04a1 1 0 0 1 .7 1.23l-.48 1.68a5.85 5.85 0 0 1 8.53 4.32 5.86 5.86 0 0 1-11.4 2.56 1 1 0 0 1 1.9-.57 3.86 3.86 0 1 0 1.83-4.5l1.87.53a1 1 0 0 1-.55 1.92l-4.1-1.15a1 1 0 0 1-.69-1.23l1.16-4.1a1 1 0 0 1 1.23-.7Z"
    clip-rule="evenodd"
  />
</svg>`,BRe=Object.freeze(Object.defineProperty({__proto__:null,refreshSvg:MRe},Symbol.toStringTag,{value:"Module"})),DRe=Se`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M9.36 4.21a5.14 5.14 0 1 0 0 10.29 5.14 5.14 0 0 0 0-10.29ZM1.64 9.36a7.71 7.71 0 1 1 14 4.47l2.52 2.5a1.29 1.29 0 1 1-1.82 1.83l-2.51-2.51A7.71 7.71 0 0 1 1.65 9.36Z"
    clip-rule="evenodd"
  />
</svg>`,LRe=Object.freeze(Object.defineProperty({__proto__:null,searchSvg:DRe},Symbol.toStringTag,{value:"Module"})),jRe=Se`<svg fill="none" viewBox="0 0 21 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M14.3808 4.34812C13.72 4.47798 12.8501 4.7587 11.5748 5.17296L9.00869 6.00646C6.90631 6.68935 5.40679 7.17779 4.38121 7.63178C3.87166 7.85734 3.5351 8.05091 3.32022 8.22035C3.11183 8.38466 3.07011 8.48486 3.05969 8.51817C2.98058 8.77103 2.98009 9.04195 3.05831 9.29509C3.06861 9.32844 3.10998 9.42878 3.31777 9.59384C3.53205 9.76404 3.86792 9.95881 4.37667 10.1862C5.29287 10.5957 6.58844 11.0341 8.35529 11.6164L10.8876 8.59854C11.2426 8.17547 11.8733 8.12028 12.2964 8.47528C12.7195 8.83029 12.7746 9.46104 12.4196 9.88412L9.88738 12.9019C10.7676 14.5408 11.4244 15.7406 11.9867 16.5718C12.299 17.0333 12.5491 17.3303 12.7539 17.5117C12.9526 17.6877 13.0586 17.711 13.0932 17.7154C13.3561 17.7484 13.6228 17.7009 13.8581 17.5791C13.8891 17.563 13.9805 17.5046 14.1061 17.2708C14.2357 17.0298 14.3679 16.6647 14.5015 16.1237C14.7705 15.0349 14.9912 13.4733 15.2986 11.2843L15.6738 8.61249C15.8603 7.28456 15.9857 6.37917 15.9989 5.7059C16.012 5.03702 15.9047 4.8056 15.8145 4.69183C15.7044 4.55297 15.5673 4.43792 15.4114 4.35365C15.2837 4.28459 15.0372 4.2191 14.3808 4.34812ZM7.99373 13.603C6.11919 12.9864 4.6304 12.4902 3.5606 12.0121C2.98683 11.7557 2.4778 11.4808 2.07383 11.1599C1.66337 10.8339 1.31312 10.4217 1.14744 9.88551C0.949667 9.24541 0.950886 8.56035 1.15094 7.92096C1.31852 7.38534 1.67024 6.97442 2.08185 6.64985C2.48697 6.33041 2.99697 6.05734 3.57166 5.80295C4.70309 5.3021 6.30179 4.78283 8.32903 4.12437L11.0196 3.25042C12.2166 2.86159 13.2017 2.54158 13.9951 2.38566C14.8065 2.22618 15.6202 2.19289 16.3627 2.59437C16.7568 2.80747 17.1035 3.09839 17.3818 3.4495C17.9062 4.111 18.0147 4.91815 17.9985 5.74496C17.9827 6.55332 17.8386 7.57903 17.6636 8.82534L17.2701 11.6268C16.9737 13.7376 16.7399 15.4022 16.4432 16.6034C16.2924 17.2135 16.1121 17.7632 15.8678 18.2176C15.6197 18.6794 15.2761 19.0971 14.7777 19.3551C14.1827 19.6632 13.5083 19.7833 12.8436 19.6997C12.2867 19.6297 11.82 19.3563 11.4277 19.0087C11.0415 18.6666 10.6824 18.213 10.3302 17.6925C9.67361 16.722 8.92648 15.342 7.99373 13.603Z"
    clip-rule="evenodd"
  />
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="21"
    height="20"
    viewBox="0 0 21 20"
    fill="none"
  ></svg></svg
>`,URe=Object.freeze(Object.defineProperty({__proto__:null,sendSvg:jRe},Symbol.toStringTag,{value:"Module"})),FRe=Se`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.76.3a1 1 0 0 1 0 1.4L4.07 4.4h9a1 1 0 1 1 0 2h-9l2.69 2.68a1 1 0 1 1-1.42 1.42L.95 6.09a1 1 0 0 1 0-1.4l4.4-4.4a1 1 0 0 1 1.4 0Zm6.49 9.21a1 1 0 0 1 1.41 0l4.39 4.4a1 1 0 0 1 0 1.4l-4.39 4.4a1 1 0 0 1-1.41-1.42l2.68-2.68h-9a1 1 0 0 1 0-2h9l-2.68-2.68a1 1 0 0 1 0-1.42Z"
    clip-rule="evenodd"
  />
</svg>`,zRe=Object.freeze(Object.defineProperty({__proto__:null,swapHorizontalSvg:FRe},Symbol.toStringTag,{value:"Module"})),qRe=Se`<svg
  width="14"
  height="14"
  viewBox="0 0 14 14"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M13.7306 3.24213C14.0725 3.58384 14.0725 4.13786 13.7306 4.47957L10.7418 7.46737C10.4 7.80908 9.84581 7.80908 9.50399 7.46737C9.16216 7.12567 9.16216 6.57165 9.50399 6.22994L10.9986 4.73585H5.34082C4.85741 4.73585 4.46553 4.3441 4.46553 3.86085C4.46553 3.3776 4.85741 2.98585 5.34082 2.98585L10.9986 2.98585L9.50399 1.49177C9.16216 1.15006 9.16216 0.596037 9.50399 0.254328C9.84581 -0.0873803 10.4 -0.0873803 10.7418 0.254328L13.7306 3.24213ZM9.52515 10.1352C9.52515 10.6185 9.13327 11.0102 8.64986 11.0102L2.9921 11.0102L4.48669 12.5043C4.82852 12.846 4.82852 13.4001 4.48669 13.7418C4.14487 14.0835 3.59066 14.0835 3.24884 13.7418L0.26003 10.754C0.0958806 10.5899 0.0036621 10.3673 0.00366211 10.1352C0.00366212 9.90318 0.0958806 9.68062 0.26003 9.51652L3.24884 6.52872C3.59066 6.18701 4.14487 6.18701 4.48669 6.52872C4.82851 6.87043 4.82851 7.42445 4.48669 7.76616L2.9921 9.26024L8.64986 9.26024C9.13327 9.26024 9.52515 9.65199 9.52515 10.1352Z"
    fill="currentColor"
  />
</svg>

`,HRe=Object.freeze(Object.defineProperty({__proto__:null,swapHorizontalMediumSvg:qRe},Symbol.toStringTag,{value:"Module"})),WRe=Se`<svg width="10" height="10" viewBox="0 0 10 10">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.77986 0.566631C4.0589 0.845577 4.0589 1.29784 3.77986 1.57678L3.08261 2.2738H6.34184C6.73647 2.2738 7.05637 2.5936 7.05637 2.98808C7.05637 3.38257 6.73647 3.70237 6.34184 3.70237H3.08261L3.77986 4.39938C4.0589 4.67833 4.0589 5.13059 3.77986 5.40954C3.50082 5.68848 3.04841 5.68848 2.76937 5.40954L0.852346 3.49316C0.573306 3.21421 0.573306 2.76195 0.852346 2.48301L2.76937 0.566631C3.04841 0.287685 3.50082 0.287685 3.77986 0.566631ZM6.22 4.59102C6.49904 4.31208 6.95145 4.31208 7.23049 4.59102L9.14751 6.5074C9.42655 6.78634 9.42655 7.23861 9.14751 7.51755L7.23049 9.43393C6.95145 9.71287 6.49904 9.71287 6.22 9.43393C5.94096 9.15498 5.94096 8.70272 6.22 8.42377L6.91725 7.72676L3.65802 7.72676C3.26339 7.72676 2.94349 7.40696 2.94349 7.01247C2.94349 6.61798 3.26339 6.29819 3.65802 6.29819L6.91725 6.29819L6.22 5.60117C5.94096 5.32223 5.94096 4.86997 6.22 4.59102Z"
    clip-rule="evenodd"
  />
</svg>`,KRe=Object.freeze(Object.defineProperty({__proto__:null,swapHorizontalBoldSvg:WRe},Symbol.toStringTag,{value:"Module"})),VRe=Se`<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
  <path 
    fill="currentColor"
    fill-rule="evenodd" 
    clip-rule="evenodd" 
    d="M8.3071 0.292893C8.69763 0.683417 8.69763 1.31658 8.3071 1.70711L6.41421 3.6H11.3404C13.8368 3.6 16.0533 5.1975 16.8427 7.56588L16.9487 7.88377C17.1233 8.40772 16.8402 8.97404 16.3162 9.14868C15.7923 9.32333 15.226 9.04017 15.0513 8.51623L14.9453 8.19834C14.4281 6.64664 12.976 5.6 11.3404 5.6H6.41421L8.3071 7.49289C8.69763 7.88342 8.69763 8.51658 8.3071 8.90711C7.91658 9.29763 7.28341 9.29763 6.89289 8.90711L3.29289 5.30711C2.90236 4.91658 2.90236 4.28342 3.29289 3.89289L6.89289 0.292893C7.28341 -0.0976311 7.91658 -0.0976311 8.3071 0.292893ZM3.68377 10.8513C4.20771 10.6767 4.77403 10.9598 4.94868 11.4838L5.05464 11.8017C5.57188 13.3534 7.024 14.4 8.65964 14.4L13.5858 14.4L11.6929 12.5071C11.3024 12.1166 11.3024 11.4834 11.6929 11.0929C12.0834 10.7024 12.7166 10.7024 13.1071 11.0929L16.7071 14.6929C17.0976 15.0834 17.0976 15.7166 16.7071 16.1071L13.1071 19.7071C12.7166 20.0976 12.0834 20.0976 11.6929 19.7071C11.3024 19.3166 11.3024 18.6834 11.6929 18.2929L13.5858 16.4L8.65964 16.4C6.16314 16.4 3.94674 14.8025 3.15728 12.4341L3.05131 12.1162C2.87667 11.5923 3.15983 11.026 3.68377 10.8513Z" 
  />
</svg>`,GRe=Object.freeze(Object.defineProperty({__proto__:null,swapHorizontalRoundedBoldSvg:VRe},Symbol.toStringTag,{value:"Module"})),ZRe=Se`<svg fill="none" viewBox="0 0 14 14">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.48 2.18a1 1 0 0 1 1.41 0l2.68 2.68a1 1 0 1 1-1.41 1.42l-.98-.98v4.56a1 1 0 0 1-2 0V5.3l-.97.98A1 1 0 0 1 .79 4.86l2.69-2.68Zm6.34 2.93a1 1 0 0 1 1 1v4.56l.97-.98a1 1 0 1 1 1.42 1.42l-2.69 2.68a1 1 0 0 1-1.41 0l-2.68-2.68a1 1 0 0 1 1.41-1.42l.98.98V6.1a1 1 0 0 1 1-1Z"
    clip-rule="evenodd"
  />
</svg>`,YRe=Object.freeze(Object.defineProperty({__proto__:null,swapVerticalSvg:ZRe},Symbol.toStringTag,{value:"Module"})),JRe=Se`<svg width="32" height="32" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <g clip-path="url(#a)">
    <path fill="url(#b)" d="M0 0h32v32H0z"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.034 15.252c4.975-2.167 8.293-3.596 9.953-4.287 4.74-1.971 5.725-2.314 6.366-2.325.142-.002.457.033.662.198.172.14.22.33.243.463.022.132.05.435.028.671-.257 2.7-1.368 9.248-1.933 12.27-.24 1.28-.71 1.708-1.167 1.75-.99.091-1.743-.655-2.703-1.284-1.502-.985-2.351-1.598-3.81-2.558-1.684-1.11-.592-1.721.368-2.718.252-.261 4.619-4.233 4.703-4.594.01-.045.02-.213-.08-.301-.1-.09-.246-.059-.353-.035-.15.034-2.55 1.62-7.198 4.758-.682.468-1.298.696-1.851.684-.61-.013-1.782-.344-2.653-.628-1.069-.347-1.918-.53-1.845-1.12.039-.308.462-.623 1.27-.944Z" fill="#fff"/>
  </g>
  <path d="M.5 16C.5 7.44 7.44.5 16 .5 24.56.5 31.5 7.44 31.5 16c0 8.56-6.94 15.5-15.5 15.5C7.44 31.5.5 24.56.5 16Z" stroke="#141414" stroke-opacity=".05"/>
  <defs>
    <linearGradient id="b" x1="1600" y1="0" x2="1600" y2="3176.27" gradientUnits="userSpaceOnUse">
      <stop stop-color="#2AABEE"/>
      <stop offset="1" stop-color="#229ED9"/>
    </linearGradient>
    <clipPath id="a">
      <path d="M0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16S0 24.837 0 16Z" fill="#fff"/>
    </clipPath>
  </defs>
</svg>`,QRe=Object.freeze(Object.defineProperty({__proto__:null,telegramSvg:JRe},Symbol.toStringTag,{value:"Module"})),XRe=Se`<svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M7 3.71875C6.0335 3.71875 5.25 2.93525 5.25 1.96875C5.25 1.00225 6.0335 0.21875 7 0.21875C7.9665 0.21875 8.75 1.00225 8.75 1.96875C8.75 2.93525 7.9665 3.71875 7 3.71875Z" fill="#949E9E"/>
  <path d="M7 8.96875C6.0335 8.96875 5.25 8.18525 5.25 7.21875C5.25 6.25225 6.0335 5.46875 7 5.46875C7.9665 5.46875 8.75 6.25225 8.75 7.21875C8.75 8.18525 7.9665 8.96875 7 8.96875Z" fill="#949E9E"/>
  <path d="M5.25 12.4688C5.25 13.4352 6.0335 14.2187 7 14.2187C7.9665 14.2187 8.75 13.4352 8.75 12.4688C8.75 11.5023 7.9665 10.7188 7 10.7188C6.0335 10.7188 5.25 11.5023 5.25 12.4688Z" fill="#949E9E"/>
</svg>`,eMe=Object.freeze(Object.defineProperty({__proto__:null,threeDotsSvg:XRe},Symbol.toStringTag,{value:"Module"})),tMe=Se`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#5A3E85" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M18.22 25.7 20 23.91h3.34l2.1-2.1v-6.68H15.4v8.78h2.82v1.77Zm3.87-8.16h1.25v3.66H22.1v-3.66Zm-3.34 0H20v3.66h-1.25v-3.66ZM20 7.9a12 12 0 1 0 0 24 12 12 0 0 0 0-24Zm6.69 14.56-3.66 3.66h-2.72l-1.77 1.78h-1.88V26.1H13.3v-9.82l.94-2.4H26.7v8.56Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`,nMe=Object.freeze(Object.defineProperty({__proto__:null,twitchSvg:tMe},Symbol.toStringTag,{value:"Module"})),rMe=Se`<svg fill="none" viewBox="0 0 41 40">
  <g clip-path="url(#a)">
    <path fill="#000" d="M.8 0h40v40H.8z" />
    <path
      fill="#fff"
      d="m22.63 18.46 7.14-8.3h-1.69l-6.2 7.2-4.96-7.2H11.2l7.5 10.9-7.5 8.71h1.7l6.55-7.61 5.23 7.61h5.72l-7.77-11.31Zm-9.13-7.03h2.6l11.98 17.13h-2.6L13.5 11.43Z"
    />
  </g>
  <defs>
    <clipPath id="a"><path fill="#fff" d="M.8 20a20 20 0 1 1 40 0 20 20 0 0 1-40 0Z" /></clipPath>
  </defs>
</svg>`,tV=Object.freeze(Object.defineProperty({__proto__:null,xSvg:rMe},Symbol.toStringTag,{value:"Module"})),iMe=Se`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="m14.36 4.74.01.42c0 4.34-3.3 9.34-9.34 9.34A9.3 9.3 0 0 1 0 13.03a6.6 6.6 0 0 0 4.86-1.36 3.29 3.29 0 0 1-3.07-2.28c.5.1 1 .07 1.48-.06A3.28 3.28 0 0 1 .64 6.11v-.04c.46.26.97.4 1.49.41A3.29 3.29 0 0 1 1.11 2.1a9.32 9.32 0 0 0 6.77 3.43 3.28 3.28 0 0 1 5.6-3 6.59 6.59 0 0 0 2.08-.8 3.3 3.3 0 0 1-1.45 1.82A6.53 6.53 0 0 0 16 3.04c-.44.66-1 1.23-1.64 1.7Z"
  />
</svg>`,sMe=Object.freeze(Object.defineProperty({__proto__:null,twitterIconSvg:iMe},Symbol.toStringTag,{value:"Module"})),oMe=Se`<svg fill="none" viewBox="0 0 28 28">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M18.1 4.76c-.42-.73-1.33-1.01-2.09-.66l-1.42.66c-.37.18-.8.18-1.18 0l-1.4-.65a1.63 1.63 0 0 0-2.1.66l-.84 1.45c-.2.34-.53.59-.92.67l-1.7.35c-.83.17-1.39.94-1.3 1.78l.19 1.56c.04.39-.08.78-.33 1.07l-1.12 1.3c-.52.6-.52 1.5 0 2.11L5 16.38c.25.3.37.68.33 1.06l-.18 1.57c-.1.83.46 1.6 1.28 1.78l1.7.35c.4.08.73.32.93.66l.84 1.43a1.63 1.63 0 0 0 2.09.66l1.41-.66c.37-.17.8-.17 1.18 0l1.43.67c.76.35 1.66.07 2.08-.65l.86-1.45c.2-.34.54-.58.92-.66l1.68-.35A1.63 1.63 0 0 0 22.84 19l-.18-1.57a1.4 1.4 0 0 1 .33-1.06l1.12-1.32c.52-.6.52-1.5 0-2.11l-1.12-1.3a1.4 1.4 0 0 1-.33-1.07l.18-1.57c.1-.83-.46-1.6-1.28-1.77l-1.68-.35a1.4 1.4 0 0 1-.92-.66l-.86-1.47Zm-3.27-3.2a4.43 4.43 0 0 1 5.69 1.78l.54.93 1.07.22a4.43 4.43 0 0 1 3.5 4.84l-.11.96.7.83a4.43 4.43 0 0 1 .02 5.76l-.72.85.1.96a4.43 4.43 0 0 1-3.5 4.84l-1.06.22-.54.92a4.43 4.43 0 0 1-5.68 1.77l-.84-.4-.82.39a4.43 4.43 0 0 1-5.7-1.79l-.51-.89-1.09-.22a4.43 4.43 0 0 1-3.5-4.84l.1-.96-.72-.85a4.43 4.43 0 0 1 .01-5.76l.71-.83-.1-.95a4.43 4.43 0 0 1 3.5-4.84l1.08-.23.53-.9a4.43 4.43 0 0 1 5.7-1.8l.81.38.83-.39ZM18.2 9.4c.65.42.84 1.28.42 1.93l-4.4 6.87a1.4 1.4 0 0 1-2.26.14L9.5 15.39a1.4 1.4 0 0 1 2.15-1.8l1.23 1.48 3.38-5.26a1.4 1.4 0 0 1 1.93-.42Z"
    clip-rule="evenodd"
  />
</svg>`,aMe=Object.freeze(Object.defineProperty({__proto__:null,verifySvg:oMe},Symbol.toStringTag,{value:"Module"})),cMe=Se`<svg fill="none" viewBox="0 0 14 14">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="m4.1 12.43-.45-.78-.93-.2a1.65 1.65 0 0 1-1.31-1.8l.1-.86-.61-.71a1.65 1.65 0 0 1 0-2.16l.6-.7-.09-.85c-.1-.86.47-1.64 1.3-1.81l.94-.2.45-.78A1.65 1.65 0 0 1 6.23.9l.77.36.78-.36c.77-.36 1.69-.07 2.12.66l.47.8.91.2c.84.17 1.4.95 1.31 1.8l-.1.86.6.7c.54.62.54 1.54.01 2.16l-.6.71.09.86c.1.85-.47 1.63-1.3 1.8l-.92.2-.47.79a1.65 1.65 0 0 1-2.12.66L7 12.74l-.77.36c-.78.35-1.7.07-2.13-.67Zm5.74-6.9a1 1 0 1 0-1.68-1.07L6.32 7.3l-.55-.66a1 1 0 0 0-1.54 1.28l1.43 1.71a1 1 0 0 0 1.61-.1l2.57-4Z"
    clip-rule="evenodd"
  />
</svg>`,lMe=Object.freeze(Object.defineProperty({__proto__:null,verifyFilledSvg:cMe},Symbol.toStringTag,{value:"Module"})),uMe=Se`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M0 5.5c0-1.8 1.46-3.25 3.25-3.25H14.5c1.8 0 3.25 1.46 3.25 3.25v.28A3.25 3.25 0 0 1 20 8.88v2.24c0 1.45-.94 2.68-2.25 3.1v.28c0 1.8-1.46 3.25-3.25 3.25H3.25A3.25 3.25 0 0 1 0 14.5v-9Zm15.75 8.88h-2.38a4.38 4.38 0 0 1 0-8.76h2.38V5.5c0-.69-.56-1.25-1.25-1.25H3.25C2.56 4.25 2 4.81 2 5.5v9c0 .69.56 1.25 1.25 1.25H14.5c.69 0 1.25-.56 1.25-1.25v-.13Zm-2.38-6.76a2.37 2.37 0 1 0 0 4.75h3.38c.69 0 1.25-.55 1.25-1.24V8.87c0-.69-.56-1.24-1.25-1.24h-3.38Z"
    clip-rule="evenodd"
  />
</svg>`,dMe=Object.freeze(Object.defineProperty({__proto__:null,walletSvg:uMe},Symbol.toStringTag,{value:"Module"})),hMe=Se`<svg fill="none" viewBox="0 0 96 67">
  <path
    fill="currentColor"
    d="M25.32 18.8a32.56 32.56 0 0 1 45.36 0l1.5 1.47c.63.62.63 1.61 0 2.22l-5.15 5.05c-.31.3-.82.3-1.14 0l-2.07-2.03a22.71 22.71 0 0 0-31.64 0l-2.22 2.18c-.31.3-.82.3-1.14 0l-5.15-5.05a1.55 1.55 0 0 1 0-2.22l1.65-1.62Zm56.02 10.44 4.59 4.5c.63.6.63 1.6 0 2.21l-20.7 20.26c-.62.61-1.63.61-2.26 0L48.28 41.83a.4.4 0 0 0-.56 0L33.03 56.21c-.63.61-1.64.61-2.27 0L10.07 35.95a1.55 1.55 0 0 1 0-2.22l4.59-4.5a1.63 1.63 0 0 1 2.27 0L31.6 43.63a.4.4 0 0 0 .57 0l14.69-14.38a1.63 1.63 0 0 1 2.26 0l14.69 14.38a.4.4 0 0 0 .57 0l14.68-14.38a1.63 1.63 0 0 1 2.27 0Z"
  />
  <path
    stroke="#000"
    stroke-opacity=".1"
    d="M25.67 19.15a32.06 32.06 0 0 1 44.66 0l1.5 1.48c.43.42.43 1.09 0 1.5l-5.15 5.05a.31.31 0 0 1-.44 0l-2.07-2.03a23.21 23.21 0 0 0-32.34 0l-2.22 2.18a.31.31 0 0 1-.44 0l-5.15-5.05a1.05 1.05 0 0 1 0-1.5l1.65-1.63ZM81 29.6l4.6 4.5c.42.41.42 1.09 0 1.5l-20.7 20.26c-.43.43-1.14.43-1.57 0L48.63 41.47a.9.9 0 0 0-1.26 0L32.68 55.85c-.43.43-1.14.43-1.57 0L10.42 35.6a1.05 1.05 0 0 1 0-1.5l4.59-4.5a1.13 1.13 0 0 1 1.57 0l14.68 14.38a.9.9 0 0 0 1.27 0l-.35-.35.35.35L47.22 29.6a1.13 1.13 0 0 1 1.56 0l14.7 14.38a.9.9 0 0 0 1.26 0L79.42 29.6a1.13 1.13 0 0 1 1.57 0Z"
  />
</svg>`,fMe=Se`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_22274_4692)">
<path d="M0 6.64C0 4.17295 0 2.93942 0.525474 2.01817C0.880399 1.39592 1.39592 0.880399 2.01817 0.525474C2.93942 0 4.17295 0 6.64 0H9.36C11.8271 0 13.0606 0 13.9818 0.525474C14.6041 0.880399 15.1196 1.39592 15.4745 2.01817C16 2.93942 16 4.17295 16 6.64V9.36C16 11.8271 16 13.0606 15.4745 13.9818C15.1196 14.6041 14.6041 15.1196 13.9818 15.4745C13.0606 16 11.8271 16 9.36 16H6.64C4.17295 16 2.93942 16 2.01817 15.4745C1.39592 15.1196 0.880399 14.6041 0.525474 13.9818C0 13.0606 0 11.8271 0 9.36V6.64Z" fill="#C7B994"/>
<path d="M4.49038 5.76609C6.42869 3.86833 9.5713 3.86833 11.5096 5.76609L11.7429 5.99449C11.8398 6.08938 11.8398 6.24323 11.7429 6.33811L10.9449 7.11942C10.8964 7.16686 10.8179 7.16686 10.7694 7.11942L10.4484 6.80512C9.09617 5.48119 6.90381 5.48119 5.5516 6.80512L5.20782 7.14171C5.15936 7.18915 5.08079 7.18915 5.03234 7.14171L4.23434 6.3604C4.13742 6.26552 4.13742 6.11167 4.23434 6.01678L4.49038 5.76609ZM13.1599 7.38192L13.8702 8.07729C13.9671 8.17217 13.9671 8.32602 13.8702 8.4209L10.6677 11.5564C10.5708 11.6513 10.4137 11.6513 10.3168 11.5564L8.04388 9.33105C8.01965 9.30733 7.98037 9.30733 7.95614 9.33105L5.6833 11.5564C5.58638 11.6513 5.42925 11.6513 5.33234 11.5564L2.12982 8.42087C2.0329 8.32598 2.0329 8.17213 2.12982 8.07724L2.84004 7.38188C2.93695 7.28699 3.09408 7.28699 3.191 7.38188L5.46392 9.60726C5.48815 9.63098 5.52743 9.63098 5.55166 9.60726L7.82447 7.38188C7.92138 7.28699 8.07851 7.28699 8.17543 7.38187L10.4484 9.60726C10.4726 9.63098 10.5119 9.63098 10.5361 9.60726L12.809 7.38192C12.9059 7.28703 13.063 7.28703 13.1599 7.38192Z" fill="#202020"/>
</g>
<defs>
<clipPath id="clip0_22274_4692">
<path d="M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z" fill="white"/>
</clipPath>
</defs>
</svg>
`,pMe=Se`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="11" cy="11" r="11" transform="matrix(-1 0 0 1 23 1)" fill="#202020"/>
<circle cx="11" cy="11" r="11.5" transform="matrix(-1 0 0 1 23 1)" stroke="#C7B994" stroke-opacity="0.7"/>
<path d="M15.4523 11.0686L16.7472 9.78167C13.8205 6.87297 10.1838 6.87297 7.25708 9.78167L8.55201 11.0686C10.7779 8.85645 13.2279 8.85645 15.4538 11.0686H15.4523Z" fill="#C7B994"/>
<path d="M15.0199 14.067L12 11.0656L8.98 14.067L5.96004 11.0656L4.66663 12.3511L8.98 16.6393L12 13.638L15.0199 16.6393L19.3333 12.3511L18.0399 11.0656L15.0199 14.067Z" fill="#C7B994"/>
</svg>
`,X9=Object.freeze(Object.defineProperty({__proto__:null,walletConnectBrownSvg:pMe,walletConnectLightBrownSvg:fMe,walletConnectSvg:hMe},Symbol.toStringTag,{value:"Module"})),gMe=Se`
  <svg fill="none" viewBox="0 0 48 44">
    <path
      style="fill: var(--wui-color-bg-300);"
      d="M4.56 8.64c-1.23 1.68-1.23 4.08-1.23 8.88v8.96c0 4.8 0 7.2 1.23 8.88.39.55.87 1.02 1.41 1.42C7.65 38 10.05 38 14.85 38h14.3c4.8 0 7.2 0 8.88-1.22a6.4 6.4 0 0 0 1.41-1.42c.83-1.14 1.1-2.6 1.19-4.92a6.4 6.4 0 0 0 5.16-4.65c.21-.81.21-1.8.21-3.79 0-1.98 0-2.98-.22-3.79a6.4 6.4 0 0 0-5.15-4.65c-.1-2.32-.36-3.78-1.19-4.92a6.4 6.4 0 0 0-1.41-1.42C36.35 6 33.95 6 29.15 6h-14.3c-4.8 0-7.2 0-8.88 1.22a6.4 6.4 0 0 0-1.41 1.42Z"
    />
    <path
      style="fill: var(--wui-color-fg-200);"
      fill-rule="evenodd"
      d="M2.27 11.33a6.4 6.4 0 0 1 6.4-6.4h26.66a6.4 6.4 0 0 1 6.4 6.4v1.7a6.4 6.4 0 0 1 5.34 6.3v5.34a6.4 6.4 0 0 1-5.34 6.3v1.7a6.4 6.4 0 0 1-6.4 6.4H8.67a6.4 6.4 0 0 1-6.4-6.4V11.33ZM39.6 31.07h-6.93a9.07 9.07 0 1 1 0-18.14h6.93v-1.6a4.27 4.27 0 0 0-4.27-4.26H8.67a4.27 4.27 0 0 0-4.27 4.26v21.34a4.27 4.27 0 0 0 4.27 4.26h26.66a4.27 4.27 0 0 0 4.27-4.26v-1.6Zm-6.93-16a6.93 6.93 0 0 0 0 13.86h8a4.27 4.27 0 0 0 4.26-4.26v-5.34a4.27 4.27 0 0 0-4.26-4.26h-8Z"
      clip-rule="evenodd"
    />
  </svg>
`,mMe=Object.freeze(Object.defineProperty({__proto__:null,walletPlaceholderSvg:gMe},Symbol.toStringTag,{value:"Module"})),yMe=Se`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    d="M11 6.67a1 1 0 1 0-2 0v2.66a1 1 0 0 0 2 0V6.67ZM10 14.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M10 1a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm-7 9a7 7 0 1 1 14 0 7 7 0 0 1-14 0Z"
    clip-rule="evenodd"
  />
</svg>`,wMe=Object.freeze(Object.defineProperty({__proto__:null,warningCircleSvg:yMe},Symbol.toStringTag,{value:"Module"})),bMe=Se`<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.125 6.875C9.125 6.57833 9.21298 6.28832 9.3778 6.04165C9.54262 5.79497 9.77689 5.60271 10.051 5.48918C10.3251 5.37565 10.6267 5.34594 10.9176 5.40382C11.2086 5.4617 11.4759 5.60456 11.6857 5.81434C11.8954 6.02412 12.0383 6.29139 12.0962 6.58236C12.1541 6.87334 12.1244 7.17494 12.0108 7.44903C11.8973 7.72311 11.705 7.95738 11.4584 8.1222C11.2117 8.28703 10.9217 8.375 10.625 8.375C10.2272 8.375 9.84565 8.21696 9.56434 7.93566C9.28304 7.65436 9.125 7.27282 9.125 6.875ZM21.125 11C21.125 13.0025 20.5312 14.9601 19.4186 16.6251C18.3061 18.2902 16.7248 19.5879 14.8747 20.3543C13.0246 21.1206 10.9888 21.3211 9.02471 20.9305C7.06066 20.5398 5.25656 19.5755 3.84055 18.1595C2.42454 16.7435 1.46023 14.9393 1.06955 12.9753C0.678878 11.0112 0.879387 8.97543 1.64572 7.12533C2.41206 5.27523 3.70981 3.69392 5.37486 2.58137C7.0399 1.46882 8.99747 0.875 11 0.875C13.6844 0.877978 16.258 1.94567 18.1562 3.84383C20.0543 5.74199 21.122 8.3156 21.125 11ZM18.875 11C18.875 9.44247 18.4131 7.91992 17.5478 6.62488C16.6825 5.32985 15.4526 4.32049 14.0136 3.72445C12.5747 3.12841 10.9913 2.97246 9.46367 3.27632C7.93607 3.58017 6.53288 4.3302 5.43154 5.43153C4.3302 6.53287 3.58018 7.93606 3.27632 9.46366C2.97246 10.9913 3.12841 12.5747 3.72445 14.0136C4.32049 15.4526 5.32985 16.6825 6.62489 17.5478C7.91993 18.4131 9.44248 18.875 11 18.875C13.0879 18.8728 15.0896 18.0424 16.566 16.566C18.0424 15.0896 18.8728 13.0879 18.875 11ZM12.125 14.4387V11.375C12.125 10.8777 11.9275 10.4008 11.5758 10.0492C11.2242 9.69754 10.7473 9.5 10.25 9.5C9.98433 9.4996 9.72708 9.59325 9.52383 9.76435C9.32058 9.93544 9.18444 10.173 9.13952 10.4348C9.09461 10.6967 9.14381 10.966 9.27843 11.195C9.41304 11.4241 9.62438 11.5981 9.875 11.6863V14.75C9.875 15.2473 10.0725 15.7242 10.4242 16.0758C10.7758 16.4275 11.2527 16.625 11.75 16.625C12.0157 16.6254 12.2729 16.5318 12.4762 16.3607C12.6794 16.1896 12.8156 15.952 12.8605 15.6902C12.9054 15.4283 12.8562 15.159 12.7216 14.93C12.587 14.7009 12.3756 14.5269 12.125 14.4387Z" fill="currentColor"/>
</svg>`,vMe=Object.freeze(Object.defineProperty({__proto__:null,infoSvg:bMe},Symbol.toStringTag,{value:"Module"})),EMe=Se`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15.0162 11.6312L9.55059 2.13937C9.39228 1.86862 9.16584 1.64405 8.8938 1.48798C8.62176 1.33192 8.3136 1.2498 7.99997 1.2498C7.68634 1.2498 7.37817 1.33192 7.10613 1.48798C6.83409 1.64405 6.60765 1.86862 6.44934 2.13937L0.983716 11.6312C0.830104 11.894 0.749146 12.1928 0.749146 12.4972C0.749146 12.8015 0.830104 13.1004 0.983716 13.3631C1.14027 13.6352 1.3664 13.8608 1.63889 14.0166C1.91139 14.1725 2.22044 14.253 2.53434 14.25H13.4656C13.7793 14.2528 14.0881 14.1721 14.3603 14.0163C14.6326 13.8604 14.8585 13.635 15.015 13.3631C15.1688 13.1005 15.2499 12.8017 15.2502 12.4973C15.2504 12.193 15.1696 11.8941 15.0162 11.6312ZM13.7162 12.6125C13.6908 12.6558 13.6541 12.6914 13.6101 12.7157C13.5661 12.7399 13.5164 12.7517 13.4662 12.75H2.53434C2.48415 12.7517 2.43442 12.7399 2.39042 12.7157C2.34641 12.6914 2.30976 12.6558 2.28434 12.6125C2.26278 12.5774 2.25137 12.5371 2.25137 12.4959C2.25137 12.4548 2.26278 12.4144 2.28434 12.3794L7.74997 2.88749C7.77703 2.84583 7.81408 2.8116 7.85774 2.7879C7.9014 2.7642 7.95029 2.75178 7.99997 2.75178C8.04964 2.75178 8.09854 2.7642 8.1422 2.7879C8.18586 2.8116 8.2229 2.84583 8.24997 2.88749L13.715 12.3794C13.7367 12.4143 13.7483 12.4546 13.7486 12.4958C13.7488 12.5369 13.7376 12.5773 13.7162 12.6125ZM7.24997 8.49999V6.49999C7.24997 6.30108 7.32898 6.11031 7.46964 5.96966C7.61029 5.82901 7.80105 5.74999 7.99997 5.74999C8.19888 5.74999 8.38964 5.82901 8.5303 5.96966C8.67095 6.11031 8.74997 6.30108 8.74997 6.49999V8.49999C8.74997 8.6989 8.67095 8.88967 8.5303 9.03032C8.38964 9.17097 8.19888 9.24999 7.99997 9.24999C7.80105 9.24999 7.61029 9.17097 7.46964 9.03032C7.32898 8.88967 7.24997 8.6989 7.24997 8.49999ZM8.99997 11C8.99997 11.1978 8.94132 11.3911 8.83144 11.5556C8.72155 11.72 8.56538 11.8482 8.38265 11.9239C8.19992 11.9996 7.99886 12.0194 7.80488 11.9808C7.6109 11.9422 7.43271 11.847 7.29286 11.7071C7.15301 11.5672 7.05777 11.3891 7.01918 11.1951C6.9806 11.0011 7.0004 10.8 7.07609 10.6173C7.15177 10.4346 7.27995 10.2784 7.4444 10.1685C7.60885 10.0586 7.80219 9.99999 7.99997 9.99999C8.26518 9.99999 8.51954 10.1053 8.70707 10.2929C8.89461 10.4804 8.99997 10.7348 8.99997 11Z" fill="currentColor"/>
</svg>
`,CMe=Object.freeze(Object.defineProperty({__proto__:null,exclamationTriangleSvg:EMe},Symbol.toStringTag,{value:"Module"})),_Me=Se`<svg width="60" height="16" viewBox="0 0 60 16" fill="none"">
  <path d="M9.3335 4.66667C9.3335 2.08934 11.4229 0 14.0002 0H20.6669C23.2442 0 25.3335 2.08934 25.3335 4.66667V11.3333C25.3335 13.9106 23.2442 16 20.6669 16H14.0002C11.4229 16 9.3335 13.9106 9.3335 11.3333V4.66667Z" fill="#363636"/>
  <path d="M15.6055 11.0003L17.9448 4.66699H18.6316L16.2923 11.0003H15.6055Z" fill="#F6F6F6"/>
  <path d="M0 4.33333C0 1.9401 1.9401 0 4.33333 0C6.72657 0 8.66669 1.9401 8.66669 4.33333V11.6667C8.66669 14.0599 6.72657 16 4.33333 16C1.9401 16 0 14.0599 0 11.6667V4.33333Z" fill="#363636"/>
  <path d="M3.9165 9.99934V9.16602H4.74983V9.99934H3.9165Z" fill="#F6F6F6"/>
  <path d="M26 8C26 3.58172 29.3517 0 33.4863 0H52.5137C56.6483 0 60 3.58172 60 8C60 12.4183 56.6483 16 52.5137 16H33.4863C29.3517 16 26 12.4183 26 8Z" fill="#363636"/>
  <path d="M49.3687 9.95834V6.26232H50.0213V6.81966C50.256 6.40899 50.7326 6.16699 51.2606 6.16699C52.0599 6.16699 52.6173 6.67299 52.6173 7.65566V9.95834H51.972V7.69234C51.972 7.04696 51.6053 6.70966 51.07 6.70966C50.4906 6.70966 50.0213 7.17168 50.0213 7.82433V9.95834H49.3687Z" fill="#F6F6F6"/>
  <path d="M45.2538 9.95773L44.5718 6.26172H45.1877L45.6717 9.31242L46.3098 7.30306H46.9184L47.5491 9.29041L48.0404 6.26172H48.6564L47.9744 9.95773H47.2411L46.6178 8.03641L45.9871 9.95773H45.2538Z" fill="#F6F6F6"/>
  <path d="M42.3709 10.0536C41.2489 10.0536 40.5889 9.21765 40.5889 8.1103C40.5889 7.01035 41.2489 6.16699 42.3709 6.16699C43.4929 6.16699 44.1529 7.01035 44.1529 8.1103C44.1529 9.21765 43.4929 10.0536 42.3709 10.0536ZM42.3709 9.51096C43.1775 9.51096 43.4856 8.82164 43.4856 8.10296C43.4856 7.39163 43.1775 6.70966 42.3709 6.70966C41.5642 6.70966 41.2562 7.39163 41.2562 8.10296C41.2562 8.82164 41.5642 9.51096 42.3709 9.51096Z" fill="#F6F6F6"/>
  <path d="M38.2805 10.0536C37.1952 10.0536 36.5132 9.22499 36.5132 8.1103C36.5132 7.00302 37.1952 6.16699 38.2805 6.16699C39.1972 6.16699 40.0038 6.68766 39.9159 8.27896H37.1805C37.2319 8.96103 37.5472 9.5183 38.2805 9.5183C38.7718 9.5183 39.0945 9.21765 39.2045 8.87299H39.8499C39.7472 9.48903 39.1679 10.0536 38.2805 10.0536ZM37.1952 7.78765H39.2852C39.2338 7.04696 38.8892 6.70232 38.2805 6.70232C37.6132 6.70232 37.2832 7.18635 37.1952 7.78765Z" fill="#F6F6F6"/>
  <path d="M33.3828 9.95773V6.26172H34.0501V6.88506C34.2848 6.47439 34.6882 6.26172 35.1061 6.26172H35.9935V6.88506H35.0548C34.4682 6.88506 34.0501 7.26638 34.0501 8.00706V9.95773H33.3828Z" fill="#F6F6F6"/>
</svg>`,SMe=Object.freeze(Object.defineProperty({__proto__:null,reownSvg:_Me},Symbol.toStringTag,{value:"Module"}));return iO});
